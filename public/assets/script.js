(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zy={exports:{}},sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lL;function wH(){if(lL)return sc;lL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return sc.Fragment=e,sc.jsx=n,sc.jsxs=n,sc}var uL;function _H(){return uL||(uL=1,zy.exports=wH()),zy.exports}var b=_H(),Ky={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cL;function RH(){if(cL)return Fe;cL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(F){return F===null||typeof F!="object"?null:(F=h&&F[h]||F["@@iterator"],typeof F=="function"?F:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,S={};function x(F,V,H){this.props=F,this.context=V,this.refs=S,this.updater=H||y}x.prototype.isReactComponent={},x.prototype.setState=function(F,V){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,V,"setState")},x.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function T(){}T.prototype=x.prototype;function _(F,V,H){this.props=F,this.context=V,this.refs=S,this.updater=H||y}var A=_.prototype=new T;A.constructor=_,v(A,x.prototype),A.isPureReactComponent=!0;var O=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},C=Object.prototype.hasOwnProperty;function L(F,V,H,te,ce,ye){return H=ye.ref,{$$typeof:t,type:F,key:V,ref:H!==void 0?H:null,props:ye}}function P(F,V){return L(F.type,V,void 0,void 0,void 0,F.props)}function N(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function k(F){var V={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(H){return V[H]})}var M=/\/+/g;function G(F,V){return typeof F=="object"&&F!==null&&F.key!=null?k(""+F.key):V.toString(36)}function K(){}function W(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(K,K):(F.status="pending",F.then(function(V){F.status==="pending"&&(F.status="fulfilled",F.value=V)},function(V){F.status==="pending"&&(F.status="rejected",F.reason=V)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function Y(F,V,H,te,ce){var ye=typeof F;(ye==="undefined"||ye==="boolean")&&(F=null);var ge=!1;if(F===null)ge=!0;else switch(ye){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(F.$$typeof){case t:case e:ge=!0;break;case d:return ge=F._init,Y(ge(F._payload),V,H,te,ce)}}if(ge)return ce=ce(F),ge=te===""?"."+G(F,0):te,O(ce)?(H="",ge!=null&&(H=ge.replace(M,"$&/")+"/"),Y(ce,V,H,"",function(pe){return pe})):ce!=null&&(N(ce)&&(ce=P(ce,H+(ce.key==null||F&&F.key===ce.key?"":(""+ce.key).replace(M,"$&/")+"/")+ge)),V.push(ce)),1;ge=0;var Me=te===""?".":te+":";if(O(F))for(var Re=0;Re<F.length;Re++)te=F[Re],ye=Me+G(te,Re),ge+=Y(te,V,H,ye,ce);else if(Re=p(F),typeof Re=="function")for(F=Re.call(F),Re=0;!(te=F.next()).done;)te=te.value,ye=Me+G(te,Re++),ge+=Y(te,V,H,ye,ce);else if(ye==="object"){if(typeof F.then=="function")return Y(W(F),V,H,te,ce);throw V=String(F),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ge}function j(F,V,H){if(F==null)return F;var te=[],ce=0;return Y(F,te,"","",function(ye){return V.call(H,ye,ce++)}),te}function $(F){if(F._status===-1){var V=F._result;V=V(),V.then(function(H){(F._status===0||F._status===-1)&&(F._status=1,F._result=H)},function(H){(F._status===0||F._status===-1)&&(F._status=2,F._result=H)}),F._status===-1&&(F._status=0,F._result=V)}if(F._status===1)return F._result.default;throw F._result}var q=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function Z(){}return Fe.Children={map:j,forEach:function(F,V,H){j(F,function(){V.apply(this,arguments)},H)},count:function(F){var V=0;return j(F,function(){V++}),V},toArray:function(F){return j(F,function(V){return V})||[]},only:function(F){if(!N(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Fe.Component=x,Fe.Fragment=n,Fe.Profiler=i,Fe.PureComponent=_,Fe.StrictMode=r,Fe.Suspense=c,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(F){return R.H.useMemoCache(F)}},Fe.cache=function(F){return function(){return F.apply(null,arguments)}},Fe.cloneElement=function(F,V,H){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var te=v({},F.props),ce=F.key,ye=void 0;if(V!=null)for(ge in V.ref!==void 0&&(ye=void 0),V.key!==void 0&&(ce=""+V.key),V)!C.call(V,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&V.ref===void 0||(te[ge]=V[ge]);var ge=arguments.length-2;if(ge===1)te.children=H;else if(1<ge){for(var Me=Array(ge),Re=0;Re<ge;Re++)Me[Re]=arguments[Re+2];te.children=Me}return L(F.type,ce,void 0,void 0,ye,te)},Fe.createContext=function(F){return F={$$typeof:s,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Fe.createElement=function(F,V,H){var te,ce={},ye=null;if(V!=null)for(te in V.key!==void 0&&(ye=""+V.key),V)C.call(V,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ce[te]=V[te]);var ge=arguments.length-2;if(ge===1)ce.children=H;else if(1<ge){for(var Me=Array(ge),Re=0;Re<ge;Re++)Me[Re]=arguments[Re+2];ce.children=Me}if(F&&F.defaultProps)for(te in ge=F.defaultProps,ge)ce[te]===void 0&&(ce[te]=ge[te]);return L(F,ye,void 0,void 0,null,ce)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(F){return{$$typeof:o,render:F}},Fe.isValidElement=N,Fe.lazy=function(F){return{$$typeof:d,_payload:{_status:-1,_result:F},_init:$}},Fe.memo=function(F,V){return{$$typeof:u,type:F,compare:V===void 0?null:V}},Fe.startTransition=function(F){var V=R.T,H={};R.T=H;try{var te=F(),ce=R.S;ce!==null&&ce(H,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(Z,q)}catch(ye){q(ye)}finally{R.T=V}},Fe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Fe.use=function(F){return R.H.use(F)},Fe.useActionState=function(F,V,H){return R.H.useActionState(F,V,H)},Fe.useCallback=function(F,V){return R.H.useCallback(F,V)},Fe.useContext=function(F){return R.H.useContext(F)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(F,V){return R.H.useDeferredValue(F,V)},Fe.useEffect=function(F,V,H){var te=R.H;if(typeof H=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(F,V)},Fe.useId=function(){return R.H.useId()},Fe.useImperativeHandle=function(F,V,H){return R.H.useImperativeHandle(F,V,H)},Fe.useInsertionEffect=function(F,V){return R.H.useInsertionEffect(F,V)},Fe.useLayoutEffect=function(F,V){return R.H.useLayoutEffect(F,V)},Fe.useMemo=function(F,V){return R.H.useMemo(F,V)},Fe.useOptimistic=function(F,V){return R.H.useOptimistic(F,V)},Fe.useReducer=function(F,V,H){return R.H.useReducer(F,V,H)},Fe.useRef=function(F){return R.H.useRef(F)},Fe.useState=function(F){return R.H.useState(F)},Fe.useSyncExternalStore=function(F,V,H){return R.H.useSyncExternalStore(F,V,H)},Fe.useTransition=function(){return R.H.useTransition()},Fe.version="19.1.0",Fe}var fL;function Bp(){return fL||(fL=1,Ky.exports=RH()),Ky.exports}var B=Bp();const Q=xt(B);var Yy={exports:{}},oc={},Wy={exports:{}},Xy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dL;function OH(){return dL||(dL=1,function(t){function e(j,$){var q=j.length;j.push($);e:for(;0<q;){var Z=q-1>>>1,F=j[Z];if(0<i(F,$))j[Z]=$,j[q]=F,q=Z;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var $=j[0],q=j.pop();if(q!==$){j[0]=q;e:for(var Z=0,F=j.length,V=F>>>1;Z<V;){var H=2*(Z+1)-1,te=j[H],ce=H+1,ye=j[ce];if(0>i(te,q))ce<F&&0>i(ye,te)?(j[Z]=ye,j[ce]=q,Z=ce):(j[Z]=te,j[H]=q,Z=H);else if(ce<F&&0>i(ye,q))j[Z]=ye,j[ce]=q,Z=ce;else break e}}return $}function i(j,$){var q=j.sortIndex-$.sortIndex;return q!==0?q:j.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],d=1,h=null,p=3,y=!1,v=!1,S=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function O(j){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=j)r(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(u)}}function R(j){if(S=!1,O(j),!v)if(n(c)!==null)v=!0,C||(C=!0,G());else{var $=n(u);$!==null&&Y(R,$.startTime-j)}}var C=!1,L=-1,P=5,N=-1;function k(){return x?!0:!(t.unstable_now()-N<P)}function M(){if(x=!1,C){var j=t.unstable_now();N=j;var $=!0;try{e:{v=!1,S&&(S=!1,_(L),L=-1),y=!0;var q=p;try{t:{for(O(j),h=n(c);h!==null&&!(h.expirationTime>j&&k());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,p=h.priorityLevel;var F=Z(h.expirationTime<=j);if(j=t.unstable_now(),typeof F=="function"){h.callback=F,O(j),$=!0;break t}h===n(c)&&r(c),O(j)}else r(c);h=n(c)}if(h!==null)$=!0;else{var V=n(u);V!==null&&Y(R,V.startTime-j),$=!1}}break e}finally{h=null,p=q,y=!1}$=void 0}}finally{$?G():C=!1}}}var G;if(typeof A=="function")G=function(){A(M)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,W=K.port2;K.port1.onmessage=M,G=function(){W.postMessage(null)}}else G=function(){T(M,0)};function Y(j,$){L=T(function(){j(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(j){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var q=p;p=$;try{return j()}finally{p=q}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(j,$){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var q=p;p=j;try{return $()}finally{p=q}},t.unstable_scheduleCallback=function(j,$,q){var Z=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Z+q:Z):q=Z,j){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=q+F,j={id:d++,callback:$,priorityLevel:j,startTime:q,expirationTime:F,sortIndex:-1},q>Z?(j.sortIndex=q,e(u,j),n(c)===null&&j===n(u)&&(S?(_(L),L=-1):S=!0,Y(R,q-Z))):(j.sortIndex=F,e(c,j),v||y||(v=!0,C||(C=!0,G()))),j},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(j){var $=p;return function(){var q=p;p=$;try{return j.apply(this,arguments)}finally{p=q}}}}(Xy)),Xy}var hL;function CH(){return hL||(hL=1,Wy.exports=OH()),Wy.exports}var Qy={exports:{}},Ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mL;function LH(){if(mL)return Ln;mL=1;var t=Bp();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:u,implementation:d}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ln.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,d)},Ln.flushSync=function(c){var u=s.T,d=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=d,r.d.f()}},Ln.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},Ln.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Ln.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,y=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):d==="script"&&r.d.X(c,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ln.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},Ln.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);r.d.L(c,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ln.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},Ln.requestFormReset=function(c){r.d.r(c)},Ln.unstable_batchedUpdates=function(c,u){return c(u)},Ln.useFormState=function(c,u,d){return s.H.useFormState(c,u,d)},Ln.useFormStatus=function(){return s.H.useHostTransitionStatus()},Ln.version="19.1.0",Ln}var pL;function DH(){if(pL)return Qy.exports;pL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Qy.exports=LH(),Qy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gL;function IH(){if(gL)return oc;gL=1;var t=CH(),e=Bp(),n=DH();function r(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var f=l,m=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(m=f.return),l=f.return;while(l)}return f.tag===3?m:null}function s(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function o(l){if(a(l)!==l)throw Error(r(188))}function c(l){var f=l.alternate;if(!f){if(f=a(l),f===null)throw Error(r(188));return f!==l?null:l}for(var m=l,g=f;;){var E=m.return;if(E===null)break;var w=E.alternate;if(w===null){if(g=E.return,g!==null){m=g;continue}break}if(E.child===w.child){for(w=E.child;w;){if(w===m)return o(E),l;if(w===g)return o(E),f;w=w.sibling}throw Error(r(188))}if(m.return!==g.return)m=E,g=w;else{for(var I=!1,U=E.child;U;){if(U===m){I=!0,m=E,g=w;break}if(U===g){I=!0,g=E,m=w;break}U=U.sibling}if(!I){for(U=w.child;U;){if(U===m){I=!0,m=w,g=E;break}if(U===g){I=!0,g=w,m=E;break}U=U.sibling}if(!I)throw Error(r(189))}}if(m.alternate!==g)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?l:f}function u(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l;for(l=l.child;l!==null;){if(f=u(l),f!==null)return f;l=l.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),A=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function G(l){return l===null||typeof l!="object"?null:(l=M&&l[M]||l["@@iterator"],typeof l=="function"?l:null)}var K=Symbol.for("react.client.reference");function W(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===K?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case x:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case C:return"SuspenseList";case N:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case A:return(l.displayName||"Context")+".Provider";case _:return(l._context.displayName||"Context")+".Consumer";case O:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case L:return f=l.displayName||null,f!==null?f:W(l.type)||"Memo";case P:f=l._payload,l=l._init;try{return W(l(f))}catch{}}return null}var Y=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},Z=[],F=-1;function V(l){return{current:l}}function H(l){0>F||(l.current=Z[F],Z[F]=null,F--)}function te(l,f){F++,Z[F]=l.current,l.current=f}var ce=V(null),ye=V(null),ge=V(null),Me=V(null);function Re(l,f){switch(te(ge,f),te(ye,l),te(ce,null),f.nodeType){case 9:case 11:l=(l=f.documentElement)&&(l=l.namespaceURI)?kC(l):0;break;default:if(l=f.tagName,f=f.namespaceURI)f=kC(f),l=jC(f,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}H(ce),te(ce,l)}function pe(){H(ce),H(ye),H(ge)}function Ae(l){l.memoizedState!==null&&te(Me,l);var f=ce.current,m=jC(f,l.type);f!==m&&(te(ye,l),te(ce,m))}function Oe(l){ye.current===l&&(H(ce),H(ye)),Me.current===l&&(H(Me),tc._currentValue=q)}var me=Object.prototype.hasOwnProperty,rt=t.unstable_scheduleCallback,Be=t.unstable_cancelCallback,It=t.unstable_shouldYield,_e=t.unstable_requestPaint,je=t.unstable_now,Rt=t.unstable_getCurrentPriorityLevel,yn=t.unstable_ImmediatePriority,Zt=t.unstable_UserBlockingPriority,Jt=t.unstable_NormalPriority,vn=t.unstable_LowPriority,Ri=t.unstable_IdlePriority,Oi=t.log,ss=t.unstable_setDisableYieldValue,Fr=null,_n=null;function ai(l){if(typeof Oi=="function"&&ss(l),_n&&typeof _n.setStrictMode=="function")try{_n.setStrictMode(Fr,l)}catch{}}var Rn=Math.clz32?Math.clz32:fV,ud=Math.log,os=Math.LN2;function fV(l){return l>>>=0,l===0?32:31-(ud(l)/os|0)|0}var cd=256,fd=4194304;function ls(l){var f=l&42;if(f!==0)return f;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function dd(l,f,m){var g=l.pendingLanes;if(g===0)return 0;var E=0,w=l.suspendedLanes,I=l.pingedLanes;l=l.warmLanes;var U=g&134217727;return U!==0?(g=U&~w,g!==0?E=ls(g):(I&=U,I!==0?E=ls(I):m||(m=U&~l,m!==0&&(E=ls(m))))):(U=g&~w,U!==0?E=ls(U):I!==0?E=ls(I):m||(m=g&~l,m!==0&&(E=ls(m)))),E===0?0:f!==0&&f!==E&&(f&w)===0&&(w=E&-E,m=f&-f,w>=m||w===32&&(m&4194048)!==0)?f:E}function cu(l,f){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&f)===0}function dV(l,f){switch(l){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x_(){var l=cd;return cd<<=1,(cd&4194048)===0&&(cd=256),l}function b_(){var l=fd;return fd<<=1,(fd&62914560)===0&&(fd=4194304),l}function Mg(l){for(var f=[],m=0;31>m;m++)f.push(l);return f}function fu(l,f){l.pendingLanes|=f,f!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function hV(l,f,m,g,E,w){var I=l.pendingLanes;l.pendingLanes=m,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=m,l.entangledLanes&=m,l.errorRecoveryDisabledLanes&=m,l.shellSuspendCounter=0;var U=l.entanglements,z=l.expirationTimes,ie=l.hiddenUpdates;for(m=I&~m;0<m;){var ue=31-Rn(m),he=1<<ue;U[ue]=0,z[ue]=-1;var ae=ie[ue];if(ae!==null)for(ie[ue]=null,ue=0;ue<ae.length;ue++){var se=ae[ue];se!==null&&(se.lane&=-536870913)}m&=~he}g!==0&&S_(l,g,0),w!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=w&~(I&~f))}function S_(l,f,m){l.pendingLanes|=f,l.suspendedLanes&=~f;var g=31-Rn(f);l.entangledLanes|=f,l.entanglements[g]=l.entanglements[g]|1073741824|m&4194090}function E_(l,f){var m=l.entangledLanes|=f;for(l=l.entanglements;m;){var g=31-Rn(m),E=1<<g;E&f|l[g]&f&&(l[g]|=f),m&=~E}}function kg(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function jg(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function T_(){var l=$.p;return l!==0?l:(l=window.event,l===void 0?32:nL(l.type))}function mV(l,f){var m=$.p;try{return $.p=l,f()}finally{$.p=m}}var pa=Math.random().toString(36).slice(2),On="__reactFiber$"+pa,$n="__reactProps$"+pa,ao="__reactContainer$"+pa,Ug="__reactEvents$"+pa,pV="__reactListeners$"+pa,gV="__reactHandles$"+pa,A_="__reactResources$"+pa,du="__reactMarker$"+pa;function Bg(l){delete l[On],delete l[$n],delete l[Ug],delete l[pV],delete l[gV]}function so(l){var f=l[On];if(f)return f;for(var m=l.parentNode;m;){if(f=m[ao]||m[On]){if(m=f.alternate,f.child!==null||m!==null&&m.child!==null)for(l=$C(l);l!==null;){if(m=l[On])return m;l=$C(l)}return f}l=m,m=l.parentNode}return null}function oo(l){if(l=l[On]||l[ao]){var f=l.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return l}return null}function hu(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l.stateNode;throw Error(r(33))}function lo(l){var f=l[A_];return f||(f=l[A_]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function ln(l){l[du]=!0}var w_=new Set,__={};function us(l,f){uo(l,f),uo(l+"Capture",f)}function uo(l,f){for(__[l]=f,l=0;l<f.length;l++)w_.add(f[l])}var yV=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),R_={},O_={};function vV(l){return me.call(O_,l)?!0:me.call(R_,l)?!1:yV.test(l)?O_[l]=!0:(R_[l]=!0,!1)}function hd(l,f,m){if(vV(f))if(m===null)l.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":l.removeAttribute(f);return;case"boolean":var g=f.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(f);return}}l.setAttribute(f,""+m)}}function md(l,f,m){if(m===null)l.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttribute(f,""+m)}}function Ci(l,f,m,g){if(g===null)l.removeAttribute(m);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(m);return}l.setAttributeNS(f,m,""+g)}}var Fg,C_;function co(l){if(Fg===void 0)try{throw Error()}catch(m){var f=m.stack.trim().match(/\n( *(at )?)/);Fg=f&&f[1]||"",C_=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fg+l+C_}var $g=!1;function Gg(l,f){if(!l||$g)return"";$g=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(f){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(se){var ae=se}Reflect.construct(l,[],he)}else{try{he.call()}catch(se){ae=se}l.call(he.prototype)}}else{try{throw Error()}catch(se){ae=se}(he=l())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(se){if(se&&ae&&typeof se.stack=="string")return[se.stack,ae.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=g.DetermineComponentFrameRoot(),I=w[0],U=w[1];if(I&&U){var z=I.split(`
`),ie=U.split(`
`);for(E=g=0;g<z.length&&!z[g].includes("DetermineComponentFrameRoot");)g++;for(;E<ie.length&&!ie[E].includes("DetermineComponentFrameRoot");)E++;if(g===z.length||E===ie.length)for(g=z.length-1,E=ie.length-1;1<=g&&0<=E&&z[g]!==ie[E];)E--;for(;1<=g&&0<=E;g--,E--)if(z[g]!==ie[E]){if(g!==1||E!==1)do if(g--,E--,0>E||z[g]!==ie[E]){var ue=`
`+z[g].replace(" at new "," at ");return l.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",l.displayName)),ue}while(1<=g&&0<=E);break}}}finally{$g=!1,Error.prepareStackTrace=m}return(m=l?l.displayName||l.name:"")?co(m):""}function xV(l){switch(l.tag){case 26:case 27:case 5:return co(l.type);case 16:return co("Lazy");case 13:return co("Suspense");case 19:return co("SuspenseList");case 0:case 15:return Gg(l.type,!1);case 11:return Gg(l.type.render,!1);case 1:return Gg(l.type,!0);case 31:return co("Activity");default:return""}}function L_(l){try{var f="";do f+=xV(l),l=l.return;while(l);return f}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function hr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function D_(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function bV(l){var f=D_(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,f),g=""+l[f];if(!l.hasOwnProperty(f)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,w=m.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return E.call(this)},set:function(I){g=""+I,w.call(this,I)}}),Object.defineProperty(l,f,{enumerable:m.enumerable}),{getValue:function(){return g},setValue:function(I){g=""+I},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function pd(l){l._valueTracker||(l._valueTracker=bV(l))}function I_(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var m=f.getValue(),g="";return l&&(g=D_(l)?l.checked?"true":"false":l.value),l=g,l!==m?(f.setValue(l),!0):!1}function gd(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var SV=/[\n"\\]/g;function mr(l){return l.replace(SV,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Vg(l,f,m,g,E,w,I,U){l.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?l.type=I:l.removeAttribute("type"),f!=null?I==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+hr(f)):l.value!==""+hr(f)&&(l.value=""+hr(f)):I!=="submit"&&I!=="reset"||l.removeAttribute("value"),f!=null?qg(l,I,hr(f)):m!=null?qg(l,I,hr(m)):g!=null&&l.removeAttribute("value"),E==null&&w!=null&&(l.defaultChecked=!!w),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.name=""+hr(U):l.removeAttribute("name")}function P_(l,f,m,g,E,w,I,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(l.type=w),f!=null||m!=null){if(!(w!=="submit"&&w!=="reset"||f!=null))return;m=m!=null?""+hr(m):"",f=f!=null?""+hr(f):m,U||f===l.value||(l.value=f),l.defaultValue=f}g=g??E,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=U?l.checked:!!g,l.defaultChecked=!!g,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(l.name=I)}function qg(l,f,m){f==="number"&&gd(l.ownerDocument)===l||l.defaultValue===""+m||(l.defaultValue=""+m)}function fo(l,f,m,g){if(l=l.options,f){f={};for(var E=0;E<m.length;E++)f["$"+m[E]]=!0;for(m=0;m<l.length;m++)E=f.hasOwnProperty("$"+l[m].value),l[m].selected!==E&&(l[m].selected=E),E&&g&&(l[m].defaultSelected=!0)}else{for(m=""+hr(m),f=null,E=0;E<l.length;E++){if(l[E].value===m){l[E].selected=!0,g&&(l[E].defaultSelected=!0);return}f!==null||l[E].disabled||(f=l[E])}f!==null&&(f.selected=!0)}}function N_(l,f,m){if(f!=null&&(f=""+hr(f),f!==l.value&&(l.value=f),m==null)){l.defaultValue!==f&&(l.defaultValue=f);return}l.defaultValue=m!=null?""+hr(m):""}function M_(l,f,m,g){if(f==null){if(g!=null){if(m!=null)throw Error(r(92));if(Y(g)){if(1<g.length)throw Error(r(93));g=g[0]}m=g}m==null&&(m=""),f=m}m=hr(f),l.defaultValue=m,g=l.textContent,g===m&&g!==""&&g!==null&&(l.value=g)}function ho(l,f){if(f){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=f;return}}l.textContent=f}var EV=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function k_(l,f,m){var g=f.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?g?l.setProperty(f,""):f==="float"?l.cssFloat="":l[f]="":g?l.setProperty(f,m):typeof m!="number"||m===0||EV.has(f)?f==="float"?l.cssFloat=m:l[f]=(""+m).trim():l[f]=m+"px"}function j_(l,f,m){if(f!=null&&typeof f!="object")throw Error(r(62));if(l=l.style,m!=null){for(var g in m)!m.hasOwnProperty(g)||f!=null&&f.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var E in f)g=f[E],f.hasOwnProperty(E)&&m[E]!==g&&k_(l,E,g)}else for(var w in f)f.hasOwnProperty(w)&&k_(l,w,f[w])}function Hg(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var TV=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),AV=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yd(l){return AV.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var zg=null;function Kg(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var mo=null,po=null;function U_(l){var f=oo(l);if(f&&(l=f.stateNode)){var m=l[$n]||null;e:switch(l=f.stateNode,f.type){case"input":if(Vg(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),f=m.name,m.type==="radio"&&f!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+mr(""+f)+'"][type="radio"]'),f=0;f<m.length;f++){var g=m[f];if(g!==l&&g.form===l.form){var E=g[$n]||null;if(!E)throw Error(r(90));Vg(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(f=0;f<m.length;f++)g=m[f],g.form===l.form&&I_(g)}break e;case"textarea":N_(l,m.value,m.defaultValue);break e;case"select":f=m.value,f!=null&&fo(l,!!m.multiple,f,!1)}}}var Yg=!1;function B_(l,f,m){if(Yg)return l(f,m);Yg=!0;try{var g=l(f);return g}finally{if(Yg=!1,(mo!==null||po!==null)&&(nh(),mo&&(f=mo,l=po,po=mo=null,U_(f),l)))for(f=0;f<l.length;f++)U_(l[f])}}function mu(l,f){var m=l.stateNode;if(m===null)return null;var g=m[$n]||null;if(g===null)return null;m=g[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(r(231,f,typeof m));return m}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wg=!1;if(Li)try{var pu={};Object.defineProperty(pu,"passive",{get:function(){Wg=!0}}),window.addEventListener("test",pu,pu),window.removeEventListener("test",pu,pu)}catch{Wg=!1}var ga=null,Xg=null,vd=null;function F_(){if(vd)return vd;var l,f=Xg,m=f.length,g,E="value"in ga?ga.value:ga.textContent,w=E.length;for(l=0;l<m&&f[l]===E[l];l++);var I=m-l;for(g=1;g<=I&&f[m-g]===E[w-g];g++);return vd=E.slice(l,1<g?1-g:void 0)}function xd(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function bd(){return!0}function $_(){return!1}function Gn(l){function f(m,g,E,w,I){this._reactName=m,this._targetInst=E,this.type=g,this.nativeEvent=w,this.target=I,this.currentTarget=null;for(var U in l)l.hasOwnProperty(U)&&(m=l[U],this[U]=m?m(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?bd:$_,this.isPropagationStopped=$_,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=bd)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=bd)},persist:function(){},isPersistent:bd}),f}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sd=Gn(cs),gu=d({},cs,{view:0,detail:0}),wV=Gn(gu),Qg,Zg,yu,Ed=d({},gu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:e0,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==yu&&(yu&&l.type==="mousemove"?(Qg=l.screenX-yu.screenX,Zg=l.screenY-yu.screenY):Zg=Qg=0,yu=l),Qg)},movementY:function(l){return"movementY"in l?l.movementY:Zg}}),G_=Gn(Ed),_V=d({},Ed,{dataTransfer:0}),RV=Gn(_V),OV=d({},gu,{relatedTarget:0}),Jg=Gn(OV),CV=d({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),LV=Gn(CV),DV=d({},cs,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),IV=Gn(DV),PV=d({},cs,{data:0}),V_=Gn(PV),NV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jV(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=kV[l])?!!f[l]:!1}function e0(){return jV}var UV=d({},gu,{key:function(l){if(l.key){var f=NV[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=xd(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?MV[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:e0,charCode:function(l){return l.type==="keypress"?xd(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?xd(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),BV=Gn(UV),FV=d({},Ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),q_=Gn(FV),$V=d({},gu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:e0}),GV=Gn($V),VV=d({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),qV=Gn(VV),HV=d({},Ed,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),zV=Gn(HV),KV=d({},cs,{newState:0,oldState:0}),YV=Gn(KV),WV=[9,13,27,32],t0=Li&&"CompositionEvent"in window,vu=null;Li&&"documentMode"in document&&(vu=document.documentMode);var XV=Li&&"TextEvent"in window&&!vu,H_=Li&&(!t0||vu&&8<vu&&11>=vu),z_=" ",K_=!1;function Y_(l,f){switch(l){case"keyup":return WV.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W_(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var go=!1;function QV(l,f){switch(l){case"compositionend":return W_(f);case"keypress":return f.which!==32?null:(K_=!0,z_);case"textInput":return l=f.data,l===z_&&K_?null:l;default:return null}}function ZV(l,f){if(go)return l==="compositionend"||!t0&&Y_(l,f)?(l=F_(),vd=Xg=ga=null,go=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return H_&&f.locale!=="ko"?null:f.data;default:return null}}var JV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X_(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!JV[l.type]:f==="textarea"}function Q_(l,f,m,g){mo?po?po.push(g):po=[g]:mo=g,f=lh(f,"onChange"),0<f.length&&(m=new Sd("onChange","change",null,m,g),l.push({event:m,listeners:f}))}var xu=null,bu=null;function eq(l){DC(l,0)}function Td(l){var f=hu(l);if(I_(f))return l}function Z_(l,f){if(l==="change")return f}var J_=!1;if(Li){var n0;if(Li){var r0="oninput"in document;if(!r0){var eR=document.createElement("div");eR.setAttribute("oninput","return;"),r0=typeof eR.oninput=="function"}n0=r0}else n0=!1;J_=n0&&(!document.documentMode||9<document.documentMode)}function tR(){xu&&(xu.detachEvent("onpropertychange",nR),bu=xu=null)}function nR(l){if(l.propertyName==="value"&&Td(bu)){var f=[];Q_(f,bu,l,Kg(l)),B_(eq,f)}}function tq(l,f,m){l==="focusin"?(tR(),xu=f,bu=m,xu.attachEvent("onpropertychange",nR)):l==="focusout"&&tR()}function nq(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Td(bu)}function rq(l,f){if(l==="click")return Td(f)}function iq(l,f){if(l==="input"||l==="change")return Td(f)}function aq(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var Jn=typeof Object.is=="function"?Object.is:aq;function Su(l,f){if(Jn(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var m=Object.keys(l),g=Object.keys(f);if(m.length!==g.length)return!1;for(g=0;g<m.length;g++){var E=m[g];if(!me.call(f,E)||!Jn(l[E],f[E]))return!1}return!0}function rR(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function iR(l,f){var m=rR(l);l=0;for(var g;m;){if(m.nodeType===3){if(g=l+m.textContent.length,l<=f&&g>=f)return{node:m,offset:f-l};l=g}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=rR(m)}}function aR(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?aR(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function sR(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var f=gd(l.document);f instanceof l.HTMLIFrameElement;){try{var m=typeof f.contentWindow.location.href=="string"}catch{m=!1}if(m)l=f.contentWindow;else break;f=gd(l.document)}return f}function i0(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}var sq=Li&&"documentMode"in document&&11>=document.documentMode,yo=null,a0=null,Eu=null,s0=!1;function oR(l,f,m){var g=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;s0||yo==null||yo!==gd(g)||(g=yo,"selectionStart"in g&&i0(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Eu&&Su(Eu,g)||(Eu=g,g=lh(a0,"onSelect"),0<g.length&&(f=new Sd("onSelect","select",null,f,m),l.push({event:f,listeners:g}),f.target=yo)))}function fs(l,f){var m={};return m[l.toLowerCase()]=f.toLowerCase(),m["Webkit"+l]="webkit"+f,m["Moz"+l]="moz"+f,m}var vo={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},o0={},lR={};Li&&(lR=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function ds(l){if(o0[l])return o0[l];if(!vo[l])return l;var f=vo[l],m;for(m in f)if(f.hasOwnProperty(m)&&m in lR)return o0[l]=f[m];return l}var uR=ds("animationend"),cR=ds("animationiteration"),fR=ds("animationstart"),oq=ds("transitionrun"),lq=ds("transitionstart"),uq=ds("transitioncancel"),dR=ds("transitionend"),hR=new Map,l0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");l0.push("scrollEnd");function $r(l,f){hR.set(l,f),us(f,[l])}var mR=new WeakMap;function pr(l,f){if(typeof l=="object"&&l!==null){var m=mR.get(l);return m!==void 0?m:(f={value:l,source:f,stack:L_(f)},mR.set(l,f),f)}return{value:l,source:f,stack:L_(f)}}var gr=[],xo=0,u0=0;function Ad(){for(var l=xo,f=u0=xo=0;f<l;){var m=gr[f];gr[f++]=null;var g=gr[f];gr[f++]=null;var E=gr[f];gr[f++]=null;var w=gr[f];if(gr[f++]=null,g!==null&&E!==null){var I=g.pending;I===null?E.next=E:(E.next=I.next,I.next=E),g.pending=E}w!==0&&pR(m,E,w)}}function wd(l,f,m,g){gr[xo++]=l,gr[xo++]=f,gr[xo++]=m,gr[xo++]=g,u0|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function c0(l,f,m,g){return wd(l,f,m,g),_d(l)}function bo(l,f){return wd(l,null,null,f),_d(l)}function pR(l,f,m){l.lanes|=m;var g=l.alternate;g!==null&&(g.lanes|=m);for(var E=!1,w=l.return;w!==null;)w.childLanes|=m,g=w.alternate,g!==null&&(g.childLanes|=m),w.tag===22&&(l=w.stateNode,l===null||l._visibility&1||(E=!0)),l=w,w=w.return;return l.tag===3?(w=l.stateNode,E&&f!==null&&(E=31-Rn(m),l=w.hiddenUpdates,g=l[E],g===null?l[E]=[f]:g.push(f),f.lane=m|536870912),w):null}function _d(l){if(50<Ku)throw Ku=0,gy=null,Error(r(185));for(var f=l.return;f!==null;)l=f,f=l.return;return l.tag===3?l.stateNode:null}var So={};function cq(l,f,m,g){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(l,f,m,g){return new cq(l,f,m,g)}function f0(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Di(l,f){var m=l.alternate;return m===null?(m=er(l.tag,f,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=f,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&65011712,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,f=l.dependencies,m.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m.refCleanup=l.refCleanup,m}function gR(l,f){l.flags&=65011714;var m=l.alternate;return m===null?(l.childLanes=0,l.lanes=f,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=m.childLanes,l.lanes=m.lanes,l.child=m.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=m.memoizedProps,l.memoizedState=m.memoizedState,l.updateQueue=m.updateQueue,l.type=m.type,f=m.dependencies,l.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),l}function Rd(l,f,m,g,E,w){var I=0;if(g=l,typeof l=="function")f0(l)&&(I=1);else if(typeof l=="string")I=dH(l,m,ce.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case N:return l=er(31,m,f,E),l.elementType=N,l.lanes=w,l;case v:return hs(m.children,E,w,f);case S:I=8,E|=24;break;case x:return l=er(12,m,f,E|2),l.elementType=x,l.lanes=w,l;case R:return l=er(13,m,f,E),l.elementType=R,l.lanes=w,l;case C:return l=er(19,m,f,E),l.elementType=C,l.lanes=w,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case T:case A:I=10;break e;case _:I=9;break e;case O:I=11;break e;case L:I=14;break e;case P:I=16,g=null;break e}I=29,m=Error(r(130,l===null?"null":typeof l,"")),g=null}return f=er(I,m,f,E),f.elementType=l,f.type=g,f.lanes=w,f}function hs(l,f,m,g){return l=er(7,l,g,f),l.lanes=m,l}function d0(l,f,m){return l=er(6,l,null,f),l.lanes=m,l}function h0(l,f,m){return f=er(4,l.children!==null?l.children:[],l.key,f),f.lanes=m,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}var Eo=[],To=0,Od=null,Cd=0,yr=[],vr=0,ms=null,Ii=1,Pi="";function ps(l,f){Eo[To++]=Cd,Eo[To++]=Od,Od=l,Cd=f}function yR(l,f,m){yr[vr++]=Ii,yr[vr++]=Pi,yr[vr++]=ms,ms=l;var g=Ii;l=Pi;var E=32-Rn(g)-1;g&=~(1<<E),m+=1;var w=32-Rn(f)+E;if(30<w){var I=E-E%5;w=(g&(1<<I)-1).toString(32),g>>=I,E-=I,Ii=1<<32-Rn(f)+E|m<<E|g,Pi=w+l}else Ii=1<<w|m<<E|g,Pi=l}function m0(l){l.return!==null&&(ps(l,1),yR(l,1,0))}function p0(l){for(;l===Od;)Od=Eo[--To],Eo[To]=null,Cd=Eo[--To],Eo[To]=null;for(;l===ms;)ms=yr[--vr],yr[vr]=null,Pi=yr[--vr],yr[vr]=null,Ii=yr[--vr],yr[vr]=null}var jn=null,Pt=null,nt=!1,gs=null,si=!1,g0=Error(r(519));function ys(l){var f=Error(r(418,""));throw wu(pr(f,l)),g0}function vR(l){var f=l.stateNode,m=l.type,g=l.memoizedProps;switch(f[On]=l,f[$n]=g,m){case"dialog":Ke("cancel",f),Ke("close",f);break;case"iframe":case"object":case"embed":Ke("load",f);break;case"video":case"audio":for(m=0;m<Wu.length;m++)Ke(Wu[m],f);break;case"source":Ke("error",f);break;case"img":case"image":case"link":Ke("error",f),Ke("load",f);break;case"details":Ke("toggle",f);break;case"input":Ke("invalid",f),P_(f,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),pd(f);break;case"select":Ke("invalid",f);break;case"textarea":Ke("invalid",f),M_(f,g.value,g.defaultValue,g.children),pd(f)}m=g.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||f.textContent===""+m||g.suppressHydrationWarning===!0||MC(f.textContent,m)?(g.popover!=null&&(Ke("beforetoggle",f),Ke("toggle",f)),g.onScroll!=null&&Ke("scroll",f),g.onScrollEnd!=null&&Ke("scrollend",f),g.onClick!=null&&(f.onclick=uh),f=!0):f=!1,f||ys(l)}function xR(l){for(jn=l.return;jn;)switch(jn.tag){case 5:case 13:si=!1;return;case 27:case 3:si=!0;return;default:jn=jn.return}}function Tu(l){if(l!==jn)return!1;if(!nt)return xR(l),nt=!0,!1;var f=l.tag,m;if((m=f!==3&&f!==27)&&((m=f===5)&&(m=l.type,m=!(m!=="form"&&m!=="button")||Iy(l.type,l.memoizedProps)),m=!m),m&&Pt&&ys(l),xR(l),f===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,f=0;l;){if(l.nodeType===8)if(m=l.data,m==="/$"){if(f===0){Pt=Vr(l.nextSibling);break e}f--}else m!=="$"&&m!=="$!"&&m!=="$?"||f++;l=l.nextSibling}Pt=null}}else f===27?(f=Pt,Ia(l.type)?(l=ky,ky=null,Pt=l):Pt=f):Pt=jn?Vr(l.stateNode.nextSibling):null;return!0}function Au(){Pt=jn=null,nt=!1}function bR(){var l=gs;return l!==null&&(Hn===null?Hn=l:Hn.push.apply(Hn,l),gs=null),l}function wu(l){gs===null?gs=[l]:gs.push(l)}var y0=V(null),vs=null,Ni=null;function ya(l,f,m){te(y0,f._currentValue),f._currentValue=m}function Mi(l){l._currentValue=y0.current,H(y0)}function v0(l,f,m){for(;l!==null;){var g=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,g!==null&&(g.childLanes|=f)):g!==null&&(g.childLanes&f)!==f&&(g.childLanes|=f),l===m)break;l=l.return}}function x0(l,f,m,g){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var w=E.dependencies;if(w!==null){var I=E.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=E;for(var z=0;z<f.length;z++)if(U.context===f[z]){w.lanes|=m,U=w.alternate,U!==null&&(U.lanes|=m),v0(w.return,m,l),g||(I=null);break e}w=U.next}}else if(E.tag===18){if(I=E.return,I===null)throw Error(r(341));I.lanes|=m,w=I.alternate,w!==null&&(w.lanes|=m),v0(I,m,l),I=null}else I=E.child;if(I!==null)I.return=E;else for(I=E;I!==null;){if(I===l){I=null;break}if(E=I.sibling,E!==null){E.return=I.return,I=E;break}I=I.return}E=I}}function _u(l,f,m,g){l=null;for(var E=f,w=!1;E!==null;){if(!w){if((E.flags&524288)!==0)w=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var I=E.alternate;if(I===null)throw Error(r(387));if(I=I.memoizedProps,I!==null){var U=E.type;Jn(E.pendingProps.value,I.value)||(l!==null?l.push(U):l=[U])}}else if(E===Me.current){if(I=E.alternate,I===null)throw Error(r(387));I.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(tc):l=[tc])}E=E.return}l!==null&&x0(f,l,m,g),f.flags|=262144}function Ld(l){for(l=l.firstContext;l!==null;){if(!Jn(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function xs(l){vs=l,Ni=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Cn(l){return SR(vs,l)}function Dd(l,f){return vs===null&&xs(l),SR(l,f)}function SR(l,f){var m=f._currentValue;if(f={context:f,memoizedValue:m,next:null},Ni===null){if(l===null)throw Error(r(308));Ni=f,l.dependencies={lanes:0,firstContext:f},l.flags|=524288}else Ni=Ni.next=f;return m}var fq=typeof AbortController<"u"?AbortController:function(){var l=[],f=this.signal={aborted:!1,addEventListener:function(m,g){l.push(g)}};this.abort=function(){f.aborted=!0,l.forEach(function(m){return m()})}},dq=t.unstable_scheduleCallback,hq=t.unstable_NormalPriority,en={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function b0(){return{controller:new fq,data:new Map,refCount:0}}function Ru(l){l.refCount--,l.refCount===0&&dq(hq,function(){l.controller.abort()})}var Ou=null,S0=0,Ao=0,wo=null;function mq(l,f){if(Ou===null){var m=Ou=[];S0=0,Ao=Ty(),wo={status:"pending",value:void 0,then:function(g){m.push(g)}}}return S0++,f.then(ER,ER),f}function ER(){if(--S0===0&&Ou!==null){wo!==null&&(wo.status="fulfilled");var l=Ou;Ou=null,Ao=0,wo=null;for(var f=0;f<l.length;f++)(0,l[f])()}}function pq(l,f){var m=[],g={status:"pending",value:null,reason:null,then:function(E){m.push(E)}};return l.then(function(){g.status="fulfilled",g.value=f;for(var E=0;E<m.length;E++)(0,m[E])(f)},function(E){for(g.status="rejected",g.reason=E,E=0;E<m.length;E++)(0,m[E])(void 0)}),g}var TR=j.S;j.S=function(l,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&mq(l,f),TR!==null&&TR(l,f)};var bs=V(null);function E0(){var l=bs.current;return l!==null?l:bt.pooledCache}function Id(l,f){f===null?te(bs,bs.current):te(bs,f.pool)}function AR(){var l=E0();return l===null?null:{parent:en._currentValue,pool:l}}var Cu=Error(r(460)),wR=Error(r(474)),Pd=Error(r(542)),T0={then:function(){}};function _R(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Nd(){}function RR(l,f,m){switch(m=l[m],m===void 0?l.push(f):m!==f&&(f.then(Nd,Nd),f=m),f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,CR(l),l;default:if(typeof f.status=="string")f.then(Nd,Nd);else{if(l=bt,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=f,l.status="pending",l.then(function(g){if(f.status==="pending"){var E=f;E.status="fulfilled",E.value=g}},function(g){if(f.status==="pending"){var E=f;E.status="rejected",E.reason=g}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,CR(l),l}throw Lu=f,Cu}}var Lu=null;function OR(){if(Lu===null)throw Error(r(459));var l=Lu;return Lu=null,l}function CR(l){if(l===Cu||l===Pd)throw Error(r(483))}var va=!1;function A0(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function w0(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function xa(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function ba(l,f,m){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(st&2)!==0){var E=g.pending;return E===null?f.next=f:(f.next=E.next,E.next=f),g.pending=f,f=_d(l),pR(l,null,m),f}return wd(l,g,f,m),_d(l)}function Du(l,f,m){if(f=f.updateQueue,f!==null&&(f=f.shared,(m&4194048)!==0)){var g=f.lanes;g&=l.pendingLanes,m|=g,f.lanes=m,E_(l,m)}}function _0(l,f){var m=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,m===g)){var E=null,w=null;if(m=m.firstBaseUpdate,m!==null){do{var I={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};w===null?E=w=I:w=w.next=I,m=m.next}while(m!==null);w===null?E=w=f:w=w.next=f}else E=w=f;m={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:w,shared:g.shared,callbacks:g.callbacks},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=f:l.next=f,m.lastBaseUpdate=f}var R0=!1;function Iu(){if(R0){var l=wo;if(l!==null)throw l}}function Pu(l,f,m,g){R0=!1;var E=l.updateQueue;va=!1;var w=E.firstBaseUpdate,I=E.lastBaseUpdate,U=E.shared.pending;if(U!==null){E.shared.pending=null;var z=U,ie=z.next;z.next=null,I===null?w=ie:I.next=ie,I=z;var ue=l.alternate;ue!==null&&(ue=ue.updateQueue,U=ue.lastBaseUpdate,U!==I&&(U===null?ue.firstBaseUpdate=ie:U.next=ie,ue.lastBaseUpdate=z))}if(w!==null){var he=E.baseState;I=0,ue=ie=z=null,U=w;do{var ae=U.lane&-536870913,se=ae!==U.lane;if(se?(Qe&ae)===ae:(g&ae)===ae){ae!==0&&ae===Ao&&(R0=!0),ue!==null&&(ue=ue.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Ie=l,Ce=U;ae=f;var dt=m;switch(Ce.tag){case 1:if(Ie=Ce.payload,typeof Ie=="function"){he=Ie.call(dt,he,ae);break e}he=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ce.payload,ae=typeof Ie=="function"?Ie.call(dt,he,ae):Ie,ae==null)break e;he=d({},he,ae);break e;case 2:va=!0}}ae=U.callback,ae!==null&&(l.flags|=64,se&&(l.flags|=8192),se=E.callbacks,se===null?E.callbacks=[ae]:se.push(ae))}else se={lane:ae,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ue===null?(ie=ue=se,z=he):ue=ue.next=se,I|=ae;if(U=U.next,U===null){if(U=E.shared.pending,U===null)break;se=U,U=se.next,se.next=null,E.lastBaseUpdate=se,E.shared.pending=null}}while(!0);ue===null&&(z=he),E.baseState=z,E.firstBaseUpdate=ie,E.lastBaseUpdate=ue,w===null&&(E.shared.lanes=0),Oa|=I,l.lanes=I,l.memoizedState=he}}function LR(l,f){if(typeof l!="function")throw Error(r(191,l));l.call(f)}function DR(l,f){var m=l.callbacks;if(m!==null)for(l.callbacks=null,l=0;l<m.length;l++)LR(m[l],f)}var _o=V(null),Md=V(0);function IR(l,f){l=Gi,te(Md,l),te(_o,f),Gi=l|f.baseLanes}function O0(){te(Md,Gi),te(_o,_o.current)}function C0(){Gi=Md.current,H(_o),H(Md)}var Sa=0,$e=null,ct=null,Ht=null,kd=!1,Ro=!1,Ss=!1,jd=0,Nu=0,Oo=null,gq=0;function jt(){throw Error(r(321))}function L0(l,f){if(f===null)return!1;for(var m=0;m<f.length&&m<l.length;m++)if(!Jn(l[m],f[m]))return!1;return!0}function D0(l,f,m,g,E,w){return Sa=w,$e=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,j.H=l===null||l.memoizedState===null?pO:gO,Ss=!1,w=m(g,E),Ss=!1,Ro&&(w=NR(f,m,g,E)),PR(l),w}function PR(l){j.H=Vd;var f=ct!==null&&ct.next!==null;if(Sa=0,Ht=ct=$e=null,kd=!1,Nu=0,Oo=null,f)throw Error(r(300));l===null||un||(l=l.dependencies,l!==null&&Ld(l)&&(un=!0))}function NR(l,f,m,g){$e=l;var E=0;do{if(Ro&&(Oo=null),Nu=0,Ro=!1,25<=E)throw Error(r(301));if(E+=1,Ht=ct=null,l.updateQueue!=null){var w=l.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}j.H=Tq,w=f(m,g)}while(Ro);return w}function yq(){var l=j.H,f=l.useState()[0];return f=typeof f.then=="function"?Mu(f):f,l=l.useState()[0],(ct!==null?ct.memoizedState:null)!==l&&($e.flags|=1024),f}function I0(){var l=jd!==0;return jd=0,l}function P0(l,f,m){f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~m}function N0(l){if(kd){for(l=l.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}kd=!1}Sa=0,Ht=ct=$e=null,Ro=!1,Nu=jd=0,Oo=null}function Vn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?$e.memoizedState=Ht=l:Ht=Ht.next=l,Ht}function zt(){if(ct===null){var l=$e.alternate;l=l!==null?l.memoizedState:null}else l=ct.next;var f=Ht===null?$e.memoizedState:Ht.next;if(f!==null)Ht=f,ct=l;else{if(l===null)throw $e.alternate===null?Error(r(467)):Error(r(310));ct=l,l={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Ht===null?$e.memoizedState=Ht=l:Ht=Ht.next=l}return Ht}function M0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mu(l){var f=Nu;return Nu+=1,Oo===null&&(Oo=[]),l=RR(Oo,l,f),f=$e,(Ht===null?f.memoizedState:Ht.next)===null&&(f=f.alternate,j.H=f===null||f.memoizedState===null?pO:gO),l}function Ud(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Mu(l);if(l.$$typeof===A)return Cn(l)}throw Error(r(438,String(l)))}function k0(l){var f=null,m=$e.updateQueue;if(m!==null&&(f=m.memoCache),f==null){var g=$e.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(f={data:g.data.map(function(E){return E.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),m===null&&(m=M0(),$e.updateQueue=m),m.memoCache=f,m=f.data[f.index],m===void 0)for(m=f.data[f.index]=Array(l),g=0;g<l;g++)m[g]=k;return f.index++,m}function ki(l,f){return typeof f=="function"?f(l):f}function Bd(l){var f=zt();return j0(f,ct,l)}function j0(l,f,m){var g=l.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=m;var E=l.baseQueue,w=g.pending;if(w!==null){if(E!==null){var I=E.next;E.next=w.next,w.next=I}f.baseQueue=E=w,g.pending=null}if(w=l.baseState,E===null)l.memoizedState=w;else{f=E.next;var U=I=null,z=null,ie=f,ue=!1;do{var he=ie.lane&-536870913;if(he!==ie.lane?(Qe&he)===he:(Sa&he)===he){var ae=ie.revertLane;if(ae===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),he===Ao&&(ue=!0);else if((Sa&ae)===ae){ie=ie.next,ae===Ao&&(ue=!0);continue}else he={lane:0,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},z===null?(U=z=he,I=w):z=z.next=he,$e.lanes|=ae,Oa|=ae;he=ie.action,Ss&&m(w,he),w=ie.hasEagerState?ie.eagerState:m(w,he)}else ae={lane:he,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},z===null?(U=z=ae,I=w):z=z.next=ae,$e.lanes|=he,Oa|=he;ie=ie.next}while(ie!==null&&ie!==f);if(z===null?I=w:z.next=U,!Jn(w,l.memoizedState)&&(un=!0,ue&&(m=wo,m!==null)))throw m;l.memoizedState=w,l.baseState=I,l.baseQueue=z,g.lastRenderedState=w}return E===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function U0(l){var f=zt(),m=f.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=l;var g=m.dispatch,E=m.pending,w=f.memoizedState;if(E!==null){m.pending=null;var I=E=E.next;do w=l(w,I.action),I=I.next;while(I!==E);Jn(w,f.memoizedState)||(un=!0),f.memoizedState=w,f.baseQueue===null&&(f.baseState=w),m.lastRenderedState=w}return[w,g]}function MR(l,f,m){var g=$e,E=zt(),w=nt;if(w){if(m===void 0)throw Error(r(407));m=m()}else m=f();var I=!Jn((ct||E).memoizedState,m);I&&(E.memoizedState=m,un=!0),E=E.queue;var U=UR.bind(null,g,E,l);if(ku(2048,8,U,[l]),E.getSnapshot!==f||I||Ht!==null&&Ht.memoizedState.tag&1){if(g.flags|=2048,Co(9,Fd(),jR.bind(null,g,E,m,f),null),bt===null)throw Error(r(349));w||(Sa&124)!==0||kR(g,f,m)}return m}function kR(l,f,m){l.flags|=16384,l={getSnapshot:f,value:m},f=$e.updateQueue,f===null?(f=M0(),$e.updateQueue=f,f.stores=[l]):(m=f.stores,m===null?f.stores=[l]:m.push(l))}function jR(l,f,m,g){f.value=m,f.getSnapshot=g,BR(f)&&FR(l)}function UR(l,f,m){return m(function(){BR(f)&&FR(l)})}function BR(l){var f=l.getSnapshot;l=l.value;try{var m=f();return!Jn(l,m)}catch{return!0}}function FR(l){var f=bo(l,2);f!==null&&ar(f,l,2)}function B0(l){var f=Vn();if(typeof l=="function"){var m=l;if(l=m(),Ss){ai(!0);try{m()}finally{ai(!1)}}}return f.memoizedState=f.baseState=l,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:l},f}function $R(l,f,m,g){return l.baseState=m,j0(l,ct,typeof g=="function"?g:ki)}function vq(l,f,m,g,E){if(Gd(l))throw Error(r(485));if(l=f.action,l!==null){var w={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){w.listeners.push(I)}};j.T!==null?m(!0):w.isTransition=!1,g(w),m=f.pending,m===null?(w.next=f.pending=w,GR(f,w)):(w.next=m.next,f.pending=m.next=w)}}function GR(l,f){var m=f.action,g=f.payload,E=l.state;if(f.isTransition){var w=j.T,I={};j.T=I;try{var U=m(E,g),z=j.S;z!==null&&z(I,U),VR(l,f,U)}catch(ie){F0(l,f,ie)}finally{j.T=w}}else try{w=m(E,g),VR(l,f,w)}catch(ie){F0(l,f,ie)}}function VR(l,f,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(g){qR(l,f,g)},function(g){return F0(l,f,g)}):qR(l,f,m)}function qR(l,f,m){f.status="fulfilled",f.value=m,HR(f),l.state=m,f=l.pending,f!==null&&(m=f.next,m===f?l.pending=null:(m=m.next,f.next=m,GR(l,m)))}function F0(l,f,m){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do f.status="rejected",f.reason=m,HR(f),f=f.next;while(f!==g)}l.action=null}function HR(l){l=l.listeners;for(var f=0;f<l.length;f++)(0,l[f])()}function zR(l,f){return f}function KR(l,f){if(nt){var m=bt.formState;if(m!==null){e:{var g=$e;if(nt){if(Pt){t:{for(var E=Pt,w=si;E.nodeType!==8;){if(!w){E=null;break t}if(E=Vr(E.nextSibling),E===null){E=null;break t}}w=E.data,E=w==="F!"||w==="F"?E:null}if(E){Pt=Vr(E.nextSibling),g=E.data==="F!";break e}}ys(g)}g=!1}g&&(f=m[0])}}return m=Vn(),m.memoizedState=m.baseState=f,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zR,lastRenderedState:f},m.queue=g,m=dO.bind(null,$e,g),g.dispatch=m,g=B0(!1),w=H0.bind(null,$e,!1,g.queue),g=Vn(),E={state:f,dispatch:null,action:l,pending:null},g.queue=E,m=vq.bind(null,$e,E,w,m),E.dispatch=m,g.memoizedState=l,[f,m,!1]}function YR(l){var f=zt();return WR(f,ct,l)}function WR(l,f,m){if(f=j0(l,f,zR)[0],l=Bd(ki)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var g=Mu(f)}catch(I){throw I===Cu?Pd:I}else g=f;f=zt();var E=f.queue,w=E.dispatch;return m!==f.memoizedState&&($e.flags|=2048,Co(9,Fd(),xq.bind(null,E,m),null)),[g,w,l]}function xq(l,f){l.action=f}function XR(l){var f=zt(),m=ct;if(m!==null)return WR(f,m,l);zt(),f=f.memoizedState,m=zt();var g=m.queue.dispatch;return m.memoizedState=l,[f,g,!1]}function Co(l,f,m,g){return l={tag:l,create:m,deps:g,inst:f,next:null},f=$e.updateQueue,f===null&&(f=M0(),$e.updateQueue=f),m=f.lastEffect,m===null?f.lastEffect=l.next=l:(g=m.next,m.next=l,l.next=g,f.lastEffect=l),l}function Fd(){return{destroy:void 0,resource:void 0}}function QR(){return zt().memoizedState}function $d(l,f,m,g){var E=Vn();g=g===void 0?null:g,$e.flags|=l,E.memoizedState=Co(1|f,Fd(),m,g)}function ku(l,f,m,g){var E=zt();g=g===void 0?null:g;var w=E.memoizedState.inst;ct!==null&&g!==null&&L0(g,ct.memoizedState.deps)?E.memoizedState=Co(f,w,m,g):($e.flags|=l,E.memoizedState=Co(1|f,w,m,g))}function ZR(l,f){$d(8390656,8,l,f)}function JR(l,f){ku(2048,8,l,f)}function eO(l,f){return ku(4,2,l,f)}function tO(l,f){return ku(4,4,l,f)}function nO(l,f){if(typeof f=="function"){l=l();var m=f(l);return function(){typeof m=="function"?m():f(null)}}if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function rO(l,f,m){m=m!=null?m.concat([l]):null,ku(4,4,nO.bind(null,f,l),m)}function $0(){}function iO(l,f){var m=zt();f=f===void 0?null:f;var g=m.memoizedState;return f!==null&&L0(f,g[1])?g[0]:(m.memoizedState=[l,f],l)}function aO(l,f){var m=zt();f=f===void 0?null:f;var g=m.memoizedState;if(f!==null&&L0(f,g[1]))return g[0];if(g=l(),Ss){ai(!0);try{l()}finally{ai(!1)}}return m.memoizedState=[g,f],g}function G0(l,f,m){return m===void 0||(Sa&1073741824)!==0?l.memoizedState=f:(l.memoizedState=m,l=lC(),$e.lanes|=l,Oa|=l,m)}function sO(l,f,m,g){return Jn(m,f)?m:_o.current!==null?(l=G0(l,m,g),Jn(l,f)||(un=!0),l):(Sa&42)===0?(un=!0,l.memoizedState=m):(l=lC(),$e.lanes|=l,Oa|=l,f)}function oO(l,f,m,g,E){var w=$.p;$.p=w!==0&&8>w?w:8;var I=j.T,U={};j.T=U,H0(l,!1,f,m);try{var z=E(),ie=j.S;if(ie!==null&&ie(U,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ue=pq(z,g);ju(l,f,ue,ir(l))}else ju(l,f,g,ir(l))}catch(he){ju(l,f,{then:function(){},status:"rejected",reason:he},ir())}finally{$.p=w,j.T=I}}function bq(){}function V0(l,f,m,g){if(l.tag!==5)throw Error(r(476));var E=lO(l).queue;oO(l,E,f,q,m===null?bq:function(){return uO(l),m(g)})}function lO(l){var f=l.memoizedState;if(f!==null)return f;f={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:q},next:null};var m={};return f.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:m},next:null},l.memoizedState=f,l=l.alternate,l!==null&&(l.memoizedState=f),f}function uO(l){var f=lO(l).next.queue;ju(l,f,{},ir())}function q0(){return Cn(tc)}function cO(){return zt().memoizedState}function fO(){return zt().memoizedState}function Sq(l){for(var f=l.return;f!==null;){switch(f.tag){case 24:case 3:var m=ir();l=xa(m);var g=ba(f,l,m);g!==null&&(ar(g,f,m),Du(g,f,m)),f={cache:b0()},l.payload=f;return}f=f.return}}function Eq(l,f,m){var g=ir();m={lane:g,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Gd(l)?hO(f,m):(m=c0(l,f,m,g),m!==null&&(ar(m,l,g),mO(m,f,g)))}function dO(l,f,m){var g=ir();ju(l,f,m,g)}function ju(l,f,m,g){var E={lane:g,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Gd(l))hO(f,E);else{var w=l.alternate;if(l.lanes===0&&(w===null||w.lanes===0)&&(w=f.lastRenderedReducer,w!==null))try{var I=f.lastRenderedState,U=w(I,m);if(E.hasEagerState=!0,E.eagerState=U,Jn(U,I))return wd(l,f,E,0),bt===null&&Ad(),!1}catch{}finally{}if(m=c0(l,f,E,g),m!==null)return ar(m,l,g),mO(m,f,g),!0}return!1}function H0(l,f,m,g){if(g={lane:2,revertLane:Ty(),action:g,hasEagerState:!1,eagerState:null,next:null},Gd(l)){if(f)throw Error(r(479))}else f=c0(l,m,g,2),f!==null&&ar(f,l,2)}function Gd(l){var f=l.alternate;return l===$e||f!==null&&f===$e}function hO(l,f){Ro=kd=!0;var m=l.pending;m===null?f.next=f:(f.next=m.next,m.next=f),l.pending=f}function mO(l,f,m){if((m&4194048)!==0){var g=f.lanes;g&=l.pendingLanes,m|=g,f.lanes=m,E_(l,m)}}var Vd={readContext:Cn,use:Ud,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt},pO={readContext:Cn,use:Ud,useCallback:function(l,f){return Vn().memoizedState=[l,f===void 0?null:f],l},useContext:Cn,useEffect:ZR,useImperativeHandle:function(l,f,m){m=m!=null?m.concat([l]):null,$d(4194308,4,nO.bind(null,f,l),m)},useLayoutEffect:function(l,f){return $d(4194308,4,l,f)},useInsertionEffect:function(l,f){$d(4,2,l,f)},useMemo:function(l,f){var m=Vn();f=f===void 0?null:f;var g=l();if(Ss){ai(!0);try{l()}finally{ai(!1)}}return m.memoizedState=[g,f],g},useReducer:function(l,f,m){var g=Vn();if(m!==void 0){var E=m(f);if(Ss){ai(!0);try{m(f)}finally{ai(!1)}}}else E=f;return g.memoizedState=g.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},g.queue=l,l=l.dispatch=Eq.bind(null,$e,l),[g.memoizedState,l]},useRef:function(l){var f=Vn();return l={current:l},f.memoizedState=l},useState:function(l){l=B0(l);var f=l.queue,m=dO.bind(null,$e,f);return f.dispatch=m,[l.memoizedState,m]},useDebugValue:$0,useDeferredValue:function(l,f){var m=Vn();return G0(m,l,f)},useTransition:function(){var l=B0(!1);return l=oO.bind(null,$e,l.queue,!0,!1),Vn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,f,m){var g=$e,E=Vn();if(nt){if(m===void 0)throw Error(r(407));m=m()}else{if(m=f(),bt===null)throw Error(r(349));(Qe&124)!==0||kR(g,f,m)}E.memoizedState=m;var w={value:m,getSnapshot:f};return E.queue=w,ZR(UR.bind(null,g,w,l),[l]),g.flags|=2048,Co(9,Fd(),jR.bind(null,g,w,m,f),null),m},useId:function(){var l=Vn(),f=bt.identifierPrefix;if(nt){var m=Pi,g=Ii;m=(g&~(1<<32-Rn(g)-1)).toString(32)+m,f=""+f+"R"+m,m=jd++,0<m&&(f+="H"+m.toString(32)),f+=""}else m=gq++,f=""+f+"r"+m.toString(32)+"";return l.memoizedState=f},useHostTransitionStatus:q0,useFormState:KR,useActionState:KR,useOptimistic:function(l){var f=Vn();f.memoizedState=f.baseState=l;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=m,f=H0.bind(null,$e,!0,m),m.dispatch=f,[l,f]},useMemoCache:k0,useCacheRefresh:function(){return Vn().memoizedState=Sq.bind(null,$e)}},gO={readContext:Cn,use:Ud,useCallback:iO,useContext:Cn,useEffect:JR,useImperativeHandle:rO,useInsertionEffect:eO,useLayoutEffect:tO,useMemo:aO,useReducer:Bd,useRef:QR,useState:function(){return Bd(ki)},useDebugValue:$0,useDeferredValue:function(l,f){var m=zt();return sO(m,ct.memoizedState,l,f)},useTransition:function(){var l=Bd(ki)[0],f=zt().memoizedState;return[typeof l=="boolean"?l:Mu(l),f]},useSyncExternalStore:MR,useId:cO,useHostTransitionStatus:q0,useFormState:YR,useActionState:YR,useOptimistic:function(l,f){var m=zt();return $R(m,ct,l,f)},useMemoCache:k0,useCacheRefresh:fO},Tq={readContext:Cn,use:Ud,useCallback:iO,useContext:Cn,useEffect:JR,useImperativeHandle:rO,useInsertionEffect:eO,useLayoutEffect:tO,useMemo:aO,useReducer:U0,useRef:QR,useState:function(){return U0(ki)},useDebugValue:$0,useDeferredValue:function(l,f){var m=zt();return ct===null?G0(m,l,f):sO(m,ct.memoizedState,l,f)},useTransition:function(){var l=U0(ki)[0],f=zt().memoizedState;return[typeof l=="boolean"?l:Mu(l),f]},useSyncExternalStore:MR,useId:cO,useHostTransitionStatus:q0,useFormState:XR,useActionState:XR,useOptimistic:function(l,f){var m=zt();return ct!==null?$R(m,ct,l,f):(m.baseState=l,[l,m.queue.dispatch])},useMemoCache:k0,useCacheRefresh:fO},Lo=null,Uu=0;function qd(l){var f=Uu;return Uu+=1,Lo===null&&(Lo=[]),RR(Lo,l,f)}function Bu(l,f){f=f.props.ref,l.ref=f!==void 0?f:null}function Hd(l,f){throw f.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(f),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l)))}function yO(l){var f=l._init;return f(l._payload)}function vO(l){function f(J,X){if(l){var ne=J.deletions;ne===null?(J.deletions=[X],J.flags|=16):ne.push(X)}}function m(J,X){if(!l)return null;for(;X!==null;)f(J,X),X=X.sibling;return null}function g(J){for(var X=new Map;J!==null;)J.key!==null?X.set(J.key,J):X.set(J.index,J),J=J.sibling;return X}function E(J,X){return J=Di(J,X),J.index=0,J.sibling=null,J}function w(J,X,ne){return J.index=ne,l?(ne=J.alternate,ne!==null?(ne=ne.index,ne<X?(J.flags|=67108866,X):ne):(J.flags|=67108866,X)):(J.flags|=1048576,X)}function I(J){return l&&J.alternate===null&&(J.flags|=67108866),J}function U(J,X,ne,de){return X===null||X.tag!==6?(X=d0(ne,J.mode,de),X.return=J,X):(X=E(X,ne),X.return=J,X)}function z(J,X,ne,de){var Ee=ne.type;return Ee===v?ue(J,X,ne.props.children,de,ne.key):X!==null&&(X.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===P&&yO(Ee)===X.type)?(X=E(X,ne.props),Bu(X,ne),X.return=J,X):(X=Rd(ne.type,ne.key,ne.props,null,J.mode,de),Bu(X,ne),X.return=J,X)}function ie(J,X,ne,de){return X===null||X.tag!==4||X.stateNode.containerInfo!==ne.containerInfo||X.stateNode.implementation!==ne.implementation?(X=h0(ne,J.mode,de),X.return=J,X):(X=E(X,ne.children||[]),X.return=J,X)}function ue(J,X,ne,de,Ee){return X===null||X.tag!==7?(X=hs(ne,J.mode,de,Ee),X.return=J,X):(X=E(X,ne),X.return=J,X)}function he(J,X,ne){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=d0(""+X,J.mode,ne),X.return=J,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case p:return ne=Rd(X.type,X.key,X.props,null,J.mode,ne),Bu(ne,X),ne.return=J,ne;case y:return X=h0(X,J.mode,ne),X.return=J,X;case P:var de=X._init;return X=de(X._payload),he(J,X,ne)}if(Y(X)||G(X))return X=hs(X,J.mode,ne,null),X.return=J,X;if(typeof X.then=="function")return he(J,qd(X),ne);if(X.$$typeof===A)return he(J,Dd(J,X),ne);Hd(J,X)}return null}function ae(J,X,ne,de){var Ee=X!==null?X.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ee!==null?null:U(J,X,""+ne,de);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case p:return ne.key===Ee?z(J,X,ne,de):null;case y:return ne.key===Ee?ie(J,X,ne,de):null;case P:return Ee=ne._init,ne=Ee(ne._payload),ae(J,X,ne,de)}if(Y(ne)||G(ne))return Ee!==null?null:ue(J,X,ne,de,null);if(typeof ne.then=="function")return ae(J,X,qd(ne),de);if(ne.$$typeof===A)return ae(J,X,Dd(J,ne),de);Hd(J,ne)}return null}function se(J,X,ne,de,Ee){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return J=J.get(ne)||null,U(X,J,""+de,Ee);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case p:return J=J.get(de.key===null?ne:de.key)||null,z(X,J,de,Ee);case y:return J=J.get(de.key===null?ne:de.key)||null,ie(X,J,de,Ee);case P:var qe=de._init;return de=qe(de._payload),se(J,X,ne,de,Ee)}if(Y(de)||G(de))return J=J.get(ne)||null,ue(X,J,de,Ee,null);if(typeof de.then=="function")return se(J,X,ne,qd(de),Ee);if(de.$$typeof===A)return se(J,X,ne,Dd(X,de),Ee);Hd(X,de)}return null}function Ie(J,X,ne,de){for(var Ee=null,qe=null,we=X,Le=X=0,fn=null;we!==null&&Le<ne.length;Le++){we.index>Le?(fn=we,we=null):fn=we.sibling;var Ze=ae(J,we,ne[Le],de);if(Ze===null){we===null&&(we=fn);break}l&&we&&Ze.alternate===null&&f(J,we),X=w(Ze,X,Le),qe===null?Ee=Ze:qe.sibling=Ze,qe=Ze,we=fn}if(Le===ne.length)return m(J,we),nt&&ps(J,Le),Ee;if(we===null){for(;Le<ne.length;Le++)we=he(J,ne[Le],de),we!==null&&(X=w(we,X,Le),qe===null?Ee=we:qe.sibling=we,qe=we);return nt&&ps(J,Le),Ee}for(we=g(we);Le<ne.length;Le++)fn=se(we,J,Le,ne[Le],de),fn!==null&&(l&&fn.alternate!==null&&we.delete(fn.key===null?Le:fn.key),X=w(fn,X,Le),qe===null?Ee=fn:qe.sibling=fn,qe=fn);return l&&we.forEach(function(ja){return f(J,ja)}),nt&&ps(J,Le),Ee}function Ce(J,X,ne,de){if(ne==null)throw Error(r(151));for(var Ee=null,qe=null,we=X,Le=X=0,fn=null,Ze=ne.next();we!==null&&!Ze.done;Le++,Ze=ne.next()){we.index>Le?(fn=we,we=null):fn=we.sibling;var ja=ae(J,we,Ze.value,de);if(ja===null){we===null&&(we=fn);break}l&&we&&ja.alternate===null&&f(J,we),X=w(ja,X,Le),qe===null?Ee=ja:qe.sibling=ja,qe=ja,we=fn}if(Ze.done)return m(J,we),nt&&ps(J,Le),Ee;if(we===null){for(;!Ze.done;Le++,Ze=ne.next())Ze=he(J,Ze.value,de),Ze!==null&&(X=w(Ze,X,Le),qe===null?Ee=Ze:qe.sibling=Ze,qe=Ze);return nt&&ps(J,Le),Ee}for(we=g(we);!Ze.done;Le++,Ze=ne.next())Ze=se(we,J,Le,Ze.value,de),Ze!==null&&(l&&Ze.alternate!==null&&we.delete(Ze.key===null?Le:Ze.key),X=w(Ze,X,Le),qe===null?Ee=Ze:qe.sibling=Ze,qe=Ze);return l&&we.forEach(function(AH){return f(J,AH)}),nt&&ps(J,Le),Ee}function dt(J,X,ne,de){if(typeof ne=="object"&&ne!==null&&ne.type===v&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case p:e:{for(var Ee=ne.key;X!==null;){if(X.key===Ee){if(Ee=ne.type,Ee===v){if(X.tag===7){m(J,X.sibling),de=E(X,ne.props.children),de.return=J,J=de;break e}}else if(X.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===P&&yO(Ee)===X.type){m(J,X.sibling),de=E(X,ne.props),Bu(de,ne),de.return=J,J=de;break e}m(J,X);break}else f(J,X);X=X.sibling}ne.type===v?(de=hs(ne.props.children,J.mode,de,ne.key),de.return=J,J=de):(de=Rd(ne.type,ne.key,ne.props,null,J.mode,de),Bu(de,ne),de.return=J,J=de)}return I(J);case y:e:{for(Ee=ne.key;X!==null;){if(X.key===Ee)if(X.tag===4&&X.stateNode.containerInfo===ne.containerInfo&&X.stateNode.implementation===ne.implementation){m(J,X.sibling),de=E(X,ne.children||[]),de.return=J,J=de;break e}else{m(J,X);break}else f(J,X);X=X.sibling}de=h0(ne,J.mode,de),de.return=J,J=de}return I(J);case P:return Ee=ne._init,ne=Ee(ne._payload),dt(J,X,ne,de)}if(Y(ne))return Ie(J,X,ne,de);if(G(ne)){if(Ee=G(ne),typeof Ee!="function")throw Error(r(150));return ne=Ee.call(ne),Ce(J,X,ne,de)}if(typeof ne.then=="function")return dt(J,X,qd(ne),de);if(ne.$$typeof===A)return dt(J,X,Dd(J,ne),de);Hd(J,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,X!==null&&X.tag===6?(m(J,X.sibling),de=E(X,ne),de.return=J,J=de):(m(J,X),de=d0(ne,J.mode,de),de.return=J,J=de),I(J)):m(J,X)}return function(J,X,ne,de){try{Uu=0;var Ee=dt(J,X,ne,de);return Lo=null,Ee}catch(we){if(we===Cu||we===Pd)throw we;var qe=er(29,we,null,J.mode);return qe.lanes=de,qe.return=J,qe}finally{}}}var Do=vO(!0),xO=vO(!1),xr=V(null),oi=null;function Ea(l){var f=l.alternate;te(tn,tn.current&1),te(xr,l),oi===null&&(f===null||_o.current!==null||f.memoizedState!==null)&&(oi=l)}function bO(l){if(l.tag===22){if(te(tn,tn.current),te(xr,l),oi===null){var f=l.alternate;f!==null&&f.memoizedState!==null&&(oi=l)}}else Ta()}function Ta(){te(tn,tn.current),te(xr,xr.current)}function ji(l){H(xr),oi===l&&(oi=null),H(tn)}var tn=V(0);function zd(l){for(var f=l;f!==null;){if(f.tag===13){var m=f.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||My(m)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function z0(l,f,m,g){f=l.memoizedState,m=m(g,f),m=m==null?f:d({},f,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var K0={enqueueSetState:function(l,f,m){l=l._reactInternals;var g=ir(),E=xa(g);E.payload=f,m!=null&&(E.callback=m),f=ba(l,E,g),f!==null&&(ar(f,l,g),Du(f,l,g))},enqueueReplaceState:function(l,f,m){l=l._reactInternals;var g=ir(),E=xa(g);E.tag=1,E.payload=f,m!=null&&(E.callback=m),f=ba(l,E,g),f!==null&&(ar(f,l,g),Du(f,l,g))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var m=ir(),g=xa(m);g.tag=2,f!=null&&(g.callback=f),f=ba(l,g,m),f!==null&&(ar(f,l,m),Du(f,l,m))}};function SO(l,f,m,g,E,w,I){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,w,I):f.prototype&&f.prototype.isPureReactComponent?!Su(m,g)||!Su(E,w):!0}function EO(l,f,m,g){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(m,g),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(m,g),f.state!==l&&K0.enqueueReplaceState(f,f.state,null)}function Es(l,f){var m=f;if("ref"in f){m={};for(var g in f)g!=="ref"&&(m[g]=f[g])}if(l=l.defaultProps){m===f&&(m=d({},m));for(var E in l)m[E]===void 0&&(m[E]=l[E])}return m}var Kd=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function TO(l){Kd(l)}function AO(l){console.error(l)}function wO(l){Kd(l)}function Yd(l,f){try{var m=l.onUncaughtError;m(f.value,{componentStack:f.stack})}catch(g){setTimeout(function(){throw g})}}function _O(l,f,m){try{var g=l.onCaughtError;g(m.value,{componentStack:m.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Y0(l,f,m){return m=xa(m),m.tag=3,m.payload={element:null},m.callback=function(){Yd(l,f)},m}function RO(l){return l=xa(l),l.tag=3,l}function OO(l,f,m,g){var E=m.type.getDerivedStateFromError;if(typeof E=="function"){var w=g.value;l.payload=function(){return E(w)},l.callback=function(){_O(f,m,g)}}var I=m.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(l.callback=function(){_O(f,m,g),typeof E!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var U=g.stack;this.componentDidCatch(g.value,{componentStack:U!==null?U:""})})}function Aq(l,f,m,g,E){if(m.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(f=m.alternate,f!==null&&_u(f,m,E,!0),m=xr.current,m!==null){switch(m.tag){case 13:return oi===null?vy():m.alternate===null&&Nt===0&&(Nt=3),m.flags&=-257,m.flags|=65536,m.lanes=E,g===T0?m.flags|=16384:(f=m.updateQueue,f===null?m.updateQueue=new Set([g]):f.add(g),by(l,g,E)),!1;case 22:return m.flags|=65536,g===T0?m.flags|=16384:(f=m.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([g])},m.updateQueue=f):(m=f.retryQueue,m===null?f.retryQueue=new Set([g]):m.add(g)),by(l,g,E)),!1}throw Error(r(435,m.tag))}return by(l,g,E),vy(),!1}if(nt)return f=xr.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=E,g!==g0&&(l=Error(r(422),{cause:g}),wu(pr(l,m)))):(g!==g0&&(f=Error(r(423),{cause:g}),wu(pr(f,m))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,g=pr(g,m),E=Y0(l.stateNode,g,E),_0(l,E),Nt!==4&&(Nt=2)),!1;var w=Error(r(520),{cause:g});if(w=pr(w,m),zu===null?zu=[w]:zu.push(w),Nt!==4&&(Nt=2),f===null)return!0;g=pr(g,m),m=f;do{switch(m.tag){case 3:return m.flags|=65536,l=E&-E,m.lanes|=l,l=Y0(m.stateNode,g,l),_0(m,l),!1;case 1:if(f=m.type,w=m.stateNode,(m.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ca===null||!Ca.has(w))))return m.flags|=65536,E&=-E,m.lanes|=E,E=RO(E),OO(E,l,m,g),_0(m,E),!1}m=m.return}while(m!==null);return!1}var CO=Error(r(461)),un=!1;function xn(l,f,m,g){f.child=l===null?xO(f,null,m,g):Do(f,l.child,m,g)}function LO(l,f,m,g,E){m=m.render;var w=f.ref;if("ref"in g){var I={};for(var U in g)U!=="ref"&&(I[U]=g[U])}else I=g;return xs(f),g=D0(l,f,m,I,w,E),U=I0(),l!==null&&!un?(P0(l,f,E),Ui(l,f,E)):(nt&&U&&m0(f),f.flags|=1,xn(l,f,g,E),f.child)}function DO(l,f,m,g,E){if(l===null){var w=m.type;return typeof w=="function"&&!f0(w)&&w.defaultProps===void 0&&m.compare===null?(f.tag=15,f.type=w,IO(l,f,w,g,E)):(l=Rd(m.type,null,g,f,f.mode,E),l.ref=f.ref,l.return=f,f.child=l)}if(w=l.child,!ny(l,E)){var I=w.memoizedProps;if(m=m.compare,m=m!==null?m:Su,m(I,g)&&l.ref===f.ref)return Ui(l,f,E)}return f.flags|=1,l=Di(w,g),l.ref=f.ref,l.return=f,f.child=l}function IO(l,f,m,g,E){if(l!==null){var w=l.memoizedProps;if(Su(w,g)&&l.ref===f.ref)if(un=!1,f.pendingProps=g=w,ny(l,E))(l.flags&131072)!==0&&(un=!0);else return f.lanes=l.lanes,Ui(l,f,E)}return W0(l,f,m,g,E)}function PO(l,f,m){var g=f.pendingProps,E=g.children,w=l!==null?l.memoizedState:null;if(g.mode==="hidden"){if((f.flags&128)!==0){if(g=w!==null?w.baseLanes|m:m,l!==null){for(E=f.child=l.child,w=0;E!==null;)w=w|E.lanes|E.childLanes,E=E.sibling;f.childLanes=w&~g}else f.childLanes=0,f.child=null;return NO(l,f,g,m)}if((m&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},l!==null&&Id(f,w!==null?w.cachePool:null),w!==null?IR(f,w):O0(),bO(f);else return f.lanes=f.childLanes=536870912,NO(l,f,w!==null?w.baseLanes|m:m,m)}else w!==null?(Id(f,w.cachePool),IR(f,w),Ta(),f.memoizedState=null):(l!==null&&Id(f,null),O0(),Ta());return xn(l,f,E,m),f.child}function NO(l,f,m,g){var E=E0();return E=E===null?null:{parent:en._currentValue,pool:E},f.memoizedState={baseLanes:m,cachePool:E},l!==null&&Id(f,null),O0(),bO(f),l!==null&&_u(l,f,g,!0),null}function Wd(l,f){var m=f.ref;if(m===null)l!==null&&l.ref!==null&&(f.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(l===null||l.ref!==m)&&(f.flags|=4194816)}}function W0(l,f,m,g,E){return xs(f),m=D0(l,f,m,g,void 0,E),g=I0(),l!==null&&!un?(P0(l,f,E),Ui(l,f,E)):(nt&&g&&m0(f),f.flags|=1,xn(l,f,m,E),f.child)}function MO(l,f,m,g,E,w){return xs(f),f.updateQueue=null,m=NR(f,g,m,E),PR(l),g=I0(),l!==null&&!un?(P0(l,f,w),Ui(l,f,w)):(nt&&g&&m0(f),f.flags|=1,xn(l,f,m,w),f.child)}function kO(l,f,m,g,E){if(xs(f),f.stateNode===null){var w=So,I=m.contextType;typeof I=="object"&&I!==null&&(w=Cn(I)),w=new m(g,w),f.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=K0,f.stateNode=w,w._reactInternals=f,w=f.stateNode,w.props=g,w.state=f.memoizedState,w.refs={},A0(f),I=m.contextType,w.context=typeof I=="object"&&I!==null?Cn(I):So,w.state=f.memoizedState,I=m.getDerivedStateFromProps,typeof I=="function"&&(z0(f,m,I,g),w.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(I=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),I!==w.state&&K0.enqueueReplaceState(w,w.state,null),Pu(f,g,w,E),Iu(),w.state=f.memoizedState),typeof w.componentDidMount=="function"&&(f.flags|=4194308),g=!0}else if(l===null){w=f.stateNode;var U=f.memoizedProps,z=Es(m,U);w.props=z;var ie=w.context,ue=m.contextType;I=So,typeof ue=="object"&&ue!==null&&(I=Cn(ue));var he=m.getDerivedStateFromProps;ue=typeof he=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=f.pendingProps!==U,ue||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||ie!==I)&&EO(f,w,g,I),va=!1;var ae=f.memoizedState;w.state=ae,Pu(f,g,w,E),Iu(),ie=f.memoizedState,U||ae!==ie||va?(typeof he=="function"&&(z0(f,m,he,g),ie=f.memoizedState),(z=va||SO(f,m,z,g,ae,ie,I))?(ue||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(f.flags|=4194308)):(typeof w.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=g,f.memoizedState=ie),w.props=g,w.state=ie,w.context=I,g=z):(typeof w.componentDidMount=="function"&&(f.flags|=4194308),g=!1)}else{w=f.stateNode,w0(l,f),I=f.memoizedProps,ue=Es(m,I),w.props=ue,he=f.pendingProps,ae=w.context,ie=m.contextType,z=So,typeof ie=="object"&&ie!==null&&(z=Cn(ie)),U=m.getDerivedStateFromProps,(ie=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(I!==he||ae!==z)&&EO(f,w,g,z),va=!1,ae=f.memoizedState,w.state=ae,Pu(f,g,w,E),Iu();var se=f.memoizedState;I!==he||ae!==se||va||l!==null&&l.dependencies!==null&&Ld(l.dependencies)?(typeof U=="function"&&(z0(f,m,U,g),se=f.memoizedState),(ue=va||SO(f,m,ue,g,ae,se,z)||l!==null&&l.dependencies!==null&&Ld(l.dependencies))?(ie||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,se,z),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,se,z)),typeof w.componentDidUpdate=="function"&&(f.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof w.componentDidUpdate!="function"||I===l.memoizedProps&&ae===l.memoizedState||(f.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||I===l.memoizedProps&&ae===l.memoizedState||(f.flags|=1024),f.memoizedProps=g,f.memoizedState=se),w.props=g,w.state=se,w.context=z,g=ue):(typeof w.componentDidUpdate!="function"||I===l.memoizedProps&&ae===l.memoizedState||(f.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||I===l.memoizedProps&&ae===l.memoizedState||(f.flags|=1024),g=!1)}return w=g,Wd(l,f),g=(f.flags&128)!==0,w||g?(w=f.stateNode,m=g&&typeof m.getDerivedStateFromError!="function"?null:w.render(),f.flags|=1,l!==null&&g?(f.child=Do(f,l.child,null,E),f.child=Do(f,null,m,E)):xn(l,f,m,E),f.memoizedState=w.state,l=f.child):l=Ui(l,f,E),l}function jO(l,f,m,g){return Au(),f.flags|=256,xn(l,f,m,g),f.child}var X0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Q0(l){return{baseLanes:l,cachePool:AR()}}function Z0(l,f,m){return l=l!==null?l.childLanes&~m:0,f&&(l|=br),l}function UO(l,f,m){var g=f.pendingProps,E=!1,w=(f.flags&128)!==0,I;if((I=w)||(I=l!==null&&l.memoizedState===null?!1:(tn.current&2)!==0),I&&(E=!0,f.flags&=-129),I=(f.flags&32)!==0,f.flags&=-33,l===null){if(nt){if(E?Ea(f):Ta(),nt){var U=Pt,z;if(z=U){e:{for(z=U,U=si;z.nodeType!==8;){if(!U){U=null;break e}if(z=Vr(z.nextSibling),z===null){U=null;break e}}U=z}U!==null?(f.memoizedState={dehydrated:U,treeContext:ms!==null?{id:Ii,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},z=er(18,null,null,0),z.stateNode=U,z.return=f,f.child=z,jn=f,Pt=null,z=!0):z=!1}z||ys(f)}if(U=f.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return My(U)?f.lanes=32:f.lanes=536870912,null;ji(f)}return U=g.children,g=g.fallback,E?(Ta(),E=f.mode,U=Xd({mode:"hidden",children:U},E),g=hs(g,E,m,null),U.return=f,g.return=f,U.sibling=g,f.child=U,E=f.child,E.memoizedState=Q0(m),E.childLanes=Z0(l,I,m),f.memoizedState=X0,g):(Ea(f),J0(f,U))}if(z=l.memoizedState,z!==null&&(U=z.dehydrated,U!==null)){if(w)f.flags&256?(Ea(f),f.flags&=-257,f=ey(l,f,m)):f.memoizedState!==null?(Ta(),f.child=l.child,f.flags|=128,f=null):(Ta(),E=g.fallback,U=f.mode,g=Xd({mode:"visible",children:g.children},U),E=hs(E,U,m,null),E.flags|=2,g.return=f,E.return=f,g.sibling=E,f.child=g,Do(f,l.child,null,m),g=f.child,g.memoizedState=Q0(m),g.childLanes=Z0(l,I,m),f.memoizedState=X0,f=E);else if(Ea(f),My(U)){if(I=U.nextSibling&&U.nextSibling.dataset,I)var ie=I.dgst;I=ie,g=Error(r(419)),g.stack="",g.digest=I,wu({value:g,source:null,stack:null}),f=ey(l,f,m)}else if(un||_u(l,f,m,!1),I=(m&l.childLanes)!==0,un||I){if(I=bt,I!==null&&(g=m&-m,g=(g&42)!==0?1:kg(g),g=(g&(I.suspendedLanes|m))!==0?0:g,g!==0&&g!==z.retryLane))throw z.retryLane=g,bo(l,g),ar(I,l,g),CO;U.data==="$?"||vy(),f=ey(l,f,m)}else U.data==="$?"?(f.flags|=192,f.child=l.child,f=null):(l=z.treeContext,Pt=Vr(U.nextSibling),jn=f,nt=!0,gs=null,si=!1,l!==null&&(yr[vr++]=Ii,yr[vr++]=Pi,yr[vr++]=ms,Ii=l.id,Pi=l.overflow,ms=f),f=J0(f,g.children),f.flags|=4096);return f}return E?(Ta(),E=g.fallback,U=f.mode,z=l.child,ie=z.sibling,g=Di(z,{mode:"hidden",children:g.children}),g.subtreeFlags=z.subtreeFlags&65011712,ie!==null?E=Di(ie,E):(E=hs(E,U,m,null),E.flags|=2),E.return=f,g.return=f,g.sibling=E,f.child=g,g=E,E=f.child,U=l.child.memoizedState,U===null?U=Q0(m):(z=U.cachePool,z!==null?(ie=en._currentValue,z=z.parent!==ie?{parent:ie,pool:ie}:z):z=AR(),U={baseLanes:U.baseLanes|m,cachePool:z}),E.memoizedState=U,E.childLanes=Z0(l,I,m),f.memoizedState=X0,g):(Ea(f),m=l.child,l=m.sibling,m=Di(m,{mode:"visible",children:g.children}),m.return=f,m.sibling=null,l!==null&&(I=f.deletions,I===null?(f.deletions=[l],f.flags|=16):I.push(l)),f.child=m,f.memoizedState=null,m)}function J0(l,f){return f=Xd({mode:"visible",children:f},l.mode),f.return=l,l.child=f}function Xd(l,f){return l=er(22,l,null,f),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function ey(l,f,m){return Do(f,l.child,null,m),l=J0(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function BO(l,f,m){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f),v0(l.return,f,m)}function ty(l,f,m,g,E){var w=l.memoizedState;w===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:g,tail:m,tailMode:E}:(w.isBackwards=f,w.rendering=null,w.renderingStartTime=0,w.last=g,w.tail=m,w.tailMode=E)}function FO(l,f,m){var g=f.pendingProps,E=g.revealOrder,w=g.tail;if(xn(l,f,g.children,m),g=tn.current,(g&2)!==0)g=g&1|2,f.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&BO(l,m,f);else if(l.tag===19)BO(l,m,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break e;for(;l.sibling===null;){if(l.return===null||l.return===f)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}g&=1}switch(te(tn,g),E){case"forwards":for(m=f.child,E=null;m!==null;)l=m.alternate,l!==null&&zd(l)===null&&(E=m),m=m.sibling;m=E,m===null?(E=f.child,f.child=null):(E=m.sibling,m.sibling=null),ty(f,!1,E,m,w);break;case"backwards":for(m=null,E=f.child,f.child=null;E!==null;){if(l=E.alternate,l!==null&&zd(l)===null){f.child=E;break}l=E.sibling,E.sibling=m,m=E,E=l}ty(f,!0,m,null,w);break;case"together":ty(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Ui(l,f,m){if(l!==null&&(f.dependencies=l.dependencies),Oa|=f.lanes,(m&f.childLanes)===0)if(l!==null){if(_u(l,f,m,!1),(m&f.childLanes)===0)return null}else return null;if(l!==null&&f.child!==l.child)throw Error(r(153));if(f.child!==null){for(l=f.child,m=Di(l,l.pendingProps),f.child=m,m.return=f;l.sibling!==null;)l=l.sibling,m=m.sibling=Di(l,l.pendingProps),m.return=f;m.sibling=null}return f.child}function ny(l,f){return(l.lanes&f)!==0?!0:(l=l.dependencies,!!(l!==null&&Ld(l)))}function wq(l,f,m){switch(f.tag){case 3:Re(f,f.stateNode.containerInfo),ya(f,en,l.memoizedState.cache),Au();break;case 27:case 5:Ae(f);break;case 4:Re(f,f.stateNode.containerInfo);break;case 10:ya(f,f.type,f.memoizedProps.value);break;case 13:var g=f.memoizedState;if(g!==null)return g.dehydrated!==null?(Ea(f),f.flags|=128,null):(m&f.child.childLanes)!==0?UO(l,f,m):(Ea(f),l=Ui(l,f,m),l!==null?l.sibling:null);Ea(f);break;case 19:var E=(l.flags&128)!==0;if(g=(m&f.childLanes)!==0,g||(_u(l,f,m,!1),g=(m&f.childLanes)!==0),E){if(g)return FO(l,f,m);f.flags|=128}if(E=f.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),te(tn,tn.current),g)break;return null;case 22:case 23:return f.lanes=0,PO(l,f,m);case 24:ya(f,en,l.memoizedState.cache)}return Ui(l,f,m)}function $O(l,f,m){if(l!==null)if(l.memoizedProps!==f.pendingProps)un=!0;else{if(!ny(l,m)&&(f.flags&128)===0)return un=!1,wq(l,f,m);un=(l.flags&131072)!==0}else un=!1,nt&&(f.flags&1048576)!==0&&yR(f,Cd,f.index);switch(f.lanes=0,f.tag){case 16:e:{l=f.pendingProps;var g=f.elementType,E=g._init;if(g=E(g._payload),f.type=g,typeof g=="function")f0(g)?(l=Es(g,l),f.tag=1,f=kO(null,f,g,l,m)):(f.tag=0,f=W0(null,f,g,l,m));else{if(g!=null){if(E=g.$$typeof,E===O){f.tag=11,f=LO(null,f,g,l,m);break e}else if(E===L){f.tag=14,f=DO(null,f,g,l,m);break e}}throw f=W(g)||g,Error(r(306,f,""))}}return f;case 0:return W0(l,f,f.type,f.pendingProps,m);case 1:return g=f.type,E=Es(g,f.pendingProps),kO(l,f,g,E,m);case 3:e:{if(Re(f,f.stateNode.containerInfo),l===null)throw Error(r(387));g=f.pendingProps;var w=f.memoizedState;E=w.element,w0(l,f),Pu(f,g,null,m);var I=f.memoizedState;if(g=I.cache,ya(f,en,g),g!==w.cache&&x0(f,[en],m,!0),Iu(),g=I.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:I.cache},f.updateQueue.baseState=w,f.memoizedState=w,f.flags&256){f=jO(l,f,g,m);break e}else if(g!==E){E=pr(Error(r(424)),f),wu(E),f=jO(l,f,g,m);break e}else{switch(l=f.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Pt=Vr(l.firstChild),jn=f,nt=!0,gs=null,si=!0,m=xO(f,null,g,m),f.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Au(),g===E){f=Ui(l,f,m);break e}xn(l,f,g,m)}f=f.child}return f;case 26:return Wd(l,f),l===null?(m=HC(f.type,null,f.pendingProps,null))?f.memoizedState=m:nt||(m=f.type,l=f.pendingProps,g=ch(ge.current).createElement(m),g[On]=f,g[$n]=l,Sn(g,m,l),ln(g),f.stateNode=g):f.memoizedState=HC(f.type,l.memoizedProps,f.pendingProps,l.memoizedState),null;case 27:return Ae(f),l===null&&nt&&(g=f.stateNode=GC(f.type,f.pendingProps,ge.current),jn=f,si=!0,E=Pt,Ia(f.type)?(ky=E,Pt=Vr(g.firstChild)):Pt=E),xn(l,f,f.pendingProps.children,m),Wd(l,f),l===null&&(f.flags|=4194304),f.child;case 5:return l===null&&nt&&((E=g=Pt)&&(g=Jq(g,f.type,f.pendingProps,si),g!==null?(f.stateNode=g,jn=f,Pt=Vr(g.firstChild),si=!1,E=!0):E=!1),E||ys(f)),Ae(f),E=f.type,w=f.pendingProps,I=l!==null?l.memoizedProps:null,g=w.children,Iy(E,w)?g=null:I!==null&&Iy(E,I)&&(f.flags|=32),f.memoizedState!==null&&(E=D0(l,f,yq,null,null,m),tc._currentValue=E),Wd(l,f),xn(l,f,g,m),f.child;case 6:return l===null&&nt&&((l=m=Pt)&&(m=eH(m,f.pendingProps,si),m!==null?(f.stateNode=m,jn=f,Pt=null,l=!0):l=!1),l||ys(f)),null;case 13:return UO(l,f,m);case 4:return Re(f,f.stateNode.containerInfo),g=f.pendingProps,l===null?f.child=Do(f,null,g,m):xn(l,f,g,m),f.child;case 11:return LO(l,f,f.type,f.pendingProps,m);case 7:return xn(l,f,f.pendingProps,m),f.child;case 8:return xn(l,f,f.pendingProps.children,m),f.child;case 12:return xn(l,f,f.pendingProps.children,m),f.child;case 10:return g=f.pendingProps,ya(f,f.type,g.value),xn(l,f,g.children,m),f.child;case 9:return E=f.type._context,g=f.pendingProps.children,xs(f),E=Cn(E),g=g(E),f.flags|=1,xn(l,f,g,m),f.child;case 14:return DO(l,f,f.type,f.pendingProps,m);case 15:return IO(l,f,f.type,f.pendingProps,m);case 19:return FO(l,f,m);case 31:return g=f.pendingProps,m=f.mode,g={mode:g.mode,children:g.children},l===null?(m=Xd(g,m),m.ref=f.ref,f.child=m,m.return=f,f=m):(m=Di(l.child,g),m.ref=f.ref,f.child=m,m.return=f,f=m),f;case 22:return PO(l,f,m);case 24:return xs(f),g=Cn(en),l===null?(E=E0(),E===null&&(E=bt,w=b0(),E.pooledCache=w,w.refCount++,w!==null&&(E.pooledCacheLanes|=m),E=w),f.memoizedState={parent:g,cache:E},A0(f),ya(f,en,E)):((l.lanes&m)!==0&&(w0(l,f),Pu(f,null,null,m),Iu()),E=l.memoizedState,w=f.memoizedState,E.parent!==g?(E={parent:g,cache:g},f.memoizedState=E,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=E),ya(f,en,g)):(g=w.cache,ya(f,en,g),g!==E.cache&&x0(f,[en],m,!0))),xn(l,f,f.pendingProps.children,m),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function Bi(l){l.flags|=4}function GO(l,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!XC(f)){if(f=xr.current,f!==null&&((Qe&4194048)===Qe?oi!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||f!==oi))throw Lu=T0,wR;l.flags|=8192}}function Qd(l,f){f!==null&&(l.flags|=4),l.flags&16384&&(f=l.tag!==22?b_():536870912,l.lanes|=f,Mo|=f)}function Fu(l,f){if(!nt)switch(l.tailMode){case"hidden":f=l.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var g=null;m!==null;)m.alternate!==null&&(g=m),m=m.sibling;g===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Ot(l){var f=l.alternate!==null&&l.alternate.child===l.child,m=0,g=0;if(f)for(var E=l.child;E!==null;)m|=E.lanes|E.childLanes,g|=E.subtreeFlags&65011712,g|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)m|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=g,l.childLanes=m,f}function _q(l,f,m){var g=f.pendingProps;switch(p0(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(f),null;case 1:return Ot(f),null;case 3:return m=f.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),Mi(en),pe(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(l===null||l.child===null)&&(Tu(f)?Bi(f):l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,bR())),Ot(f),null;case 26:return m=f.memoizedState,l===null?(Bi(f),m!==null?(Ot(f),GO(f,m)):(Ot(f),f.flags&=-16777217)):m?m!==l.memoizedState?(Bi(f),Ot(f),GO(f,m)):(Ot(f),f.flags&=-16777217):(l.memoizedProps!==g&&Bi(f),Ot(f),f.flags&=-16777217),null;case 27:Oe(f),m=ge.current;var E=f.type;if(l!==null&&f.stateNode!=null)l.memoizedProps!==g&&Bi(f);else{if(!g){if(f.stateNode===null)throw Error(r(166));return Ot(f),null}l=ce.current,Tu(f)?vR(f):(l=GC(E,g,m),f.stateNode=l,Bi(f))}return Ot(f),null;case 5:if(Oe(f),m=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==g&&Bi(f);else{if(!g){if(f.stateNode===null)throw Error(r(166));return Ot(f),null}if(l=ce.current,Tu(f))vR(f);else{switch(E=ch(ge.current),l){case 1:l=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:l=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":l=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":l=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":l=E.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof g.is=="string"?E.createElement("select",{is:g.is}):E.createElement("select"),g.multiple?l.multiple=!0:g.size&&(l.size=g.size);break;default:l=typeof g.is=="string"?E.createElement(m,{is:g.is}):E.createElement(m)}}l[On]=f,l[$n]=g;e:for(E=f.child;E!==null;){if(E.tag===5||E.tag===6)l.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===f)break e;for(;E.sibling===null;){if(E.return===null||E.return===f)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}f.stateNode=l;e:switch(Sn(l,m,g),m){case"button":case"input":case"select":case"textarea":l=!!g.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Bi(f)}}return Ot(f),f.flags&=-16777217,null;case 6:if(l&&f.stateNode!=null)l.memoizedProps!==g&&Bi(f);else{if(typeof g!="string"&&f.stateNode===null)throw Error(r(166));if(l=ge.current,Tu(f)){if(l=f.stateNode,m=f.memoizedProps,g=null,E=jn,E!==null)switch(E.tag){case 27:case 5:g=E.memoizedProps}l[On]=f,l=!!(l.nodeValue===m||g!==null&&g.suppressHydrationWarning===!0||MC(l.nodeValue,m)),l||ys(f)}else l=ch(l).createTextNode(g),l[On]=f,f.stateNode=l}return Ot(f),null;case 13:if(g=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=Tu(f),g!==null&&g.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=f.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[On]=f}else Au(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ot(f),E=!1}else E=bR(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return f.flags&256?(ji(f),f):(ji(f),null)}if(ji(f),(f.flags&128)!==0)return f.lanes=m,f;if(m=g!==null,l=l!==null&&l.memoizedState!==null,m){g=f.child,E=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(E=g.alternate.memoizedState.cachePool.pool);var w=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(w=g.memoizedState.cachePool.pool),w!==E&&(g.flags|=2048)}return m!==l&&m&&(f.child.flags|=8192),Qd(f,f.updateQueue),Ot(f),null;case 4:return pe(),l===null&&Ry(f.stateNode.containerInfo),Ot(f),null;case 10:return Mi(f.type),Ot(f),null;case 19:if(H(tn),E=f.memoizedState,E===null)return Ot(f),null;if(g=(f.flags&128)!==0,w=E.rendering,w===null)if(g)Fu(E,!1);else{if(Nt!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(w=zd(l),w!==null){for(f.flags|=128,Fu(E,!1),l=w.updateQueue,f.updateQueue=l,Qd(f,l),f.subtreeFlags=0,l=m,m=f.child;m!==null;)gR(m,l),m=m.sibling;return te(tn,tn.current&1|2),f.child}l=l.sibling}E.tail!==null&&je()>eh&&(f.flags|=128,g=!0,Fu(E,!1),f.lanes=4194304)}else{if(!g)if(l=zd(w),l!==null){if(f.flags|=128,g=!0,l=l.updateQueue,f.updateQueue=l,Qd(f,l),Fu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!w.alternate&&!nt)return Ot(f),null}else 2*je()-E.renderingStartTime>eh&&m!==536870912&&(f.flags|=128,g=!0,Fu(E,!1),f.lanes=4194304);E.isBackwards?(w.sibling=f.child,f.child=w):(l=E.last,l!==null?l.sibling=w:f.child=w,E.last=w)}return E.tail!==null?(f=E.tail,E.rendering=f,E.tail=f.sibling,E.renderingStartTime=je(),f.sibling=null,l=tn.current,te(tn,g?l&1|2:l&1),f):(Ot(f),null);case 22:case 23:return ji(f),C0(),g=f.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(f.flags|=8192):g&&(f.flags|=8192),g?(m&536870912)!==0&&(f.flags&128)===0&&(Ot(f),f.subtreeFlags&6&&(f.flags|=8192)):Ot(f),m=f.updateQueue,m!==null&&Qd(f,m.retryQueue),m=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),g=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(g=f.memoizedState.cachePool.pool),g!==m&&(f.flags|=2048),l!==null&&H(bs),null;case 24:return m=null,l!==null&&(m=l.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),Mi(en),Ot(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function Rq(l,f){switch(p0(f),f.tag){case 1:return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return Mi(en),pe(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 26:case 27:case 5:return Oe(f),null;case 13:if(ji(f),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Au()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return H(tn),null;case 4:return pe(),null;case 10:return Mi(f.type),null;case 22:case 23:return ji(f),C0(),l!==null&&H(bs),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 24:return Mi(en),null;case 25:return null;default:return null}}function VO(l,f){switch(p0(f),f.tag){case 3:Mi(en),pe();break;case 26:case 27:case 5:Oe(f);break;case 4:pe();break;case 13:ji(f);break;case 19:H(tn);break;case 10:Mi(f.type);break;case 22:case 23:ji(f),C0(),l!==null&&H(bs);break;case 24:Mi(en)}}function $u(l,f){try{var m=f.updateQueue,g=m!==null?m.lastEffect:null;if(g!==null){var E=g.next;m=E;do{if((m.tag&l)===l){g=void 0;var w=m.create,I=m.inst;g=w(),I.destroy=g}m=m.next}while(m!==E)}}catch(U){pt(f,f.return,U)}}function Aa(l,f,m){try{var g=f.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var w=E.next;g=w;do{if((g.tag&l)===l){var I=g.inst,U=I.destroy;if(U!==void 0){I.destroy=void 0,E=f;var z=m,ie=U;try{ie()}catch(ue){pt(E,z,ue)}}}g=g.next}while(g!==w)}}catch(ue){pt(f,f.return,ue)}}function qO(l){var f=l.updateQueue;if(f!==null){var m=l.stateNode;try{DR(f,m)}catch(g){pt(l,l.return,g)}}}function HO(l,f,m){m.props=Es(l.type,l.memoizedProps),m.state=l.memoizedState;try{m.componentWillUnmount()}catch(g){pt(l,f,g)}}function Gu(l,f){try{var m=l.ref;if(m!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof m=="function"?l.refCleanup=m(g):m.current=g}}catch(E){pt(l,f,E)}}function li(l,f){var m=l.ref,g=l.refCleanup;if(m!==null)if(typeof g=="function")try{g()}catch(E){pt(l,f,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(E){pt(l,f,E)}else m.current=null}function zO(l){var f=l.type,m=l.memoizedProps,g=l.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":m.autoFocus&&g.focus();break e;case"img":m.src?g.src=m.src:m.srcSet&&(g.srcset=m.srcSet)}}catch(E){pt(l,l.return,E)}}function ry(l,f,m){try{var g=l.stateNode;Yq(g,l.type,m,f),g[$n]=f}catch(E){pt(l,l.return,E)}}function KO(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Ia(l.type)||l.tag===4}function iy(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||KO(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Ia(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function ay(l,f,m){var g=l.tag;if(g===5||g===6)l=l.stateNode,f?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(l,f):(f=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,f.appendChild(l),m=m._reactRootContainer,m!=null||f.onclick!==null||(f.onclick=uh));else if(g!==4&&(g===27&&Ia(l.type)&&(m=l.stateNode,f=null),l=l.child,l!==null))for(ay(l,f,m),l=l.sibling;l!==null;)ay(l,f,m),l=l.sibling}function Zd(l,f,m){var g=l.tag;if(g===5||g===6)l=l.stateNode,f?m.insertBefore(l,f):m.appendChild(l);else if(g!==4&&(g===27&&Ia(l.type)&&(m=l.stateNode),l=l.child,l!==null))for(Zd(l,f,m),l=l.sibling;l!==null;)Zd(l,f,m),l=l.sibling}function YO(l){var f=l.stateNode,m=l.memoizedProps;try{for(var g=l.type,E=f.attributes;E.length;)f.removeAttributeNode(E[0]);Sn(f,g,m),f[On]=l,f[$n]=m}catch(w){pt(l,l.return,w)}}var Fi=!1,Ut=!1,sy=!1,WO=typeof WeakSet=="function"?WeakSet:Set,cn=null;function Oq(l,f){if(l=l.containerInfo,Ly=gh,l=sR(l),i0(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var g=m.getSelection&&m.getSelection();if(g&&g.rangeCount!==0){m=g.anchorNode;var E=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{m.nodeType,w.nodeType}catch{m=null;break e}var I=0,U=-1,z=-1,ie=0,ue=0,he=l,ae=null;t:for(;;){for(var se;he!==m||E!==0&&he.nodeType!==3||(U=I+E),he!==w||g!==0&&he.nodeType!==3||(z=I+g),he.nodeType===3&&(I+=he.nodeValue.length),(se=he.firstChild)!==null;)ae=he,he=se;for(;;){if(he===l)break t;if(ae===m&&++ie===E&&(U=I),ae===w&&++ue===g&&(z=I),(se=he.nextSibling)!==null)break;he=ae,ae=he.parentNode}he=se}m=U===-1||z===-1?null:{start:U,end:z}}else m=null}m=m||{start:0,end:0}}else m=null;for(Dy={focusedElem:l,selectionRange:m},gh=!1,cn=f;cn!==null;)if(f=cn,l=f.child,(f.subtreeFlags&1024)!==0&&l!==null)l.return=f,cn=l;else for(;cn!==null;){switch(f=cn,w=f.alternate,l=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&w!==null){l=void 0,m=f,E=w.memoizedProps,w=w.memoizedState,g=m.stateNode;try{var Ie=Es(m.type,E,m.elementType===m.type);l=g.getSnapshotBeforeUpdate(Ie,w),g.__reactInternalSnapshotBeforeUpdate=l}catch(Ce){pt(m,m.return,Ce)}}break;case 3:if((l&1024)!==0){if(l=f.stateNode.containerInfo,m=l.nodeType,m===9)Ny(l);else if(m===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Ny(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=f.sibling,l!==null){l.return=f.return,cn=l;break}cn=f.return}}function XO(l,f,m){var g=m.flags;switch(m.tag){case 0:case 11:case 15:wa(l,m),g&4&&$u(5,m);break;case 1:if(wa(l,m),g&4)if(l=m.stateNode,f===null)try{l.componentDidMount()}catch(I){pt(m,m.return,I)}else{var E=Es(m.type,f.memoizedProps);f=f.memoizedState;try{l.componentDidUpdate(E,f,l.__reactInternalSnapshotBeforeUpdate)}catch(I){pt(m,m.return,I)}}g&64&&qO(m),g&512&&Gu(m,m.return);break;case 3:if(wa(l,m),g&64&&(l=m.updateQueue,l!==null)){if(f=null,m.child!==null)switch(m.child.tag){case 27:case 5:f=m.child.stateNode;break;case 1:f=m.child.stateNode}try{DR(l,f)}catch(I){pt(m,m.return,I)}}break;case 27:f===null&&g&4&&YO(m);case 26:case 5:wa(l,m),f===null&&g&4&&zO(m),g&512&&Gu(m,m.return);break;case 12:wa(l,m);break;case 13:wa(l,m),g&4&&JO(l,m),g&64&&(l=m.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(m=jq.bind(null,m),tH(l,m))));break;case 22:if(g=m.memoizedState!==null||Fi,!g){f=f!==null&&f.memoizedState!==null||Ut,E=Fi;var w=Ut;Fi=g,(Ut=f)&&!w?_a(l,m,(m.subtreeFlags&8772)!==0):wa(l,m),Fi=E,Ut=w}break;case 30:break;default:wa(l,m)}}function QO(l){var f=l.alternate;f!==null&&(l.alternate=null,QO(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&Bg(f)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var At=null,qn=!1;function $i(l,f,m){for(m=m.child;m!==null;)ZO(l,f,m),m=m.sibling}function ZO(l,f,m){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Fr,m)}catch{}switch(m.tag){case 26:Ut||li(m,f),$i(l,f,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Ut||li(m,f);var g=At,E=qn;Ia(m.type)&&(At=m.stateNode,qn=!1),$i(l,f,m),Qu(m.stateNode),At=g,qn=E;break;case 5:Ut||li(m,f);case 6:if(g=At,E=qn,At=null,$i(l,f,m),At=g,qn=E,At!==null)if(qn)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(m.stateNode)}catch(w){pt(m,f,w)}else try{At.removeChild(m.stateNode)}catch(w){pt(m,f,w)}break;case 18:At!==null&&(qn?(l=At,FC(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,m.stateNode),ac(l)):FC(At,m.stateNode));break;case 4:g=At,E=qn,At=m.stateNode.containerInfo,qn=!0,$i(l,f,m),At=g,qn=E;break;case 0:case 11:case 14:case 15:Ut||Aa(2,m,f),Ut||Aa(4,m,f),$i(l,f,m);break;case 1:Ut||(li(m,f),g=m.stateNode,typeof g.componentWillUnmount=="function"&&HO(m,f,g)),$i(l,f,m);break;case 21:$i(l,f,m);break;case 22:Ut=(g=Ut)||m.memoizedState!==null,$i(l,f,m),Ut=g;break;default:$i(l,f,m)}}function JO(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{ac(l)}catch(m){pt(f,f.return,m)}}function Cq(l){switch(l.tag){case 13:case 19:var f=l.stateNode;return f===null&&(f=l.stateNode=new WO),f;case 22:return l=l.stateNode,f=l._retryCache,f===null&&(f=l._retryCache=new WO),f;default:throw Error(r(435,l.tag))}}function oy(l,f){var m=Cq(l);f.forEach(function(g){var E=Uq.bind(null,l,g);m.has(g)||(m.add(g),g.then(E,E))})}function tr(l,f){var m=f.deletions;if(m!==null)for(var g=0;g<m.length;g++){var E=m[g],w=l,I=f,U=I;e:for(;U!==null;){switch(U.tag){case 27:if(Ia(U.type)){At=U.stateNode,qn=!1;break e}break;case 5:At=U.stateNode,qn=!1;break e;case 3:case 4:At=U.stateNode.containerInfo,qn=!0;break e}U=U.return}if(At===null)throw Error(r(160));ZO(w,I,E),At=null,qn=!1,w=E.alternate,w!==null&&(w.return=null),E.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)eC(f,l),f=f.sibling}var Gr=null;function eC(l,f){var m=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:tr(f,l),nr(l),g&4&&(Aa(3,l,l.return),$u(3,l),Aa(5,l,l.return));break;case 1:tr(f,l),nr(l),g&512&&(Ut||m===null||li(m,m.return)),g&64&&Fi&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(m=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=m===null?g:m.concat(g))));break;case 26:var E=Gr;if(tr(f,l),nr(l),g&512&&(Ut||m===null||li(m,m.return)),g&4){var w=m!==null?m.memoizedState:null;if(g=l.memoizedState,m===null)if(g===null)if(l.stateNode===null){e:{g=l.type,m=l.memoizedProps,E=E.ownerDocument||E;t:switch(g){case"title":w=E.getElementsByTagName("title")[0],(!w||w[du]||w[On]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=E.createElement(g),E.head.insertBefore(w,E.querySelector("head > title"))),Sn(w,g,m),w[On]=l,ln(w),g=w;break e;case"link":var I=YC("link","href",E).get(g+(m.href||""));if(I){for(var U=0;U<I.length;U++)if(w=I[U],w.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&w.getAttribute("rel")===(m.rel==null?null:m.rel)&&w.getAttribute("title")===(m.title==null?null:m.title)&&w.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){I.splice(U,1);break t}}w=E.createElement(g),Sn(w,g,m),E.head.appendChild(w);break;case"meta":if(I=YC("meta","content",E).get(g+(m.content||""))){for(U=0;U<I.length;U++)if(w=I[U],w.getAttribute("content")===(m.content==null?null:""+m.content)&&w.getAttribute("name")===(m.name==null?null:m.name)&&w.getAttribute("property")===(m.property==null?null:m.property)&&w.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&w.getAttribute("charset")===(m.charSet==null?null:m.charSet)){I.splice(U,1);break t}}w=E.createElement(g),Sn(w,g,m),E.head.appendChild(w);break;default:throw Error(r(468,g))}w[On]=l,ln(w),g=w}l.stateNode=g}else WC(E,l.type,l.stateNode);else l.stateNode=KC(E,g,l.memoizedProps);else w!==g?(w===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):w.count--,g===null?WC(E,l.type,l.stateNode):KC(E,g,l.memoizedProps)):g===null&&l.stateNode!==null&&ry(l,l.memoizedProps,m.memoizedProps)}break;case 27:tr(f,l),nr(l),g&512&&(Ut||m===null||li(m,m.return)),m!==null&&g&4&&ry(l,l.memoizedProps,m.memoizedProps);break;case 5:if(tr(f,l),nr(l),g&512&&(Ut||m===null||li(m,m.return)),l.flags&32){E=l.stateNode;try{ho(E,"")}catch(se){pt(l,l.return,se)}}g&4&&l.stateNode!=null&&(E=l.memoizedProps,ry(l,E,m!==null?m.memoizedProps:E)),g&1024&&(sy=!0);break;case 6:if(tr(f,l),nr(l),g&4){if(l.stateNode===null)throw Error(r(162));g=l.memoizedProps,m=l.stateNode;try{m.nodeValue=g}catch(se){pt(l,l.return,se)}}break;case 3:if(hh=null,E=Gr,Gr=fh(f.containerInfo),tr(f,l),Gr=E,nr(l),g&4&&m!==null&&m.memoizedState.isDehydrated)try{ac(f.containerInfo)}catch(se){pt(l,l.return,se)}sy&&(sy=!1,tC(l));break;case 4:g=Gr,Gr=fh(l.stateNode.containerInfo),tr(f,l),nr(l),Gr=g;break;case 12:tr(f,l),nr(l);break;case 13:tr(f,l),nr(l),l.child.flags&8192&&l.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(hy=je()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,oy(l,g)));break;case 22:E=l.memoizedState!==null;var z=m!==null&&m.memoizedState!==null,ie=Fi,ue=Ut;if(Fi=ie||E,Ut=ue||z,tr(f,l),Ut=ue,Fi=ie,nr(l),g&8192)e:for(f=l.stateNode,f._visibility=E?f._visibility&-2:f._visibility|1,E&&(m===null||z||Fi||Ut||Ts(l)),m=null,f=l;;){if(f.tag===5||f.tag===26){if(m===null){z=m=f;try{if(w=z.stateNode,E)I=w.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{U=z.stateNode;var he=z.memoizedProps.style,ae=he!=null&&he.hasOwnProperty("display")?he.display:null;U.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(se){pt(z,z.return,se)}}}else if(f.tag===6){if(m===null){z=f;try{z.stateNode.nodeValue=E?"":z.memoizedProps}catch(se){pt(z,z.return,se)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===l)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break e;for(;f.sibling===null;){if(f.return===null||f.return===l)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}g&4&&(g=l.updateQueue,g!==null&&(m=g.retryQueue,m!==null&&(g.retryQueue=null,oy(l,m))));break;case 19:tr(f,l),nr(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,oy(l,g)));break;case 30:break;case 21:break;default:tr(f,l),nr(l)}}function nr(l){var f=l.flags;if(f&2){try{for(var m,g=l.return;g!==null;){if(KO(g)){m=g;break}g=g.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var E=m.stateNode,w=iy(l);Zd(l,w,E);break;case 5:var I=m.stateNode;m.flags&32&&(ho(I,""),m.flags&=-33);var U=iy(l);Zd(l,U,I);break;case 3:case 4:var z=m.stateNode.containerInfo,ie=iy(l);ay(l,ie,z);break;default:throw Error(r(161))}}catch(ue){pt(l,l.return,ue)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function tC(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var f=l;tC(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),l=l.sibling}}function wa(l,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)XO(l,f.alternate,f),f=f.sibling}function Ts(l){for(l=l.child;l!==null;){var f=l;switch(f.tag){case 0:case 11:case 14:case 15:Aa(4,f,f.return),Ts(f);break;case 1:li(f,f.return);var m=f.stateNode;typeof m.componentWillUnmount=="function"&&HO(f,f.return,m),Ts(f);break;case 27:Qu(f.stateNode);case 26:case 5:li(f,f.return),Ts(f);break;case 22:f.memoizedState===null&&Ts(f);break;case 30:Ts(f);break;default:Ts(f)}l=l.sibling}}function _a(l,f,m){for(m=m&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var g=f.alternate,E=l,w=f,I=w.flags;switch(w.tag){case 0:case 11:case 15:_a(E,w,m),$u(4,w);break;case 1:if(_a(E,w,m),g=w,E=g.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ie){pt(g,g.return,ie)}if(g=w,E=g.updateQueue,E!==null){var U=g.stateNode;try{var z=E.shared.hiddenCallbacks;if(z!==null)for(E.shared.hiddenCallbacks=null,E=0;E<z.length;E++)LR(z[E],U)}catch(ie){pt(g,g.return,ie)}}m&&I&64&&qO(w),Gu(w,w.return);break;case 27:YO(w);case 26:case 5:_a(E,w,m),m&&g===null&&I&4&&zO(w),Gu(w,w.return);break;case 12:_a(E,w,m);break;case 13:_a(E,w,m),m&&I&4&&JO(E,w);break;case 22:w.memoizedState===null&&_a(E,w,m),Gu(w,w.return);break;case 30:break;default:_a(E,w,m)}f=f.sibling}}function ly(l,f){var m=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),l=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(l=f.memoizedState.cachePool.pool),l!==m&&(l!=null&&l.refCount++,m!=null&&Ru(m))}function uy(l,f){l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&Ru(l))}function ui(l,f,m,g){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)nC(l,f,m,g),f=f.sibling}function nC(l,f,m,g){var E=f.flags;switch(f.tag){case 0:case 11:case 15:ui(l,f,m,g),E&2048&&$u(9,f);break;case 1:ui(l,f,m,g);break;case 3:ui(l,f,m,g),E&2048&&(l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&Ru(l)));break;case 12:if(E&2048){ui(l,f,m,g),l=f.stateNode;try{var w=f.memoizedProps,I=w.id,U=w.onPostCommit;typeof U=="function"&&U(I,f.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(z){pt(f,f.return,z)}}else ui(l,f,m,g);break;case 13:ui(l,f,m,g);break;case 23:break;case 22:w=f.stateNode,I=f.alternate,f.memoizedState!==null?w._visibility&2?ui(l,f,m,g):Vu(l,f):w._visibility&2?ui(l,f,m,g):(w._visibility|=2,Io(l,f,m,g,(f.subtreeFlags&10256)!==0)),E&2048&&ly(I,f);break;case 24:ui(l,f,m,g),E&2048&&uy(f.alternate,f);break;default:ui(l,f,m,g)}}function Io(l,f,m,g,E){for(E=E&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var w=l,I=f,U=m,z=g,ie=I.flags;switch(I.tag){case 0:case 11:case 15:Io(w,I,U,z,E),$u(8,I);break;case 23:break;case 22:var ue=I.stateNode;I.memoizedState!==null?ue._visibility&2?Io(w,I,U,z,E):Vu(w,I):(ue._visibility|=2,Io(w,I,U,z,E)),E&&ie&2048&&ly(I.alternate,I);break;case 24:Io(w,I,U,z,E),E&&ie&2048&&uy(I.alternate,I);break;default:Io(w,I,U,z,E)}f=f.sibling}}function Vu(l,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var m=l,g=f,E=g.flags;switch(g.tag){case 22:Vu(m,g),E&2048&&ly(g.alternate,g);break;case 24:Vu(m,g),E&2048&&uy(g.alternate,g);break;default:Vu(m,g)}f=f.sibling}}var qu=8192;function Po(l){if(l.subtreeFlags&qu)for(l=l.child;l!==null;)rC(l),l=l.sibling}function rC(l){switch(l.tag){case 26:Po(l),l.flags&qu&&l.memoizedState!==null&&mH(Gr,l.memoizedState,l.memoizedProps);break;case 5:Po(l);break;case 3:case 4:var f=Gr;Gr=fh(l.stateNode.containerInfo),Po(l),Gr=f;break;case 22:l.memoizedState===null&&(f=l.alternate,f!==null&&f.memoizedState!==null?(f=qu,qu=16777216,Po(l),qu=f):Po(l));break;default:Po(l)}}function iC(l){var f=l.alternate;if(f!==null&&(l=f.child,l!==null)){f.child=null;do f=l.sibling,l.sibling=null,l=f;while(l!==null)}}function Hu(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var g=f[m];cn=g,sC(g,l)}iC(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)aC(l),l=l.sibling}function aC(l){switch(l.tag){case 0:case 11:case 15:Hu(l),l.flags&2048&&Aa(9,l,l.return);break;case 3:Hu(l);break;case 12:Hu(l);break;case 22:var f=l.stateNode;l.memoizedState!==null&&f._visibility&2&&(l.return===null||l.return.tag!==13)?(f._visibility&=-3,Jd(l)):Hu(l);break;default:Hu(l)}}function Jd(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var g=f[m];cn=g,sC(g,l)}iC(l)}for(l=l.child;l!==null;){switch(f=l,f.tag){case 0:case 11:case 15:Aa(8,f,f.return),Jd(f);break;case 22:m=f.stateNode,m._visibility&2&&(m._visibility&=-3,Jd(f));break;default:Jd(f)}l=l.sibling}}function sC(l,f){for(;cn!==null;){var m=cn;switch(m.tag){case 0:case 11:case 15:Aa(8,m,f);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var g=m.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Ru(m.memoizedState.cache)}if(g=m.child,g!==null)g.return=m,cn=g;else e:for(m=l;cn!==null;){g=cn;var E=g.sibling,w=g.return;if(QO(g),g===m){cn=null;break e}if(E!==null){E.return=w,cn=E;break e}cn=w}}}var Lq={getCacheForType:function(l){var f=Cn(en),m=f.data.get(l);return m===void 0&&(m=l(),f.data.set(l,m)),m}},Dq=typeof WeakMap=="function"?WeakMap:Map,st=0,bt=null,ze=null,Qe=0,ot=0,rr=null,Ra=!1,No=!1,cy=!1,Gi=0,Nt=0,Oa=0,As=0,fy=0,br=0,Mo=0,zu=null,Hn=null,dy=!1,hy=0,eh=1/0,th=null,Ca=null,bn=0,La=null,ko=null,jo=0,my=0,py=null,oC=null,Ku=0,gy=null;function ir(){if((st&2)!==0&&Qe!==0)return Qe&-Qe;if(j.T!==null){var l=Ao;return l!==0?l:Ty()}return T_()}function lC(){br===0&&(br=(Qe&536870912)===0||nt?x_():536870912);var l=xr.current;return l!==null&&(l.flags|=32),br}function ar(l,f,m){(l===bt&&(ot===2||ot===9)||l.cancelPendingCommit!==null)&&(Uo(l,0),Da(l,Qe,br,!1)),fu(l,m),((st&2)===0||l!==bt)&&(l===bt&&((st&2)===0&&(As|=m),Nt===4&&Da(l,Qe,br,!1)),ci(l))}function uC(l,f,m){if((st&6)!==0)throw Error(r(327));var g=!m&&(f&124)===0&&(f&l.expiredLanes)===0||cu(l,f),E=g?Nq(l,f):xy(l,f,!0),w=g;do{if(E===0){No&&!g&&Da(l,f,0,!1);break}else{if(m=l.current.alternate,w&&!Iq(m)){E=xy(l,f,!1),w=!1;continue}if(E===2){if(w=f,l.errorRecoveryDisabledLanes&w)var I=0;else I=l.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){f=I;e:{var U=l;E=zu;var z=U.current.memoizedState.isDehydrated;if(z&&(Uo(U,I).flags|=256),I=xy(U,I,!1),I!==2){if(cy&&!z){U.errorRecoveryDisabledLanes|=w,As|=w,E=4;break e}w=Hn,Hn=E,w!==null&&(Hn===null?Hn=w:Hn.push.apply(Hn,w))}E=I}if(w=!1,E!==2)continue}}if(E===1){Uo(l,0),Da(l,f,0,!0);break}e:{switch(g=l,w=E,w){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:Da(g,f,br,!Ra);break e;case 2:Hn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(E=hy+300-je(),10<E)){if(Da(g,f,br,!Ra),dd(g,0,!0)!==0)break e;g.timeoutHandle=UC(cC.bind(null,g,m,Hn,th,dy,f,br,As,Mo,Ra,w,2,-0,0),E);break e}cC(g,m,Hn,th,dy,f,br,As,Mo,Ra,w,0,-0,0)}}break}while(!0);ci(l)}function cC(l,f,m,g,E,w,I,U,z,ie,ue,he,ae,se){if(l.timeoutHandle=-1,he=f.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(ec={stylesheets:null,count:0,unsuspend:hH},rC(f),he=pH(),he!==null)){l.cancelPendingCommit=he(yC.bind(null,l,f,w,m,g,E,I,U,z,ue,1,ae,se)),Da(l,w,I,!ie);return}yC(l,f,w,m,g,E,I,U,z)}function Iq(l){for(var f=l;;){var m=f.tag;if((m===0||m===11||m===15)&&f.flags&16384&&(m=f.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var g=0;g<m.length;g++){var E=m[g],w=E.getSnapshot;E=E.value;try{if(!Jn(w(),E))return!1}catch{return!1}}if(m=f.child,f.subtreeFlags&16384&&m!==null)m.return=f,f=m;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Da(l,f,m,g){f&=~fy,f&=~As,l.suspendedLanes|=f,l.pingedLanes&=~f,g&&(l.warmLanes|=f),g=l.expirationTimes;for(var E=f;0<E;){var w=31-Rn(E),I=1<<w;g[w]=-1,E&=~I}m!==0&&S_(l,m,f)}function nh(){return(st&6)===0?(Yu(0),!1):!0}function yy(){if(ze!==null){if(ot===0)var l=ze.return;else l=ze,Ni=vs=null,N0(l),Lo=null,Uu=0,l=ze;for(;l!==null;)VO(l.alternate,l),l=l.return;ze=null}}function Uo(l,f){var m=l.timeoutHandle;m!==-1&&(l.timeoutHandle=-1,Xq(m)),m=l.cancelPendingCommit,m!==null&&(l.cancelPendingCommit=null,m()),yy(),bt=l,ze=m=Di(l.current,null),Qe=f,ot=0,rr=null,Ra=!1,No=cu(l,f),cy=!1,Mo=br=fy=As=Oa=Nt=0,Hn=zu=null,dy=!1,(f&8)!==0&&(f|=f&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=f;0<g;){var E=31-Rn(g),w=1<<E;f|=l[E],g&=~w}return Gi=f,Ad(),m}function fC(l,f){$e=null,j.H=Vd,f===Cu||f===Pd?(f=OR(),ot=3):f===wR?(f=OR(),ot=4):ot=f===CO?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,rr=f,ze===null&&(Nt=1,Yd(l,pr(f,l.current)))}function dC(){var l=j.H;return j.H=Vd,l===null?Vd:l}function hC(){var l=j.A;return j.A=Lq,l}function vy(){Nt=4,Ra||(Qe&4194048)!==Qe&&xr.current!==null||(No=!0),(Oa&134217727)===0&&(As&134217727)===0||bt===null||Da(bt,Qe,br,!1)}function xy(l,f,m){var g=st;st|=2;var E=dC(),w=hC();(bt!==l||Qe!==f)&&(th=null,Uo(l,f)),f=!1;var I=Nt;e:do try{if(ot!==0&&ze!==null){var U=ze,z=rr;switch(ot){case 8:yy(),I=6;break e;case 3:case 2:case 9:case 6:xr.current===null&&(f=!0);var ie=ot;if(ot=0,rr=null,Bo(l,U,z,ie),m&&No){I=0;break e}break;default:ie=ot,ot=0,rr=null,Bo(l,U,z,ie)}}Pq(),I=Nt;break}catch(ue){fC(l,ue)}while(!0);return f&&l.shellSuspendCounter++,Ni=vs=null,st=g,j.H=E,j.A=w,ze===null&&(bt=null,Qe=0,Ad()),I}function Pq(){for(;ze!==null;)mC(ze)}function Nq(l,f){var m=st;st|=2;var g=dC(),E=hC();bt!==l||Qe!==f?(th=null,eh=je()+500,Uo(l,f)):No=cu(l,f);e:do try{if(ot!==0&&ze!==null){f=ze;var w=rr;t:switch(ot){case 1:ot=0,rr=null,Bo(l,f,w,1);break;case 2:case 9:if(_R(w)){ot=0,rr=null,pC(f);break}f=function(){ot!==2&&ot!==9||bt!==l||(ot=7),ci(l)},w.then(f,f);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:_R(w)?(ot=0,rr=null,pC(f)):(ot=0,rr=null,Bo(l,f,w,7));break;case 5:var I=null;switch(ze.tag){case 26:I=ze.memoizedState;case 5:case 27:var U=ze;if(!I||XC(I)){ot=0,rr=null;var z=U.sibling;if(z!==null)ze=z;else{var ie=U.return;ie!==null?(ze=ie,rh(ie)):ze=null}break t}}ot=0,rr=null,Bo(l,f,w,5);break;case 6:ot=0,rr=null,Bo(l,f,w,6);break;case 8:yy(),Nt=6;break e;default:throw Error(r(462))}}Mq();break}catch(ue){fC(l,ue)}while(!0);return Ni=vs=null,j.H=g,j.A=E,st=m,ze!==null?0:(bt=null,Qe=0,Ad(),Nt)}function Mq(){for(;ze!==null&&!It();)mC(ze)}function mC(l){var f=$O(l.alternate,l,Gi);l.memoizedProps=l.pendingProps,f===null?rh(l):ze=f}function pC(l){var f=l,m=f.alternate;switch(f.tag){case 15:case 0:f=MO(m,f,f.pendingProps,f.type,void 0,Qe);break;case 11:f=MO(m,f,f.pendingProps,f.type.render,f.ref,Qe);break;case 5:N0(f);default:VO(m,f),f=ze=gR(f,Gi),f=$O(m,f,Gi)}l.memoizedProps=l.pendingProps,f===null?rh(l):ze=f}function Bo(l,f,m,g){Ni=vs=null,N0(f),Lo=null,Uu=0;var E=f.return;try{if(Aq(l,E,f,m,Qe)){Nt=1,Yd(l,pr(m,l.current)),ze=null;return}}catch(w){if(E!==null)throw ze=E,w;Nt=1,Yd(l,pr(m,l.current)),ze=null;return}f.flags&32768?(nt||g===1?l=!0:No||(Qe&536870912)!==0?l=!1:(Ra=l=!0,(g===2||g===9||g===3||g===6)&&(g=xr.current,g!==null&&g.tag===13&&(g.flags|=16384))),gC(f,l)):rh(f)}function rh(l){var f=l;do{if((f.flags&32768)!==0){gC(f,Ra);return}l=f.return;var m=_q(f.alternate,f,Gi);if(m!==null){ze=m;return}if(f=f.sibling,f!==null){ze=f;return}ze=f=l}while(f!==null);Nt===0&&(Nt=5)}function gC(l,f){do{var m=Rq(l.alternate,l);if(m!==null){m.flags&=32767,ze=m;return}if(m=l.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!f&&(l=l.sibling,l!==null)){ze=l;return}ze=l=m}while(l!==null);Nt=6,ze=null}function yC(l,f,m,g,E,w,I,U,z){l.cancelPendingCommit=null;do ih();while(bn!==0);if((st&6)!==0)throw Error(r(327));if(f!==null){if(f===l.current)throw Error(r(177));if(w=f.lanes|f.childLanes,w|=u0,hV(l,m,w,I,U,z),l===bt&&(ze=bt=null,Qe=0),ko=f,La=l,jo=m,my=w,py=E,oC=g,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Bq(Jt,function(){return EC(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||g){g=j.T,j.T=null,E=$.p,$.p=2,I=st,st|=4;try{Oq(l,f,m)}finally{st=I,$.p=E,j.T=g}}bn=1,vC(),xC(),bC()}}function vC(){if(bn===1){bn=0;var l=La,f=ko,m=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||m){m=j.T,j.T=null;var g=$.p;$.p=2;var E=st;st|=4;try{eC(f,l);var w=Dy,I=sR(l.containerInfo),U=w.focusedElem,z=w.selectionRange;if(I!==U&&U&&U.ownerDocument&&aR(U.ownerDocument.documentElement,U)){if(z!==null&&i0(U)){var ie=z.start,ue=z.end;if(ue===void 0&&(ue=ie),"selectionStart"in U)U.selectionStart=ie,U.selectionEnd=Math.min(ue,U.value.length);else{var he=U.ownerDocument||document,ae=he&&he.defaultView||window;if(ae.getSelection){var se=ae.getSelection(),Ie=U.textContent.length,Ce=Math.min(z.start,Ie),dt=z.end===void 0?Ce:Math.min(z.end,Ie);!se.extend&&Ce>dt&&(I=dt,dt=Ce,Ce=I);var J=iR(U,Ce),X=iR(U,dt);if(J&&X&&(se.rangeCount!==1||se.anchorNode!==J.node||se.anchorOffset!==J.offset||se.focusNode!==X.node||se.focusOffset!==X.offset)){var ne=he.createRange();ne.setStart(J.node,J.offset),se.removeAllRanges(),Ce>dt?(se.addRange(ne),se.extend(X.node,X.offset)):(ne.setEnd(X.node,X.offset),se.addRange(ne))}}}}for(he=[],se=U;se=se.parentNode;)se.nodeType===1&&he.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<he.length;U++){var de=he[U];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}gh=!!Ly,Dy=Ly=null}finally{st=E,$.p=g,j.T=m}}l.current=f,bn=2}}function xC(){if(bn===2){bn=0;var l=La,f=ko,m=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||m){m=j.T,j.T=null;var g=$.p;$.p=2;var E=st;st|=4;try{XO(l,f.alternate,f)}finally{st=E,$.p=g,j.T=m}}bn=3}}function bC(){if(bn===4||bn===3){bn=0,_e();var l=La,f=ko,m=jo,g=oC;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?bn=5:(bn=0,ko=La=null,SC(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(Ca=null),jg(m),f=f.stateNode,_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Fr,f,void 0,(f.current.flags&128)===128)}catch{}if(g!==null){f=j.T,E=$.p,$.p=2,j.T=null;try{for(var w=l.onRecoverableError,I=0;I<g.length;I++){var U=g[I];w(U.value,{componentStack:U.stack})}}finally{j.T=f,$.p=E}}(jo&3)!==0&&ih(),ci(l),E=l.pendingLanes,(m&4194090)!==0&&(E&42)!==0?l===gy?Ku++:(Ku=0,gy=l):Ku=0,Yu(0)}}function SC(l,f){(l.pooledCacheLanes&=f)===0&&(f=l.pooledCache,f!=null&&(l.pooledCache=null,Ru(f)))}function ih(l){return vC(),xC(),bC(),EC()}function EC(){if(bn!==5)return!1;var l=La,f=my;my=0;var m=jg(jo),g=j.T,E=$.p;try{$.p=32>m?32:m,j.T=null,m=py,py=null;var w=La,I=jo;if(bn=0,ko=La=null,jo=0,(st&6)!==0)throw Error(r(331));var U=st;if(st|=4,aC(w.current),nC(w,w.current,I,m),st=U,Yu(0,!1),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Fr,w)}catch{}return!0}finally{$.p=E,j.T=g,SC(l,f)}}function TC(l,f,m){f=pr(m,f),f=Y0(l.stateNode,f,2),l=ba(l,f,2),l!==null&&(fu(l,2),ci(l))}function pt(l,f,m){if(l.tag===3)TC(l,l,m);else for(;f!==null;){if(f.tag===3){TC(f,l,m);break}else if(f.tag===1){var g=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ca===null||!Ca.has(g))){l=pr(m,l),m=RO(2),g=ba(f,m,2),g!==null&&(OO(m,g,f,l),fu(g,2),ci(g));break}}f=f.return}}function by(l,f,m){var g=l.pingCache;if(g===null){g=l.pingCache=new Dq;var E=new Set;g.set(f,E)}else E=g.get(f),E===void 0&&(E=new Set,g.set(f,E));E.has(m)||(cy=!0,E.add(m),l=kq.bind(null,l,f,m),f.then(l,l))}function kq(l,f,m){var g=l.pingCache;g!==null&&g.delete(f),l.pingedLanes|=l.suspendedLanes&m,l.warmLanes&=~m,bt===l&&(Qe&m)===m&&(Nt===4||Nt===3&&(Qe&62914560)===Qe&&300>je()-hy?(st&2)===0&&Uo(l,0):fy|=m,Mo===Qe&&(Mo=0)),ci(l)}function AC(l,f){f===0&&(f=b_()),l=bo(l,f),l!==null&&(fu(l,f),ci(l))}function jq(l){var f=l.memoizedState,m=0;f!==null&&(m=f.retryLane),AC(l,m)}function Uq(l,f){var m=0;switch(l.tag){case 13:var g=l.stateNode,E=l.memoizedState;E!==null&&(m=E.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(f),AC(l,m)}function Bq(l,f){return rt(l,f)}var ah=null,Fo=null,Sy=!1,sh=!1,Ey=!1,ws=0;function ci(l){l!==Fo&&l.next===null&&(Fo===null?ah=Fo=l:Fo=Fo.next=l),sh=!0,Sy||(Sy=!0,$q())}function Yu(l,f){if(!Ey&&sh){Ey=!0;do for(var m=!1,g=ah;g!==null;){if(l!==0){var E=g.pendingLanes;if(E===0)var w=0;else{var I=g.suspendedLanes,U=g.pingedLanes;w=(1<<31-Rn(42|l)+1)-1,w&=E&~(I&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(m=!0,OC(g,w))}else w=Qe,w=dd(g,g===bt?w:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(w&3)===0||cu(g,w)||(m=!0,OC(g,w));g=g.next}while(m);Ey=!1}}function Fq(){wC()}function wC(){sh=Sy=!1;var l=0;ws!==0&&(Wq()&&(l=ws),ws=0);for(var f=je(),m=null,g=ah;g!==null;){var E=g.next,w=_C(g,f);w===0?(g.next=null,m===null?ah=E:m.next=E,E===null&&(Fo=m)):(m=g,(l!==0||(w&3)!==0)&&(sh=!0)),g=E}Yu(l)}function _C(l,f){for(var m=l.suspendedLanes,g=l.pingedLanes,E=l.expirationTimes,w=l.pendingLanes&-62914561;0<w;){var I=31-Rn(w),U=1<<I,z=E[I];z===-1?((U&m)===0||(U&g)!==0)&&(E[I]=dV(U,f)):z<=f&&(l.expiredLanes|=U),w&=~U}if(f=bt,m=Qe,m=dd(l,l===f?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,m===0||l===f&&(ot===2||ot===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&Be(g),l.callbackNode=null,l.callbackPriority=0;if((m&3)===0||cu(l,m)){if(f=m&-m,f===l.callbackPriority)return f;switch(g!==null&&Be(g),jg(m)){case 2:case 8:m=Zt;break;case 32:m=Jt;break;case 268435456:m=Ri;break;default:m=Jt}return g=RC.bind(null,l),m=rt(m,g),l.callbackPriority=f,l.callbackNode=m,f}return g!==null&&g!==null&&Be(g),l.callbackPriority=2,l.callbackNode=null,2}function RC(l,f){if(bn!==0&&bn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var m=l.callbackNode;if(ih()&&l.callbackNode!==m)return null;var g=Qe;return g=dd(l,l===bt?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(uC(l,g,f),_C(l,je()),l.callbackNode!=null&&l.callbackNode===m?RC.bind(null,l):null)}function OC(l,f){if(ih())return null;uC(l,f,!0)}function $q(){Qq(function(){(st&6)!==0?rt(yn,Fq):wC()})}function Ty(){return ws===0&&(ws=x_()),ws}function CC(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:yd(""+l)}function LC(l,f){var m=f.ownerDocument.createElement("input");return m.name=f.name,m.value=f.value,l.id&&m.setAttribute("form",l.id),f.parentNode.insertBefore(m,f),l=new FormData(l),m.parentNode.removeChild(m),l}function Gq(l,f,m,g,E){if(f==="submit"&&m&&m.stateNode===E){var w=CC((E[$n]||null).action),I=g.submitter;I&&(f=(f=I[$n]||null)?CC(f.formAction):I.getAttribute("formAction"),f!==null&&(w=f,I=null));var U=new Sd("action","action",null,g,E);l.push({event:U,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(ws!==0){var z=I?LC(E,I):new FormData(E);V0(m,{pending:!0,data:z,method:E.method,action:w},null,z)}}else typeof w=="function"&&(U.preventDefault(),z=I?LC(E,I):new FormData(E),V0(m,{pending:!0,data:z,method:E.method,action:w},w,z))},currentTarget:E}]})}}for(var Ay=0;Ay<l0.length;Ay++){var wy=l0[Ay],Vq=wy.toLowerCase(),qq=wy[0].toUpperCase()+wy.slice(1);$r(Vq,"on"+qq)}$r(uR,"onAnimationEnd"),$r(cR,"onAnimationIteration"),$r(fR,"onAnimationStart"),$r("dblclick","onDoubleClick"),$r("focusin","onFocus"),$r("focusout","onBlur"),$r(oq,"onTransitionRun"),$r(lq,"onTransitionStart"),$r(uq,"onTransitionCancel"),$r(dR,"onTransitionEnd"),uo("onMouseEnter",["mouseout","mouseover"]),uo("onMouseLeave",["mouseout","mouseover"]),uo("onPointerEnter",["pointerout","pointerover"]),uo("onPointerLeave",["pointerout","pointerover"]),us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),us("onBeforeInput",["compositionend","keypress","textInput","paste"]),us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wu));function DC(l,f){f=(f&4)!==0;for(var m=0;m<l.length;m++){var g=l[m],E=g.event;g=g.listeners;e:{var w=void 0;if(f)for(var I=g.length-1;0<=I;I--){var U=g[I],z=U.instance,ie=U.currentTarget;if(U=U.listener,z!==w&&E.isPropagationStopped())break e;w=U,E.currentTarget=ie;try{w(E)}catch(ue){Kd(ue)}E.currentTarget=null,w=z}else for(I=0;I<g.length;I++){if(U=g[I],z=U.instance,ie=U.currentTarget,U=U.listener,z!==w&&E.isPropagationStopped())break e;w=U,E.currentTarget=ie;try{w(E)}catch(ue){Kd(ue)}E.currentTarget=null,w=z}}}}function Ke(l,f){var m=f[Ug];m===void 0&&(m=f[Ug]=new Set);var g=l+"__bubble";m.has(g)||(IC(f,l,2,!1),m.add(g))}function _y(l,f,m){var g=0;f&&(g|=4),IC(m,l,g,f)}var oh="_reactListening"+Math.random().toString(36).slice(2);function Ry(l){if(!l[oh]){l[oh]=!0,w_.forEach(function(m){m!=="selectionchange"&&(Hq.has(m)||_y(m,!1,l),_y(m,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[oh]||(f[oh]=!0,_y("selectionchange",!1,f))}}function IC(l,f,m,g){switch(nL(f)){case 2:var E=vH;break;case 8:E=xH;break;default:E=$y}m=E.bind(null,f,m,l),E=void 0,!Wg||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(E=!0),g?E!==void 0?l.addEventListener(f,m,{capture:!0,passive:E}):l.addEventListener(f,m,!0):E!==void 0?l.addEventListener(f,m,{passive:E}):l.addEventListener(f,m,!1)}function Oy(l,f,m,g,E){var w=g;if((f&1)===0&&(f&2)===0&&g!==null)e:for(;;){if(g===null)return;var I=g.tag;if(I===3||I===4){var U=g.stateNode.containerInfo;if(U===E)break;if(I===4)for(I=g.return;I!==null;){var z=I.tag;if((z===3||z===4)&&I.stateNode.containerInfo===E)return;I=I.return}for(;U!==null;){if(I=so(U),I===null)return;if(z=I.tag,z===5||z===6||z===26||z===27){g=w=I;continue e}U=U.parentNode}}g=g.return}B_(function(){var ie=w,ue=Kg(m),he=[];e:{var ae=hR.get(l);if(ae!==void 0){var se=Sd,Ie=l;switch(l){case"keypress":if(xd(m)===0)break e;case"keydown":case"keyup":se=BV;break;case"focusin":Ie="focus",se=Jg;break;case"focusout":Ie="blur",se=Jg;break;case"beforeblur":case"afterblur":se=Jg;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=G_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=RV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=GV;break;case uR:case cR:case fR:se=LV;break;case dR:se=qV;break;case"scroll":case"scrollend":se=wV;break;case"wheel":se=zV;break;case"copy":case"cut":case"paste":se=IV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=q_;break;case"toggle":case"beforetoggle":se=YV}var Ce=(f&4)!==0,dt=!Ce&&(l==="scroll"||l==="scrollend"),J=Ce?ae!==null?ae+"Capture":null:ae;Ce=[];for(var X=ie,ne;X!==null;){var de=X;if(ne=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ne===null||J===null||(de=mu(X,J),de!=null&&Ce.push(Xu(X,de,ne))),dt)break;X=X.return}0<Ce.length&&(ae=new se(ae,Ie,null,m,ue),he.push({event:ae,listeners:Ce}))}}if((f&7)===0){e:{if(ae=l==="mouseover"||l==="pointerover",se=l==="mouseout"||l==="pointerout",ae&&m!==zg&&(Ie=m.relatedTarget||m.fromElement)&&(so(Ie)||Ie[ao]))break e;if((se||ae)&&(ae=ue.window===ue?ue:(ae=ue.ownerDocument)?ae.defaultView||ae.parentWindow:window,se?(Ie=m.relatedTarget||m.toElement,se=ie,Ie=Ie?so(Ie):null,Ie!==null&&(dt=a(Ie),Ce=Ie.tag,Ie!==dt||Ce!==5&&Ce!==27&&Ce!==6)&&(Ie=null)):(se=null,Ie=ie),se!==Ie)){if(Ce=G_,de="onMouseLeave",J="onMouseEnter",X="mouse",(l==="pointerout"||l==="pointerover")&&(Ce=q_,de="onPointerLeave",J="onPointerEnter",X="pointer"),dt=se==null?ae:hu(se),ne=Ie==null?ae:hu(Ie),ae=new Ce(de,X+"leave",se,m,ue),ae.target=dt,ae.relatedTarget=ne,de=null,so(ue)===ie&&(Ce=new Ce(J,X+"enter",Ie,m,ue),Ce.target=ne,Ce.relatedTarget=dt,de=Ce),dt=de,se&&Ie)t:{for(Ce=se,J=Ie,X=0,ne=Ce;ne;ne=$o(ne))X++;for(ne=0,de=J;de;de=$o(de))ne++;for(;0<X-ne;)Ce=$o(Ce),X--;for(;0<ne-X;)J=$o(J),ne--;for(;X--;){if(Ce===J||J!==null&&Ce===J.alternate)break t;Ce=$o(Ce),J=$o(J)}Ce=null}else Ce=null;se!==null&&PC(he,ae,se,Ce,!1),Ie!==null&&dt!==null&&PC(he,dt,Ie,Ce,!0)}}e:{if(ae=ie?hu(ie):window,se=ae.nodeName&&ae.nodeName.toLowerCase(),se==="select"||se==="input"&&ae.type==="file")var Ee=Z_;else if(X_(ae))if(J_)Ee=iq;else{Ee=nq;var qe=tq}else se=ae.nodeName,!se||se.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ie&&Hg(ie.elementType)&&(Ee=Z_):Ee=rq;if(Ee&&(Ee=Ee(l,ie))){Q_(he,Ee,m,ue);break e}qe&&qe(l,ae,ie),l==="focusout"&&ie&&ae.type==="number"&&ie.memoizedProps.value!=null&&qg(ae,"number",ae.value)}switch(qe=ie?hu(ie):window,l){case"focusin":(X_(qe)||qe.contentEditable==="true")&&(yo=qe,a0=ie,Eu=null);break;case"focusout":Eu=a0=yo=null;break;case"mousedown":s0=!0;break;case"contextmenu":case"mouseup":case"dragend":s0=!1,oR(he,m,ue);break;case"selectionchange":if(sq)break;case"keydown":case"keyup":oR(he,m,ue)}var we;if(t0)e:{switch(l){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else go?Y_(l,m)&&(Le="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(Le="onCompositionStart");Le&&(H_&&m.locale!=="ko"&&(go||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&go&&(we=F_()):(ga=ue,Xg="value"in ga?ga.value:ga.textContent,go=!0)),qe=lh(ie,Le),0<qe.length&&(Le=new V_(Le,l,null,m,ue),he.push({event:Le,listeners:qe}),we?Le.data=we:(we=W_(m),we!==null&&(Le.data=we)))),(we=XV?QV(l,m):ZV(l,m))&&(Le=lh(ie,"onBeforeInput"),0<Le.length&&(qe=new V_("onBeforeInput","beforeinput",null,m,ue),he.push({event:qe,listeners:Le}),qe.data=we)),Gq(he,l,ie,m,ue)}DC(he,f)})}function Xu(l,f,m){return{instance:l,listener:f,currentTarget:m}}function lh(l,f){for(var m=f+"Capture",g=[];l!==null;){var E=l,w=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||w===null||(E=mu(l,m),E!=null&&g.unshift(Xu(l,E,w)),E=mu(l,f),E!=null&&g.push(Xu(l,E,w))),l.tag===3)return g;l=l.return}return[]}function $o(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function PC(l,f,m,g,E){for(var w=f._reactName,I=[];m!==null&&m!==g;){var U=m,z=U.alternate,ie=U.stateNode;if(U=U.tag,z!==null&&z===g)break;U!==5&&U!==26&&U!==27||ie===null||(z=ie,E?(ie=mu(m,w),ie!=null&&I.unshift(Xu(m,ie,z))):E||(ie=mu(m,w),ie!=null&&I.push(Xu(m,ie,z)))),m=m.return}I.length!==0&&l.push({event:f,listeners:I})}var zq=/\r\n?/g,Kq=/\u0000|\uFFFD/g;function NC(l){return(typeof l=="string"?l:""+l).replace(zq,`
`).replace(Kq,"")}function MC(l,f){return f=NC(f),NC(l)===f}function uh(){}function ft(l,f,m,g,E,w){switch(m){case"children":typeof g=="string"?f==="body"||f==="textarea"&&g===""||ho(l,g):(typeof g=="number"||typeof g=="bigint")&&f!=="body"&&ho(l,""+g);break;case"className":md(l,"class",g);break;case"tabIndex":md(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":md(l,m,g);break;case"style":j_(l,g,w);break;case"data":if(f!=="object"){md(l,"data",g);break}case"src":case"href":if(g===""&&(f!=="a"||m!=="href")){l.removeAttribute(m);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(m);break}g=yd(""+g),l.setAttribute(m,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(m==="formAction"?(f!=="input"&&ft(l,f,"name",E.name,E,null),ft(l,f,"formEncType",E.formEncType,E,null),ft(l,f,"formMethod",E.formMethod,E,null),ft(l,f,"formTarget",E.formTarget,E,null)):(ft(l,f,"encType",E.encType,E,null),ft(l,f,"method",E.method,E,null),ft(l,f,"target",E.target,E,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(m);break}g=yd(""+g),l.setAttribute(m,g);break;case"onClick":g!=null&&(l.onclick=uh);break;case"onScroll":g!=null&&Ke("scroll",l);break;case"onScrollEnd":g!=null&&Ke("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(m=g.__html,m!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=m}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}m=yd(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(m,""+g):l.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(m,""):l.removeAttribute(m);break;case"capture":case"download":g===!0?l.setAttribute(m,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(m,g):l.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(m,g):l.removeAttribute(m);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(m):l.setAttribute(m,g);break;case"popover":Ke("beforetoggle",l),Ke("toggle",l),hd(l,"popover",g);break;case"xlinkActuate":Ci(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ci(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ci(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ci(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ci(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ci(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ci(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ci(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ci(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":hd(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=TV.get(m)||m,hd(l,m,g))}}function Cy(l,f,m,g,E,w){switch(m){case"style":j_(l,g,w);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(m=g.__html,m!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=m}}break;case"children":typeof g=="string"?ho(l,g):(typeof g=="number"||typeof g=="bigint")&&ho(l,""+g);break;case"onScroll":g!=null&&Ke("scroll",l);break;case"onScrollEnd":g!=null&&Ke("scrollend",l);break;case"onClick":g!=null&&(l.onclick=uh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!__.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(E=m.endsWith("Capture"),f=m.slice(2,E?m.length-7:void 0),w=l[$n]||null,w=w!=null?w[m]:null,typeof w=="function"&&l.removeEventListener(f,w,E),typeof g=="function")){typeof w!="function"&&w!==null&&(m in l?l[m]=null:l.hasAttribute(m)&&l.removeAttribute(m)),l.addEventListener(f,g,E);break e}m in l?l[m]=g:g===!0?l.setAttribute(m,""):hd(l,m,g)}}}function Sn(l,f,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",l),Ke("load",l);var g=!1,E=!1,w;for(w in m)if(m.hasOwnProperty(w)){var I=m[w];if(I!=null)switch(w){case"src":g=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:ft(l,f,w,I,m,null)}}E&&ft(l,f,"srcSet",m.srcSet,m,null),g&&ft(l,f,"src",m.src,m,null);return;case"input":Ke("invalid",l);var U=w=I=E=null,z=null,ie=null;for(g in m)if(m.hasOwnProperty(g)){var ue=m[g];if(ue!=null)switch(g){case"name":E=ue;break;case"type":I=ue;break;case"checked":z=ue;break;case"defaultChecked":ie=ue;break;case"value":w=ue;break;case"defaultValue":U=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,f));break;default:ft(l,f,g,ue,m,null)}}P_(l,w,U,z,ie,I,E,!1),pd(l);return;case"select":Ke("invalid",l),g=I=w=null;for(E in m)if(m.hasOwnProperty(E)&&(U=m[E],U!=null))switch(E){case"value":w=U;break;case"defaultValue":I=U;break;case"multiple":g=U;default:ft(l,f,E,U,m,null)}f=w,m=I,l.multiple=!!g,f!=null?fo(l,!!g,f,!1):m!=null&&fo(l,!!g,m,!0);return;case"textarea":Ke("invalid",l),w=E=g=null;for(I in m)if(m.hasOwnProperty(I)&&(U=m[I],U!=null))switch(I){case"value":g=U;break;case"defaultValue":E=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:ft(l,f,I,U,m,null)}M_(l,g,E,w),pd(l);return;case"option":for(z in m)if(m.hasOwnProperty(z)&&(g=m[z],g!=null))switch(z){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:ft(l,f,z,g,m,null)}return;case"dialog":Ke("beforetoggle",l),Ke("toggle",l),Ke("cancel",l),Ke("close",l);break;case"iframe":case"object":Ke("load",l);break;case"video":case"audio":for(g=0;g<Wu.length;g++)Ke(Wu[g],l);break;case"image":Ke("error",l),Ke("load",l);break;case"details":Ke("toggle",l);break;case"embed":case"source":case"link":Ke("error",l),Ke("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in m)if(m.hasOwnProperty(ie)&&(g=m[ie],g!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:ft(l,f,ie,g,m,null)}return;default:if(Hg(f)){for(ue in m)m.hasOwnProperty(ue)&&(g=m[ue],g!==void 0&&Cy(l,f,ue,g,m,void 0));return}}for(U in m)m.hasOwnProperty(U)&&(g=m[U],g!=null&&ft(l,f,U,g,m,null))}function Yq(l,f,m,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,w=null,I=null,U=null,z=null,ie=null,ue=null;for(se in m){var he=m[se];if(m.hasOwnProperty(se)&&he!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":z=he;default:g.hasOwnProperty(se)||ft(l,f,se,null,g,he)}}for(var ae in g){var se=g[ae];if(he=m[ae],g.hasOwnProperty(ae)&&(se!=null||he!=null))switch(ae){case"type":w=se;break;case"name":E=se;break;case"checked":ie=se;break;case"defaultChecked":ue=se;break;case"value":I=se;break;case"defaultValue":U=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,f));break;default:se!==he&&ft(l,f,ae,se,g,he)}}Vg(l,I,U,z,ie,ue,w,E);return;case"select":se=I=U=ae=null;for(w in m)if(z=m[w],m.hasOwnProperty(w)&&z!=null)switch(w){case"value":break;case"multiple":se=z;default:g.hasOwnProperty(w)||ft(l,f,w,null,g,z)}for(E in g)if(w=g[E],z=m[E],g.hasOwnProperty(E)&&(w!=null||z!=null))switch(E){case"value":ae=w;break;case"defaultValue":U=w;break;case"multiple":I=w;default:w!==z&&ft(l,f,E,w,g,z)}f=U,m=I,g=se,ae!=null?fo(l,!!m,ae,!1):!!g!=!!m&&(f!=null?fo(l,!!m,f,!0):fo(l,!!m,m?[]:"",!1));return;case"textarea":se=ae=null;for(U in m)if(E=m[U],m.hasOwnProperty(U)&&E!=null&&!g.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:ft(l,f,U,null,g,E)}for(I in g)if(E=g[I],w=m[I],g.hasOwnProperty(I)&&(E!=null||w!=null))switch(I){case"value":ae=E;break;case"defaultValue":se=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==w&&ft(l,f,I,E,g,w)}N_(l,ae,se);return;case"option":for(var Ie in m)if(ae=m[Ie],m.hasOwnProperty(Ie)&&ae!=null&&!g.hasOwnProperty(Ie))switch(Ie){case"selected":l.selected=!1;break;default:ft(l,f,Ie,null,g,ae)}for(z in g)if(ae=g[z],se=m[z],g.hasOwnProperty(z)&&ae!==se&&(ae!=null||se!=null))switch(z){case"selected":l.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:ft(l,f,z,ae,g,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in m)ae=m[Ce],m.hasOwnProperty(Ce)&&ae!=null&&!g.hasOwnProperty(Ce)&&ft(l,f,Ce,null,g,ae);for(ie in g)if(ae=g[ie],se=m[ie],g.hasOwnProperty(ie)&&ae!==se&&(ae!=null||se!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,f));break;default:ft(l,f,ie,ae,g,se)}return;default:if(Hg(f)){for(var dt in m)ae=m[dt],m.hasOwnProperty(dt)&&ae!==void 0&&!g.hasOwnProperty(dt)&&Cy(l,f,dt,void 0,g,ae);for(ue in g)ae=g[ue],se=m[ue],!g.hasOwnProperty(ue)||ae===se||ae===void 0&&se===void 0||Cy(l,f,ue,ae,g,se);return}}for(var J in m)ae=m[J],m.hasOwnProperty(J)&&ae!=null&&!g.hasOwnProperty(J)&&ft(l,f,J,null,g,ae);for(he in g)ae=g[he],se=m[he],!g.hasOwnProperty(he)||ae===se||ae==null&&se==null||ft(l,f,he,ae,g,se)}var Ly=null,Dy=null;function ch(l){return l.nodeType===9?l:l.ownerDocument}function kC(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jC(l,f){if(l===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&f==="foreignObject"?0:l}function Iy(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Py=null;function Wq(){var l=window.event;return l&&l.type==="popstate"?l===Py?!1:(Py=l,!0):(Py=null,!1)}var UC=typeof setTimeout=="function"?setTimeout:void 0,Xq=typeof clearTimeout=="function"?clearTimeout:void 0,BC=typeof Promise=="function"?Promise:void 0,Qq=typeof queueMicrotask=="function"?queueMicrotask:typeof BC<"u"?function(l){return BC.resolve(null).then(l).catch(Zq)}:UC;function Zq(l){setTimeout(function(){throw l})}function Ia(l){return l==="head"}function FC(l,f){var m=f,g=0,E=0;do{var w=m.nextSibling;if(l.removeChild(m),w&&w.nodeType===8)if(m=w.data,m==="/$"){if(0<g&&8>g){m=g;var I=l.ownerDocument;if(m&1&&Qu(I.documentElement),m&2&&Qu(I.body),m&4)for(m=I.head,Qu(m),I=m.firstChild;I;){var U=I.nextSibling,z=I.nodeName;I[du]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&I.rel.toLowerCase()==="stylesheet"||m.removeChild(I),I=U}}if(E===0){l.removeChild(w),ac(f);return}E--}else m==="$"||m==="$?"||m==="$!"?E++:g=m.charCodeAt(0)-48;else g=0;m=w}while(m);ac(f)}function Ny(l){var f=l.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var m=f;switch(f=f.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Ny(m),Bg(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}l.removeChild(m)}}function Jq(l,f,m,g){for(;l.nodeType===1;){var E=m;if(l.nodeName.toLowerCase()!==f.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[du])switch(f){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(w=l.getAttribute("rel"),w==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(w!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(w=l.getAttribute("src"),(w!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&w&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(f==="input"&&l.type==="hidden"){var w=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===w)return l}else return l;if(l=Vr(l.nextSibling),l===null)break}return null}function eH(l,f,m){if(f==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!m||(l=Vr(l.nextSibling),l===null))return null;return l}function My(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function tH(l,f){var m=l.ownerDocument;if(l.data!=="$?"||m.readyState==="complete")f();else{var g=function(){f(),m.removeEventListener("DOMContentLoaded",g)};m.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function Vr(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return l}var ky=null;function $C(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(f===0)return l;f--}else m==="/$"&&f++}l=l.previousSibling}return null}function GC(l,f,m){switch(f=ch(m),l){case"html":if(l=f.documentElement,!l)throw Error(r(452));return l;case"head":if(l=f.head,!l)throw Error(r(453));return l;case"body":if(l=f.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Qu(l){for(var f=l.attributes;f.length;)l.removeAttributeNode(f[0]);Bg(l)}var Sr=new Map,VC=new Set;function fh(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Vi=$.d;$.d={f:nH,r:rH,D:iH,C:aH,L:sH,m:oH,X:uH,S:lH,M:cH};function nH(){var l=Vi.f(),f=nh();return l||f}function rH(l){var f=oo(l);f!==null&&f.tag===5&&f.type==="form"?uO(f):Vi.r(l)}var Go=typeof document>"u"?null:document;function qC(l,f,m){var g=Go;if(g&&typeof f=="string"&&f){var E=mr(f);E='link[rel="'+l+'"][href="'+E+'"]',typeof m=="string"&&(E+='[crossorigin="'+m+'"]'),VC.has(E)||(VC.add(E),l={rel:l,crossOrigin:m,href:f},g.querySelector(E)===null&&(f=g.createElement("link"),Sn(f,"link",l),ln(f),g.head.appendChild(f)))}}function iH(l){Vi.D(l),qC("dns-prefetch",l,null)}function aH(l,f){Vi.C(l,f),qC("preconnect",l,f)}function sH(l,f,m){Vi.L(l,f,m);var g=Go;if(g&&l&&f){var E='link[rel="preload"][as="'+mr(f)+'"]';f==="image"&&m&&m.imageSrcSet?(E+='[imagesrcset="'+mr(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(E+='[imagesizes="'+mr(m.imageSizes)+'"]')):E+='[href="'+mr(l)+'"]';var w=E;switch(f){case"style":w=Vo(l);break;case"script":w=qo(l)}Sr.has(w)||(l=d({rel:"preload",href:f==="image"&&m&&m.imageSrcSet?void 0:l,as:f},m),Sr.set(w,l),g.querySelector(E)!==null||f==="style"&&g.querySelector(Zu(w))||f==="script"&&g.querySelector(Ju(w))||(f=g.createElement("link"),Sn(f,"link",l),ln(f),g.head.appendChild(f)))}}function oH(l,f){Vi.m(l,f);var m=Go;if(m&&l){var g=f&&typeof f.as=="string"?f.as:"script",E='link[rel="modulepreload"][as="'+mr(g)+'"][href="'+mr(l)+'"]',w=E;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=qo(l)}if(!Sr.has(w)&&(l=d({rel:"modulepreload",href:l},f),Sr.set(w,l),m.querySelector(E)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Ju(w)))return}g=m.createElement("link"),Sn(g,"link",l),ln(g),m.head.appendChild(g)}}}function lH(l,f,m){Vi.S(l,f,m);var g=Go;if(g&&l){var E=lo(g).hoistableStyles,w=Vo(l);f=f||"default";var I=E.get(w);if(!I){var U={loading:0,preload:null};if(I=g.querySelector(Zu(w)))U.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":f},m),(m=Sr.get(w))&&jy(l,m);var z=I=g.createElement("link");ln(z),Sn(z,"link",l),z._p=new Promise(function(ie,ue){z.onload=ie,z.onerror=ue}),z.addEventListener("load",function(){U.loading|=1}),z.addEventListener("error",function(){U.loading|=2}),U.loading|=4,dh(I,f,g)}I={type:"stylesheet",instance:I,count:1,state:U},E.set(w,I)}}}function uH(l,f){Vi.X(l,f);var m=Go;if(m&&l){var g=lo(m).hoistableScripts,E=qo(l),w=g.get(E);w||(w=m.querySelector(Ju(E)),w||(l=d({src:l,async:!0},f),(f=Sr.get(E))&&Uy(l,f),w=m.createElement("script"),ln(w),Sn(w,"link",l),m.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(E,w))}}function cH(l,f){Vi.M(l,f);var m=Go;if(m&&l){var g=lo(m).hoistableScripts,E=qo(l),w=g.get(E);w||(w=m.querySelector(Ju(E)),w||(l=d({src:l,async:!0,type:"module"},f),(f=Sr.get(E))&&Uy(l,f),w=m.createElement("script"),ln(w),Sn(w,"link",l),m.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(E,w))}}function HC(l,f,m,g){var E=(E=ge.current)?fh(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(f=Vo(m.href),m=lo(E).hoistableStyles,g=m.get(f),g||(g={type:"style",instance:null,count:0,state:null},m.set(f,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){l=Vo(m.href);var w=lo(E).hoistableStyles,I=w.get(l);if(I||(E=E.ownerDocument||E,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(l,I),(w=E.querySelector(Zu(l)))&&!w._p&&(I.instance=w,I.state.loading=5),Sr.has(l)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Sr.set(l,m),w||fH(E,l,m,I.state))),f&&g===null)throw Error(r(528,""));return I}if(f&&g!==null)throw Error(r(529,""));return null;case"script":return f=m.async,m=m.src,typeof m=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=qo(m),m=lo(E).hoistableScripts,g=m.get(f),g||(g={type:"script",instance:null,count:0,state:null},m.set(f,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Vo(l){return'href="'+mr(l)+'"'}function Zu(l){return'link[rel="stylesheet"]['+l+"]"}function zC(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function fH(l,f,m,g){l.querySelector('link[rel="preload"][as="style"]['+f+"]")?g.loading=1:(f=l.createElement("link"),g.preload=f,f.addEventListener("load",function(){return g.loading|=1}),f.addEventListener("error",function(){return g.loading|=2}),Sn(f,"link",m),ln(f),l.head.appendChild(f))}function qo(l){return'[src="'+mr(l)+'"]'}function Ju(l){return"script[async]"+l}function KC(l,f,m){if(f.count++,f.instance===null)switch(f.type){case"style":var g=l.querySelector('style[data-href~="'+mr(m.href)+'"]');if(g)return f.instance=g,ln(g),g;var E=d({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),ln(g),Sn(g,"style",E),dh(g,m.precedence,l),f.instance=g;case"stylesheet":E=Vo(m.href);var w=l.querySelector(Zu(E));if(w)return f.state.loading|=4,f.instance=w,ln(w),w;g=zC(m),(E=Sr.get(E))&&jy(g,E),w=(l.ownerDocument||l).createElement("link"),ln(w);var I=w;return I._p=new Promise(function(U,z){I.onload=U,I.onerror=z}),Sn(w,"link",g),f.state.loading|=4,dh(w,m.precedence,l),f.instance=w;case"script":return w=qo(m.src),(E=l.querySelector(Ju(w)))?(f.instance=E,ln(E),E):(g=m,(E=Sr.get(w))&&(g=d({},m),Uy(g,E)),l=l.ownerDocument||l,E=l.createElement("script"),ln(E),Sn(E,"link",g),l.head.appendChild(E),f.instance=E);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(g=f.instance,f.state.loading|=4,dh(g,m.precedence,l));return f.instance}function dh(l,f,m){for(var g=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=g.length?g[g.length-1]:null,w=E,I=0;I<g.length;I++){var U=g[I];if(U.dataset.precedence===f)w=U;else if(w!==E)break}w?w.parentNode.insertBefore(l,w.nextSibling):(f=m.nodeType===9?m.head:m,f.insertBefore(l,f.firstChild))}function jy(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.title==null&&(l.title=f.title)}function Uy(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.integrity==null&&(l.integrity=f.integrity)}var hh=null;function YC(l,f,m){if(hh===null){var g=new Map,E=hh=new Map;E.set(m,g)}else E=hh,g=E.get(m),g||(g=new Map,E.set(m,g));if(g.has(l))return g;for(g.set(l,null),m=m.getElementsByTagName(l),E=0;E<m.length;E++){var w=m[E];if(!(w[du]||w[On]||l==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var I=w.getAttribute(f)||"";I=l+I;var U=g.get(I);U?U.push(w):g.set(I,[w])}}return g}function WC(l,f,m){l=l.ownerDocument||l,l.head.insertBefore(m,f==="title"?l.querySelector("head > title"):null)}function dH(l,f,m){if(m===1||f.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return l=f.disabled,typeof f.precedence=="string"&&l==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function XC(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var ec=null;function hH(){}function mH(l,f,m){if(ec===null)throw Error(r(475));var g=ec;if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var E=Vo(m.href),w=l.querySelector(Zu(E));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(g.count++,g=mh.bind(g),l.then(g,g)),f.state.loading|=4,f.instance=w,ln(w);return}w=l.ownerDocument||l,m=zC(m),(E=Sr.get(E))&&jy(m,E),w=w.createElement("link"),ln(w);var I=w;I._p=new Promise(function(U,z){I.onload=U,I.onerror=z}),Sn(w,"link",m),f.instance=w}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(g.count++,f=mh.bind(g),l.addEventListener("load",f),l.addEventListener("error",f))}}function pH(){if(ec===null)throw Error(r(475));var l=ec;return l.stylesheets&&l.count===0&&By(l,l.stylesheets),0<l.count?function(f){var m=setTimeout(function(){if(l.stylesheets&&By(l,l.stylesheets),l.unsuspend){var g=l.unsuspend;l.unsuspend=null,g()}},6e4);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(m)}}:null}function mh(){if(this.count--,this.count===0){if(this.stylesheets)By(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var ph=null;function By(l,f){l.stylesheets=null,l.unsuspend!==null&&(l.count++,ph=new Map,f.forEach(gH,l),ph=null,mh.call(l))}function gH(l,f){if(!(f.state.loading&4)){var m=ph.get(l);if(m)var g=m.get(null);else{m=new Map,ph.set(l,m);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<E.length;w++){var I=E[w];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(m.set(I.dataset.precedence,I),g=I)}g&&m.set(null,g)}E=f.instance,I=E.getAttribute("data-precedence"),w=m.get(I)||g,w===g&&m.set(null,E),m.set(I,E),this.count++,g=mh.bind(this),E.addEventListener("load",g),E.addEventListener("error",g),w?w.parentNode.insertBefore(E,w.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),f.state.loading|=4}}var tc={$$typeof:A,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function yH(l,f,m,g,E,w,I,U){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mg(0),this.hiddenUpdates=Mg(null),this.identifierPrefix=g,this.onUncaughtError=E,this.onCaughtError=w,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function QC(l,f,m,g,E,w,I,U,z,ie,ue,he){return l=new yH(l,f,m,I,U,z,ie,he),f=1,w===!0&&(f|=24),w=er(3,null,null,f),l.current=w,w.stateNode=l,f=b0(),f.refCount++,l.pooledCache=f,f.refCount++,w.memoizedState={element:g,isDehydrated:m,cache:f},A0(w),l}function ZC(l){return l?(l=So,l):So}function JC(l,f,m,g,E,w){E=ZC(E),g.context===null?g.context=E:g.pendingContext=E,g=xa(f),g.payload={element:m},w=w===void 0?null:w,w!==null&&(g.callback=w),m=ba(l,g,f),m!==null&&(ar(m,l,f),Du(m,l,f))}function eL(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<f?m:f}}function Fy(l,f){eL(l,f),(l=l.alternate)&&eL(l,f)}function tL(l){if(l.tag===13){var f=bo(l,67108864);f!==null&&ar(f,l,67108864),Fy(l,67108864)}}var gh=!0;function vH(l,f,m,g){var E=j.T;j.T=null;var w=$.p;try{$.p=2,$y(l,f,m,g)}finally{$.p=w,j.T=E}}function xH(l,f,m,g){var E=j.T;j.T=null;var w=$.p;try{$.p=8,$y(l,f,m,g)}finally{$.p=w,j.T=E}}function $y(l,f,m,g){if(gh){var E=Gy(g);if(E===null)Oy(l,f,g,yh,m),rL(l,g);else if(SH(E,l,f,m,g))g.stopPropagation();else if(rL(l,g),f&4&&-1<bH.indexOf(l)){for(;E!==null;){var w=oo(E);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var I=ls(w.pendingLanes);if(I!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;I;){var z=1<<31-Rn(I);U.entanglements[1]|=z,I&=~z}ci(w),(st&6)===0&&(eh=je()+500,Yu(0))}}break;case 13:U=bo(w,2),U!==null&&ar(U,w,2),nh(),Fy(w,2)}if(w=Gy(g),w===null&&Oy(l,f,g,yh,m),w===E)break;E=w}E!==null&&g.stopPropagation()}else Oy(l,f,g,null,m)}}function Gy(l){return l=Kg(l),Vy(l)}var yh=null;function Vy(l){if(yh=null,l=so(l),l!==null){var f=a(l);if(f===null)l=null;else{var m=f.tag;if(m===13){if(l=s(f),l!==null)return l;l=null}else if(m===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null)}}return yh=l,null}function nL(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rt()){case yn:return 2;case Zt:return 8;case Jt:case vn:return 32;case Ri:return 268435456;default:return 32}default:return 32}}var qy=!1,Pa=null,Na=null,Ma=null,nc=new Map,rc=new Map,ka=[],bH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rL(l,f){switch(l){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":Ma=null;break;case"pointerover":case"pointerout":nc.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(f.pointerId)}}function ic(l,f,m,g,E,w){return l===null||l.nativeEvent!==w?(l={blockedOn:f,domEventName:m,eventSystemFlags:g,nativeEvent:w,targetContainers:[E]},f!==null&&(f=oo(f),f!==null&&tL(f)),l):(l.eventSystemFlags|=g,f=l.targetContainers,E!==null&&f.indexOf(E)===-1&&f.push(E),l)}function SH(l,f,m,g,E){switch(f){case"focusin":return Pa=ic(Pa,l,f,m,g,E),!0;case"dragenter":return Na=ic(Na,l,f,m,g,E),!0;case"mouseover":return Ma=ic(Ma,l,f,m,g,E),!0;case"pointerover":var w=E.pointerId;return nc.set(w,ic(nc.get(w)||null,l,f,m,g,E)),!0;case"gotpointercapture":return w=E.pointerId,rc.set(w,ic(rc.get(w)||null,l,f,m,g,E)),!0}return!1}function iL(l){var f=so(l.target);if(f!==null){var m=a(f);if(m!==null){if(f=m.tag,f===13){if(f=s(m),f!==null){l.blockedOn=f,mV(l.priority,function(){if(m.tag===13){var g=ir();g=kg(g);var E=bo(m,g);E!==null&&ar(E,m,g),Fy(m,g)}});return}}else if(f===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function vh(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var m=Gy(l.nativeEvent);if(m===null){m=l.nativeEvent;var g=new m.constructor(m.type,m);zg=g,m.target.dispatchEvent(g),zg=null}else return f=oo(m),f!==null&&tL(f),l.blockedOn=m,!1;f.shift()}return!0}function aL(l,f,m){vh(l)&&m.delete(f)}function EH(){qy=!1,Pa!==null&&vh(Pa)&&(Pa=null),Na!==null&&vh(Na)&&(Na=null),Ma!==null&&vh(Ma)&&(Ma=null),nc.forEach(aL),rc.forEach(aL)}function xh(l,f){l.blockedOn===f&&(l.blockedOn=null,qy||(qy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,EH)))}var bh=null;function sL(l){bh!==l&&(bh=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){bh===l&&(bh=null);for(var f=0;f<l.length;f+=3){var m=l[f],g=l[f+1],E=l[f+2];if(typeof g!="function"){if(Vy(g||m)===null)continue;break}var w=oo(m);w!==null&&(l.splice(f,3),f-=3,V0(w,{pending:!0,data:E,method:m.method,action:g},g,E))}}))}function ac(l){function f(z){return xh(z,l)}Pa!==null&&xh(Pa,l),Na!==null&&xh(Na,l),Ma!==null&&xh(Ma,l),nc.forEach(f),rc.forEach(f);for(var m=0;m<ka.length;m++){var g=ka[m];g.blockedOn===l&&(g.blockedOn=null)}for(;0<ka.length&&(m=ka[0],m.blockedOn===null);)iL(m),m.blockedOn===null&&ka.shift();if(m=(l.ownerDocument||l).$$reactFormReplay,m!=null)for(g=0;g<m.length;g+=3){var E=m[g],w=m[g+1],I=E[$n]||null;if(typeof w=="function")I||sL(m);else if(I){var U=null;if(w&&w.hasAttribute("formAction")){if(E=w,I=w[$n]||null)U=I.formAction;else if(Vy(E)!==null)continue}else U=I.action;typeof U=="function"?m[g+1]=U:(m.splice(g,3),g-=3),sL(m)}}}function Hy(l){this._internalRoot=l}Sh.prototype.render=Hy.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(r(409));var m=f.current,g=ir();JC(m,g,l,f,null,null)},Sh.prototype.unmount=Hy.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;JC(l.current,2,null,l,null,null),nh(),f[ao]=null}};function Sh(l){this._internalRoot=l}Sh.prototype.unstable_scheduleHydration=function(l){if(l){var f=T_();l={blockedOn:null,target:l,priority:f};for(var m=0;m<ka.length&&f!==0&&f<ka[m].priority;m++);ka.splice(m,0,l),m===0&&iL(l)}};var oL=e.version;if(oL!=="19.1.0")throw Error(r(527,oL,"19.1.0"));$.findDOMNode=function(l){var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(f),l=l!==null?u(l):null,l=l===null?null:l.stateNode,l};var TH={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eh.isDisabled&&Eh.supportsFiber)try{Fr=Eh.inject(TH),_n=Eh}catch{}}return oc.createRoot=function(l,f){if(!i(l))throw Error(r(299));var m=!1,g="",E=TO,w=AO,I=wO,U=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(g=f.identifierPrefix),f.onUncaughtError!==void 0&&(E=f.onUncaughtError),f.onCaughtError!==void 0&&(w=f.onCaughtError),f.onRecoverableError!==void 0&&(I=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(U=f.unstable_transitionCallbacks)),f=QC(l,1,!1,null,null,m,g,E,w,I,U,null),l[ao]=f.current,Ry(l),new Hy(f)},oc.hydrateRoot=function(l,f,m){if(!i(l))throw Error(r(299));var g=!1,E="",w=TO,I=AO,U=wO,z=null,ie=null;return m!=null&&(m.unstable_strictMode===!0&&(g=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(w=m.onUncaughtError),m.onCaughtError!==void 0&&(I=m.onCaughtError),m.onRecoverableError!==void 0&&(U=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(z=m.unstable_transitionCallbacks),m.formState!==void 0&&(ie=m.formState)),f=QC(l,1,!0,f,m??null,g,E,w,I,U,z,ie),f.context=ZC(null),m=f.current,g=ir(),g=kg(g),E=xa(g),E.callback=null,ba(m,E,g),m=g,f.current.lanes=m,fu(f,m),ci(f),l[ao]=f.current,Ry(l),new Sh(f)},oc.version="19.1.0",oc}var yL;function PH(){if(yL)return Yy.exports;yL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Yy.exports=IH(),Yy.exports}var NH=PH(),lc={},vL;function MH(){if(vL)return lc;vL=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.parse=s,lc.serialize=u;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function s(p,y){const v=new a,S=p.length;if(S<2)return v;const x=(y==null?void 0:y.decode)||d;let T=0;do{const _=p.indexOf("=",T);if(_===-1)break;const A=p.indexOf(";",T),O=A===-1?S:A;if(_>O){T=p.lastIndexOf(";",_-1)+1;continue}const R=o(p,T,_),C=c(p,_,R),L=p.slice(R,C);if(v[L]===void 0){let P=o(p,_+1,O),N=c(p,O,P);const k=x(p.slice(P,N));v[L]=k}T=O+1}while(T<S);return v}function o(p,y,v){do{const S=p.charCodeAt(y);if(S!==32&&S!==9)return y}while(++y<v);return v}function c(p,y,v){for(;y>v;){const S=p.charCodeAt(--y);if(S!==32&&S!==9)return y+1}return v}function u(p,y,v){const S=(v==null?void 0:v.encode)||encodeURIComponent;if(!t.test(p))throw new TypeError(`argument name is invalid: ${p}`);const x=S(y);if(!e.test(x))throw new TypeError(`argument val is invalid: ${y}`);let T=p+"="+x;if(!v)return T;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);T+="; Max-Age="+v.maxAge}if(v.domain){if(!n.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);T+="; Domain="+v.domain}if(v.path){if(!r.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);T+="; Path="+v.path}if(v.expires){if(!h(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);T+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(T+="; HttpOnly"),v.secure&&(T+="; Secure"),v.partitioned&&(T+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":T+="; Priority=Low";break;case"medium":T+="; Priority=Medium";break;case"high":T+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":T+="; SameSite=Strict";break;case"lax":T+="; SameSite=Lax";break;case"none":T+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return T}function d(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function h(p){return i.call(p)==="[object Date]"}return lc}MH();var xL="popstate";function kH(t={}){function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return VE("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:qc(i)}return UH(e,n,null,t)}function _t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Nr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jH(){return Math.random().toString(36).substring(2,10)}function bL(t,e){return{usr:t.state,key:t.key,idx:e}}function VE(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?zl(e):e,state:n,key:e&&e.key||r||jH()}}function qc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function zl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function UH(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,u=d();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function d(){return(s.state||{idx:null}).idx}function h(){o="POP";let x=d(),T=x==null?null:x-u;u=x,c&&c({action:o,location:S.location,delta:T})}function p(x,T){o="PUSH";let _=VE(S.location,x,T);u=d()+1;let A=bL(_,u),O=S.createHref(_);try{s.pushState(A,"",O)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(O)}a&&c&&c({action:o,location:S.location,delta:1})}function y(x,T){o="REPLACE";let _=VE(S.location,x,T);u=d();let A=bL(_,u),O=S.createHref(_);s.replaceState(A,"",O),a&&c&&c({action:o,location:S.location,delta:0})}function v(x){return BH(x)}let S={get action(){return o},get location(){return t(i,s)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(xL,h),c=x,()=>{i.removeEventListener(xL,h),c=null}},createHref(x){return e(i,x)},createURL:v,encodeLocation(x){let T=v(x);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:p,replace:y,go(x){return s.go(x)}};return S}function BH(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_t(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:qc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function SB(t,e,n="/"){return FH(t,e,n,!1)}function FH(t,e,n,r){let i=typeof e=="string"?zl(e):e,a=ra(i.pathname||"/",n);if(a==null)return null;let s=EB(t);$H(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=ZH(a);o=XH(s[c],u,r)}return o}function EB(t,e=[],n=[],r=""){let i=(a,s,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(_t(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let u=Ji([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(_t(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),EB(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:YH(u,a.index),routesMeta:d})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let c of TB(a.path))i(a,s,c)}),e}function TB(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=TB(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function $H(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WH(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var GH=/^:[\w-]+$/,VH=3,qH=2,HH=1,zH=10,KH=-2,SL=t=>t==="*";function YH(t,e){let n=t.split("/"),r=n.length;return n.some(SL)&&(r+=KH),e&&(r+=qH),n.filter(i=>!SL(i)).reduce((i,a)=>i+(GH.test(a)?VH:a===""?HH:zH),r)}function WH(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function XH(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=xm({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=xm({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:Ji([a,h.pathname]),pathnameBase:n7(Ji([a,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(a=Ji([a,h.pathnameBase]))}return s}function xm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=QH(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:h},p)=>{if(d==="*"){let v=o[p]||"";s=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const y=o[p];return h&&!y?u[d]=void 0:u[d]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function QH(t,e=!1,n=!0){Nr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function ZH(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ra(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function JH(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?zl(t):t;return{pathname:n?n.startsWith("/")?n:e7(n,e):e,search:r7(r),hash:i7(i)}}function e7(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Zy(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function t7(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function tA(t){let e=t7(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function nA(t,e,n,r=!1){let i;typeof t=="string"?i=zl(t):(i={...t},_t(!i.pathname||!i.pathname.includes("?"),Zy("?","pathname","search",i)),_t(!i.pathname||!i.pathname.includes("#"),Zy("#","pathname","hash",i)),_t(!i.search||!i.search.includes("#"),Zy("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}o=h>=0?e[h]:"/"}let c=JH(i,o),u=s&&s!=="/"&&s.endsWith("/"),d=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Ji=t=>t.join("/").replace(/\/\/+/g,"/"),n7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),r7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,i7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function a7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var AB=["POST","PUT","PATCH","DELETE"];new Set(AB);var s7=["GET",...AB];new Set(s7);var Kl=B.createContext(null);Kl.displayName="DataRouter";var Fp=B.createContext(null);Fp.displayName="DataRouterState";var wB=B.createContext({isTransitioning:!1});wB.displayName="ViewTransition";var o7=B.createContext(new Map);o7.displayName="Fetchers";var l7=B.createContext(null);l7.displayName="Await";var ti=B.createContext(null);ti.displayName="Navigation";var Vf=B.createContext(null);Vf.displayName="Location";var Ur=B.createContext({outlet:null,matches:[],isDataRoute:!1});Ur.displayName="Route";var rA=B.createContext(null);rA.displayName="RouteError";function u7(t,{relative:e}={}){_t(Yl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=B.useContext(ti),{hash:i,pathname:a,search:s}=qf(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:Ji([n,a])),r.createHref({pathname:o,search:s,hash:i})}function Yl(){return B.useContext(Vf)!=null}function ca(){return _t(Yl(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(Vf).location}var _B="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function RB(t){B.useContext(ti).static||B.useLayoutEffect(t)}function Qt(){let{isDataRoute:t}=B.useContext(Ur);return t?A7():c7()}function c7(){_t(Yl(),"useNavigate() may be used only in the context of a <Router> component.");let t=B.useContext(Kl),{basename:e,navigator:n}=B.useContext(ti),{matches:r}=B.useContext(Ur),{pathname:i}=ca(),a=JSON.stringify(tA(r)),s=B.useRef(!1);return RB(()=>{s.current=!0}),B.useCallback((c,u={})=>{if(Nr(s.current,_B),!s.current)return;if(typeof c=="number"){n.go(c);return}let d=nA(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ji([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,a,i,t])}var f7=B.createContext(null);function d7(t){let e=B.useContext(Ur).outlet;return e&&B.createElement(f7.Provider,{value:t},e)}function fa(){let{matches:t}=B.useContext(Ur),e=t[t.length-1];return e?e.params:{}}function qf(t,{relative:e}={}){let{matches:n}=B.useContext(Ur),{pathname:r}=ca(),i=JSON.stringify(tA(n));return B.useMemo(()=>nA(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function h7(t,e){return OB(t,e)}function OB(t,e,n,r){var T;_t(Yl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=B.useContext(ti),{matches:a}=B.useContext(Ur),s=a[a.length-1],o=s?s.params:{},c=s?s.pathname:"/",u=s?s.pathnameBase:"/",d=s&&s.route;{let _=d&&d.path||"";CB(c,!d||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let h=ca(),p;if(e){let _=typeof e=="string"?zl(e):e;_t(u==="/"||((T=_.pathname)==null?void 0:T.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${_.pathname}" was given in the \`location\` prop.`),p=_}else p=h;let y=p.pathname||"/",v=y;if(u!=="/"){let _=u.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(_.length).join("/")}let S=SB(t,{pathname:v});Nr(d||S!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Nr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=v7(S&&S.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Ji([u,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:Ji([u,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,n,r);return e&&x?B.createElement(Vf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function m7(){let t=T7(),e=a7(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=B.createElement(B.Fragment,null,B.createElement("p",null," Hey developer "),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:a},"ErrorBoundary")," or"," ",B.createElement("code",{style:a},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),n?B.createElement("pre",{style:i},n):null,s)}var p7=B.createElement(m7,null),g7=class extends B.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?B.createElement(Ur.Provider,{value:this.props.routeContext},B.createElement(rA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function y7({routeContext:t,match:e,children:n}){let r=B.useContext(Kl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(Ur.Provider,{value:t},n)}function v7(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n==null?void 0:n.errors;if(a!=null){let c=i.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);_t(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let s=!1,o=-1;if(n)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=c),u.route.id){let{loaderData:d,errors:h}=n,p=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||p){s=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((c,u,d)=>{let h,p=!1,y=null,v=null;n&&(h=a&&u.route.id?a[u.route.id]:void 0,y=u.route.errorElement||p7,s&&(o<0&&d===0?(CB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,v=null):o===d&&(p=!0,v=u.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,d+1)),x=()=>{let T;return h?T=y:p?T=v:u.route.Component?T=B.createElement(u.route.Component,null):u.route.element?T=u.route.element:T=c,B.createElement(y7,{match:u,routeContext:{outlet:c,matches:S,isDataRoute:n!=null},children:T})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?B.createElement(g7,{location:n.location,revalidation:n.revalidation,component:y,error:h,children:x(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):x()},null)}function iA(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function x7(t){let e=B.useContext(Kl);return _t(e,iA(t)),e}function b7(t){let e=B.useContext(Fp);return _t(e,iA(t)),e}function S7(t){let e=B.useContext(Ur);return _t(e,iA(t)),e}function aA(t){let e=S7(t),n=e.matches[e.matches.length-1];return _t(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function E7(){return aA("useRouteId")}function T7(){var r;let t=B.useContext(rA),e=b7("useRouteError"),n=aA("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function A7(){let{router:t}=x7("useNavigate"),e=aA("useNavigate"),n=B.useRef(!1);return RB(()=>{n.current=!0}),B.useCallback(async(i,a={})=>{Nr(n.current,_B),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var EL={};function CB(t,e,n){!e&&!EL[t]&&(EL[t]=!0,Nr(!1,n))}B.memo(w7);function w7({routes:t,future:e,state:n}){return OB(t,void 0,n,e)}function _7({to:t,replace:e,state:n,relative:r}){_t(Yl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=B.useContext(ti);Nr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=B.useContext(Ur),{pathname:s}=ca(),o=Qt(),c=nA(t,tA(a),s,r==="path"),u=JSON.stringify(c);return B.useEffect(()=>{o(JSON.parse(u),{replace:e,state:n,relative:r})},[o,u,r,e,n]),null}function R7(t){return d7(t.context)}function gt(t){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function O7({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){_t(!Yl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),o=B.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof n=="string"&&(n=zl(n));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:p="default"}=n,y=B.useMemo(()=>{let v=ra(c,s);return v==null?null:{location:{pathname:v,search:u,hash:d,state:h,key:p},navigationType:r}},[s,c,u,d,h,p,r]);return Nr(y!=null,`<Router basename="${s}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:B.createElement(ti.Provider,{value:o},B.createElement(Vf.Provider,{children:e,value:y}))}function C7({children:t,location:e}){return h7(qE(t),e)}function qE(t,e=[]){let n=[];return B.Children.forEach(t,(r,i)=>{if(!B.isValidElement(r))return;let a=[...e,i];if(r.type===B.Fragment){n.push.apply(n,qE(r.props.children,a));return}_t(r.type===gt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=qE(r.props.children,a)),n.push(s)}),n}var nm="get",rm="application/x-www-form-urlencoded";function $p(t){return t!=null&&typeof t.tagName=="string"}function L7(t){return $p(t)&&t.tagName.toLowerCase()==="button"}function D7(t){return $p(t)&&t.tagName.toLowerCase()==="form"}function I7(t){return $p(t)&&t.tagName.toLowerCase()==="input"}function P7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function N7(t,e){return t.button===0&&(!e||e==="_self")&&!P7(t)}function HE(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function M7(t,e){let n=HE(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var Ah=null;function k7(){if(Ah===null)try{new FormData(document.createElement("form"),0),Ah=!1}catch{Ah=!0}return Ah}var j7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jy(t){return t!=null&&!j7.has(t)?(Nr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rm}"`),null):t}function U7(t,e){let n,r,i,a,s;if(D7(t)){let o=t.getAttribute("action");r=o?ra(o,e):null,n=t.getAttribute("method")||nm,i=Jy(t.getAttribute("enctype"))||rm,a=new FormData(t)}else if(L7(t)||I7(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?ra(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||nm,i=Jy(t.getAttribute("formenctype"))||Jy(o.getAttribute("enctype"))||rm,a=new FormData(o,t),!k7()){let{name:u,type:d,value:h}=t;if(d==="image"){let p=u?`${u}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else u&&a.append(u,h)}}else{if($p(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=nm,r=null,i=rm,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}function sA(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function B7(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function F7(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function $7(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await B7(a,n);return s.links?s.links():[]}return[]}));return H7(r.flat(1).filter(F7).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function TL(t,e,n,r,i,a){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,u)=>s(c,u)||o(c,u)):a==="data"?e.filter((c,u)=>{var h;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function G7(t,e,{includeHydrateFallback:n}={}){return V7(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function V7(t){return[...new Set(t)]}function q7(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function H7(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(q7(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var z7=new Set([100,101,204,205]);function K7(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&ra(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function LB(){let t=B.useContext(Kl);return sA(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Y7(){let t=B.useContext(Fp);return sA(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var oA=B.createContext(void 0);oA.displayName="FrameworkContext";function DB(){let t=B.useContext(oA);return sA(t,"You must render this element inside a <HydratedRouter> element"),t}function W7(t,e){let n=B.useContext(oA),[r,i]=B.useState(!1),[a,s]=B.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=e,p=B.useRef(null);B.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let S=T=>{T.forEach(_=>{s(_.isIntersecting)})},x=new IntersectionObserver(S,{threshold:.5});return p.current&&x.observe(p.current),()=>{x.disconnect()}}},[t]),B.useEffect(()=>{if(r){let S=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(S)}}},[r]);let y=()=>{i(!0)},v=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,p,{}]:[a,p,{onFocus:uc(o,y),onBlur:uc(c,v),onMouseEnter:uc(u,y),onMouseLeave:uc(d,v),onTouchStart:uc(h,y)}]:[!1,p,{}]}function uc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function X7({page:t,...e}){let{router:n}=LB(),r=B.useMemo(()=>SB(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?B.createElement(Z7,{page:t,matches:r,...e}):null}function Q7(t){let{manifest:e,routeModules:n}=DB(),[r,i]=B.useState([]);return B.useEffect(()=>{let a=!1;return $7(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function Z7({page:t,matches:e,...n}){let r=ca(),{manifest:i,routeModules:a}=DB(),{basename:s}=LB(),{loaderData:o,matches:c}=Y7(),u=B.useMemo(()=>TL(t,e,c,i,r,"data"),[t,e,c,i,r]),d=B.useMemo(()=>TL(t,e,c,i,r,"assets"),[t,e,c,i,r]),h=B.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,S=!1;if(e.forEach(T=>{var A;let _=i.routes[T.route.id];!_||!_.hasLoader||(!u.some(O=>O.route.id===T.route.id)&&T.route.id in o&&((A=a[T.route.id])!=null&&A.shouldRevalidate)||_.hasClientLoader?S=!0:v.add(T.route.id))}),v.size===0)return[];let x=K7(t,s);return S&&v.size>0&&x.searchParams.set("_routes",e.filter(T=>v.has(T.route.id)).map(T=>T.route.id).join(",")),[x.pathname+x.search]},[s,o,r,i,u,e,t,a]),p=B.useMemo(()=>G7(d,i),[d,i]),y=Q7(d);return B.createElement(B.Fragment,null,h.map(v=>B.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),p.map(v=>B.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),y.map(({key:v,link:S})=>B.createElement("link",{key:v,...S})))}function J7(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var IB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{IB&&(window.__reactRouterVersion="7.6.2")}catch{}function e9({basename:t,children:e,window:n}){let r=B.useRef();r.current==null&&(r.current=kH({window:n,v5Compat:!0}));let i=r.current,[a,s]=B.useState({action:i.action,location:i.location}),o=B.useCallback(c=>{B.startTransition(()=>s(c))},[s]);return B.useLayoutEffect(()=>i.listen(o),[i,o]),B.createElement(O7,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var PB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kr=B.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:d,viewTransition:h,...p},y){let{basename:v}=B.useContext(ti),S=typeof u=="string"&&PB.test(u),x,T=!1;if(typeof u=="string"&&S&&(x=u,IB))try{let N=new URL(window.location.href),k=u.startsWith("//")?new URL(N.protocol+u):new URL(u),M=ra(k.pathname,v);k.origin===N.origin&&M!=null?u=M+k.search+k.hash:T=!0}catch{Nr(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=u7(u,{relative:i}),[A,O,R]=W7(r,p),C=i9(u,{replace:s,state:o,target:c,preventScrollReset:d,relative:i,viewTransition:h});function L(N){e&&e(N),N.defaultPrevented||C(N)}let P=B.createElement("a",{...p,...R,href:x||_,onClick:T||a?e:L,ref:J7(y,O),target:c,"data-discover":!S&&n==="render"?"true":void 0});return A&&!S?B.createElement(B.Fragment,null,P,B.createElement(X7,{page:_})):P});Kr.displayName="Link";var t9=B.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...u},d){let h=qf(s,{relative:u.relative}),p=ca(),y=B.useContext(Fp),{navigator:v,basename:S}=B.useContext(ti),x=y!=null&&c9(h)&&o===!0,T=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,_=p.pathname,A=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(_=_.toLowerCase(),A=A?A.toLowerCase():null,T=T.toLowerCase()),A&&S&&(A=ra(A,S)||A);const O=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let R=_===T||!i&&_.startsWith(T)&&_.charAt(O)==="/",C=A!=null&&(A===T||!i&&A.startsWith(T)&&A.charAt(T.length)==="/"),L={isActive:R,isPending:C,isTransitioning:x},P=R?e:void 0,N;typeof r=="function"?N=r(L):N=[r,R?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(L):a;return B.createElement(Kr,{...u,"aria-current":P,className:N,ref:d,style:k,to:s,viewTransition:o},typeof c=="function"?c(L):c)});t9.displayName="NavLink";var n9=B.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=nm,action:o,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:h,...p},y)=>{let v=l9(),S=u9(o,{relative:u}),x=s.toLowerCase()==="get"?"get":"post",T=typeof o=="string"&&PB.test(o),_=A=>{if(c&&c(A),A.defaultPrevented)return;A.preventDefault();let O=A.nativeEvent.submitter,R=(O==null?void 0:O.getAttribute("formmethod"))||s;v(O||A.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:i,state:a,relative:u,preventScrollReset:d,viewTransition:h})};return B.createElement("form",{ref:y,method:x,action:S,onSubmit:r?c:_,...p,"data-discover":!T&&t==="render"?"true":void 0})});n9.displayName="Form";function r9(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NB(t){let e=B.useContext(Kl);return _t(e,r9(t)),e}function i9(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s}={}){let o=Qt(),c=ca(),u=qf(t,{relative:a});return B.useCallback(d=>{if(N7(d,e)){d.preventDefault();let h=n!==void 0?n:qc(c)===qc(u);o(t,{replace:h,state:r,preventScrollReset:i,relative:a,viewTransition:s})}},[c,o,u,n,r,e,t,i,a,s])}function a9(t){Nr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=B.useRef(HE(t)),n=B.useRef(!1),r=ca(),i=B.useMemo(()=>M7(r.search,n.current?null:e.current),[r.search]),a=Qt(),s=B.useCallback((o,c)=>{const u=HE(typeof o=="function"?o(i):o);n.current=!0,a("?"+u,c)},[a,i]);return[i,s]}var s9=0,o9=()=>`__${String(++s9)}__`;function l9(){let{router:t}=NB("useSubmit"),{basename:e}=B.useContext(ti),n=E7();return B.useCallback(async(r,i={})=>{let{action:a,method:s,encType:o,formData:c,body:u}=U7(r,e);if(i.navigate===!1){let d=i.fetcherKey||o9();await t.fetch(d,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||s,formEncType:i.encType||o,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function u9(t,{relative:e}={}){let{basename:n}=B.useContext(ti),r=B.useContext(Ur);_t(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...qf(t||".",{relative:e})},s=ca();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(d=>d==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let d=o.toString();a.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Ji([n,a.pathname])),qc(a)}function c9(t,e={}){let n=B.useContext(wB);_t(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=NB("useViewTransitionState"),i=qf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=ra(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=ra(n.nextLocation.pathname,r)||n.nextLocation.pathname;return xm(i.pathname,s)!=null||xm(i.pathname,a)!=null}[...z7];var ev={exports:{}},tv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AL;function f9(){if(AL)return tv;AL=1;var t=Bp();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return tv.useSyncExternalStoreWithSelector=function(c,u,d,h,p){var y=i(null);if(y.current===null){var v={hasValue:!1,value:null};y.current=v}else v=y.current;y=s(function(){function x(R){if(!T){if(T=!0,_=R,R=h(R),p!==void 0&&v.hasValue){var C=v.value;if(p(C,R))return A=C}return A=R}if(C=A,n(_,R))return C;var L=h(R);return p!==void 0&&p(C,L)?(_=R,C):(_=R,A=L)}var T=!1,_,A,O=d===void 0?null:d;return[function(){return x(u())},O===null?void 0:function(){return x(O())}]},[u,d,h,p]);var S=r(c,y[0],y[1]);return a(function(){v.hasValue=!0,v.value=S},[S]),o(S),S},tv}var wL;function d9(){return wL||(wL=1,ev.exports=f9()),ev.exports}var h9=d9();function m9(t){t()}function p9(){let t=null,e=null;return{clear(){t=null,e=null},notify(){m9(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var _L={notify(){},get:()=>[]};function g9(t,e){let n,r=_L,i=0,a=!1;function s(S){d();const x=r.subscribe(S);let T=!1;return()=>{T||(T=!0,x(),h())}}function o(){r.notify()}function c(){v.onStateChange&&v.onStateChange()}function u(){return a}function d(){i++,n||(n=t.subscribe(c),r=p9())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=_L)}function p(){a||(a=!0,d())}function y(){a&&(a=!1,h())}const v={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:p,tryUnsubscribe:y,getListeners:()=>r};return v}var y9=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",v9=y9(),x9=()=>typeof navigator<"u"&&navigator.product==="ReactNative",b9=x9(),S9=()=>v9||b9?B.useLayoutEffect:B.useEffect,E9=S9(),nv=Symbol.for("react-redux-context"),rv=typeof globalThis<"u"?globalThis:{};function T9(){if(!B.createContext)return{};const t=rv[nv]??(rv[nv]=new Map);let e=t.get(B.createContext);return e||(e=B.createContext(null),t.set(B.createContext,e)),e}var Wa=T9();function A9(t){const{children:e,context:n,serverState:r,store:i}=t,a=B.useMemo(()=>{const c=g9(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=B.useMemo(()=>i.getState(),[i]);E9(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=n||Wa;return B.createElement(o.Provider,{value:a},e)}var w9=A9;function lA(t=Wa){return function(){return B.useContext(t)}}var MB=lA();function kB(t=Wa){const e=t===Wa?MB:lA(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var _9=kB();function R9(t=Wa){const e=t===Wa?_9:kB(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Vt=R9(),O9=(t,e)=>t===e;function C9(t=Wa){const e=t===Wa?MB:lA(t),n=(r,i={})=>{const{equalityFn:a=O9}=typeof i=="function"?{equalityFn:i}:i,s=e(),{store:o,subscription:c,getServerState:u}=s;B.useRef(!0);const d=B.useCallback({[r.name](p){return r(p)}}[r.name],[r]),h=h9.useSyncExternalStoreWithSelector(c.addNestedSub,o.getState,u||o.getState,d,a);return B.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var qt=C9();const jB="LOGIN_REQUEST",uA="LOGIN_SUCCESS",UB="LOGIN_FAILURE",BB="LOGOUT",L9="LOGOUT_SUCCESS";function FB(t,e){return function(){return t.apply(e,arguments)}}const{toString:D9}=Object.prototype,{getPrototypeOf:cA}=Object,{iterator:Gp,toStringTag:$B}=Symbol,Vp=(t=>e=>{const n=D9.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ni=t=>(t=t.toLowerCase(),e=>Vp(e)===t),qp=t=>e=>typeof e===t,{isArray:Wl}=Array,Hc=qp("undefined");function I9(t){return t!==null&&!Hc(t)&&t.constructor!==null&&!Hc(t.constructor)&&Xn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const GB=ni("ArrayBuffer");function P9(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&GB(t.buffer),e}const N9=qp("string"),Xn=qp("function"),VB=qp("number"),Hp=t=>t!==null&&typeof t=="object",M9=t=>t===!0||t===!1,im=t=>{if(Vp(t)!=="object")return!1;const e=cA(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!($B in t)&&!(Gp in t)},k9=ni("Date"),j9=ni("File"),U9=ni("Blob"),B9=ni("FileList"),F9=t=>Hp(t)&&Xn(t.pipe),$9=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Xn(t.append)&&((e=Vp(t))==="formdata"||e==="object"&&Xn(t.toString)&&t.toString()==="[object FormData]"))},G9=ni("URLSearchParams"),[V9,q9,H9,z9]=["ReadableStream","Request","Response","Headers"].map(ni),K9=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Hf(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Wl(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const a=n?Object.getOwnPropertyNames(t):Object.keys(t),s=a.length;let o;for(r=0;r<s;r++)o=a[r],e.call(null,t[o],o,t)}}function qB(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Ms=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,HB=t=>!Hc(t)&&t!==Ms;function zE(){const{caseless:t}=HB(this)&&this||{},e={},n=(r,i)=>{const a=t&&qB(e,i)||i;im(e[a])&&im(r)?e[a]=zE(e[a],r):im(r)?e[a]=zE({},r):Wl(r)?e[a]=r.slice():e[a]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Hf(arguments[r],n);return e}const Y9=(t,e,n,{allOwnKeys:r}={})=>(Hf(e,(i,a)=>{n&&Xn(i)?t[a]=FB(i,n):t[a]=i},{allOwnKeys:r}),t),W9=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),X9=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Q9=(t,e,n,r)=>{let i,a,s;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)s=i[a],(!r||r(s,t,e))&&!o[s]&&(e[s]=t[s],o[s]=!0);t=n!==!1&&cA(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Z9=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},J9=t=>{if(!t)return null;if(Wl(t))return t;let e=t.length;if(!VB(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},ez=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&cA(Uint8Array)),tz=(t,e)=>{const r=(t&&t[Gp]).call(t);let i;for(;(i=r.next())&&!i.done;){const a=i.value;e.call(t,a[0],a[1])}},nz=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},rz=ni("HTMLFormElement"),iz=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),RL=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),az=ni("RegExp"),zB=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Hf(n,(i,a)=>{let s;(s=e(i,a,t))!==!1&&(r[a]=s||i)}),Object.defineProperties(t,r)},sz=t=>{zB(t,(e,n)=>{if(Xn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Xn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},oz=(t,e)=>{const n={},r=i=>{i.forEach(a=>{n[a]=!0})};return Wl(t)?r(t):r(String(t).split(e)),n},lz=()=>{},uz=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function cz(t){return!!(t&&Xn(t.append)&&t[$B]==="FormData"&&t[Gp])}const fz=t=>{const e=new Array(10),n=(r,i)=>{if(Hp(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const a=Wl(r)?[]:{};return Hf(r,(s,o)=>{const c=n(s,i+1);!Hc(c)&&(a[o]=c)}),e[i]=void 0,a}}return r};return n(t,0)},dz=ni("AsyncFunction"),hz=t=>t&&(Hp(t)||Xn(t))&&Xn(t.then)&&Xn(t.catch),KB=((t,e)=>t?setImmediate:e?((n,r)=>(Ms.addEventListener("message",({source:i,data:a})=>{i===Ms&&a===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Ms.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Xn(Ms.postMessage)),mz=typeof queueMicrotask<"u"?queueMicrotask.bind(Ms):typeof process<"u"&&process.nextTick||KB,pz=t=>t!=null&&Xn(t[Gp]),oe={isArray:Wl,isArrayBuffer:GB,isBuffer:I9,isFormData:$9,isArrayBufferView:P9,isString:N9,isNumber:VB,isBoolean:M9,isObject:Hp,isPlainObject:im,isReadableStream:V9,isRequest:q9,isResponse:H9,isHeaders:z9,isUndefined:Hc,isDate:k9,isFile:j9,isBlob:U9,isRegExp:az,isFunction:Xn,isStream:F9,isURLSearchParams:G9,isTypedArray:ez,isFileList:B9,forEach:Hf,merge:zE,extend:Y9,trim:K9,stripBOM:W9,inherits:X9,toFlatObject:Q9,kindOf:Vp,kindOfTest:ni,endsWith:Z9,toArray:J9,forEachEntry:tz,matchAll:nz,isHTMLForm:rz,hasOwnProperty:RL,hasOwnProp:RL,reduceDescriptors:zB,freezeMethods:sz,toObjectSet:oz,toCamelCase:iz,noop:lz,toFiniteNumber:uz,findKey:qB,global:Ms,isContextDefined:HB,isSpecCompliantForm:cz,toJSONObject:fz,isAsyncFn:dz,isThenable:hz,setImmediate:KB,asap:mz,isIterable:pz};function Ue(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}oe.inherits(Ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oe.toJSONObject(this.config),code:this.code,status:this.status}}});const YB=Ue.prototype,WB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{WB[t]={value:t}});Object.defineProperties(Ue,WB);Object.defineProperty(YB,"isAxiosError",{value:!0});Ue.from=(t,e,n,r,i,a)=>{const s=Object.create(YB);return oe.toFlatObject(t,s,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),Ue.call(s,t.message,e,n,r,i),s.cause=t,s.name=t.name,a&&Object.assign(s,a),s};const gz=null;function KE(t){return oe.isPlainObject(t)||oe.isArray(t)}function XB(t){return oe.endsWith(t,"[]")?t.slice(0,-2):t}function OL(t,e,n){return t?t.concat(e).map(function(i,a){return i=XB(i),!n&&a?"["+i+"]":i}).join(n?".":""):e}function yz(t){return oe.isArray(t)&&!t.some(KE)}const vz=oe.toFlatObject(oe,{},null,function(e){return/^is[A-Z]/.test(e)});function zp(t,e,n){if(!oe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=oe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,x){return!oe.isUndefined(x[S])});const r=n.metaTokens,i=n.visitor||d,a=n.dots,s=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&oe.isSpecCompliantForm(e);if(!oe.isFunction(i))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(oe.isDate(v))return v.toISOString();if(oe.isBoolean(v))return v.toString();if(!c&&oe.isBlob(v))throw new Ue("Blob is not supported. Use a Buffer instead.");return oe.isArrayBuffer(v)||oe.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,S,x){let T=v;if(v&&!x&&typeof v=="object"){if(oe.endsWith(S,"{}"))S=r?S:S.slice(0,-2),v=JSON.stringify(v);else if(oe.isArray(v)&&yz(v)||(oe.isFileList(v)||oe.endsWith(S,"[]"))&&(T=oe.toArray(v)))return S=XB(S),T.forEach(function(A,O){!(oe.isUndefined(A)||A===null)&&e.append(s===!0?OL([S],O,a):s===null?S:S+"[]",u(A))}),!1}return KE(v)?!0:(e.append(OL(x,S,a),u(v)),!1)}const h=[],p=Object.assign(vz,{defaultVisitor:d,convertValue:u,isVisitable:KE});function y(v,S){if(!oe.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+S.join("."));h.push(v),oe.forEach(v,function(T,_){(!(oe.isUndefined(T)||T===null)&&i.call(e,T,oe.isString(_)?_.trim():_,S,p))===!0&&y(T,S?S.concat(_):[_])}),h.pop()}}if(!oe.isObject(t))throw new TypeError("data must be an object");return y(t),e}function CL(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function fA(t,e){this._pairs=[],t&&zp(t,this,e)}const QB=fA.prototype;QB.append=function(e,n){this._pairs.push([e,n])};QB.toString=function(e){const n=e?function(r){return e.call(this,r,CL)}:CL;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function xz(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ZB(t,e,n){if(!e)return t;const r=n&&n.encode||xz;oe.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(i?a=i(e,n):a=oe.isURLSearchParams(e)?e.toString():new fA(e,n).toString(r),a){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class LL{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){oe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const JB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bz=typeof URLSearchParams<"u"?URLSearchParams:fA,Sz=typeof FormData<"u"?FormData:null,Ez=typeof Blob<"u"?Blob:null,Tz={isBrowser:!0,classes:{URLSearchParams:bz,FormData:Sz,Blob:Ez},protocols:["http","https","file","blob","url","data"]},dA=typeof window<"u"&&typeof document<"u",YE=typeof navigator=="object"&&navigator||void 0,Az=dA&&(!YE||["ReactNative","NativeScript","NS"].indexOf(YE.product)<0),wz=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_z=dA&&window.location.href||"http://localhost",Rz=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:dA,hasStandardBrowserEnv:Az,hasStandardBrowserWebWorkerEnv:wz,navigator:YE,origin:_z},Symbol.toStringTag,{value:"Module"})),Mn={...Rz,...Tz};function Oz(t,e){return zp(t,new Mn.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,a){return Mn.isNode&&oe.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function Cz(t){return oe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Lz(t){const e={},n=Object.keys(t);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],e[a]=t[a];return e}function eF(t){function e(n,r,i,a){let s=n[a++];if(s==="__proto__")return!0;const o=Number.isFinite(+s),c=a>=n.length;return s=!s&&oe.isArray(i)?i.length:s,c?(oe.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!o):((!i[s]||!oe.isObject(i[s]))&&(i[s]=[]),e(n,r,i[s],a)&&oe.isArray(i[s])&&(i[s]=Lz(i[s])),!o)}if(oe.isFormData(t)&&oe.isFunction(t.entries)){const n={};return oe.forEachEntry(t,(r,i)=>{e(Cz(r),i,n,0)}),n}return null}function Dz(t,e,n){if(oe.isString(t))try{return(e||JSON.parse)(t),oe.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const zf={transitional:JB,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,a=oe.isObject(e);if(a&&oe.isHTMLForm(e)&&(e=new FormData(e)),oe.isFormData(e))return i?JSON.stringify(eF(e)):e;if(oe.isArrayBuffer(e)||oe.isBuffer(e)||oe.isStream(e)||oe.isFile(e)||oe.isBlob(e)||oe.isReadableStream(e))return e;if(oe.isArrayBufferView(e))return e.buffer;if(oe.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Oz(e,this.formSerializer).toString();if((o=oe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return zp(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),Dz(e)):e}],transformResponse:[function(e){const n=this.transitional||zf.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(oe.isResponse(e)||oe.isReadableStream(e))return e;if(e&&oe.isString(e)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?Ue.from(o,Ue.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Mn.classes.FormData,Blob:Mn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oe.forEach(["delete","get","head","post","put","patch"],t=>{zf.headers[t]={}});const Iz=oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Pz=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||e[n]&&Iz[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},DL=Symbol("internals");function cc(t){return t&&String(t).trim().toLowerCase()}function am(t){return t===!1||t==null?t:oe.isArray(t)?t.map(am):String(t)}function Nz(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Mz=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function iv(t,e,n,r,i){if(oe.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!oe.isString(e)){if(oe.isString(r))return e.indexOf(r)!==-1;if(oe.isRegExp(r))return r.test(e)}}function kz(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function jz(t,e){const n=oe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,a,s){return this[r].call(this,e,i,a,s)},configurable:!0})})}let Qn=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function a(o,c,u){const d=cc(c);if(!d)throw new Error("header name must be a non-empty string");const h=oe.findKey(i,d);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||c]=am(o))}const s=(o,c)=>oe.forEach(o,(u,d)=>a(u,d,c));if(oe.isPlainObject(e)||e instanceof this.constructor)s(e,n);else if(oe.isString(e)&&(e=e.trim())&&!Mz(e))s(Pz(e),n);else if(oe.isObject(e)&&oe.isIterable(e)){let o={},c,u;for(const d of e){if(!oe.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[u=d[0]]=(c=o[u])?oe.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}s(o,n)}else e!=null&&a(n,e,r);return this}get(e,n){if(e=cc(e),e){const r=oe.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return Nz(i);if(oe.isFunction(n))return n.call(this,i,r);if(oe.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=cc(e),e){const r=oe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||iv(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function a(s){if(s=cc(s),s){const o=oe.findKey(r,s);o&&(!n||iv(r,r[o],o,n))&&(delete r[o],i=!0)}}return oe.isArray(e)?e.forEach(a):a(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const a=n[r];(!e||iv(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const n=this,r={};return oe.forEach(this,(i,a)=>{const s=oe.findKey(r,a);if(s){n[s]=am(i),delete n[a];return}const o=e?kz(a):String(a).trim();o!==a&&delete n[a],n[o]=am(i),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return oe.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&oe.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[DL]=this[DL]={accessors:{}}).accessors,i=this.prototype;function a(s){const o=cc(s);r[o]||(jz(i,s),r[o]=!0)}return oe.isArray(e)?e.forEach(a):a(e),this}};Qn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);oe.reduceDescriptors(Qn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});oe.freezeMethods(Qn);function av(t,e){const n=this||zf,r=e||n,i=Qn.from(r.headers);let a=r.data;return oe.forEach(t,function(o){a=o.call(n,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function tF(t){return!!(t&&t.__CANCEL__)}function Xl(t,e,n){Ue.call(this,t??"canceled",Ue.ERR_CANCELED,e,n),this.name="CanceledError"}oe.inherits(Xl,Ue,{__CANCEL__:!0});function nF(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ue("Request failed with status code "+n.status,[Ue.ERR_BAD_REQUEST,Ue.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Uz(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Bz(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,a=0,s;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=r[a];s||(s=u),n[i]=c,r[i]=u;let h=a,p=0;for(;h!==i;)p+=n[h++],h=h%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),u-s<e)return;const y=d&&u-d;return y?Math.round(p*1e3/y):void 0}}function Fz(t,e){let n=0,r=1e3/e,i,a;const s=(u,d=Date.now())=>{n=d,i=null,a&&(clearTimeout(a),a=null),t.apply(null,u)};return[(...u)=>{const d=Date.now(),h=d-n;h>=r?s(u,d):(i=u,a||(a=setTimeout(()=>{a=null,s(i)},r-h)))},()=>i&&s(i)]}const bm=(t,e,n=3)=>{let r=0;const i=Bz(50,250);return Fz(a=>{const s=a.loaded,o=a.lengthComputable?a.total:void 0,c=s-r,u=i(c),d=s<=o;r=s;const h={loaded:s,total:o,progress:o?s/o:void 0,bytes:c,rate:u||void 0,estimated:u&&o&&d?(o-s)/u:void 0,event:a,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(h)},n)},IL=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},PL=t=>(...e)=>oe.asap(()=>t(...e)),$z=Mn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Mn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Mn.origin),Mn.navigator&&/(msie|trident)/i.test(Mn.navigator.userAgent)):()=>!0,Gz=Mn.hasStandardBrowserEnv?{write(t,e,n,r,i,a){const s=[t+"="+encodeURIComponent(e)];oe.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),oe.isString(r)&&s.push("path="+r),oe.isString(i)&&s.push("domain="+i),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Vz(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function qz(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function rF(t,e,n){let r=!Vz(e);return t&&(r||n==!1)?qz(t,e):e}const NL=t=>t instanceof Qn?{...t}:t;function Ys(t,e){e=e||{};const n={};function r(u,d,h,p){return oe.isPlainObject(u)&&oe.isPlainObject(d)?oe.merge.call({caseless:p},u,d):oe.isPlainObject(d)?oe.merge({},d):oe.isArray(d)?d.slice():d}function i(u,d,h,p){if(oe.isUndefined(d)){if(!oe.isUndefined(u))return r(void 0,u,h,p)}else return r(u,d,h,p)}function a(u,d){if(!oe.isUndefined(d))return r(void 0,d)}function s(u,d){if(oe.isUndefined(d)){if(!oe.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function o(u,d,h){if(h in e)return r(u,d);if(h in t)return r(void 0,u)}const c={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(u,d,h)=>i(NL(u),NL(d),h,!0)};return oe.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=c[d]||i,p=h(t[d],e[d],d);oe.isUndefined(p)&&h!==o||(n[d]=p)}),n}const iF=t=>{const e=Ys({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:o}=e;e.headers=s=Qn.from(s),e.url=ZB(rF(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(oe.isFormData(n)){if(Mn.hasStandardBrowserEnv||Mn.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((c=s.getContentType())!==!1){const[u,...d]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];s.setContentType([u||"multipart/form-data",...d].join("; "))}}if(Mn.hasStandardBrowserEnv&&(r&&oe.isFunction(r)&&(r=r(e)),r||r!==!1&&$z(e.url))){const u=i&&a&&Gz.read(a);u&&s.set(i,u)}return e},Hz=typeof XMLHttpRequest<"u",zz=Hz&&function(t){return new Promise(function(n,r){const i=iF(t);let a=i.data;const s=Qn.from(i.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:u}=i,d,h,p,y,v;function S(){y&&y(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function T(){if(!x)return;const A=Qn.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),R={data:!o||o==="text"||o==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:A,config:t,request:x};nF(function(L){n(L),S()},function(L){r(L),S()},R),x=null}"onloadend"in x?x.onloadend=T:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(T)},x.onabort=function(){x&&(r(new Ue("Request aborted",Ue.ECONNABORTED,t,x)),x=null)},x.onerror=function(){r(new Ue("Network Error",Ue.ERR_NETWORK,t,x)),x=null},x.ontimeout=function(){let O=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const R=i.transitional||JB;i.timeoutErrorMessage&&(O=i.timeoutErrorMessage),r(new Ue(O,R.clarifyTimeoutError?Ue.ETIMEDOUT:Ue.ECONNABORTED,t,x)),x=null},a===void 0&&s.setContentType(null),"setRequestHeader"in x&&oe.forEach(s.toJSON(),function(O,R){x.setRequestHeader(R,O)}),oe.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),o&&o!=="json"&&(x.responseType=i.responseType),u&&([p,v]=bm(u,!0),x.addEventListener("progress",p)),c&&x.upload&&([h,y]=bm(c),x.upload.addEventListener("progress",h),x.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(d=A=>{x&&(r(!A||A.type?new Xl(null,t,x):A),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const _=Uz(i.url);if(_&&Mn.protocols.indexOf(_)===-1){r(new Ue("Unsupported protocol "+_+":",Ue.ERR_BAD_REQUEST,t));return}x.send(a||null)})},Kz=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const a=function(u){if(!i){i=!0,o();const d=u instanceof Error?u:this.reason;r.abort(d instanceof Ue?d:new Xl(d instanceof Error?d.message:d))}};let s=e&&setTimeout(()=>{s=null,a(new Ue(`timeout ${e} of ms exceeded`,Ue.ETIMEDOUT))},e);const o=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),t=null)};t.forEach(u=>u.addEventListener("abort",a));const{signal:c}=r;return c.unsubscribe=()=>oe.asap(o),c}},Yz=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},Wz=async function*(t,e){for await(const n of Xz(t))yield*Yz(n,e)},Xz=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},ML=(t,e,n,r)=>{const i=Wz(t,e);let a=0,s,o=c=>{s||(s=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await i.next();if(u){o(),c.close();return}let h=d.byteLength;if(n){let p=a+=h;n(p)}c.enqueue(new Uint8Array(d))}catch(u){throw o(u),u}},cancel(c){return o(c),i.return()}},{highWaterMark:2})},Kp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",aF=Kp&&typeof ReadableStream=="function",Qz=Kp&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),sF=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Zz=aF&&sF(()=>{let t=!1;const e=new Request(Mn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),kL=64*1024,WE=aF&&sF(()=>oe.isReadableStream(new Response("").body)),Sm={stream:WE&&(t=>t.body)};Kp&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Sm[e]&&(Sm[e]=oe.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Ue(`Response type '${e}' is not supported`,Ue.ERR_NOT_SUPPORT,r)})})})(new Response);const Jz=async t=>{if(t==null)return 0;if(oe.isBlob(t))return t.size;if(oe.isSpecCompliantForm(t))return(await new Request(Mn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(oe.isArrayBufferView(t)||oe.isArrayBuffer(t))return t.byteLength;if(oe.isURLSearchParams(t)&&(t=t+""),oe.isString(t))return(await Qz(t)).byteLength},eK=async(t,e)=>{const n=oe.toFiniteNumber(t.getContentLength());return n??Jz(e)},tK=Kp&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:a,timeout:s,onDownloadProgress:o,onUploadProgress:c,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:p}=iF(t);u=u?(u+"").toLowerCase():"text";let y=Kz([i,a&&a.toAbortSignal()],s),v;const S=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let x;try{if(c&&Zz&&n!=="get"&&n!=="head"&&(x=await eK(d,r))!==0){let R=new Request(e,{method:"POST",body:r,duplex:"half"}),C;if(oe.isFormData(r)&&(C=R.headers.get("content-type"))&&d.setContentType(C),R.body){const[L,P]=IL(x,bm(PL(c)));r=ML(R.body,kL,L,P)}}oe.isString(h)||(h=h?"include":"omit");const T="credentials"in Request.prototype;v=new Request(e,{...p,signal:y,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:T?h:void 0});let _=await fetch(v,p);const A=WE&&(u==="stream"||u==="response");if(WE&&(o||A&&S)){const R={};["status","statusText","headers"].forEach(N=>{R[N]=_[N]});const C=oe.toFiniteNumber(_.headers.get("content-length")),[L,P]=o&&IL(C,bm(PL(o),!0))||[];_=new Response(ML(_.body,kL,L,()=>{P&&P(),S&&S()}),R)}u=u||"text";let O=await Sm[oe.findKey(Sm,u)||"text"](_,t);return!A&&S&&S(),await new Promise((R,C)=>{nF(R,C,{data:O,headers:Qn.from(_.headers),status:_.status,statusText:_.statusText,config:t,request:v})})}catch(T){throw S&&S(),T&&T.name==="TypeError"&&/Load failed|fetch/i.test(T.message)?Object.assign(new Ue("Network Error",Ue.ERR_NETWORK,t,v),{cause:T.cause||T}):Ue.from(T,T&&T.code,t,v)}}),XE={http:gz,xhr:zz,fetch:tK};oe.forEach(XE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const jL=t=>`- ${t}`,nK=t=>oe.isFunction(t)||t===null||t===!1,oF={getAdapter:t=>{t=oe.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let a=0;a<e;a++){n=t[a];let s;if(r=n,!nK(n)&&(r=XE[(s=String(n)).toLowerCase()],r===void 0))throw new Ue(`Unknown adapter '${s}'`);if(r)break;i[s||"#"+a]=r}if(!r){const a=Object.entries(i).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=e?a.length>1?`since :
`+a.map(jL).join(`
`):" "+jL(a[0]):"as no adapter specified";throw new Ue("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:XE};function sv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Xl(null,t)}function UL(t){return sv(t),t.headers=Qn.from(t.headers),t.data=av.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),oF.getAdapter(t.adapter||zf.adapter)(t).then(function(r){return sv(t),r.data=av.call(t,t.transformResponse,r),r.headers=Qn.from(r.headers),r},function(r){return tF(r)||(sv(t),r&&r.response&&(r.response.data=av.call(t,t.transformResponse,r.response),r.response.headers=Qn.from(r.response.headers))),Promise.reject(r)})}const lF="1.10.0",Yp={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Yp[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const BL={};Yp.transitional=function(e,n,r){function i(a,s){return"[Axios v"+lF+"] Transitional option '"+a+"'"+s+(r?". "+r:"")}return(a,s,o)=>{if(e===!1)throw new Ue(i(s," has been removed"+(n?" in "+n:"")),Ue.ERR_DEPRECATED);return n&&!BL[s]&&(BL[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,s,o):!0}};Yp.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function rK(t,e,n){if(typeof t!="object")throw new Ue("options must be an object",Ue.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const a=r[i],s=e[a];if(s){const o=t[a],c=o===void 0||s(o,a,t);if(c!==!0)throw new Ue("option "+a+" must be "+c,Ue.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ue("Unknown option "+a,Ue.ERR_BAD_OPTION)}}const sm={assertOptions:rK,validators:Yp},fi=sm.validators;let Gs=class{constructor(e){this.defaults=e||{},this.interceptors={request:new LL,response:new LL}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ys(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:a}=n;r!==void 0&&sm.assertOptions(r,{silentJSONParsing:fi.transitional(fi.boolean),forcedJSONParsing:fi.transitional(fi.boolean),clarifyTimeoutError:fi.transitional(fi.boolean)},!1),i!=null&&(oe.isFunction(i)?n.paramsSerializer={serialize:i}:sm.assertOptions(i,{encode:fi.function,serialize:fi.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),sm.assertOptions(n,{baseUrl:fi.spelling("baseURL"),withXsrfToken:fi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=a&&oe.merge(a.common,a[n.method]);a&&oe.forEach(["delete","get","head","post","put","patch","common"],v=>{delete a[v]}),n.headers=Qn.concat(s,a);const o=[];let c=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(c=c&&S.synchronous,o.unshift(S.fulfilled,S.rejected))});const u=[];this.interceptors.response.forEach(function(S){u.push(S.fulfilled,S.rejected)});let d,h=0,p;if(!c){const v=[UL.bind(this),void 0];for(v.unshift.apply(v,o),v.push.apply(v,u),p=v.length,d=Promise.resolve(n);h<p;)d=d.then(v[h++],v[h++]);return d}p=o.length;let y=n;for(h=0;h<p;){const v=o[h++],S=o[h++];try{y=v(y)}catch(x){S.call(this,x);break}}try{d=UL.call(this,y)}catch(v){return Promise.reject(v)}for(h=0,p=u.length;h<p;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=Ys(this.defaults,e);const n=rF(e.baseURL,e.url,e.allowAbsoluteUrls);return ZB(n,e.params,e.paramsSerializer)}};oe.forEach(["delete","get","head","options"],function(e){Gs.prototype[e]=function(n,r){return this.request(Ys(r||{},{method:e,url:n,data:(r||{}).data}))}});oe.forEach(["post","put","patch"],function(e){function n(r){return function(a,s,o){return this.request(Ys(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Gs.prototype[e]=n(),Gs.prototype[e+"Form"]=n(!0)});let iK=class uF{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const s=new Promise(o=>{r.subscribe(o),a=o}).then(i);return s.cancel=function(){r.unsubscribe(a)},s},e(function(a,s,o){r.reason||(r.reason=new Xl(a,s,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new uF(function(i){e=i}),cancel:e}}};function aK(t){return function(n){return t.apply(null,n)}}function sK(t){return oe.isObject(t)&&t.isAxiosError===!0}const QE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(QE).forEach(([t,e])=>{QE[e]=t});function cF(t){const e=new Gs(t),n=FB(Gs.prototype.request,e);return oe.extend(n,Gs.prototype,e,{allOwnKeys:!0}),oe.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return cF(Ys(t,i))},n}const Gt=cF(zf);Gt.Axios=Gs;Gt.CanceledError=Xl;Gt.CancelToken=iK;Gt.isCancel=tF;Gt.VERSION=lF;Gt.toFormData=zp;Gt.AxiosError=Ue;Gt.Cancel=Gt.CanceledError;Gt.all=function(e){return Promise.all(e)};Gt.spread=aK;Gt.isAxiosError=sK;Gt.mergeConfig=Ys;Gt.AxiosHeaders=Qn;Gt.formToJSON=t=>eF(oe.isHTMLForm(t)?new FormData(t):t);Gt.getAdapter=oF.getAdapter;Gt.HttpStatusCode=QE;Gt.default=Gt;const{Axios:EEe,AxiosError:TEe,CanceledError:AEe,isCancel:wEe,CancelToken:_Ee,VERSION:REe,all:OEe,Cancel:CEe,isAxiosError:LEe,spread:DEe,toFormData:IEe,AxiosHeaders:PEe,HttpStatusCode:NEe,formToJSON:MEe,getAdapter:kEe,mergeConfig:jEe}=Gt;function En(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var oK=typeof Symbol=="function"&&Symbol.observable||"@@observable",FL=oK,ov=()=>Math.random().toString(36).substring(7).split("").join("."),lK={INIT:`@@redux/INIT${ov()}`,REPLACE:`@@redux/REPLACE${ov()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ov()}`},Em=lK;function fF(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function dF(t,e,n){if(typeof t!="function")throw new Error(En(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(En(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(En(1));return n(dF)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((x,T)=>{s.set(T,x)}))}function d(){if(c)throw new Error(En(3));return i}function h(x){if(typeof x!="function")throw new Error(En(4));if(c)throw new Error(En(5));let T=!0;u();const _=o++;return s.set(_,x),function(){if(T){if(c)throw new Error(En(6));T=!1,u(),s.delete(_),a=null}}}function p(x){if(!fF(x))throw new Error(En(7));if(typeof x.type>"u")throw new Error(En(8));if(typeof x.type!="string")throw new Error(En(17));if(c)throw new Error(En(9));try{c=!0,i=r(i,x)}finally{c=!1}return(a=s).forEach(_=>{_()}),x}function y(x){if(typeof x!="function")throw new Error(En(10));r=x,p({type:Em.REPLACE})}function v(){const x=h;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(En(11));function _(){const O=T;O.next&&O.next(d())}return _(),{unsubscribe:x(_)}},[FL](){return this}}}return p({type:Em.INIT}),{dispatch:p,subscribe:h,getState:d,replaceReducer:y,[FL]:v}}function uK(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Em.INIT})>"u")throw new Error(En(12));if(typeof n(void 0,{type:Em.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(En(13))})}function hF(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{uK(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let d=0;d<r.length;d++){const h=r[d],p=n[h],y=s[h],v=p(y,o);if(typeof v>"u")throw o&&o.type,new Error(En(14));u[h]=v,c=c||v!==y}return c=c||r.length!==Object.keys(s).length,c?u:s}}function Tm(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function cK(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(En(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=t.map(c=>c(s));return a=Tm(...o)(i.dispatch),{...i,dispatch:a}}}function mF(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var fK=mF(),dK=mF,hK=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Tm:Tm.apply(null,arguments)},pF=class Ac extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ac.prototype)}static get[Symbol.species](){return Ac}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ac(...e[0].concat(this)):new Ac(...e.concat(this))}};function mK(t){return typeof t=="boolean"}var pK=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new pF;return n&&(mK(n)?s.push(fK):s.push(dK(n.extraArgument))),s},gK="RTK_autoBatch",$L=t=>e=>{setTimeout(e,t)},yK=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$L(10):t.type==="callback"?t.queueNotification:$L(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const h=()=>i&&d(),p=r.subscribe(h);return o.add(d),()=>{p(),o.delete(d)}},dispatch(d){var h;try{return i=!((h=d==null?void 0:d.meta)!=null&&h[gK]),a=!i,a&&(s||(s=!0,c(u))),r.dispatch(d)}finally{i=!0}}})},vK=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new pF(t);return r&&i.push(yK(typeof r=="object"?r:void 0)),i};function xK(t){const e=pK(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(fF(n))o=hF(n);else throw new Error(bK(1));let c;typeof r=="function"?c=r(e):c=e();let u=Tm;i&&(u=hK({trace:!1,...typeof i=="object"&&i}));const d=cK(...c),h=vK(d);let p=typeof s=="function"?s(h):h();const y=u(...p);return dF(o,a,y)}function bK(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const GL={accessToken:localStorage.getItem("access_token")||null,refreshToken:localStorage.getItem("refresh_token")||null,isAuthenticated:!!localStorage.getItem("access_token"),user:JSON.parse(localStorage.getItem("user_info"))||null,loading:!1,error:null},SK=(t=GL,e)=>{switch(e.type){case jB:return{...t,loading:!0,error:null};case uA:return console.log("Login successful, updating state with tokens and user info:",e.payload),{...t,loading:!1,isAuthenticated:!0,accessToken:e.payload.accessToken,refreshToken:e.payload.refreshToken,user:e.payload.user,error:null};case UB:return{...t,loading:!1,isAuthenticated:!1,accessToken:null,refreshToken:null,user:null,error:e.payload};case BB:return{...GL};default:return t}},gF="GET_CONTENTS_REQUEST",yF="GET_CONTENTS_SUCCESS",vF="GET_CONTENTS_FAILURE",xF="GET_CONTENT_REQUEST",bF="GET_CONTENT_SUCCESS",SF="GET_CONTENT_FAILURE",EF="CREATE_CONTENT_REQUEST",TF="CREATE_CONTENT_SUCCESS",AF="CREATE_CONTENT_FAILURE",wF="UPDATE_CONTENT_REQUEST",_F="UPDATE_CONTENT_SUCCESS",RF="UPDATE_CONTENT_FAILURE",OF="DELETE_CONTENT_REQUEST",CF="DELETE_CONTENT_SUCCESS",LF="DELETE_CONTENT_FAILURE",EK={contents:[],pagination:{current_page:1,last_page:1,per_page:15,total:0,from:0,to:0,links:[]},selectedContent:null,loading:!1,error:null},TK=(t=EK,e)=>{switch(e.type){case gF:case xF:case EF:case wF:case OF:return{...t,loading:!0,error:null};case yF:return{...t,loading:!1,contents:e.payload.data,pagination:{current_page:e.payload.current_page,last_page:e.payload.last_page,per_page:e.payload.per_page,total:e.payload.total,from:e.payload.from,to:e.payload.to,links:e.payload.links},error:null};case bF:return{...t,loading:!1,selectedContent:e.payload,error:null};case TF:return{...t,loading:!1,contents:[...t.contents,e.payload],error:null};case _F:return{...t,loading:!1,contents:t.contents.map(n=>n.id===e.payload.id?e.payload:n),selectedContent:e.payload,error:null};case CF:return{...t,loading:!1,contents:t.contents.filter(n=>n.id!==e.payload),error:null};case vF:case SF:case AF:case RF:case LF:return{...t,loading:!1,error:e.payload};default:return t}},DF="FETCH_OVERVIEW_REQUEST",IF="FETCH_OVERVIEW_SUCCESS",PF="FETCH_OVERVIEW_FAILURE",NF="SET_TIME_RANGE",AK={data:null,timeRange:"week",loading:!1,error:null},wK=(t=AK,e)=>{switch(e.type){case DF:return{...t,loading:!0,error:null};case IF:return{...t,loading:!1,data:e.payload,error:null};case PF:return{...t,loading:!1,error:e.payload,data:null};case NF:return{...t,timeRange:e.payload};default:return t}},MF="FETCH_DEVICES_REQUEST",kF="FETCH_DEVICES_SUCCESS",jF="FETCH_DEVICES_FAILURE",UF="FETCH_DEVICE_BY_ID_REQUEST",BF="FETCH_DEVICE_BY_ID_SUCCESS",FF="FETCH_DEVICE_BY_ID_FAILURE",$F="CREATE_DEVICE_REQUEST",GF="CREATE_DEVICE_SUCCESS",VF="CREATE_DEVICE_FAILURE",qF="UPDATE_DEVICE_REQUEST",HF="UPDATE_DEVICE_SUCCESS",zF="UPDATE_DEVICE_FAILURE",KF="DELETE_DEVICE_REQUEST",YF="DELETE_DEVICE_SUCCESS",WF="DELETE_DEVICE_FAILURE",_K={devices:[],selectedDevice:null,pagination:{total:0,per_page:20,current_page:1,last_page:1},loading:!1,error:null},RK=(t=_K,e)=>{var n;switch(e.type){case MF:case UF:case $F:case qF:case KF:return{...t,loading:!0,error:null};case kF:return{...t,loading:!1,devices:e.payload.devices,pagination:e.payload.pagination,error:null};case BF:return{...t,loading:!1,selectedDevice:e.payload,error:null};case GF:return{...t,loading:!1,devices:[e.payload,...t.devices],error:null};case HF:return{...t,loading:!1,devices:t.devices.map(r=>r.id===e.payload.id?e.payload:r),selectedDevice:((n=t.selectedDevice)==null?void 0:n.id)===e.payload.id?e.payload:t.selectedDevice,error:null};case YF:return{...t,loading:!1,devices:t.devices.filter(r=>r.id!==e.payload),error:null};case jF:case FF:case VF:case zF:case WF:return{...t,loading:!1,error:e.payload};default:return t}},XF=6048e5,OK=864e5,VL=6e4,qL=525600,tl=43200,Am=1440,HL=Symbol.for("constructDateFrom");function Mr(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&HL in t?t[HL](e):t instanceof Date?new t.constructor(e):new Date(e)}function sn(t,e){return Mr(e||t,t)}function QF(t,e,n){const r=sn(t,n==null?void 0:n.in);return isNaN(e)?Mr(t,NaN):(e&&r.setDate(r.getDate()+e),r)}let CK={};function Ql(){return CK}function zc(t,e){var o,c,u,d;const n=Ql(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=sn(t,e==null?void 0:e.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function wm(t,e){return zc(t,{...e,weekStartsOn:1})}function ZF(t,e){const n=sn(t,e==null?void 0:e.in),r=n.getFullYear(),i=Mr(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=wm(i),s=Mr(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=wm(s);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function vl(t){const e=sn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Zl(t,...e){const n=Mr.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function _m(t,e){const n=sn(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function LK(t,e,n){const[r,i]=Zl(n==null?void 0:n.in,t,e),a=_m(r),s=_m(i),o=+a-vl(a),c=+s-vl(s);return Math.round((o-c)/OK)}function DK(t,e){const n=ZF(t,e),r=Mr(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),wm(r)}function Lc(t,e){const n=+sn(t)-+sn(e);return n<0?-1:n>0?1:n}function Wp(t){return Mr(t,Date.now())}function hA(t,e,n){const[r,i]=Zl(n==null?void 0:n.in,t,e);return+_m(r)==+_m(i)}function IK(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function PK(t){return!(!IK(t)&&typeof t!="number"||isNaN(+sn(t)))}function NK(t,e,n){const[r,i]=Zl(n==null?void 0:n.in,t,e),a=r.getFullYear()-i.getFullYear(),s=r.getMonth()-i.getMonth();return a*12+s}function JF(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function MK(t,e){return+sn(t)-+sn(e)}function kK(t,e){const n=sn(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function jK(t,e){const n=sn(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function UK(t,e){const n=sn(t,e==null?void 0:e.in);return+kK(n,e)==+jK(n,e)}function BK(t,e,n){const[r,i,a]=Zl(n==null?void 0:n.in,t,t,e),s=Lc(i,a),o=Math.abs(NK(i,a));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*o);let c=Lc(i,a)===-s;UK(r)&&o===1&&Lc(r,a)===1&&(c=!1);const u=s*(o-+c);return u===0?0:u}function FK(t,e,n){const r=MK(t,e)/1e3;return JF(n==null?void 0:n.roundingMethod)(r)}function $K(t,e){const n=sn(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const GK={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},VK=(t,e,n)=>{let r;const i=GK[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function lv(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const qK={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},HK={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zK={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},KK={date:lv({formats:qK,defaultWidth:"full"}),time:lv({formats:HK,defaultWidth:"full"}),dateTime:lv({formats:zK,defaultWidth:"full"})},YK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},WK=(t,e,n,r)=>YK[t];function fc(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const XK={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},QK={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ZK={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},JK={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nY=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},rY={ordinalNumber:nY,era:fc({values:XK,defaultWidth:"wide"}),quarter:fc({values:QK,defaultWidth:"wide",argumentCallback:t=>t-1}),month:fc({values:ZK,defaultWidth:"wide"}),day:fc({values:JK,defaultWidth:"wide"}),dayPeriod:fc({values:eY,defaultWidth:"wide",formattingValues:tY,defaultFormattingWidth:"wide"})};function dc(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?aY(o,h=>h.test(s)):iY(o,h=>h.test(s));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(s.length);return{value:u,rest:d}}}function iY(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function aY(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function sY(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const oY=/^(\d+)(th|st|nd|rd)?/i,lY=/\d+/i,uY={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},cY={any:[/^b/i,/^(a|c)/i]},fY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dY={any:[/1/i,/2/i,/3/i,/4/i]},hY={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pY={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},gY={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yY={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vY={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xY={ordinalNumber:sY({matchPattern:oY,parsePattern:lY,valueCallback:t=>parseInt(t,10)}),era:dc({matchPatterns:uY,defaultMatchWidth:"wide",parsePatterns:cY,defaultParseWidth:"any"}),quarter:dc({matchPatterns:fY,defaultMatchWidth:"wide",parsePatterns:dY,defaultParseWidth:"any",valueCallback:t=>t+1}),month:dc({matchPatterns:hY,defaultMatchWidth:"wide",parsePatterns:mY,defaultParseWidth:"any"}),day:dc({matchPatterns:pY,defaultMatchWidth:"wide",parsePatterns:gY,defaultParseWidth:"any"}),dayPeriod:dc({matchPatterns:yY,defaultMatchWidth:"any",parsePatterns:vY,defaultParseWidth:"any"})},mA={code:"en-US",formatDistance:VK,formatLong:KK,formatRelative:WK,localize:rY,match:xY,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bY(t,e){const n=sn(t,e==null?void 0:e.in);return LK(n,$K(n))+1}function SY(t,e){const n=sn(t,e==null?void 0:e.in),r=+wm(n)-+DK(n);return Math.round(r/XF)+1}function e$(t,e){var d,h,p,y;const n=sn(t,e==null?void 0:e.in),r=n.getFullYear(),i=Ql(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(p=i.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??1,s=Mr((e==null?void 0:e.in)||t,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=zc(s,e),c=Mr((e==null?void 0:e.in)||t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=zc(c,e);return+n>=+o?r+1:+n>=+u?r:r-1}function EY(t,e){var o,c,u,d;const n=Ql(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=e$(t,e),a=Mr((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),zc(a,e)}function TY(t,e){const n=sn(t,e==null?void 0:e.in),r=+zc(n,e)-+EY(n,e);return Math.round(r/XF)+1}function lt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ua={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return lt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):lt(n+1,2)},d(t,e){return lt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return lt(t.getHours()%12||12,e.length)},H(t,e){return lt(t.getHours(),e.length)},m(t,e){return lt(t.getMinutes(),e.length)},s(t,e){return lt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return lt(i,e.length)}},Ho={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},zL={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Ua.y(t,e)},Y:function(t,e,n,r){const i=e$(t,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return lt(s,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):lt(a,e.length)},R:function(t,e){const n=ZF(t);return lt(n,e.length)},u:function(t,e){const n=t.getFullYear();return lt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return lt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return lt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ua.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return lt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=TY(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):lt(i,e.length)},I:function(t,e,n){const r=SY(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):lt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ua.d(t,e)},D:function(t,e,n){const r=bY(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):lt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return lt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return lt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return lt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Ho.noon:r===0?i=Ho.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Ho.evening:r>=12?i=Ho.afternoon:r>=4?i=Ho.morning:i=Ho.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ua.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ua.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):lt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):lt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ua.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ua.s(t,e)},S:function(t,e){return Ua.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return YL(r);case"XXXX":case"XX":return Cs(r);case"XXXXX":case"XXX":default:return Cs(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return YL(r);case"xxxx":case"xx":return Cs(r);case"xxxxx":case"xxx":default:return Cs(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+KL(r,":");case"OOOO":default:return"GMT"+Cs(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+KL(r,":");case"zzzz":default:return"GMT"+Cs(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return lt(r,e.length)},T:function(t,e,n){return lt(+t,e.length)}};function KL(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+lt(a,2)}function YL(t,e){return t%60===0?(t>0?"-":"+")+lt(Math.abs(t)/60,2):Cs(t,e)}function Cs(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=lt(Math.trunc(r/60),2),a=lt(r%60,2);return n+i+e+a}const WL=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},t$=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},AY=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return WL(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",WL(r,e)).replace("{{time}}",t$(i,e))},wY={p:t$,P:AY},_Y=/^D+$/,RY=/^Y+$/,OY=["D","DD","YY","YYYY"];function CY(t){return _Y.test(t)}function LY(t){return RY.test(t)}function DY(t,e,n){const r=IY(t,e,n);if(console.warn(r),OY.includes(t))throw new RangeError(r)}function IY(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const PY=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,NY=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MY=/^'([^]*?)'?$/,kY=/''/g,jY=/[a-zA-Z]/;function pn(t,e,n){var d,h,p,y;const r=Ql(),i=r.locale??mA,a=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=r.weekStartsOn??((y=(p=r.locale)==null?void 0:p.options)==null?void 0:y.weekStartsOn)??0,o=sn(t,n==null?void 0:n.in);if(!PK(o))throw new RangeError("Invalid time value");let c=e.match(NY).map(v=>{const S=v[0];if(S==="p"||S==="P"){const x=wY[S];return x(v,i.formatLong)}return v}).join("").match(PY).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const S=v[0];if(S==="'")return{isToken:!1,value:UY(v)};if(zL[S])return{isToken:!0,value:v};if(S.match(jY))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const u={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return c.map(v=>{if(!v.isToken)return v.value;const S=v.value;(LY(S)||CY(S))&&DY(S,e,String(t));const x=zL[S[0]];return x(o,S,i.localize,u)}).join("")}function UY(t){const e=t.match(MY);return e?e[1].replace(kY,"'"):t}function BY(t,e,n){const r=Ql(),i=(n==null?void 0:n.locale)??r.locale??mA,a=2520,s=Lc(t,e);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s}),[c,u]=Zl(n==null?void 0:n.in,...s>0?[e,t]:[t,e]),d=FK(u,c),h=(vl(u)-vl(c))/1e3,p=Math.round((d-h)/60);let y;if(p<2)return n!=null&&n.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,o):d<10?i.formatDistance("lessThanXSeconds",10,o):d<20?i.formatDistance("lessThanXSeconds",20,o):d<40?i.formatDistance("halfAMinute",0,o):d<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):p===0?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",p,o);if(p<45)return i.formatDistance("xMinutes",p,o);if(p<90)return i.formatDistance("aboutXHours",1,o);if(p<Am){const v=Math.round(p/60);return i.formatDistance("aboutXHours",v,o)}else{if(p<a)return i.formatDistance("xDays",1,o);if(p<tl){const v=Math.round(p/Am);return i.formatDistance("xDays",v,o)}else if(p<tl*2)return y=Math.round(p/tl),i.formatDistance("aboutXMonths",y,o)}if(y=BK(u,c),y<12){const v=Math.round(p/tl);return i.formatDistance("xMonths",v,o)}else{const v=y%12,S=Math.trunc(y/12);return v<3?i.formatDistance("aboutXYears",S,o):v<9?i.formatDistance("overXYears",S,o):i.formatDistance("almostXYears",S+1,o)}}function FY(t,e,n){const r=Ql(),i=(n==null?void 0:n.locale)??r.locale??mA,a=Lc(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const s=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a}),[o,c]=Zl(n==null?void 0:n.in,...a>0?[e,t]:[t,e]),u=JF("round"),d=c.getTime()-o.getTime(),h=d/VL,p=vl(c)-vl(o),y=(d-p)/VL,v=n==null?void 0:n.unit;let S;if(h<1?S="second":h<60?S="minute":h<Am?S="hour":y<tl?S="day":y<qL?S="month":S="year",S==="second"){const x=u(d/1e3);return i.formatDistance("xSeconds",x,s)}else if(S==="minute"){const x=u(h);return i.formatDistance("xMinutes",x,s)}else if(S==="hour"){const x=u(h/60);return i.formatDistance("xHours",x,s)}else if(S==="day"){const x=u(y/Am);return i.formatDistance("xDays",x,s)}else if(S==="month"){const x=u(y/tl);return x===12&&v!=="month"?i.formatDistance("xYears",1,s):i.formatDistance("xMonths",x,s)}else{const x=u(y/qL);return i.formatDistance("xYears",x,s)}}function $Y(t,e){return BY(t,Wp(t),e)}function GY(t,e){return hA(Mr(t,t),Wp(t))}function VY(t,e){return hA(t,QF(Wp(t),1),e)}function qY(t,e,n){return QF(t,-1,n)}function HY(t,e){return hA(Mr(t,t),qY(Wp(t)))}const n$="FETCH_SUBSCRIPTION_KEYS_REQUEST",r$="FETCH_SUBSCRIPTION_KEYS_SUCCESS",i$="FETCH_SUBSCRIPTION_KEYS_FAILURE",a$="GENERATE_SUBSCRIPTION_KEY_REQUEST",s$="GENERATE_SUBSCRIPTION_KEY_SUCCESS",o$="GENERATE_SUBSCRIPTION_KEY_FAILURE",l$="DEACTIVATE_SUBSCRIPTION_KEY_REQUEST",u$="DEACTIVATE_SUBSCRIPTION_KEY_SUCCESS",c$="DEACTIVATE_SUBSCRIPTION_KEY_FAILURE",zY={subscriptionKeys:[],loading:!1,error:null},KY=(t=zY,e)=>{switch(e.type){case n$:case a$:case l$:return{...t,loading:!0,error:null};case r$:return{...t,loading:!1,subscriptionKeys:e.payload,error:null};case s$:return{...t,loading:!1,subscriptionKeys:[e.payload,...t.subscriptionKeys],error:null};case u$:return{...t,loading:!1,subscriptionKeys:t.subscriptionKeys.map(n=>n.key===e.payload.key?e.payload:n),error:null};case i$:case o$:case c$:return{...t,loading:!1,error:e.payload};default:return t}},f$="FETCH_SUGGESTIONS_REQUEST",d$="FETCH_SUGGESTIONS_SUCCESS",h$="FETCH_SUGGESTIONS_FAILURE",m$="FETCH_SUGGESTION_BY_ID_REQUEST",p$="FETCH_SUGGESTION_BY_ID_SUCCESS",g$="FETCH_SUGGESTION_BY_ID_FAILURE",y$="CREATE_SUGGESTION_REQUEST",v$="CREATE_SUGGESTION_SUCCESS",x$="CREATE_SUGGESTION_FAILURE",b$="UPDATE_SUGGESTION_REQUEST",S$="UPDATE_SUGGESTION_SUCCESS",E$="UPDATE_SUGGESTION_FAILURE",T$="DELETE_SUGGESTION_REQUEST",A$="DELETE_SUGGESTION_SUCCESS",w$="DELETE_SUGGESTION_FAILURE",YY={suggestions:[],selectedSuggestion:null,loading:!1,error:null},WY=(t=YY,e)=>{var n;switch(e.type){case f$:case m$:case y$:case b$:case T$:return{...t,loading:!0,error:null};case d$:return{...t,loading:!1,suggestions:e.payload,error:null};case p$:return{...t,loading:!1,selectedSuggestion:e.payload,error:null};case v$:return{...t,loading:!1,suggestions:[e.payload,...t.suggestions],error:null};case S$:return{...t,loading:!1,suggestions:t.suggestions.map(r=>r.id===e.payload.id?e.payload:r),selectedSuggestion:((n=t.selectedSuggestion)==null?void 0:n.id)===e.payload.id?e.payload:t.selectedSuggestion,error:null};case A$:return{...t,loading:!1,suggestions:t.suggestions.filter(r=>r.id!==e.payload),error:null};case h$:case g$:case x$:case E$:case w$:return{...t,loading:!1,error:e.payload};default:return t}},_$="FETCH_LIVESPORTS_REQUEST",R$="FETCH_LIVESPORTS_SUCCESS",O$="FETCH_LIVESPORTS_FAILURE",C$="FETCH_LIVESPORT_BY_ID_REQUEST",L$="FETCH_LIVESPORT_BY_ID_SUCCESS",D$="FETCH_LIVESPORT_BY_ID_FAILURE",I$="CREATE_LIVESPORT_REQUEST",P$="CREATE_LIVESPORT_SUCCESS",N$="CREATE_LIVESPORT_FAILURE",M$="UPDATE_LIVESPORT_REQUEST",k$="UPDATE_LIVESPORT_SUCCESS",j$="UPDATE_LIVESPORT_FAILURE",U$="DELETE_LIVESPORT_REQUEST",B$="DELETE_LIVESPORT_SUCCESS",F$="DELETE_LIVESPORT_FAILURE",XY={livesports:[],selectedLiveSport:null,pagination:{total:0,per_page:15,current_page:1,last_page:1},loading:!1,error:null},QY=(t=XY,e)=>{var n;switch(e.type){case _$:case C$:case I$:case M$:case U$:return{...t,loading:!0,error:null};case R$:return{...t,loading:!1,livesports:e.payload.data,pagination:{total:e.payload.total,per_page:e.payload.per_page,current_page:e.payload.current_page,last_page:e.payload.last_page},error:null};case L$:return{...t,loading:!1,selectedLiveSport:e.payload,error:null};case P$:return{...t,loading:!1,livesports:[e.payload,...t.livesports],error:null};case k$:return{...t,loading:!1,livesports:t.livesports.map(r=>r.id===e.payload.id?e.payload:r),selectedLiveSport:((n=t.selectedLiveSport)==null?void 0:n.id)===e.payload.id?e.payload:t.selectedLiveSport,error:null};case B$:return{...t,loading:!1,livesports:t.livesports.filter(r=>r.id!==e.payload),error:null};case O$:case D$:case N$:case j$:case F$:return{...t,loading:!1,error:e.payload};default:return t}},$$="FETCH_SPORT_MATCHES_REQUEST",G$="FETCH_SPORT_MATCHES_SUCCESS",V$="FETCH_SPORT_MATCHES_FAILURE",q$="FETCH_SPORT_MATCH_DETAIL_REQUEST",H$="FETCH_SPORT_MATCH_DETAIL_SUCCESS",z$="FETCH_SPORT_MATCH_DETAIL_FAILURE",ZY={matches:{football:{live:[],upcoming:[],finished:[]}},matchDetail:[],loading:!1,error:null};function JY(t=ZY,e){switch(e.type){case $$:case q$:return{...t,loading:!0,error:null};case G$:return{...t,loading:!1,matches:e.payload};case V$:case z$:return{...t,loading:!1,error:e.payload};case H$:return{...t,loading:!1,matchDetail:e.payload};default:return t}}const K$="announce/FETCH_REQUEST",Y$="announce/FETCH_SUCCESS",W$="announce/FETCH_FAILURE",eW="announce/FETCH_BY_ID_REQUEST",tW="announce/FETCH_BY_ID_SUCCESS",nW="announce/FETCH_BY_ID_FAILURE",X$="announce/CREATE_REQUEST",rW="announce/CREATE_SUCCESS",iW="announce/CREATE_FAILURE",Q$="announce/UPDATE_REQUEST",Z$="announce/UPDATE_SUCCESS",J$="announce/UPDATE_FAILURE",aW={announces:[],selectedAnnounce:null,loading:!1,error:null},sW=(t=aW,e)=>{var n;switch(e.type){case K$:case eW:case X$:case Q$:return{...t,loading:!0,error:null};case Y$:return{...t,loading:!1,announces:e.payload,error:null};case tW:return{...t,loading:!1,selectedAnnounce:e.payload,error:null};case rW:return{...t,loading:!1,announces:[e.payload,...t.announces],error:null};case Z$:return{...t,loading:!1,announces:t.announces.map(r=>r.id===e.payload.id?e.payload:r),selectedAnnounce:((n=t.selectedAnnounce)==null?void 0:n.id)===e.payload.id?e.payload:t.selectedAnnounce,error:null};case W$:case nW:case iW:case J$:return{...t,loading:!1,error:e.payload};default:return t}},oW=hF({auth:SK,contents:TK,dashboard:wK,devices:RK,subscriptions:KY,suggestions:WY,livesports:QY,sport:JY,announce:sW}),lW=t=>e=>n=>{const{auth:r}=t.getState(),i=r.token;return i?Xe.defaults.headers.common.Authorization=`Bearer ${i}`:delete Xe.defaults.headers.common.Authorization,n.type===L9&&delete Xe.defaults.headers.common.Authorization,e(n)},Rm=xK({reducer:oW,middleware:t=>t().concat(lW)}),uW="https://laravel.pxxl.click/api/auth",Xe=Gt.create({baseURL:uW,headers:{"Content-Type":"application/json",Accept:"application/json"}});Xe.interceptors.request.use(t=>{const n=Rm.getState().auth.accessToken;return n&&(t.headers.Authorization=`Bearer ${n}`),t},t=>Promise.reject(t));Xe.interceptors.response.use(t=>t,async t=>{var r;const e=t.config;return Rm.getState().auth.refreshToken,((r=t.response)==null?void 0:r.status)===401&&!e._retry&&(e._retry=!0,Rm.dispatch(e3())),Promise.reject(t)});const cW=async t=>{var e;try{return(await Xe.post("/login",t)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||n.message}},fW=t=>async e=>{e({type:jB});try{const n=await cW(t);return localStorage.setItem("access_token",n.access_token),localStorage.setItem("refresh_token",n.refresh_token),localStorage.setItem("user_info",JSON.stringify(n.user)),e({type:uA,payload:{accessToken:n.access_token,refreshToken:n.refresh_token,user:n.user}}),Promise.resolve(n)}catch(n){return e({type:UB,payload:n}),Promise.reject(n)}},e3=()=>t=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user_info"),t({type:BB})},dW=()=>t=>{const e=localStorage.getItem("access_token"),n=localStorage.getItem("refresh_token"),r=localStorage.getItem("user_info");e&&n&&t({type:uA,payload:{accessToken:e,refreshToken:n,user:r?JSON.parse(r):null}})},t3=B.createContext({});function hW(t){const e=B.useRef(null);return e.current===null&&(e.current=t()),e.current}const pA=typeof window<"u",mW=pA?B.useLayoutEffect:B.useEffect,gA=B.createContext(null);function yA(t,e){t.indexOf(e)===-1&&t.push(e)}function vA(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ia=(t,e,n)=>n>e?e:n<t?t:n;let xA=()=>{};const aa={},n3=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function r3(t){return typeof t=="object"&&t!==null}const i3=t=>/^0[^.\s]+$/u.test(t);function bA(t){let e;return()=>(e===void 0&&(e=t()),e)}const Dr=t=>t,pW=(t,e)=>n=>e(t(n)),Kf=(...t)=>t.reduce(pW),Kc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class SA{constructor(){this.subscriptions=[]}add(e){return yA(this.subscriptions,e),()=>vA(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xi=t=>t*1e3,bi=t=>t/1e3;function a3(t,e){return e?t*(1e3/e):0}const s3=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,gW=1e-7,yW=12;function vW(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=s3(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>gW&&++o<yW);return s}function Yf(t,e,n,r){if(t===e&&n===r)return Dr;const i=a=>vW(a,0,1,t,n);return a=>a===0||a===1?a:s3(i(a),e,r)}const o3=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,l3=t=>e=>1-t(1-e),u3=Yf(.33,1.53,.69,.99),EA=l3(u3),c3=o3(EA),f3=t=>(t*=2)<1?.5*EA(t):.5*(2-Math.pow(2,-10*(t-1))),TA=t=>1-Math.sin(Math.acos(t)),d3=l3(TA),h3=o3(TA),xW=Yf(.42,0,1,1),bW=Yf(0,0,.58,1),m3=Yf(.42,0,.58,1),SW=t=>Array.isArray(t)&&typeof t[0]!="number",p3=t=>Array.isArray(t)&&typeof t[0]=="number",EW={linear:Dr,easeIn:xW,easeInOut:m3,easeOut:bW,circIn:TA,circInOut:h3,circOut:d3,backIn:EA,backInOut:c3,backOut:u3,anticipate:f3},TW=t=>typeof t=="string",XL=t=>{if(p3(t)){xA(t.length===4);const[e,n,r,i]=t;return Yf(e,n,r,i)}else if(TW(t))return EW[t];return t},wh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],QL={value:null};function AW(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){s.has(h)&&(d.schedule(h),t()),c++,h(o)}const d={schedule:(h,p=!1,y=!1)=>{const S=y&&i?n:r;return p&&s.add(h),S.has(h)||S.add(h),h},cancel:h=>{r.delete(h),s.delete(h)},process:h=>{if(o=h,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),e&&QL.value&&QL.value.frameloop[e].push(c),c=0,n.clear(),i=!1,a&&(a=!1,d.process(h))}};return d}const wW=40;function g3(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=wh.reduce((A,O)=>(A[O]=AW(a,e?O:void 0),A),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:p,render:y,postRender:v}=s,S=()=>{const A=aa.useManualTiming?i.timestamp:performance.now();n=!1,aa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(A-i.timestamp,wW),1)),i.timestamp=A,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),d.process(i),h.process(i),p.process(i),y.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(S))},x=()=>{n=!0,r=!0,i.isProcessing||t(S)};return{schedule:wh.reduce((A,O)=>{const R=s[O];return A[O]=(C,L=!1,P=!1)=>(n||x(),R.schedule(C,L,P)),A},{}),cancel:A=>{for(let O=0;O<wh.length;O++)s[wh[O]].cancel(A)},state:i,steps:s}}const{schedule:Dt,cancel:Xa,state:An,steps:uv}=g3(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dr,!0);let om;function _W(){om=void 0}const Yn={now:()=>(om===void 0&&Yn.set(An.isProcessing||aa.useManualTiming?An.timestamp:performance.now()),om),set:t=>{om=t,queueMicrotask(_W)}},y3=t=>e=>typeof e=="string"&&e.startsWith(t),AA=y3("--"),RW=y3("var(--"),wA=t=>RW(t)?OW.test(t.split("/*")[0].trim()):!1,OW=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Jl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Yc={...Jl,transform:t=>ia(0,1,t)},_h={...Jl,default:1},Dc=t=>Math.round(t*1e5)/1e5,_A=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function CW(t){return t==null}const LW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,RA=(t,e)=>n=>!!(typeof n=="string"&&LW.test(n)&&n.startsWith(t)||e&&!CW(n)&&Object.prototype.hasOwnProperty.call(n,e)),v3=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(_A);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},DW=t=>ia(0,255,t),cv={...Jl,transform:t=>Math.round(DW(t))},ks={test:RA("rgb","red"),parse:v3("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+cv.transform(t)+", "+cv.transform(e)+", "+cv.transform(n)+", "+Dc(Yc.transform(r))+")"};function IW(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ZE={test:RA("#"),parse:IW,transform:ks.transform},Wf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),$a=Wf("deg"),Si=Wf("%"),Pe=Wf("px"),PW=Wf("vh"),NW=Wf("vw"),ZL={...Si,parse:t=>Si.parse(t)/100,transform:t=>Si.transform(t*100)},nl={test:RA("hsl","hue"),parse:v3("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Si.transform(Dc(e))+", "+Si.transform(Dc(n))+", "+Dc(Yc.transform(r))+")"},Yt={test:t=>ks.test(t)||ZE.test(t)||nl.test(t),parse:t=>ks.test(t)?ks.parse(t):nl.test(t)?nl.parse(t):ZE.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ks.transform(t):nl.transform(t),getAnimatableNone:t=>{const e=Yt.parse(t);return e.alpha=0,Yt.transform(e)}},MW=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function kW(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(_A))==null?void 0:e.length)||0)+(((n=t.match(MW))==null?void 0:n.length)||0)>0}const x3="number",b3="color",jW="var",UW="var(",JL="${}",BW=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(BW,c=>(Yt.test(c)?(r.color.push(a),i.push(b3),n.push(Yt.parse(c))):c.startsWith(UW)?(r.var.push(a),i.push(jW),n.push(c)):(r.number.push(a),i.push(x3),n.push(parseFloat(c))),++a,JL)).split(JL);return{values:n,split:o,indexes:r,types:i}}function S3(t){return Wc(t).values}function E3(t){const{split:e,types:n}=Wc(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===x3?a+=Dc(i[s]):o===b3?a+=Yt.transform(i[s]):a+=i[s]}return a}}const FW=t=>typeof t=="number"?0:Yt.test(t)?Yt.getAnimatableNone(t):t;function $W(t){const e=S3(t);return E3(t)(e.map(FW))}const Qa={test:kW,parse:S3,createTransformer:E3,getAnimatableNone:$W};function fv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function GW({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=fv(c,o,t+1/3),a=fv(c,o,t),s=fv(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Om(t,e){return n=>n>0?e:t}const Lt=(t,e,n)=>t+(e-t)*n,dv=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},VW=[ZE,ks,nl],qW=t=>VW.find(e=>e.test(t));function eD(t){const e=qW(t);if(!e)return!1;let n=e.parse(t);return e===nl&&(n=GW(n)),n}const tD=(t,e)=>{const n=eD(t),r=eD(e);if(!n||!r)return Om(t,e);const i={...n};return a=>(i.red=dv(n.red,r.red,a),i.green=dv(n.green,r.green,a),i.blue=dv(n.blue,r.blue,a),i.alpha=Lt(n.alpha,r.alpha,a),ks.transform(i))},JE=new Set(["none","hidden"]);function HW(t,e){return JE.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function zW(t,e){return n=>Lt(t,e,n)}function OA(t){return typeof t=="number"?zW:typeof t=="string"?wA(t)?Om:Yt.test(t)?tD:WW:Array.isArray(t)?T3:typeof t=="object"?Yt.test(t)?tD:KW:Om}function T3(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>OA(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function KW(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=OA(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function YW(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const WW=(t,e)=>{const n=Qa.createTransformer(e),r=Wc(t),i=Wc(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?JE.has(t)&&!i.values.length||JE.has(e)&&!r.values.length?HW(t,e):Kf(T3(YW(r,i),i.values),n):Om(t,e)};function A3(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Lt(t,e,n):OA(t)(t,e)}const XW=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Dt.update(e,n),stop:()=>Xa(e),now:()=>An.isProcessing?An.timestamp:Yn.now()}},w3=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Cm=2e4;function CA(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Cm;)e+=n,r=t.next(e);return e>=Cm?1/0:e}function QW(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(CA(r),Cm);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:bi(i)}}const ZW=5;function _3(t,e,n){const r=Math.max(e-ZW,0);return a3(n-t(r),e-r)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},hv=.001;function JW({duration:t=Mt.duration,bounce:e=Mt.bounce,velocity:n=Mt.velocity,mass:r=Mt.mass}){let i,a,s=1-e;s=ia(Mt.minDamping,Mt.maxDamping,s),t=ia(Mt.minDuration,Mt.maxDuration,bi(t)),s<1?(i=u=>{const d=u*s,h=d*t,p=d-n,y=eT(u,s),v=Math.exp(-h);return hv-p/y*v},a=u=>{const h=u*s*t,p=h*n+n,y=Math.pow(s,2)*Math.pow(u,2)*t,v=Math.exp(-h),S=eT(Math.pow(u,2),s);return(-i(u)+hv>0?-1:1)*((p-y)*v)/S}):(i=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-hv+d*h},a=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const o=5/t,c=tX(i,a,o);if(t=xi(t),isNaN(c))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const eX=12;function tX(t,e,n){let r=n;for(let i=1;i<eX;i++)r=r-t(r)/e(r);return r}function eT(t,e){return t*Math.sqrt(1-e*e)}const nX=["duration","bounce"],rX=["stiffness","damping","mass"];function nD(t,e){return e.some(n=>t[n]!==void 0)}function iX(t){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...t};if(!nD(t,rX)&&nD(t,nX))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*ia(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Mt.mass,stiffness:i,damping:a}}else{const n=JW(t);e={...e,...n,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function Lm(t=Mt.visualDuration,e=Mt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:h,velocity:p,isResolvedFromDuration:y}=iX({...n,velocity:-bi(n.velocity||0)}),v=p||0,S=u/(2*Math.sqrt(c*d)),x=s-a,T=bi(Math.sqrt(c/d)),_=Math.abs(x)<5;r||(r=_?Mt.restSpeed.granular:Mt.restSpeed.default),i||(i=_?Mt.restDelta.granular:Mt.restDelta.default);let A;if(S<1){const R=eT(T,S);A=C=>{const L=Math.exp(-S*T*C);return s-L*((v+S*T*x)/R*Math.sin(R*C)+x*Math.cos(R*C))}}else if(S===1)A=R=>s-Math.exp(-T*R)*(x+(v+T*x)*R);else{const R=T*Math.sqrt(S*S-1);A=C=>{const L=Math.exp(-S*T*C),P=Math.min(R*C,300);return s-L*((v+S*T*x)*Math.sinh(P)+R*x*Math.cosh(P))/R}}const O={calculatedDuration:y&&h||null,next:R=>{const C=A(R);if(y)o.done=R>=h;else{let L=R===0?v:0;S<1&&(L=R===0?xi(v):_3(A,R,C));const P=Math.abs(L)<=r,N=Math.abs(s-C)<=i;o.done=P&&N}return o.value=o.done?s:C,o},toString:()=>{const R=Math.min(CA(O),Cm),C=w3(L=>O.next(R*L).value,R,30);return R+"ms "+C},toTransition:()=>{}};return O}Lm.applyToOptions=t=>{const e=QW(t,100,Lm);return t.ease=e.ease,t.duration=xi(e.duration),t.type="keyframes",t};function tT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},y=P=>o!==void 0&&P<o||c!==void 0&&P>c,v=P=>o===void 0?c:c===void 0||Math.abs(o-P)<Math.abs(c-P)?o:c;let S=n*e;const x=h+S,T=s===void 0?x:s(x);T!==x&&(S=T-h);const _=P=>-S*Math.exp(-P/r),A=P=>T+_(P),O=P=>{const N=_(P),k=A(P);p.done=Math.abs(N)<=u,p.value=p.done?T:k};let R,C;const L=P=>{y(p.value)&&(R=P,C=Lm({keyframes:[p.value,v(p.value)],velocity:_3(A,P,p.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return L(0),{calculatedDuration:null,next:P=>{let N=!1;return!C&&R===void 0&&(N=!0,O(P),L(P)),R!==void 0&&P>=R?C.next(P-R):(!N&&O(P),p)}}}function aX(t,e,n){const r=[],i=n||aa.mix||A3,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Dr:e;o=Kf(c,o)}r.push(o)}return r}function sX(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(xA(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=aX(e,r,i),c=o.length,u=d=>{if(s&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const p=Kc(t[h],t[h+1],d);return o[h](p)};return n?d=>u(ia(t[0],t[a-1],d)):u}function oX(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Kc(0,e,r);t.push(Lt(n,1,i))}}function lX(t){const e=[0];return oX(e,t.length-1),e}function uX(t,e){return t.map(n=>n*e)}function cX(t,e){return t.map(()=>e||m3).splice(0,t.length-1)}function Ic({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=SW(r)?r.map(XL):XL(r),a={done:!1,value:e[0]},s=uX(n&&n.length===e.length?n:lX(e),t),o=sX(s,e,{ease:Array.isArray(i)?i:cX(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const fX=t=>t!==null;function LA(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(fX),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const dX={decay:tT,inertia:tT,tween:Ic,keyframes:Ic,spring:Lm};function R3(t){typeof t.type=="string"&&(t.type=dX[t.type])}class DA{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const hX=t=>t/100;class IA extends DA{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Yn.now()&&this.tick(Yn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;R3(e);const{type:n=Ic,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const c=n||Ic;c!==Ic&&typeof o[0]!="number"&&(this.mixKeyframes=Kf(hX,A3(o[0],o[1])),o=[0,100]);const u=c({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=CA(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:p,repeatDelay:y,type:v,onUpdate:S,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-u*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let A=this.currentTime,O=r;if(h){const P=Math.min(this.currentTime,i)/o;let N=Math.floor(P),k=P%1;!k&&P>=1&&(k=1),k===1&&N--,N=Math.min(N,h+1),!!(N%2)&&(p==="reverse"?(k=1-k,y&&(k-=y/o)):p==="mirror"&&(O=s)),A=ia(0,1,k)*o}const R=_?{done:!1,value:d[0]}:O.next(A);a&&(R.value=a(R.value));let{done:C}=R;!_&&c!==null&&(C=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return L&&v!==tT&&(R.value=LA(d,this.options,x,this.speed)),S&&S(R.value),L&&this.finish(),R}then(e,n){return this.finished.then(e,n)}get duration(){return bi(this.calculatedDuration)}get time(){return bi(this.currentTime)}set time(e){var n;e=xi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Yn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=bi(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=XW,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),(a=(i=this.options).onPlay)==null||a.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Yn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function mX(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const js=t=>t*180/Math.PI,nT=t=>{const e=js(Math.atan2(t[1],t[0]));return rT(e)},pX={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:nT,rotateZ:nT,skewX:t=>js(Math.atan(t[1])),skewY:t=>js(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},rT=t=>(t=t%360,t<0&&(t+=360),t),rD=nT,iD=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),aD=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),gX={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:iD,scaleY:aD,scale:t=>(iD(t)+aD(t))/2,rotateX:t=>rT(js(Math.atan2(t[6],t[5]))),rotateY:t=>rT(js(Math.atan2(-t[2],t[0]))),rotateZ:rD,rotate:rD,skewX:t=>js(Math.atan(t[4])),skewY:t=>js(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function iT(t){return t.includes("scale")?1:0}function aT(t,e){if(!t||t==="none")return iT(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=gX,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=pX,i=o}if(!i)return iT(e);const a=r[e],s=i[1].split(",").map(vX);return typeof a=="function"?a(s):s[a]}const yX=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return aT(n,e)};function vX(t){return parseFloat(t.trim())}const eu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],tu=new Set(eu),sD=t=>t===Jl||t===Pe,xX=new Set(["x","y","z"]),bX=eu.filter(t=>!xX.has(t));function SX(t){const e=[];return bX.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Vs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>aT(e,"x"),y:(t,{transform:e})=>aT(e,"y")};Vs.translateX=Vs.x;Vs.translateY=Vs.y;const qs=new Set;let sT=!1,oT=!1,lT=!1;function O3(){if(oT){const t=Array.from(qs).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=SX(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))==null||o.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}oT=!1,sT=!1,qs.forEach(t=>t.complete(lT)),qs.clear()}function C3(){qs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(oT=!0)})}function EX(){lT=!0,C3(),O3(),lT=!1}class PA{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(qs.add(this),sT||(sT=!0,Dt.read(C3),Dt.resolveKeyframes(O3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}mX(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),qs.delete(this)}cancel(){this.state==="scheduled"&&(qs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const TX=t=>t.startsWith("--");function AX(t,e,n){TX(e)?t.style.setProperty(e,n):t.style[e]=n}const wX=bA(()=>window.ScrollTimeline!==void 0),_X={};function RX(t,e){const n=bA(t);return()=>_X[e]??n()}const L3=RX(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),wc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,oD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wc([0,.65,.55,1]),circOut:wc([.55,0,1,.45]),backIn:wc([.31,.01,.66,-.59]),backOut:wc([.33,1.53,.69,.99])};function D3(t,e){if(t)return typeof t=="function"?L3()?w3(t,e):"ease-out":p3(t)?wc(t):Array.isArray(t)?t.map(n=>D3(n,e)||oD.easeOut):oD[t]}function OX(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const h=D3(o,i);Array.isArray(h)&&(d.easing=h);const p={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),t.animate(d,p)}function I3(t){return typeof t=="function"&&"applyToOptions"in t}function CX({type:t,...e}){return I3(t)&&L3()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class LX extends DA{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,xA(typeof e.type!="string");const u=CX(e);this.animation=OX(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=LA(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):AX(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return bi(Number(e))}get time(){return bi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=xi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&wX()?(this.animation.timeline=e,Dr):n(this)}}const P3={anticipate:f3,backInOut:c3,circInOut:h3};function DX(t){return t in P3}function IX(t){typeof t.ease=="string"&&DX(t.ease)&&(t.ease=P3[t.ease])}const lD=10;class PX extends LX{constructor(e){IX(e),R3(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new IA({...s,autoplay:!1}),c=xi(this.finishedTime??this.time);n.setWithVelocity(o.sample(c-lD).value,o.sample(c).value,lD),o.stop()}}const uD=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Qa.test(t)||t==="0")&&!t.startsWith("url("));function NX(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function MX(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=uD(i,e),o=uD(a,e);return!s||!o?!1:NX(t)||(n==="spring"||I3(n))&&r}function N3(t){return r3(t)&&"offsetHeight"in t}const kX=new Set(["opacity","clipPath","filter","transform"]),jX=bA(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function UX(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!N3((u=e==null?void 0:e.owner)==null?void 0:u.current))return!1;const{onUpdate:o,transformTemplate:c}=e.owner.getProps();return jX()&&n&&kX.has(n)&&(n!=="transform"||!c)&&!o&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const BX=40;class FX extends DA{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:c,motionValue:u,element:d,...h}){var v;super(),this.stop=()=>{var S,x;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=Yn.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:u,element:d,...h},y=(d==null?void 0:d.KeyframeResolver)||PA;this.keyframeResolver=new y(o,(S,x,T)=>this.onKeyframesResolved(S,x,p,!T),c,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Yn.now(),MX(e,a,s,o)||((aa.instantAnimations||!c)&&(d==null||d(LA(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>BX?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},y=!u&&UX(p)?new PX({...p,element:p.motionValue.owner.current}):new IA(p);y.finished.then(()=>this.notifyFinished()).catch(Dr),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),EX()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const $X=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function GX(t){const e=$X.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function M3(t,e,n=1){const[r,i]=GX(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return n3(s)?parseFloat(s):s}return wA(i)?M3(i,e,n+1):i}function NA(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const k3=new Set(["width","height","top","left","right","bottom",...eu]),VX={test:t=>t==="auto",parse:t=>t},j3=t=>e=>e.test(t),U3=[Jl,Pe,Si,$a,NW,PW,VX],cD=t=>U3.find(j3(t));function qX(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||i3(t):!0}const HX=new Set(["brightness","contrast","saturate","opacity"]);function zX(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(_A)||[];if(!r)return t;const i=n.replace(r,"");let a=HX.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const KX=/\b([a-z-]*)\(.*?\)/gu,uT={...Qa,getAnimatableNone:t=>{const e=t.match(KX);return e?e.map(zX).join(" "):t}},fD={...Jl,transform:Math.round},YX={rotate:$a,rotateX:$a,rotateY:$a,rotateZ:$a,scale:_h,scaleX:_h,scaleY:_h,scaleZ:_h,skew:$a,skewX:$a,skewY:$a,distance:Pe,translateX:Pe,translateY:Pe,translateZ:Pe,x:Pe,y:Pe,z:Pe,perspective:Pe,transformPerspective:Pe,opacity:Yc,originX:ZL,originY:ZL,originZ:Pe},MA={borderWidth:Pe,borderTopWidth:Pe,borderRightWidth:Pe,borderBottomWidth:Pe,borderLeftWidth:Pe,borderRadius:Pe,radius:Pe,borderTopLeftRadius:Pe,borderTopRightRadius:Pe,borderBottomRightRadius:Pe,borderBottomLeftRadius:Pe,width:Pe,maxWidth:Pe,height:Pe,maxHeight:Pe,top:Pe,right:Pe,bottom:Pe,left:Pe,padding:Pe,paddingTop:Pe,paddingRight:Pe,paddingBottom:Pe,paddingLeft:Pe,margin:Pe,marginTop:Pe,marginRight:Pe,marginBottom:Pe,marginLeft:Pe,backgroundPositionX:Pe,backgroundPositionY:Pe,...YX,zIndex:fD,fillOpacity:Yc,strokeOpacity:Yc,numOctaves:fD},WX={...MA,color:Yt,backgroundColor:Yt,outlineColor:Yt,fill:Yt,stroke:Yt,borderColor:Yt,borderTopColor:Yt,borderRightColor:Yt,borderBottomColor:Yt,borderLeftColor:Yt,filter:uT,WebkitFilter:uT},B3=t=>WX[t];function F3(t,e){let n=B3(t);return n!==uT&&(n=Qa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const XX=new Set(["auto","none","0"]);function QX(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!XX.has(a)&&Wc(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=F3(n,i)}class ZX extends PA{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),wA(u))){const d=M3(u,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!k3.has(r)||e.length!==2)return;const[i,a]=e,s=cD(i),o=cD(a);if(s!==o)if(sD(s)&&sD(o))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else Vs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||qX(e[i]))&&r.push(i);r.length&&QX(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=Vs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function JX(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const $3=(t,e)=>e&&typeof t=="number"?e.transform(t):t,dD=30,eQ=t=>!isNaN(parseFloat(t));class tQ{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var s,o;const a=Yn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();i&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Yn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=eQ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new SA);const r=this.events[e].add(n);return e==="change"?()=>{r(),Dt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Yn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dD)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,dD);return a3(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xl(t,e){return new tQ(t,e)}const{schedule:kA}=g3(queueMicrotask,!1),Hr={x:!1,y:!1};function G3(){return Hr.x||Hr.y}function nQ(t){return t==="x"||t==="y"?Hr[t]?null:(Hr[t]=!0,()=>{Hr[t]=!1}):Hr.x||Hr.y?null:(Hr.x=Hr.y=!0,()=>{Hr.x=Hr.y=!1})}function V3(t,e){const n=JX(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function hD(t){return!(t.pointerType==="touch"||G3())}function rQ(t,e,n={}){const[r,i,a]=V3(t,n),s=o=>{if(!hD(o))return;const{target:c}=o,u=e(c,o);if(typeof u!="function"||!c)return;const d=h=>{hD(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,i)};return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const q3=(t,e)=>e?t===e?!0:q3(t,e.parentElement):!1,jA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,iQ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function aQ(t){return iQ.has(t.tagName)||t.tabIndex!==-1}const lm=new WeakSet;function mD(t){return e=>{e.key==="Enter"&&t(e)}}function mv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const sQ=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=mD(()=>{if(lm.has(n))return;mv(n,"down");const i=mD(()=>{mv(n,"up")}),a=()=>mv(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function pD(t){return jA(t)&&!G3()}function oQ(t,e,n={}){const[r,i,a]=V3(t,n),s=o=>{const c=o.currentTarget;if(!pD(o))return;lm.add(c);const u=e(c,o),d=(y,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),lm.has(c)&&lm.delete(c),pD(y)&&typeof u=="function"&&u(y,{success:v})},h=y=>{d(y,c===window||c===document||n.useGlobalTarget||q3(c,y.target))},p=y=>{d(y,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",p,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),N3(o)&&(o.addEventListener("focus",u=>sQ(u,i)),!aQ(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function H3(t){return r3(t)&&"ownerSVGElement"in t}function lQ(t){return H3(t)&&t.tagName==="svg"}const kn=t=>!!(t&&t.getVelocity),uQ=[...U3,Yt,Qa],cQ=t=>uQ.find(j3(t)),z3=B.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function fQ(t=!0){const e=B.useContext(gA);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=B.useId();B.useEffect(()=>{if(t)return i(a)},[t]);const s=B.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const K3=B.createContext({strict:!1}),gD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bl={};for(const t in gD)bl[t]={isEnabled:e=>gD[t].some(n=>!!e[n])};function dQ(t){for(const e in t)bl[e]={...bl[e],...t[e]}}const hQ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||hQ.has(t)}let Y3=t=>!Dm(t);function mQ(t){typeof t=="function"&&(Y3=e=>e.startsWith("on")?!Dm(e):t(e))}try{mQ(require("@emotion/is-prop-valid").default)}catch{}function pQ(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Y3(i)||n===!0&&Dm(i)||!e&&!Dm(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function gQ(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Xp=B.createContext({});function Qp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Xc(t){return typeof t=="string"||Array.isArray(t)}const UA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],BA=["initial",...UA];function Zp(t){return Qp(t.animate)||BA.some(e=>Xc(t[e]))}function W3(t){return!!(Zp(t)||t.variants)}function yQ(t,e){if(Zp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Xc(n)?n:void 0,animate:Xc(r)?r:void 0}}return t.inherit!==!1?e:{}}function vQ(t){const{initial:e,animate:n}=yQ(t,B.useContext(Xp));return B.useMemo(()=>({initial:e,animate:n}),[yD(e),yD(n)])}function yD(t){return Array.isArray(t)?t.join(" "):t}const xQ=Symbol.for("motionComponentSymbol");function rl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function bQ(t,e,n){return B.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):rl(n)&&(n.current=r))},[e])}const FA=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),SQ="framerAppearId",X3="data-"+FA(SQ),Q3=B.createContext({});function EQ(t,e,n,r,i){var S,x;const{visualElement:a}=B.useContext(Xp),s=B.useContext(K3),o=B.useContext(gA),c=B.useContext(z3).reducedMotion,u=B.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=B.useContext(Q3);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&TQ(u.current,n,i,h);const p=B.useRef(!1);B.useInsertionEffect(()=>{d&&p.current&&d.update(n,o)});const y=n[X3],v=B.useRef(!!y&&!((S=window.MotionHandoffIsComplete)!=null&&S.call(window,y))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,y)));return mW(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),kA.render(d.render),v.current&&d.animationState&&d.animationState.animateChanges())}),B.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)==null||T.call(window,y)}),v.current=!1))}),d}function TQ(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Z3(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&rl(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function Z3(t){if(t)return t.options.allowProjection!==!1?t.projection:Z3(t.parent)}function AQ({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&dQ(t);function a(o,c){let u;const d={...B.useContext(z3),...o,layoutId:wQ(o)},{isStatic:h}=d,p=vQ(o),y=r(o,h);if(!h&&pA){_Q();const v=RQ(d);u=v.MeasureLayout,p.visualElement=EQ(i,y,d,e,v.ProjectionNode)}return b.jsxs(Xp.Provider,{value:p,children:[u&&p.visualElement?b.jsx(u,{visualElement:p.visualElement,...d}):null,n(i,o,bQ(y,p.visualElement,c),y,h,p.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const s=B.forwardRef(a);return s[xQ]=i,s}function wQ({layoutId:t}){const e=B.useContext(t3).id;return e&&t!==void 0?e+"-"+t:t}function _Q(t,e){B.useContext(K3).strict}function RQ(t){const{drag:e,layout:n}=bl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Qc={};function OQ(t){for(const e in t)Qc[e]=t[e],AA(e)&&(Qc[e].isCSSVariable=!0)}function J3(t,{layout:e,layoutId:n}){return tu.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Qc[t]||t==="opacity")}const CQ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},LQ=eu.length;function DQ(t,e,n){let r="",i=!0;for(let a=0;a<LQ;a++){const s=eu[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(s.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=$3(o,MA[s]);if(!c){i=!1;const d=CQ[s]||s;r+=`${d}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function $A(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const u=e[c];if(tu.has(c)){s=!0;continue}else if(AA(c)){i[c]=u;continue}else{const d=$3(u,MA[c]);c.startsWith("origin")?(o=!0,a[c]=d):r[c]=d}}if(e.transform||(s||n?r.transform=DQ(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}const GA=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function e5(t,e,n){for(const r in e)!kn(e[r])&&!J3(r,n)&&(t[r]=e[r])}function IQ({transformTemplate:t},e){return B.useMemo(()=>{const n=GA();return $A(n,e,t),Object.assign({},n.vars,n.style)},[e])}function PQ(t,e){const n=t.style||{},r={};return e5(r,n,t),Object.assign(r,IQ(t,e)),r}function NQ(t,e){const n={},r=PQ(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const MQ={offset:"stroke-dashoffset",array:"stroke-dasharray"},kQ={offset:"strokeDashoffset",array:"strokeDasharray"};function jQ(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?MQ:kQ;t[a.offset]=Pe.transform(-r);const s=Pe.transform(e),o=Pe.transform(n);t[a.array]=`${s} ${o}`}function t5(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},c,u,d){if($A(t,o,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p}=t;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&jQ(h,i,a,s,!1)}const n5=()=>({...GA(),attrs:{}}),r5=t=>typeof t=="string"&&t.toLowerCase()==="svg";function UQ(t,e,n,r){const i=B.useMemo(()=>{const a=n5();return t5(a,e,r5(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};e5(a,t.style,t),i.style={...a,...i.style}}return i}const BQ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function VA(t){return typeof t!="string"||t.includes("-")?!1:!!(BQ.indexOf(t)>-1||/[A-Z]/u.test(t))}function FQ(t=!1){return(n,r,i,{latestValues:a},s)=>{const c=(VA(n)?UQ:NQ)(r,a,s,n),u=pQ(r,typeof n=="string",t),d=n!==B.Fragment?{...u,...c,ref:i}:{},{children:h}=r,p=B.useMemo(()=>kn(h)?h.get():h,[h]);return B.createElement(n,{...d,children:p})}}function vD(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function qA(t,e,n,r){if(typeof e=="function"){const[i,a]=vD(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=vD(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function um(t){return kn(t)?t.get():t}function $Q({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:GQ(n,r,i,t),renderState:e()}}const i5=t=>(e,n)=>{const r=B.useContext(Xp),i=B.useContext(gA),a=()=>$Q(t,e,r,i);return n?a():hW(a)};function GQ(t,e,n,r){const i={},a=r(t,{});for(const p in a)i[p]=um(a[p]);let{initial:s,animate:o}=t;const c=Zp(t),u=W3(t);e&&u&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const h=d?o:s;if(h&&typeof h!="boolean"&&!Qp(h)){const p=Array.isArray(h)?h:[h];for(let y=0;y<p.length;y++){const v=qA(t,p[y]);if(v){const{transitionEnd:S,transition:x,...T}=v;for(const _ in T){let A=T[_];if(Array.isArray(A)){const O=d?A.length-1:0;A=A[O]}A!==null&&(i[_]=A)}for(const _ in S)i[_]=S[_]}}}return i}function HA(t,e,n){var a;const{style:r}=t,i={};for(const s in r)(kn(r[s])||e.style&&kn(e.style[s])||J3(s,t)||((a=n==null?void 0:n.getValue(s))==null?void 0:a.liveStyle)!==void 0)&&(i[s]=r[s]);return i}const VQ={useVisualState:i5({scrapeMotionValuesFromProps:HA,createRenderState:GA})};function a5(t,e,n){const r=HA(t,e,n);for(const i in t)if(kn(t[i])||kn(e[i])){const a=eu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const qQ={useVisualState:i5({scrapeMotionValuesFromProps:a5,createRenderState:n5})};function HQ(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...VA(r)?qQ:VQ,preloadedFeatures:t,useRender:FQ(i),createVisualElement:e,Component:r};return AQ(s)}}function Zc(t,e,n){const r=t.getProps();return qA(r,e,n!==void 0?n:r.custom,t)}const cT=t=>Array.isArray(t);function zQ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,xl(n))}function KQ(t){return cT(t)?t[t.length-1]||0:t}function YQ(t,e){const n=Zc(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=KQ(a[s]);zQ(t,s,o)}}function WQ(t){return!!(kn(t)&&t.add)}function fT(t,e){const n=t.getValue("willChange");if(WQ(n))return n.add(e);if(!n&&aa.WillChange){const r=new aa.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function s5(t){return t.props[X3]}const XQ=t=>t!==null;function QQ(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(XQ),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const ZQ={type:"spring",stiffness:500,damping:25,restSpeed:10},JQ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),eZ={type:"keyframes",duration:.8},tZ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nZ=(t,{keyframes:e})=>e.length>2?eZ:tu.has(t)?t.startsWith("scale")?JQ(e[1]):ZQ:tZ;function rZ({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const zA=(t,e,n,r={},i,a)=>s=>{const o=NA(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-xi(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:p=>{e.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};rZ(o)||Object.assign(d,nZ(t,d)),d.duration&&(d.duration=xi(d.duration)),d.repeatDelay&&(d.repeatDelay=xi(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),(aa.instantAnimations||aa.skipAnimations)&&(h=!0,d.duration=0,d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const p=QQ(d.keyframes,o);if(p!==void 0){Dt.update(()=>{d.onUpdate(p),d.onComplete()});return}}return o.isSync?new IA(d):new FX(d)};function iZ({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function o5(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=e;r&&(a=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in o){const h=t.getValue(d,t.latestValues[d]??null),p=o[d];if(p===void 0||u&&iZ(u,d))continue;const y={delay:n,...NA(a||{},d)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===v&&!y.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const T=s5(t);if(T){const _=window.MotionHandoffAnimation(T,d,Dt);_!==null&&(y.startTime=_,S=!0)}}fT(t,d),h.start(zA(d,h,p,t.shouldReduceMotion&&k3.has(d)?{type:!1}:y,t,S));const x=h.animation;x&&c.push(x)}return s&&Promise.all(c).then(()=>{Dt.update(()=>{s&&YQ(t,s)})}),c}function dT(t,e,n={}){var c;const r=Zc(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(o5(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return aZ(t,e,d+u,h,p,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[u,d]=o==="beforeChildren"?[a,s]:[s,a];return u().then(()=>d())}else return Promise.all([a(),s(n.delay)])}function aZ(t,e,n=0,r=0,i=1,a){const s=[],o=(t.variantChildren.size-1)*r,c=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(t.variantChildren).sort(sZ).forEach((u,d)=>{u.notify("AnimationStart",e),s.push(dT(u,e,{...a,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(s)}function sZ(t,e){return t.sortNodePosition(e)}function oZ(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>dT(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=dT(t,e,n);else{const i=typeof e=="function"?Zc(t,e,n.custom):e;r=Promise.all(o5(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function l5(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const lZ=BA.length;function u5(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?u5(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<lZ;n++){const r=BA[n],i=t.props[r];(Xc(i)||i===!1)&&(e[r]=i)}return e}const uZ=[...UA].reverse(),cZ=UA.length;function fZ(t){return e=>Promise.all(e.map(({animation:n,options:r})=>oZ(t,n,r)))}function dZ(t){let e=fZ(t),n=xD(),r=!0;const i=c=>(u,d)=>{var p;const h=Zc(t,d,c==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(h){const{transition:y,transitionEnd:v,...S}=h;u={...u,...S,...v}}return u};function a(c){e=c(t)}function s(c){const{props:u}=t,d=u5(t.parent)||{},h=[],p=new Set;let y={},v=1/0;for(let x=0;x<cZ;x++){const T=uZ[x],_=n[T],A=u[T]!==void 0?u[T]:d[T],O=Xc(A),R=T===c?_.isActive:null;R===!1&&(v=x);let C=A===d[T]&&A!==u[T]&&O;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),_.protectedKeys={...y},!_.isActive&&R===null||!A&&!_.prevProp||Qp(A)||typeof A=="boolean")continue;const L=hZ(_.prevProp,A);let P=L||T===c&&_.isActive&&!C&&O||x>v&&O,N=!1;const k=Array.isArray(A)?A:[A];let M=k.reduce(i(T),{});R===!1&&(M={});const{prevResolvedValues:G={}}=_,K={...G,...M},W=$=>{P=!0,p.has($)&&(N=!0,p.delete($)),_.needsAnimating[$]=!0;const q=t.getValue($);q&&(q.liveStyle=!1)};for(const $ in K){const q=M[$],Z=G[$];if(y.hasOwnProperty($))continue;let F=!1;cT(q)&&cT(Z)?F=!l5(q,Z):F=q!==Z,F?q!=null?W($):p.add($):q!==void 0&&p.has($)?W($):_.protectedKeys[$]=!0}_.prevProp=A,_.prevResolvedValues=M,_.isActive&&(y={...y,...M}),r&&t.blockInitialAnimation&&(P=!1),P&&(!(C&&L)||N)&&h.push(...k.map($=>({animation:$,options:{type:T}})))}if(p.size){const x={};if(typeof u.initial!="boolean"){const T=Zc(t,Array.isArray(u.initial)?u.initial[0]:u.initial);T&&T.transition&&(x.transition=T.transition)}p.forEach(T=>{const _=t.getBaseTarget(T),A=t.getValue(T);A&&(A.liveStyle=!0),x[T]=_??null}),h.push({animation:x})}let S=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(h):Promise.resolve()}function o(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(p=>{var y;return(y=p.animationState)==null?void 0:y.setActive(c,u)}),n[c].isActive=u;const d=s(c);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=xD(),r=!0}}}function hZ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!l5(e,t):!1}function _s(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xD(){return{animate:_s(!0),whileInView:_s(),whileHover:_s(),whileTap:_s(),whileDrag:_s(),whileFocus:_s(),exit:_s()}}class es{constructor(e){this.isMounted=!1,this.node=e}update(){}}class mZ extends es{constructor(e){super(e),e.animationState||(e.animationState=dZ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Qp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let pZ=0;class gZ extends es{constructor(){super(...arguments),this.id=pZ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const yZ={animation:{Feature:mZ},exit:{Feature:gZ}};function Jc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Xf(t){return{point:{x:t.pageX,y:t.pageY}}}const vZ=t=>e=>jA(e)&&t(e,Xf(e));function Pc(t,e,n,r){return Jc(t,e,vZ(n),r)}function c5({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function xZ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function bZ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const f5=1e-4,SZ=1-f5,EZ=1+f5,d5=.01,TZ=0-d5,AZ=0+d5;function Bn(t){return t.max-t.min}function wZ(t,e,n){return Math.abs(t-e)<=n}function bD(t,e,n,r=.5){t.origin=r,t.originPoint=Lt(e.min,e.max,t.origin),t.scale=Bn(n)/Bn(e),t.translate=Lt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=SZ&&t.scale<=EZ||isNaN(t.scale))&&(t.scale=1),(t.translate>=TZ&&t.translate<=AZ||isNaN(t.translate))&&(t.translate=0)}function Nc(t,e,n,r){bD(t.x,e.x,n.x,r?r.originX:void 0),bD(t.y,e.y,n.y,r?r.originY:void 0)}function SD(t,e,n){t.min=n.min+e.min,t.max=t.min+Bn(e)}function _Z(t,e,n){SD(t.x,e.x,n.x),SD(t.y,e.y,n.y)}function ED(t,e,n){t.min=e.min-n.min,t.max=t.min+Bn(e)}function Mc(t,e,n){ED(t.x,e.x,n.x),ED(t.y,e.y,n.y)}const TD=()=>({translate:0,scale:1,origin:0,originPoint:0}),il=()=>({x:TD(),y:TD()}),AD=()=>({min:0,max:0}),Bt=()=>({x:AD(),y:AD()});function Rr(t){return[t("x"),t("y")]}function pv(t){return t===void 0||t===1}function hT({scale:t,scaleX:e,scaleY:n}){return!pv(t)||!pv(e)||!pv(n)}function Ls(t){return hT(t)||h5(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function h5(t){return wD(t.x)||wD(t.y)}function wD(t){return t&&t!=="0%"}function Im(t,e,n){const r=t-n,i=e*r;return n+i}function _D(t,e,n,r,i){return i!==void 0&&(t=Im(t,i,r)),Im(t,n,r)+e}function mT(t,e=0,n=1,r,i){t.min=_D(t.min,e,n,r,i),t.max=_D(t.max,e,n,r,i)}function m5(t,{x:e,y:n}){mT(t.x,e.translate,e.scale,e.originPoint),mT(t.y,n.translate,n.scale,n.originPoint)}const RD=.999999999999,OD=1.0000000000001;function RZ(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&sl(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,m5(t,s)),r&&Ls(a.latestValues)&&sl(t,a.latestValues))}e.x<OD&&e.x>RD&&(e.x=1),e.y<OD&&e.y>RD&&(e.y=1)}function al(t,e){t.min=t.min+e,t.max=t.max+e}function CD(t,e,n,r,i=.5){const a=Lt(t.min,t.max,i);mT(t,e,n,a,r)}function sl(t,e){CD(t.x,e.x,e.scaleX,e.scale,e.originX),CD(t.y,e.y,e.scaleY,e.scale,e.originY)}function p5(t,e){return c5(bZ(t.getBoundingClientRect(),e))}function OZ(t,e,n){const r=p5(t,n),{scroll:i}=e;return i&&(al(r.x,i.offset.x),al(r.y,i.offset.y)),r}const g5=({current:t})=>t?t.ownerDocument.defaultView:null,LD=(t,e)=>Math.abs(t-e);function CZ(t,e){const n=LD(t.x,e.x),r=LD(t.y,e.y);return Math.sqrt(n**2+r**2)}class y5{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=yv(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=CZ(h.offset,{x:0,y:0})>=3;if(!p&&!y)return;const{point:v}=h,{timestamp:S}=An;this.history.push({...v,timestamp:S});const{onStart:x,onMove:T}=this.handlers;p||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=gv(p,this.transformPagePoint),Dt.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:y,onSessionEnd:v,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=yv(h.type==="pointercancel"?this.lastMoveEventInfo:gv(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(h,x),v&&v(h,x)},!jA(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=Xf(e),o=gv(s,this.transformPagePoint),{point:c}=o,{timestamp:u}=An;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,yv(o,this.history)),this.removeListeners=Kf(Pc(this.contextWindow,"pointermove",this.handlePointerMove),Pc(this.contextWindow,"pointerup",this.handlePointerUp),Pc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Xa(this.updatePoint)}}function gv(t,e){return e?{point:e(t.point)}:t}function DD(t,e){return{x:t.x-e.x,y:t.y-e.y}}function yv({point:t},e){return{point:t,delta:DD(t,v5(e)),offset:DD(t,LZ(e)),velocity:DZ(e,.1)}}function LZ(t){return t[0]}function v5(t){return t[t.length-1]}function DZ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=v5(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>xi(e)));)n--;if(!r)return{x:0,y:0};const a=bi(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function IZ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Lt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Lt(n,t,r.max):Math.min(t,n)),t}function ID(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function PZ(t,{top:e,left:n,bottom:r,right:i}){return{x:ID(t.x,n,i),y:ID(t.y,e,r)}}function PD(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function NZ(t,e){return{x:PD(t.x,e.x),y:PD(t.y,e.y)}}function MZ(t,e){let n=.5;const r=Bn(t),i=Bn(e);return i>r?n=Kc(e.min,e.max-r,t.min):r>i&&(n=Kc(t.min,t.max-i,e.min)),ia(0,1,n)}function kZ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const pT=.35;function jZ(t=pT){return t===!1?t=0:t===!0&&(t=pT),{x:ND(t,"left","right"),y:ND(t,"top","bottom")}}function ND(t,e,n){return{min:MD(t,e),max:MD(t,n)}}function MD(t,e){return typeof t=="number"?t:t[e]||0}const UZ=new WeakMap;class BZ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Bt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Xf(d).point)},a=(d,h)=>{const{drag:p,dragPropagation:y,onDragStart:v}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=nQ(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Rr(x=>{let T=this.getAxisMotionValue(x).get()||0;if(Si.test(T)){const{projection:_}=this.visualElement;if(_&&_.layout){const A=_.layout.layoutBox[x];A&&(T=Bn(A)*(parseFloat(T)/100))}}this.originPoint[x]=T}),v&&Dt.postRender(()=>v(d,h)),fT(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},s=(d,h)=>{const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:v,onDrag:S}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=h;if(y&&this.currentDirection===null){this.currentDirection=FZ(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),S&&S(d,h)},o=(d,h)=>this.stop(d,h),c=()=>Rr(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new y5(e,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:g5(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&Dt.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Rh(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=IZ(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&rl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=PZ(r.layoutBox,e):this.constraints=!1,this.elastic=jZ(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Rr(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=kZ(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!rl(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=OZ(r,i.root,this.visualElement.getTransformPagePoint());let s=NZ(i.layout.layoutBox,a);if(n){const o=n(xZ(s));this.hasMutatedConstraints=!!o,o&&(s=c5(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=Rr(d=>{if(!Rh(d,n,this.currentDirection))return;let h=c&&c[d]||{};s&&(h={min:0,max:0});const p=i?200:1e6,y=i?40:1e7,v={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return fT(this.visualElement,e),r.start(zA(e,r,0,n,this.visualElement,!1))}stopAnimation(){Rr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Rr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Rr(n=>{const{drag:r}=this.getProps();if(!Rh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-Lt(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!rl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Rr(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=MZ({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Rr(s=>{if(!Rh(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];o.set(Lt(c,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;UZ.set(this.visualElement,this);const e=this.visualElement.current,n=Pc(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();rl(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Dt.read(r);const s=Jc(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Rr(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=pT,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function Rh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function FZ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class $Z extends es{constructor(e){super(e),this.removeGroupControls=Dr,this.removeListeners=Dr,this.controls=new BZ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dr}unmount(){this.removeGroupControls(),this.removeListeners()}}const kD=t=>(e,n)=>{t&&Dt.postRender(()=>t(e,n))};class GZ extends es{constructor(){super(...arguments),this.removePointerDownListener=Dr}onPointerDown(e){this.session=new y5(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:g5(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:kD(e),onStart:kD(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&Dt.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Pc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const cm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function jD(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const hc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Pe.test(t))t=parseFloat(t);else return t;const n=jD(t,e.target.x),r=jD(t,e.target.y);return`${n}% ${r}%`}},VZ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Qa.parse(t);if(i.length>5)return r;const a=Qa.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const u=Lt(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};class qZ extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;OQ(HZ),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),cm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||Dt.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),kA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function x5(t){const[e,n]=fQ(),r=B.useContext(t3);return b.jsx(qZ,{...t,layoutGroup:r,switchLayoutGroup:B.useContext(Q3),isPresent:e,safeToRemove:n})}const HZ={borderRadius:{...hc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:hc,borderTopRightRadius:hc,borderBottomLeftRadius:hc,borderBottomRightRadius:hc,boxShadow:VZ};function zZ(t,e,n){const r=kn(t)?t:xl(t);return r.start(zA("",r,e,n)),r.animation}const KZ=(t,e)=>t.depth-e.depth;class YZ{constructor(){this.children=[],this.isDirty=!1}add(e){yA(this.children,e),this.isDirty=!0}remove(e){vA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(KZ),this.isDirty=!1,this.children.forEach(e)}}function WZ(t,e){const n=Yn.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Xa(r),t(a-e))};return Dt.setup(r,!0),()=>Xa(r)}const b5=["TopLeft","TopRight","BottomLeft","BottomRight"],XZ=b5.length,UD=t=>typeof t=="string"?parseFloat(t):t,BD=t=>typeof t=="number"||Pe.test(t);function QZ(t,e,n,r,i,a){i?(t.opacity=Lt(0,n.opacity??1,ZZ(r)),t.opacityExit=Lt(e.opacity??1,0,JZ(r))):a&&(t.opacity=Lt(e.opacity??1,n.opacity??1,r));for(let s=0;s<XZ;s++){const o=`border${b5[s]}Radius`;let c=FD(e,o),u=FD(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||BD(c)===BD(u)?(t[o]=Math.max(Lt(UD(c),UD(u),r),0),(Si.test(u)||Si.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=Lt(e.rotate||0,n.rotate||0,r))}function FD(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const ZZ=S5(0,.5,d3),JZ=S5(.5,.95,Dr);function S5(t,e,n){return r=>r<t?0:r>e?1:n(Kc(t,e,r))}function $D(t,e){t.min=e.min,t.max=e.max}function Er(t,e){$D(t.x,e.x),$D(t.y,e.y)}function GD(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function VD(t,e,n,r,i){return t-=e,t=Im(t,1/n,r),i!==void 0&&(t=Im(t,1/i,r)),t}function eJ(t,e=0,n=1,r=.5,i,a=t,s=t){if(Si.test(e)&&(e=parseFloat(e),e=Lt(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Lt(a.min,a.max,r);t===a&&(o-=e),t.min=VD(t.min,e,n,o,i),t.max=VD(t.max,e,n,o,i)}function qD(t,e,[n,r,i],a,s){eJ(t,e[n],e[r],e[i],e.scale,a,s)}const tJ=["x","scaleX","originX"],nJ=["y","scaleY","originY"];function HD(t,e,n,r){qD(t.x,e,tJ,n?n.x:void 0,r?r.x:void 0),qD(t.y,e,nJ,n?n.y:void 0,r?r.y:void 0)}function zD(t){return t.translate===0&&t.scale===1}function E5(t){return zD(t.x)&&zD(t.y)}function KD(t,e){return t.min===e.min&&t.max===e.max}function rJ(t,e){return KD(t.x,e.x)&&KD(t.y,e.y)}function YD(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function T5(t,e){return YD(t.x,e.x)&&YD(t.y,e.y)}function WD(t){return Bn(t.x)/Bn(t.y)}function XD(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class iJ{constructor(){this.members=[]}add(e){yA(this.members,e),e.scheduleRender()}remove(e){if(vA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function aJ(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:p,skewX:y,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),y&&(r+=`skewX(${y}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const vv=["","X","Y","Z"],sJ={visibility:"hidden"},oJ=1e3;let lJ=0;function xv(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function A5(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=s5(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Dt,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&A5(r)}function w5({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=lJ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(fJ),this.nodes.forEach(gJ),this.nodes.forEach(yJ),this.nodes.forEach(dJ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new YZ)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new SA),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=H3(s)&&!lQ(s),this.instance=s;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=WZ(h,250),cm.hasAnimatedSinceResize&&(cm.hasAnimatedSinceResize=!1,this.nodes.forEach(ZD))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||EJ,{onLayoutAnimationStart:S,onLayoutAnimationComplete:x}=u.getProps(),T=!this.targetLayout||!T5(this.targetLayout,y),_=!h&&p;if(this.options.layoutRoot||this.resumeFrom||_||h&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const A={...NA(v,"layout"),onPlay:S,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A),this.setAnimationOrigin(d,_)}else h||ZD(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Xa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vJ),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&A5(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(QD);return}this.isUpdating||this.nodes.forEach(mJ),this.isUpdating=!1,this.nodes.forEach(pJ),this.nodes.forEach(uJ),this.nodes.forEach(cJ),this.clearAllSnapshots();const o=Yn.now();An.delta=ia(0,1e3/60,o-An.timestamp),An.timestamp=o,An.isProcessing=!0,uv.update.process(An),uv.preRender.process(An),uv.render.process(An),An.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,kA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hJ),this.sharedNodes.forEach(xJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Dt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Dt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Bn(this.snapshot.measuredBox.x)&&!Bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Bt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!E5(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||Ls(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),TJ(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:s}=this.options;if(!s)return Bt();const o=s.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(AJ))){const{scroll:d}=this.root;d&&(al(o.x,d.offset.x),al(o.y,d.offset.y))}return o}removeElementScroll(s){var c;const o=Bt();if(Er(o,s),(c=this.scroll)!=null&&c.wasRoot)return o;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Er(o,s),al(o.x,h.offset.x),al(o.y,h.offset.y))}return o}applyTransform(s,o=!1){const c=Bt();Er(c,s);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&sl(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ls(d.latestValues)&&sl(c,d.latestValues)}return Ls(this.latestValues)&&sl(c,this.latestValues),c}removeTransform(s){const o=Bt();Er(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Ls(u.latestValues))continue;hT(u.latestValues)&&u.updateSnapshot();const d=Bt(),h=u.measurePageBox();Er(d,h),HD(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Ls(this.latestValues)&&HD(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==An.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var p;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=An.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),Mc(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Bt(),this.targetWithTransforms=Bt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_Z(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Er(this.target,this.layout.layoutBox),m5(this.target,this.targetDelta)):Er(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),Mc(this.relativeTargetOrigin,this.target,y.target),Er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hT(this.parent.latestValues)||h5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const s=this.getLead(),o=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===An.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Er(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;RZ(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Bt());const{target:y}=s;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(GD(this.prevProjectionDelta.x,this.projectionDelta.x),GD(this.prevProjectionDelta.y,this.projectionDelta.y)),Nc(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!XD(this.projectionDelta.x,this.prevProjectionDelta.x)||!XD(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),s){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=il(),this.projectionDelta=il(),this.projectionDeltaWithTransform=il()}setAnimationOrigin(s,o=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=il();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const p=Bt(),y=c?c.source:void 0,v=this.layout?this.layout.source:void 0,S=y!==v,x=this.getStack(),T=!x||x.members.length<=1,_=!!(S&&!T&&this.options.crossfade===!0&&!this.path.some(SJ));this.animationProgress=0;let A;this.mixTargetDelta=O=>{const R=O/1e3;JD(h.x,s.x,R),JD(h.y,s.y,R),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mc(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),bJ(this.relativeTarget,this.relativeTargetOrigin,p,R),A&&rJ(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Bt()),Er(A,this.relativeTarget)),S&&(this.animationValues=d,QZ(d,u,this.latestValues,R,_,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var o,c,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Xa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Dt.update(()=>{cm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xl(0)),this.currentAnimation=zZ(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),s.onUpdate&&s.onUpdate(d)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(oJ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:d}=s;if(!(!o||!c||!u)){if(this!==s&&this.layout&&u&&_5(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Bt();const h=Bn(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const p=Bn(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+p}Er(o,c),sl(o,d),Nc(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new iJ),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&xv("z",s,u,this.animationValues);for(let d=0;d<vv.length;d++)xv(`rotate${vv[d]}`,s,u,this.animationValues),xv(`skew${vv[d]}`,s,u,this.animationValues);s.render();for(const d in u)s.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);s.scheduleRender()}getProjectionStyles(s){if(!this.instance||this.isSVG)return;if(!this.isVisible)return sJ;const o={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=um(s==null?void 0:s.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none",o;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=um(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Ls(this.latestValues)&&(y.transform=c?c({},""):"none",this.hasProjected=!1),y}const d=u.animationValues||u.latestValues;this.applyTransformsToTarget(),o.transform=aJ(this.projectionDeltaWithTransform,this.treeScale,d),c&&(o.transform=c(d,o.transform));const{x:h,y:p}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const y in Qc){if(d[y]===void 0)continue;const{correct:v,applyTo:S,isCSSVariable:x}=Qc[y],T=o.transform==="none"?d[y]:v(d[y],u);if(S){const _=S.length;for(let A=0;A<_;A++)o[S[A]]=T}else x?this.options.visualElement.renderState.vars[y]=T:o[y]=T}return this.options.layoutId&&(o.pointerEvents=u===this?um(s==null?void 0:s.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(QD),this.root.sharedNodes.clear()}}}function uJ(t){t.updateLayout()}function cJ(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,s=e.source!==t.layout.source;a==="size"?Rr(h=>{const p=s?e.measuredBox[h]:e.layoutBox[h],y=Bn(p);p.min=r[h].min,p.max=p.min+y}):_5(a,e.layoutBox,r)&&Rr(h=>{const p=s?e.measuredBox[h]:e.layoutBox[h],y=Bn(r[h]);p.max=p.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+y)});const o=il();Nc(o,r,e.layoutBox);const c=il();s?Nc(c,t.applyTransform(i,!0),e.measuredBox):Nc(c,r,e.layoutBox);const u=!E5(o);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:y}=h;if(p&&y){const v=Bt();Mc(v,e.layoutBox,p.layoutBox);const S=Bt();Mc(S,r,y.layoutBox),T5(v,S)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function fJ(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function dJ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function hJ(t){t.clearSnapshot()}function QD(t){t.clearMeasurements()}function mJ(t){t.isLayoutDirty=!1}function pJ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ZD(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function gJ(t){t.resolveTargetDelta()}function yJ(t){t.calcProjection()}function vJ(t){t.resetSkewAndRotation()}function xJ(t){t.removeLeadSnapshot()}function JD(t,e,n){t.translate=Lt(e.translate,0,n),t.scale=Lt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function eI(t,e,n,r){t.min=Lt(e.min,n.min,r),t.max=Lt(e.max,n.max,r)}function bJ(t,e,n,r){eI(t.x,e.x,n.x,r),eI(t.y,e.y,n.y,r)}function SJ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const EJ={duration:.45,ease:[.4,0,.1,1]},tI=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),nI=tI("applewebkit/")&&!tI("chrome/")?Math.round:Dr;function rI(t){t.min=nI(t.min),t.max=nI(t.max)}function TJ(t){rI(t.x),rI(t.y)}function _5(t,e,n){return t==="position"||t==="preserve-aspect"&&!wZ(WD(e),WD(n),.2)}function AJ(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const wJ=w5({attachResizeListener:(t,e)=>Jc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bv={current:void 0},R5=w5({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!bv.current){const t=new wJ({});t.mount(window),t.setOptions({layoutScroll:!0}),bv.current=t}return bv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),_J={pan:{Feature:GZ},drag:{Feature:$Z,ProjectionNode:R5,MeasureLayout:x5}};function iI(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Dt.postRender(()=>a(e,Xf(e)))}class RJ extends es{mount(){const{current:e}=this.node;e&&(this.unmount=rQ(e,(n,r)=>(iI(this.node,r,"Start"),i=>iI(this.node,i,"End"))))}unmount(){}}class OJ extends es{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Kf(Jc(this.node.current,"focus",()=>this.onFocus()),Jc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function aI(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Dt.postRender(()=>a(e,Xf(e)))}class CJ extends es{mount(){const{current:e}=this.node;e&&(this.unmount=oQ(e,(n,r)=>(aI(this.node,r,"Start"),(i,{success:a})=>aI(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const gT=new WeakMap,Sv=new WeakMap,LJ=t=>{const e=gT.get(t.target);e&&e(t)},DJ=t=>{t.forEach(LJ)};function IJ({root:t,...e}){const n=t||document;Sv.has(n)||Sv.set(n,{});const r=Sv.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(DJ,{root:t,...e})),r[i]}function PJ(t,e,n){const r=IJ(e);return gT.set(t,n),r.observe(t),()=>{gT.delete(t),r.unobserve(t)}}const NJ={some:0,all:1};class MJ extends es{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:NJ[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=u?d:h;p&&p(c)};return PJ(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(kJ(e,n))&&this.startObserver()}unmount(){}}function kJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const jJ={inView:{Feature:MJ},tap:{Feature:CJ},focus:{Feature:OJ},hover:{Feature:RJ}},UJ={layout:{ProjectionNode:R5,MeasureLayout:x5}},yT={current:null},O5={current:!1};function BJ(){if(O5.current=!0,!!pA)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>yT.current=t.matches;t.addListener(e),e()}else yT.current=!1}const FJ=new WeakMap;function $J(t,e,n){for(const r in e){const i=e[r],a=n[r];if(kn(i))t.addValue(r,i);else if(kn(a))t.addValue(r,xl(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,xl(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const sI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class GJ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=PA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Yn.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Dt.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=Zp(n),this.isVariantNode=W3(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const y=h[p];c[p]!==void 0&&kn(y)&&y.set(c[p],!1)}}mount(e){this.current=e,FJ.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),O5.current||BJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yT.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Xa(this.notifyUpdate),Xa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=tu.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Dt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bl){const n=bl[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Bt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<sI.length;r++){const i=sI[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=$J(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=xl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(n3(r)||i3(r))?r=parseFloat(r):!cQ(r)&&Qa.test(n)&&(r=F3(e,n)),this.setBaseTarget(e,kn(r)?r.get():r)),kn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=qA(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);s&&(r=s[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!kn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new SA),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class C5 extends GJ{constructor(){super(...arguments),this.KeyframeResolver=ZX}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;kn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function L5(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}function VJ(t){return window.getComputedStyle(t)}class qJ extends C5{constructor(){super(...arguments),this.type="html",this.renderInstance=L5}readValueFromInstance(e,n){var r;if(tu.has(n))return(r=this.projection)!=null&&r.isProjecting?iT(n):yX(e,n);{const i=VJ(e),a=(AA(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return p5(e,n)}build(e,n,r){$A(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return HA(e,n,r)}}const D5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function HJ(t,e,n,r){L5(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(D5.has(i)?i:FA(i),e.attrs[i])}class zJ extends C5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Bt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(tu.has(n)){const r=B3(n);return r&&r.default||0}return n=D5.has(n)?n:FA(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return a5(e,n,r)}build(e,n,r){t5(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){HJ(e,n,r,i)}mount(e){this.isSVGTag=r5(e.tagName),super.mount(e)}}const KJ=(t,e)=>VA(t)?new zJ(e):new qJ(e,{allowProjection:t!==B.Fragment}),YJ=HQ({...yZ,...jJ,..._J,...UJ},KJ),oI=gQ(YJ),WJ=({className:t="w-6 h-6",...e})=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),XJ=({className:t="w-6 h-6",...e})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})}),QJ=()=>{const[t,e]=B.useState(""),[n,r]=B.useState(""),[i,a]=B.useState(!1),s=Vt(),o=Qt(),{loading:c,error:u}=qt(h=>h.auth),d=async h=>{h.preventDefault();try{await s(fW({email:t,password:n})),o("/dashboard")}catch(p){console.error("Login failed:",p)}};return b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:b.jsxs(oI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-md border border-gray-100",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})})}),b.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Welcome Back"}),b.jsx("p",{className:"text-gray-500 mt-2",children:"Enter your credentials to access your account"})]}),b.jsxs("form",{onSubmit:d,className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),b.jsx("div",{className:"relative",children:b.jsx("input",{type:"email",id:"email",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"you@example.com",value:t,onChange:h=>e(h.target.value),required:!0})})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),b.jsxs("div",{className:"relative",children:[b.jsx("input",{type:i?"text":"password",id:"password",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 pr-12",placeholder:"",value:n,onChange:h=>r(h.target.value),required:!0}),b.jsx("button",{type:"button",className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",onClick:()=>a(!i),children:i?b.jsx(XJ,{className:"h-5 w-5"}):b.jsx(WJ,{className:"h-5 w-5"})})]})]}),u&&b.jsx(oI.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:"flex-shrink-0",children:b.jsx("svg",{className:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),b.jsx("div",{className:"ml-3",children:b.jsx("p",{className:"text-sm text-red-700",children:u.message||"Invalid credentials. Please try again."})})]})}),b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),b.jsx("div",{className:"text-sm",children:b.jsx("a",{href:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot password?"})})]}),b.jsx("div",{children:b.jsx("button",{type:"submit",disabled:c,className:`w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 ${c?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"}`,children:c?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"animate-spin h-5 w-5 mr-2"}),"Signing in..."]}):"Sign in"})})]}),b.jsxs("div",{className:"mt-6",children:[b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 flex items-center",children:b.jsx("div",{className:"w-full border-t border-gray-300"})}),b.jsx("div",{className:"relative flex justify-center text-sm",children:b.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),b.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[b.jsx("button",{type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:b.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:b.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.477 0 10c0 4.42 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0110 4.844c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.933.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C17.14 18.163 20 14.418 20 10c0-5.523-4.477-10-10-10z",clipRule:"evenodd"})})}),b.jsx("button",{type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:b.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:b.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.477 0 10c0 5.523 4.477 10 10 10 5.523 0 10-4.477 10-10 0-5.523-4.477-10-10-10zm5 10a5 5 0 11-10 0 5 5 0 0110 0z",clipRule:"evenodd"})})})]})]})]})})},ZJ=({className:t="w-6 h-6",...e})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"})}),JJ=({toggleSidebar:t})=>{const e=Vt(),n=Qt(),r=qt(a=>a.auth.user),i=()=>{e(e3()),n("/login")};return b.jsxs("header",{className:"top-0 left-0 right-0 z-40 bg-gradient-to-r from-gray-800 to-gray-900 text-white shadow-lg p-4 flex items-center justify-between h-16",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("button",{className:"md:hidden p-2 text-white bg-gray-700 rounded-md mr-3",onClick:t,children:b.jsx(ZJ,{})}),b.jsx("span",{className:"text-2xl font-extrabold tracking-tight cursor-pointer hover:text-blue-300 transition-colors duration-200",onClick:()=>n("/"),children:"AdminPanel"})]}),b.jsxs("div",{className:"flex items-center space-x-4",children:[r&&b.jsxs("span",{className:"text-sm font-medium text-gray-300 hidden md:inline",children:["Welcome, ",r.name||r.email||"Admin","!"]}),b.jsx("button",{onClick:i,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md text-sm font-semibold transition-all duration-300 ease-in-out transform hover:scale-105 shadow-md",children:"Logout"})]})]})},eee=({className:t="w-6 h-6 ",...e})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),lI=({className:t="w-6 h-6",...e})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#e3e3e3",children:b.jsx("path",{d:"m380-340 280-180-280-180v360Zm-60 220v-80H160q-33 0-56.5-23.5T80-280v-480q0-33 23.5-56.5T160-840h640q33 0 56.5 23.5T880-760v480q0 33-23.5 56.5T800-200H640v80H320ZM160-280h640v-480H160v480Zm0 0v-480 480Z"})}),tee=({className:t="w-6 h-6",...e})=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#D9D9D9",children:b.jsx("path",{d:"M720-440v-80h160v80H720Zm48 280-128-96 48-64 128 96-48 64Zm-80-480-48-64 128-96 48 64-128 96ZM200-200v-160h-40q-33 0-56.5-23.5T80-440v-80q0-33 23.5-56.5T160-600h160l200-120v480L320-360h-40v160h-80Zm240-182v-196l-98 58H160v80h182l98 58Zm120 36v-268q27 24 43.5 58.5T620-480q0 41-16.5 75.5T560-346ZM300-480Z"})});function nee({title:t,titleId:e,...n},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"}))}const uI=B.forwardRef(nee);function ree({title:t,titleId:e,...n},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))}const iee=B.forwardRef(ree);function aee({title:t,titleId:e,...n},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0 1 18 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0 1 18 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 0 1 6 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"}))}const see=B.forwardRef(aee);function oee({title:t,titleId:e,...n},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const lee=B.forwardRef(oee);function uee({title:t,titleId:e,...n},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?B.createElement("title",{id:e},t):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const cee=B.forwardRef(uee),fee=({isOpen:t,setIsOpen:e})=>b.jsxs(b.Fragment,{children:[b.jsxs("aside",{className:`
          fixed inset-y-0 left-0 bg-gray-900 text-white w-64 p-4
          transform ${t?"translate-x-0":"-translate-x-full"}
          md:translate-x-0 md:relative md:flex-shrink-0
          transition-transform duration-300 ease-in-out z-40
        `,children:[b.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Admin Menu"}),b.jsx("nav",{children:b.jsxs("ul",{children:[b.jsx("li",{className:"mb-2",children:b.jsxs(Kr,{to:"/dashboard",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[b.jsx(eee,{})," ",b.jsx("span",{className:"ml-2",children:"Dashboard"})]})}),b.jsx("li",{className:"mb-2",children:b.jsxs(Kr,{to:"/devices",className:"flex items-center px-4 py-2 pr-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[b.jsx(iee,{className:"w-6 h-6"}),b.jsx("span",{className:"ml-2",children:"Devices"})]})}),b.jsx("li",{className:"mb-2",children:b.jsxs(Kr,{to:"/contents",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[b.jsx(see,{className:"w-6 h-6"})," ",b.jsx("span",{className:"ml-2",children:"Contents"})]})}),b.jsx("li",{className:"mb-2",children:b.jsxs(Kr,{to:"/subscriptions",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[b.jsx(lee,{className:"w-6 h-6"})," ",b.jsx("span",{className:"ml-2",children:"Subscriptions"})]})}),b.jsx("li",{className:"mb-2",children:b.jsxs(Kr,{to:"/sport",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[b.jsx(lI,{})," ",b.jsx("span",{className:"ml-2",children:"Sport"})]})}),b.jsx("li",{className:"mb-2",children:b.jsxs(Kr,{to:"/suggestions",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[b.jsx(cee,{className:"w-6 h-6"})," ",b.jsx("span",{className:"ml-2",children:"Suggestions"})]})}),b.jsx("li",{className:"mb-2",children:b.jsxs(Kr,{to:"/livesports",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[b.jsx(lI,{})," ",b.jsx("span",{className:"ml-2",children:"Live and Sport"})]})}),b.jsx("li",{className:"mb-2",children:b.jsxs(Kr,{to:"/announces",className:"flex items-center px-4 py-2 rounded-md hover:bg-gray-700",onClick:()=>e(!1),children:[b.jsx(tee,{})," ",b.jsx("span",{className:"ml-2",children:"Announces"})]})})]})})]}),t&&b.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 md:hidden",onClick:()=>e(!1)})]}),dee=({children:t})=>{const[e,n]=B.useState(!1),r=()=>{n(!e)};return b.jsx(b.Fragment,{children:b.jsxs("div",{className:"flex flex-col min-h-screen",children:[b.jsx(JJ,{toggleSidebar:r}),b.jsxs("div",{className:"flex flex-1",children:[b.jsx(fee,{isOpen:e,setIsOpen:n}),b.jsxs("main",{className:"flex-1 bg-gray-50 overflow-auto",children:[t," "]})]})]})})},hee=()=>qt(e=>e.auth.isAuthenticated)?b.jsx(dee,{children:b.jsx(R7,{})}):b.jsx(_7,{to:"/login",replace:!0}),mee=async(t="week")=>{var e,n;try{return(await Xe.get(`/overview?time_range=${t}`)).data}catch(r){throw console.error("Error fetching overview data:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},pee=t=>async e=>{e({type:DF});try{const n=await mee(t);e({type:IF,payload:n})}catch(n){e({type:PF,payload:n})}},gee=t=>({type:NF,payload:t});function I5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=I5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function et(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=I5(t))&&(r&&(r+=" "),r+=e);return r}var Ev,cI;function Zn(){if(cI)return Ev;cI=1;var t=Array.isArray;return Ev=t,Ev}var Tv,fI;function P5(){if(fI)return Tv;fI=1;var t=typeof Th=="object"&&Th&&Th.Object===Object&&Th;return Tv=t,Tv}var Av,dI;function _i(){if(dI)return Av;dI=1;var t=P5(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return Av=n,Av}var wv,hI;function Qf(){if(hI)return wv;hI=1;var t=_i(),e=t.Symbol;return wv=e,wv}var _v,mI;function yee(){if(mI)return _v;mI=1;var t=Qf(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function a(s){var o=n.call(s,i),c=s[i];try{s[i]=void 0;var u=!0}catch{}var d=r.call(s);return u&&(o?s[i]=c:delete s[i]),d}return _v=a,_v}var Rv,pI;function vee(){if(pI)return Rv;pI=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return Rv=n,Rv}var Ov,gI;function da(){if(gI)return Ov;gI=1;var t=Qf(),e=yee(),n=vee(),r="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?e(o):n(o)}return Ov=s,Ov}var Cv,yI;function ha(){if(yI)return Cv;yI=1;function t(e){return e!=null&&typeof e=="object"}return Cv=t,Cv}var Lv,vI;function nu(){if(vI)return Lv;vI=1;var t=da(),e=ha(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return Lv=r,Lv}var Dv,xI;function KA(){if(xI)return Dv;xI=1;var t=Zn(),e=nu(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(t(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return Dv=i,Dv}var Iv,bI;function ts(){if(bI)return Iv;bI=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return Iv=t,Iv}var Pv,SI;function YA(){if(SI)return Pv;SI=1;var t=da(),e=ts(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!e(o))return!1;var c=t(o);return c==r||c==i||c==n||c==a}return Pv=s,Pv}var Nv,EI;function xee(){if(EI)return Nv;EI=1;var t=_i(),e=t["__core-js_shared__"];return Nv=e,Nv}var Mv,TI;function bee(){if(TI)return Mv;TI=1;var t=xee(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return Mv=n,Mv}var kv,AI;function N5(){if(AI)return kv;AI=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return kv=n,kv}var jv,wI;function See(){if(wI)return jv;wI=1;var t=YA(),e=bee(),n=ts(),r=N5(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,c=s.toString,u=o.hasOwnProperty,d=RegExp("^"+c.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(p){if(!n(p)||e(p))return!1;var y=t(p)?d:a;return y.test(r(p))}return jv=h,jv}var Uv,_I;function Eee(){if(_I)return Uv;_I=1;function t(e,n){return e==null?void 0:e[n]}return Uv=t,Uv}var Bv,RI;function to(){if(RI)return Bv;RI=1;var t=See(),e=Eee();function n(r,i){var a=e(r,i);return t(a)?a:void 0}return Bv=n,Bv}var Fv,OI;function Jp(){if(OI)return Fv;OI=1;var t=to(),e=t(Object,"create");return Fv=e,Fv}var $v,CI;function Tee(){if(CI)return $v;CI=1;var t=Jp();function e(){this.__data__=t?t(null):{},this.size=0}return $v=e,$v}var Gv,LI;function Aee(){if(LI)return Gv;LI=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return Gv=t,Gv}var Vv,DI;function wee(){if(DI)return Vv;DI=1;var t=Jp(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(t){var o=s[a];return o===e?void 0:o}return r.call(s,a)?s[a]:void 0}return Vv=i,Vv}var qv,II;function _ee(){if(II)return qv;II=1;var t=Jp(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var a=this.__data__;return t?a[i]!==void 0:n.call(a,i)}return qv=r,qv}var Hv,PI;function Ree(){if(PI)return Hv;PI=1;var t=Jp(),e="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=t&&i===void 0?e:i,this}return Hv=n,Hv}var zv,NI;function Oee(){if(NI)return zv;NI=1;var t=Tee(),e=Aee(),n=wee(),r=_ee(),i=Ree();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,zv=a,zv}var Kv,MI;function Cee(){if(MI)return Kv;MI=1;function t(){this.__data__=[],this.size=0}return Kv=t,Kv}var Yv,kI;function WA(){if(kI)return Yv;kI=1;function t(e,n){return e===n||e!==e&&n!==n}return Yv=t,Yv}var Wv,jI;function eg(){if(jI)return Wv;jI=1;var t=WA();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return Wv=e,Wv}var Xv,UI;function Lee(){if(UI)return Xv;UI=1;var t=eg(),e=Array.prototype,n=e.splice;function r(i){var a=this.__data__,s=t(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return Xv=r,Xv}var Qv,BI;function Dee(){if(BI)return Qv;BI=1;var t=eg();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return Qv=e,Qv}var Zv,FI;function Iee(){if(FI)return Zv;FI=1;var t=eg();function e(n){return t(this.__data__,n)>-1}return Zv=e,Zv}var Jv,$I;function Pee(){if($I)return Jv;$I=1;var t=eg();function e(n,r){var i=this.__data__,a=t(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return Jv=e,Jv}var ex,GI;function tg(){if(GI)return ex;GI=1;var t=Cee(),e=Lee(),n=Dee(),r=Iee(),i=Pee();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,ex=a,ex}var tx,VI;function XA(){if(VI)return tx;VI=1;var t=to(),e=_i(),n=t(e,"Map");return tx=n,tx}var nx,qI;function Nee(){if(qI)return nx;qI=1;var t=Oee(),e=tg(),n=XA();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return nx=r,nx}var rx,HI;function Mee(){if(HI)return rx;HI=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return rx=t,rx}var ix,zI;function ng(){if(zI)return ix;zI=1;var t=Mee();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return ix=e,ix}var ax,KI;function kee(){if(KI)return ax;KI=1;var t=ng();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return ax=e,ax}var sx,YI;function jee(){if(YI)return sx;YI=1;var t=ng();function e(n){return t(this,n).get(n)}return sx=e,sx}var ox,WI;function Uee(){if(WI)return ox;WI=1;var t=ng();function e(n){return t(this,n).has(n)}return ox=e,ox}var lx,XI;function Bee(){if(XI)return lx;XI=1;var t=ng();function e(n,r){var i=t(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return lx=e,lx}var ux,QI;function QA(){if(QI)return ux;QI=1;var t=Nee(),e=kee(),n=jee(),r=Uee(),i=Bee();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,ux=a,ux}var cx,ZI;function M5(){if(ZI)return cx;ZI=1;var t=QA(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],c=a.cache;if(c.has(o))return c.get(o);var u=r.apply(this,s);return a.cache=c.set(o,u)||c,u};return a.cache=new(n.Cache||t),a}return n.Cache=t,cx=n,cx}var fx,JI;function Fee(){if(JI)return fx;JI=1;var t=M5(),e=500;function n(r){var i=t(r,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return fx=n,fx}var dx,eP;function $ee(){if(eP)return dx;eP=1;var t=Fee(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,o,c,u){a.push(c?u.replace(n,"$1"):o||s)}),a});return dx=r,dx}var hx,tP;function ZA(){if(tP)return hx;tP=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=n(e[r],r,e);return a}return hx=t,hx}var mx,nP;function Gee(){if(nP)return mx;nP=1;var t=Qf(),e=ZA(),n=Zn(),r=nu(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return e(o,s)+"";if(r(o))return a?a.call(o):"";var c=o+"";return c=="0"&&1/o==-1/0?"-0":c}return mx=s,mx}var px,rP;function k5(){if(rP)return px;rP=1;var t=Gee();function e(n){return n==null?"":t(n)}return px=e,px}var gx,iP;function j5(){if(iP)return gx;iP=1;var t=Zn(),e=KA(),n=$ee(),r=k5();function i(a,s){return t(a)?a:e(a,s)?[a]:n(r(a))}return gx=i,gx}var yx,aP;function rg(){if(aP)return yx;aP=1;var t=nu();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return yx=e,yx}var vx,sP;function JA(){if(sP)return vx;sP=1;var t=j5(),e=rg();function n(r,i){i=t(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[e(i[a++])];return a&&a==s?r:void 0}return vx=n,vx}var xx,oP;function U5(){if(oP)return xx;oP=1;var t=JA();function e(n,r,i){var a=n==null?void 0:t(n,r);return a===void 0?i:a}return xx=e,xx}var Vee=U5();const Ir=xt(Vee);var bx,lP;function qee(){if(lP)return bx;lP=1;function t(e){return e==null}return bx=t,bx}var Hee=qee();const Ye=xt(Hee);var Sx,uP;function zee(){if(uP)return Sx;uP=1;var t=da(),e=Zn(),n=ha(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&n(a)&&t(a)==r}return Sx=i,Sx}var Kee=zee();const Ws=xt(Kee);var Yee=YA();const Ge=xt(Yee);var Wee=ts();const ru=xt(Wee);var Ex={exports:{}},it={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cP;function Xee(){if(cP)return it;cP=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function S(x){if(typeof x=="object"&&x!==null){var T=x.$$typeof;switch(T){case t:switch(x=x.type,x){case n:case i:case r:case u:case d:return x;default:switch(x=x&&x.$$typeof,x){case o:case s:case c:case p:case h:case a:return x;default:return T}}case e:return T}}}return it.ContextConsumer=s,it.ContextProvider=a,it.Element=t,it.ForwardRef=c,it.Fragment=n,it.Lazy=p,it.Memo=h,it.Portal=e,it.Profiler=i,it.StrictMode=r,it.Suspense=u,it.SuspenseList=d,it.isAsyncMode=function(){return!1},it.isConcurrentMode=function(){return!1},it.isContextConsumer=function(x){return S(x)===s},it.isContextProvider=function(x){return S(x)===a},it.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},it.isForwardRef=function(x){return S(x)===c},it.isFragment=function(x){return S(x)===n},it.isLazy=function(x){return S(x)===p},it.isMemo=function(x){return S(x)===h},it.isPortal=function(x){return S(x)===e},it.isProfiler=function(x){return S(x)===i},it.isStrictMode=function(x){return S(x)===r},it.isSuspense=function(x){return S(x)===u},it.isSuspenseList=function(x){return S(x)===d},it.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===u||x===d||x===y||typeof x=="object"&&x!==null&&(x.$$typeof===p||x.$$typeof===h||x.$$typeof===a||x.$$typeof===s||x.$$typeof===c||x.$$typeof===v||x.getModuleId!==void 0)},it.typeOf=S,it}var fP;function Qee(){return fP||(fP=1,Ex.exports=Xee()),Ex.exports}var Zee=Qee(),Tx,dP;function B5(){if(dP)return Tx;dP=1;var t=da(),e=ha(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return Tx=r,Tx}var Ax,hP;function Jee(){if(hP)return Ax;hP=1;var t=B5();function e(n){return t(n)&&n!=+n}return Ax=e,Ax}var ete=Jee();const Zf=xt(ete);var tte=B5();const nte=xt(tte);var Jr=function(e){return e===0?0:e>0?1:-1},Us=function(e){return Ws(e)&&e.indexOf("%")===e.length-1},ve=function(e){return nte(e)&&!Zf(e)},an=function(e){return ve(e)||Ws(e)},rte=0,Jf=function(e){var n=++rte;return"".concat(e||"").concat(n)},Xs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ve(e)&&!Ws(e))return r;var a;if(Us(e)){var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return Zf(a)&&(a=r),i&&a>n&&(a=n),a},Ha=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},ite=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Qr=function(e,n){return ve(e)&&ve(n)?function(r){return e+r*(n-e)}:function(){return n}};function Pm(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Ir(r,e))===n})}var ate=function(e,n){return ve(e)&&ve(n)?e-n:Ws(e)&&Ws(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function fl(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function vT(t){"@babel/helpers - typeof";return vT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vT(t)}var ste=["viewBox","children"],ote=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],mP=["points","pathLength"],wx={svg:ste,polygon:mP,polyline:mP},ew=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Nm=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(B.isValidElement(e)&&(r=e.props),!ru(r))return null;var i={};return Object.keys(r).forEach(function(a){ew.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},lte=function(e,n,r){return function(i){return e(n,r,i),null}},Mm=function(e,n,r){if(!ru(e)||vT(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];ew.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=lte(s,n,r))}),i},ute=["children"],cte=["children"];function pP(t,e){if(t==null)return{};var n=fte(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fte(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xT(t){"@babel/helpers - typeof";return xT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xT(t)}var gP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ea=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},yP=null,_x=null,tw=function t(e){if(e===yP&&Array.isArray(_x))return _x;var n=[];return B.Children.forEach(e,function(r){Ye(r)||(Zee.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),_x=n,yP=e,n};function Pr(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return ea(i)}):r=[ea(e)],tw(t).forEach(function(i){var a=Ir(i,"type.displayName")||Ir(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function lr(t,e){var n=Pr(t,e);return n&&n[0]}var vP=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!ve(r)||r<=0||!ve(i)||i<=0)},dte=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],hte=function(e){return e&&e.type&&Ws(e.type)&&dte.indexOf(e.type)>=0},mte=function(e){return e&&xT(e)==="object"&&"clipDot"in e},pte=function(e,n,r,i){var a,s=(a=wx==null?void 0:wx[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Ge(e)&&(i&&s.includes(n)||ote.includes(n))||r&&ew.includes(n)},We=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(B.isValidElement(e)&&(i=e.props),!ru(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;pte((o=i)===null||o===void 0?void 0:o[s],s,n,r)&&(a[s]=i[s])}),a},bT=function t(e,n){if(e===n)return!0;var r=B.Children.count(e);if(r!==B.Children.count(n))return!1;if(r===0)return!0;if(r===1)return xP(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!xP(a,s))return!1}return!0},xP=function(e,n){if(Ye(e)&&Ye(n))return!0;if(!Ye(e)&&!Ye(n)){var r=e.props||{},i=r.children,a=pP(r,ute),s=n.props||{},o=s.children,c=pP(s,cte);return i&&o?fl(a,c)&&bT(i,o):!i&&!o?fl(a,c):!1}return!1},bP=function(e,n){var r=[],i={};return tw(e).forEach(function(a,s){if(hte(a))r.push(a);else if(a){var o=ea(a.type),c=n[o]||{},u=c.handler,d=c.once;if(u&&(!d||!i[o])){var h=u(a,o,s);r.push(h),i[o]=!0}}}),r},gte=function(e){var n=e&&e.type;return n&&gP[n]?gP[n]:null},yte=function(e,n){return tw(n).indexOf(e)},vte=["children","width","height","viewBox","className","style","title","desc"];function ST(){return ST=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ST.apply(this,arguments)}function xte(t,e){if(t==null)return{};var n=bte(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bte(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ET(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,s=t.style,o=t.title,c=t.desc,u=xte(t,vte),d=i||{width:n,height:r,x:0,y:0},h=et("recharts-surface",a);return Q.createElement("svg",ST({},We(u,!0,"svg"),{className:h,width:n,height:r,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),Q.createElement("title",null,o),Q.createElement("desc",null,c),e)}var Ste=["children","className"];function TT(){return TT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TT.apply(this,arguments)}function Ete(t,e){if(t==null)return{};var n=Tte(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Tte(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var $t=Q.forwardRef(function(t,e){var n=t.children,r=t.className,i=Ete(t,Ste),a=et("recharts-layer",r);return Q.createElement("g",TT({className:a},We(i,!0),{ref:e}),n)}),ta=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},Rx,SP;function Ate(){if(SP)return Rx;SP=1;function t(e,n,r){var i=-1,a=e.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+n];return s}return Rx=t,Rx}var Ox,EP;function wte(){if(EP)return Ox;EP=1;var t=Ate();function e(n,r,i){var a=n.length;return i=i===void 0?a:i,!r&&i>=a?n:t(n,r,i)}return Ox=e,Ox}var Cx,TP;function F5(){if(TP)return Cx;TP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+t+i+a+"]");function c(u){return o.test(u)}return Cx=c,Cx}var Lx,AP;function _te(){if(AP)return Lx;AP=1;function t(e){return e.split("")}return Lx=t,Lx}var Dx,wP;function Rte(){if(wP)return Dx;wP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",s="["+t+"]",o="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+c+")",d="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",v=u+"?",S="["+a+"]?",x="(?:"+y+"(?:"+[d,h,p].join("|")+")"+S+v+")*",T=S+v+x,_="(?:"+[d+o+"?",o,h,p,s].join("|")+")",A=RegExp(c+"(?="+c+")|"+_+T,"g");function O(R){return R.match(A)||[]}return Dx=O,Dx}var Ix,_P;function Ote(){if(_P)return Ix;_P=1;var t=_te(),e=F5(),n=Rte();function r(i){return e(i)?n(i):t(i)}return Ix=r,Ix}var Px,RP;function Cte(){if(RP)return Px;RP=1;var t=wte(),e=F5(),n=Ote(),r=k5();function i(a){return function(s){s=r(s);var o=e(s)?n(s):void 0,c=o?o[0]:s.charAt(0),u=o?t(o,1).join(""):s.slice(1);return c[a]()+u}}return Px=i,Px}var Nx,OP;function Lte(){if(OP)return Nx;OP=1;var t=Cte(),e=t("toUpperCase");return Nx=e,Nx}var Dte=Lte();const ig=xt(Dte);function St(t){return function(){return t}}const $5=Math.cos,km=Math.sin,ri=Math.sqrt,jm=Math.PI,ag=2*jm,AT=Math.PI,wT=2*AT,Ds=1e-6,Ite=wT-Ds;function G5(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Pte(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return G5;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Nte{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?G5:Pte(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,d=s-e,h=o-n,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>Ds)if(!(Math.abs(h*c-u*d)>Ds)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let y=r-s,v=i-o,S=c*c+u*u,x=y*y+v*v,T=Math.sqrt(S),_=Math.sqrt(p),A=a*Math.tan((AT-Math.acos((S+p-x)/(2*T*_)))/2),O=A/_,R=A/T;Math.abs(O-1)>Ds&&this._append`L${e+O*d},${n+O*h}`,this._append`A${a},${a},0,0,${+(h*y>d*v)},${this._x1=e+R*c},${this._y1=n+R*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,d=n+c,h=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ds||Math.abs(this._y1-d)>Ds)&&this._append`L${u},${d}`,r&&(p<0&&(p=p%wT+wT),p>Ite?this._append`A${r},${r},0,1,${h},${e-o},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:p>Ds&&this._append`A${r},${r},0,${+(p>=AT)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function nw(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Nte(e)}function rw(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function V5(t){this._context=t}V5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function sg(t){return new V5(t)}function q5(t){return t[0]}function H5(t){return t[1]}function z5(t,e){var n=St(!0),r=null,i=sg,a=null,s=nw(o);t=typeof t=="function"?t:t===void 0?q5:St(t),e=typeof e=="function"?e:e===void 0?H5:St(e);function o(c){var u,d=(c=rw(c)).length,h,p=!1,y;for(r==null&&(a=i(y=s())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(h,u,c),+e(h,u,c));if(y)return a=null,y+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:St(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:St(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:St(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function Oh(t,e,n){var r=null,i=St(!0),a=null,s=sg,o=null,c=nw(u);t=typeof t=="function"?t:t===void 0?q5:St(+t),e=typeof e=="function"?e:St(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?H5:St(+n);function u(h){var p,y,v,S=(h=rw(h)).length,x,T=!1,_,A=new Array(S),O=new Array(S);for(a==null&&(o=s(_=c())),p=0;p<=S;++p){if(!(p<S&&i(x=h[p],p,h))===T)if(T=!T)y=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=y;--v)o.point(A[v],O[v]);o.lineEnd(),o.areaEnd()}T&&(A[p]=+t(x,p,h),O[p]=+e(x,p,h),o.point(r?+r(x,p,h):A[p],n?+n(x,p,h):O[p]))}if(_)return o=null,_+""||null}function d(){return z5().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:St(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:St(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:St(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:St(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:St(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:St(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:St(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class K5{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Mte(t){return new K5(t,!0)}function kte(t){return new K5(t,!1)}const iw={draw(t,e){const n=ri(e/jm);t.moveTo(n,0),t.arc(0,0,n,0,ag)}},jte={draw(t,e){const n=ri(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Y5=ri(1/3),Ute=Y5*2,Bte={draw(t,e){const n=ri(e/Ute),r=n*Y5;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Fte={draw(t,e){const n=ri(e),r=-n/2;t.rect(r,r,n,n)}},$te=.8908130915292852,W5=km(jm/10)/km(7*jm/10),Gte=km(ag/10)*W5,Vte=-$5(ag/10)*W5,qte={draw(t,e){const n=ri(e*$te),r=Gte*n,i=Vte*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=ag*a/5,o=$5(s),c=km(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},Mx=ri(3),Hte={draw(t,e){const n=-ri(e/(Mx*3));t.moveTo(0,n*2),t.lineTo(-Mx*n,-n),t.lineTo(Mx*n,-n),t.closePath()}},Tr=-.5,Ar=ri(3)/2,_T=1/ri(12),zte=(_T/2+1)*3,Kte={draw(t,e){const n=ri(e/zte),r=n/2,i=n*_T,a=r,s=n*_T+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(Tr*r-Ar*i,Ar*r+Tr*i),t.lineTo(Tr*a-Ar*s,Ar*a+Tr*s),t.lineTo(Tr*o-Ar*c,Ar*o+Tr*c),t.lineTo(Tr*r+Ar*i,Tr*i-Ar*r),t.lineTo(Tr*a+Ar*s,Tr*s-Ar*a),t.lineTo(Tr*o+Ar*c,Tr*c-Ar*o),t.closePath()}};function Yte(t,e){let n=null,r=nw(i);t=typeof t=="function"?t:St(t||iw),e=typeof e=="function"?e:St(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:St(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:St(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Um(){}function Bm(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function X5(t){this._context=t}X5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Bm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Bm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Wte(t){return new X5(t)}function Q5(t){this._context=t}Q5.prototype={areaStart:Um,areaEnd:Um,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Bm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Xte(t){return new Q5(t)}function Z5(t){this._context=t}Z5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Bm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Qte(t){return new Z5(t)}function J5(t){this._context=t}J5.prototype={areaStart:Um,areaEnd:Um,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Zte(t){return new J5(t)}function CP(t){return t<0?-1:1}function LP(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(CP(a)+CP(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function DP(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function kx(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function Fm(t){this._context=t}Fm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kx(this,this._t0,DP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,kx(this,DP(this,n=LP(this,t,e)),n);break;default:kx(this,this._t0,n=LP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function e4(t){this._context=new t4(t)}(e4.prototype=Object.create(Fm.prototype)).point=function(t,e){Fm.prototype.point.call(this,e,t)};function t4(t){this._context=t}t4.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function Jte(t){return new Fm(t)}function ene(t){return new e4(t)}function n4(t){this._context=t}n4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=IP(t),i=IP(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function IP(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function tne(t){return new n4(t)}function og(t,e){this._context=t,this._t=e}og.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function nne(t){return new og(t,.5)}function rne(t){return new og(t,0)}function ine(t){return new og(t,1)}function Sl(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function RT(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function ane(t,e){return t[e]}function sne(t){const e=[];return e.key=t,e}function one(){var t=St([]),e=RT,n=Sl,r=ane;function i(a){var s=Array.from(t.apply(this,arguments),sne),o,c=s.length,u=-1,d;for(const h of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,d=rw(e(s));o<c;++o)s[d[o]].index=o;return n(s,d),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:St(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:St(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?RT:typeof a=="function"?a:St(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Sl,i):n},i}function lne(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Sl(t,e)}}function une(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}Sl(t,e)}}function cne(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var d=t[e[o]],h=d[r][1]||0,p=d[r-1][1]||0,y=(h-p)/2,v=0;v<o;++v){var S=t[e[v]],x=S[r][1]||0,T=S[r-1][1]||0;y+=x-T}c+=h,u+=y*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,Sl(t,e)}}function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}var fne=["type","size","sizeType"];function OT(){return OT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OT.apply(this,arguments)}function PP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PP(Object(n),!0).forEach(function(r){dne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dne(t,e,n){return e=hne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hne(t){var e=mne(t,"string");return ef(e)=="symbol"?e:e+""}function mne(t,e){if(ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pne(t,e){if(t==null)return{};var n=gne(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var r4={symbolCircle:iw,symbolCross:jte,symbolDiamond:Bte,symbolSquare:Fte,symbolStar:qte,symbolTriangle:Hte,symbolWye:Kte},yne=Math.PI/180,vne=function(e){var n="symbol".concat(ig(e));return r4[n]||iw},xne=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*yne;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},bne=function(e,n){r4["symbol".concat(ig(e))]=n},aw=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,c=pne(e,fne),u=NP(NP({},c),{},{type:r,size:a,sizeType:o}),d=function(){var x=vne(r),T=Yte().type(x).size(xne(a,o,r));return T()},h=u.className,p=u.cx,y=u.cy,v=We(u,!0);return p===+p&&y===+y&&a===+a?Q.createElement("path",OT({},v,{className:et("recharts-symbols",h),transform:"translate(".concat(p,", ").concat(y,")"),d:d()})):null};aw.registerSymbol=bne;function El(t){"@babel/helpers - typeof";return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},El(t)}function CT(){return CT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CT.apply(this,arguments)}function MP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MP(Object(n),!0).forEach(function(r){tf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ene(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a4(r.key),r)}}function Ane(t,e,n){return e&&Tne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wne(t,e,n){return e=$m(e),_ne(t,i4()?Reflect.construct(e,n||[],$m(t).constructor):e.apply(t,n))}function _ne(t,e){if(e&&(El(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rne(t)}function Rne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i4=function(){return!!t})()}function $m(t){return $m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$m(t)}function One(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LT(t,e)}function LT(t,e){return LT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LT(t,e)}function tf(t,e,n){return e=a4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a4(t){var e=Cne(t,"string");return El(e)=="symbol"?e:e+""}function Cne(t,e){if(El(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(El(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wr=32,sw=function(t){function e(){return Ene(this,e),wne(this,e,arguments)}return One(e,t),Ane(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=wr/2,s=wr/6,o=wr/3,c=r.inactive?i:r.color;if(r.type==="plainline")return Q.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:wr,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return Q.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(wr,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return Q.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(wr/8,"h").concat(wr,"v").concat(wr*3/4,"h").concat(-wr,"z"),className:"recharts-legend-icon"});if(Q.isValidElement(r.legendIcon)){var u=Sne({},r);return delete u.legendIcon,Q.cloneElement(r.legendIcon,u)}return Q.createElement(aw,{fill:c,cx:a,cy:a,size:wr,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:wr,height:wr},h={display:o==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(y,v){var S=y.formatter||c,x=et(tf(tf({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",y.inactive));if(y.type==="none")return null;var T=Ge(y.value)?null:y.value;ta(!Ge(y.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=y.inactive?u:y.color;return Q.createElement("li",CT({className:x,style:h,key:"legend-item-".concat(v)},Mm(r.props,y,v)),Q.createElement(ET,{width:s,height:s,viewBox:d,style:p},r.renderIcon(y)),Q.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},S?S(T,y,v):T))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return Q.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(B.PureComponent);tf(sw,"displayName","Legend");tf(sw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var jx,kP;function Lne(){if(kP)return jx;kP=1;var t=tg();function e(){this.__data__=new t,this.size=0}return jx=e,jx}var Ux,jP;function Dne(){if(jP)return Ux;jP=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return Ux=t,Ux}var Bx,UP;function Ine(){if(UP)return Bx;UP=1;function t(e){return this.__data__.get(e)}return Bx=t,Bx}var Fx,BP;function Pne(){if(BP)return Fx;BP=1;function t(e){return this.__data__.has(e)}return Fx=t,Fx}var $x,FP;function Nne(){if(FP)return $x;FP=1;var t=tg(),e=XA(),n=QA(),r=200;function i(a,s){var o=this.__data__;if(o instanceof t){var c=o.__data__;if(!e||c.length<r-1)return c.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(c)}return o.set(a,s),this.size=o.size,this}return $x=i,$x}var Gx,$P;function s4(){if($P)return Gx;$P=1;var t=tg(),e=Lne(),n=Dne(),r=Ine(),i=Pne(),a=Nne();function s(o){var c=this.__data__=new t(o);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,Gx=s,Gx}var Vx,GP;function Mne(){if(GP)return Vx;GP=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return Vx=e,Vx}var qx,VP;function kne(){if(VP)return qx;VP=1;function t(e){return this.__data__.has(e)}return qx=t,qx}var Hx,qP;function o4(){if(qP)return Hx;qP=1;var t=QA(),e=Mne(),n=kne();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new t;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,Hx=r,Hx}var zx,HP;function l4(){if(HP)return zx;HP=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return zx=t,zx}var Kx,zP;function u4(){if(zP)return Kx;zP=1;function t(e,n){return e.has(n)}return Kx=t,Kx}var Yx,KP;function c4(){if(KP)return Yx;KP=1;var t=o4(),e=l4(),n=u4(),r=1,i=2;function a(s,o,c,u,d,h){var p=c&r,y=s.length,v=o.length;if(y!=v&&!(p&&v>y))return!1;var S=h.get(s),x=h.get(o);if(S&&x)return S==o&&x==s;var T=-1,_=!0,A=c&i?new t:void 0;for(h.set(s,o),h.set(o,s);++T<y;){var O=s[T],R=o[T];if(u)var C=p?u(R,O,T,o,s,h):u(O,R,T,s,o,h);if(C!==void 0){if(C)continue;_=!1;break}if(A){if(!e(o,function(L,P){if(!n(A,P)&&(O===L||d(O,L,c,u,h)))return A.push(P)})){_=!1;break}}else if(!(O===R||d(O,R,c,u,h))){_=!1;break}}return h.delete(s),h.delete(o),_}return Yx=a,Yx}var Wx,YP;function jne(){if(YP)return Wx;YP=1;var t=_i(),e=t.Uint8Array;return Wx=e,Wx}var Xx,WP;function Une(){if(WP)return Xx;WP=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,a){r[++n]=[a,i]}),r}return Xx=t,Xx}var Qx,XP;function ow(){if(XP)return Qx;XP=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return Qx=t,Qx}var Zx,QP;function Bne(){if(QP)return Zx;QP=1;var t=Qf(),e=jne(),n=WA(),r=c4(),i=Une(),a=ow(),s=1,o=2,c="[object Boolean]",u="[object Date]",d="[object Error]",h="[object Map]",p="[object Number]",y="[object RegExp]",v="[object Set]",S="[object String]",x="[object Symbol]",T="[object ArrayBuffer]",_="[object DataView]",A=t?t.prototype:void 0,O=A?A.valueOf:void 0;function R(C,L,P,N,k,M,G){switch(P){case _:if(C.byteLength!=L.byteLength||C.byteOffset!=L.byteOffset)return!1;C=C.buffer,L=L.buffer;case T:return!(C.byteLength!=L.byteLength||!M(new e(C),new e(L)));case c:case u:case p:return n(+C,+L);case d:return C.name==L.name&&C.message==L.message;case y:case S:return C==L+"";case h:var K=i;case v:var W=N&s;if(K||(K=a),C.size!=L.size&&!W)return!1;var Y=G.get(C);if(Y)return Y==L;N|=o,G.set(C,L);var j=r(K(C),K(L),N,k,M,G);return G.delete(C),j;case x:if(O)return O.call(C)==O.call(L)}return!1}return Zx=R,Zx}var Jx,ZP;function f4(){if(ZP)return Jx;ZP=1;function t(e,n){for(var r=-1,i=n.length,a=e.length;++r<i;)e[a+r]=n[r];return e}return Jx=t,Jx}var eb,JP;function Fne(){if(JP)return eb;JP=1;var t=f4(),e=Zn();function n(r,i,a){var s=i(r);return e(r)?s:t(s,a(r))}return eb=n,eb}var tb,eN;function $ne(){if(eN)return tb;eN=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=0,s=[];++r<i;){var o=e[r];n(o,r,e)&&(s[a++]=o)}return s}return tb=t,tb}var nb,tN;function Gne(){if(tN)return nb;tN=1;function t(){return[]}return nb=t,nb}var rb,nN;function Vne(){if(nN)return rb;nN=1;var t=$ne(),e=Gne(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),t(i(s),function(o){return r.call(s,o)}))}:e;return rb=a,rb}var ib,rN;function qne(){if(rN)return ib;rN=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return ib=t,ib}var ab,iN;function Hne(){if(iN)return ab;iN=1;var t=da(),e=ha(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return ab=r,ab}var sb,aN;function lw(){if(aN)return sb;aN=1;var t=Hne(),e=ha(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(s){return e(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return sb=a,sb}var _c={exports:{}},ob,sN;function zne(){if(sN)return ob;sN=1;function t(){return!1}return ob=t,ob}_c.exports;var oN;function d4(){return oN||(oN=1,function(t,e){var n=_i(),r=zne(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?n.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||r;t.exports=u}(_c,_c.exports)),_c.exports}var lb,lN;function uw(){if(lN)return lb;lN=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return lb=n,lb}var ub,uN;function cw(){if(uN)return ub;uN=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return ub=e,ub}var cb,cN;function Kne(){if(cN)return cb;cN=1;var t=da(),e=cw(),n=ha(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",h="[object Object]",p="[object RegExp]",y="[object Set]",v="[object String]",S="[object WeakMap]",x="[object ArrayBuffer]",T="[object DataView]",_="[object Float32Array]",A="[object Float64Array]",O="[object Int8Array]",R="[object Int16Array]",C="[object Int32Array]",L="[object Uint8Array]",P="[object Uint8ClampedArray]",N="[object Uint16Array]",k="[object Uint32Array]",M={};M[_]=M[A]=M[O]=M[R]=M[C]=M[L]=M[P]=M[N]=M[k]=!0,M[r]=M[i]=M[x]=M[a]=M[T]=M[s]=M[o]=M[c]=M[u]=M[d]=M[h]=M[p]=M[y]=M[v]=M[S]=!1;function G(K){return n(K)&&e(K.length)&&!!M[t(K)]}return cb=G,cb}var fb,fN;function h4(){if(fN)return fb;fN=1;function t(e){return function(n){return e(n)}}return fb=t,fb}var Rc={exports:{}};Rc.exports;var dN;function Yne(){return dN||(dN=1,function(t,e){var n=P5(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o}(Rc,Rc.exports)),Rc.exports}var db,hN;function m4(){if(hN)return db;hN=1;var t=Kne(),e=h4(),n=Yne(),r=n&&n.isTypedArray,i=r?e(r):t;return db=i,db}var hb,mN;function Wne(){if(mN)return hb;mN=1;var t=qne(),e=lw(),n=Zn(),r=d4(),i=uw(),a=m4(),s=Object.prototype,o=s.hasOwnProperty;function c(u,d){var h=n(u),p=!h&&e(u),y=!h&&!p&&r(u),v=!h&&!p&&!y&&a(u),S=h||p||y||v,x=S?t(u.length,String):[],T=x.length;for(var _ in u)(d||o.call(u,_))&&!(S&&(_=="length"||y&&(_=="offset"||_=="parent")||v&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||i(_,T)))&&x.push(_);return x}return hb=c,hb}var mb,pN;function Xne(){if(pN)return mb;pN=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return mb=e,mb}var pb,gN;function p4(){if(gN)return pb;gN=1;function t(e,n){return function(r){return e(n(r))}}return pb=t,pb}var gb,yN;function Qne(){if(yN)return gb;yN=1;var t=p4(),e=t(Object.keys,Object);return gb=e,gb}var yb,vN;function Zne(){if(vN)return yb;vN=1;var t=Xne(),e=Qne(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return yb=i,yb}var vb,xN;function ed(){if(xN)return vb;xN=1;var t=YA(),e=cw();function n(r){return r!=null&&e(r.length)&&!t(r)}return vb=n,vb}var xb,bN;function lg(){if(bN)return xb;bN=1;var t=Wne(),e=Zne(),n=ed();function r(i){return n(i)?t(i):e(i)}return xb=r,xb}var bb,SN;function Jne(){if(SN)return bb;SN=1;var t=Fne(),e=Vne(),n=lg();function r(i){return t(i,n,e)}return bb=r,bb}var Sb,EN;function ere(){if(EN)return Sb;EN=1;var t=Jne(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,c,u,d){var h=o&e,p=t(a),y=p.length,v=t(s),S=v.length;if(y!=S&&!h)return!1;for(var x=y;x--;){var T=p[x];if(!(h?T in s:r.call(s,T)))return!1}var _=d.get(a),A=d.get(s);if(_&&A)return _==s&&A==a;var O=!0;d.set(a,s),d.set(s,a);for(var R=h;++x<y;){T=p[x];var C=a[T],L=s[T];if(c)var P=h?c(L,C,T,s,a,d):c(C,L,T,a,s,d);if(!(P===void 0?C===L||u(C,L,o,c,d):P)){O=!1;break}R||(R=T=="constructor")}if(O&&!R){var N=a.constructor,k=s.constructor;N!=k&&"constructor"in a&&"constructor"in s&&!(typeof N=="function"&&N instanceof N&&typeof k=="function"&&k instanceof k)&&(O=!1)}return d.delete(a),d.delete(s),O}return Sb=i,Sb}var Eb,TN;function tre(){if(TN)return Eb;TN=1;var t=to(),e=_i(),n=t(e,"DataView");return Eb=n,Eb}var Tb,AN;function nre(){if(AN)return Tb;AN=1;var t=to(),e=_i(),n=t(e,"Promise");return Tb=n,Tb}var Ab,wN;function g4(){if(wN)return Ab;wN=1;var t=to(),e=_i(),n=t(e,"Set");return Ab=n,Ab}var wb,_N;function rre(){if(_N)return wb;_N=1;var t=to(),e=_i(),n=t(e,"WeakMap");return wb=n,wb}var _b,RN;function ire(){if(RN)return _b;RN=1;var t=tre(),e=XA(),n=nre(),r=g4(),i=rre(),a=da(),s=N5(),o="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",h="[object WeakMap]",p="[object DataView]",y=s(t),v=s(e),S=s(n),x=s(r),T=s(i),_=a;return(t&&_(new t(new ArrayBuffer(1)))!=p||e&&_(new e)!=o||n&&_(n.resolve())!=u||r&&_(new r)!=d||i&&_(new i)!=h)&&(_=function(A){var O=a(A),R=O==c?A.constructor:void 0,C=R?s(R):"";if(C)switch(C){case y:return p;case v:return o;case S:return u;case x:return d;case T:return h}return O}),_b=_,_b}var Rb,ON;function are(){if(ON)return Rb;ON=1;var t=s4(),e=c4(),n=Bne(),r=ere(),i=ire(),a=Zn(),s=d4(),o=m4(),c=1,u="[object Arguments]",d="[object Array]",h="[object Object]",p=Object.prototype,y=p.hasOwnProperty;function v(S,x,T,_,A,O){var R=a(S),C=a(x),L=R?d:i(S),P=C?d:i(x);L=L==u?h:L,P=P==u?h:P;var N=L==h,k=P==h,M=L==P;if(M&&s(S)){if(!s(x))return!1;R=!0,N=!1}if(M&&!N)return O||(O=new t),R||o(S)?e(S,x,T,_,A,O):n(S,x,L,T,_,A,O);if(!(T&c)){var G=N&&y.call(S,"__wrapped__"),K=k&&y.call(x,"__wrapped__");if(G||K){var W=G?S.value():S,Y=K?x.value():x;return O||(O=new t),A(W,Y,T,_,O)}}return M?(O||(O=new t),r(S,x,T,_,A,O)):!1}return Rb=v,Rb}var Ob,CN;function fw(){if(CN)return Ob;CN=1;var t=are(),e=ha();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,a,s,n,o)}return Ob=n,Ob}var Cb,LN;function sre(){if(LN)return Cb;LN=1;var t=s4(),e=fw(),n=1,r=2;function i(a,s,o,c){var u=o.length,d=u,h=!c;if(a==null)return!d;for(a=Object(a);u--;){var p=o[u];if(h&&p[2]?p[1]!==a[p[0]]:!(p[0]in a))return!1}for(;++u<d;){p=o[u];var y=p[0],v=a[y],S=p[1];if(h&&p[2]){if(v===void 0&&!(y in a))return!1}else{var x=new t;if(c)var T=c(v,S,y,a,s,x);if(!(T===void 0?e(S,v,n|r,c,x):T))return!1}}return!0}return Cb=i,Cb}var Lb,DN;function y4(){if(DN)return Lb;DN=1;var t=ts();function e(n){return n===n&&!t(n)}return Lb=e,Lb}var Db,IN;function ore(){if(IN)return Db;IN=1;var t=y4(),e=lg();function n(r){for(var i=e(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,t(o)]}return i}return Db=n,Db}var Ib,PN;function v4(){if(PN)return Ib;PN=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return Ib=t,Ib}var Pb,NN;function lre(){if(NN)return Pb;NN=1;var t=sre(),e=ore(),n=v4();function r(i){var a=e(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||t(s,i,a)}}return Pb=r,Pb}var Nb,MN;function ure(){if(MN)return Nb;MN=1;function t(e,n){return e!=null&&n in Object(e)}return Nb=t,Nb}var Mb,kN;function cre(){if(kN)return Mb;kN=1;var t=j5(),e=lw(),n=Zn(),r=uw(),i=cw(),a=rg();function s(o,c,u){c=t(c,o);for(var d=-1,h=c.length,p=!1;++d<h;){var y=a(c[d]);if(!(p=o!=null&&u(o,y)))break;o=o[y]}return p||++d!=h?p:(h=o==null?0:o.length,!!h&&i(h)&&r(y,h)&&(n(o)||e(o)))}return Mb=s,Mb}var kb,jN;function fre(){if(jN)return kb;jN=1;var t=ure(),e=cre();function n(r,i){return r!=null&&e(r,i,t)}return kb=n,kb}var jb,UN;function dre(){if(UN)return jb;UN=1;var t=fw(),e=U5(),n=fre(),r=KA(),i=y4(),a=v4(),s=rg(),o=1,c=2;function u(d,h){return r(d)&&i(h)?a(s(d),h):function(p){var y=e(p,d);return y===void 0&&y===h?n(p,d):t(h,y,o|c)}}return jb=u,jb}var Ub,BN;function iu(){if(BN)return Ub;BN=1;function t(e){return e}return Ub=t,Ub}var Bb,FN;function hre(){if(FN)return Bb;FN=1;function t(e){return function(n){return n==null?void 0:n[e]}}return Bb=t,Bb}var Fb,$N;function mre(){if($N)return Fb;$N=1;var t=JA();function e(n){return function(r){return t(r,n)}}return Fb=e,Fb}var $b,GN;function pre(){if(GN)return $b;GN=1;var t=hre(),e=mre(),n=KA(),r=rg();function i(a){return n(a)?t(r(a)):e(a)}return $b=i,$b}var Gb,VN;function ns(){if(VN)return Gb;VN=1;var t=lre(),e=dre(),n=iu(),r=Zn(),i=pre();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?e(s[0],s[1]):t(s):i(s)}return Gb=a,Gb}var Vb,qN;function x4(){if(qN)return Vb;qN=1;function t(e,n,r,i){for(var a=e.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(e[s],s,e))return s;return-1}return Vb=t,Vb}var qb,HN;function gre(){if(HN)return qb;HN=1;function t(e){return e!==e}return qb=t,qb}var Hb,zN;function yre(){if(zN)return Hb;zN=1;function t(e,n,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===n)return i;return-1}return Hb=t,Hb}var zb,KN;function vre(){if(KN)return zb;KN=1;var t=x4(),e=gre(),n=yre();function r(i,a,s){return a===a?n(i,a,s):t(i,e,s)}return zb=r,zb}var Kb,YN;function xre(){if(YN)return Kb;YN=1;var t=vre();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return Kb=e,Kb}var Yb,WN;function bre(){if(WN)return Yb;WN=1;function t(e,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(n,e[i]))return!0;return!1}return Yb=t,Yb}var Wb,XN;function Sre(){if(XN)return Wb;XN=1;function t(){}return Wb=t,Wb}var Xb,QN;function Ere(){if(QN)return Xb;QN=1;var t=g4(),e=Sre(),n=ow(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(a){return new t(a)}:e;return Xb=i,Xb}var Qb,ZN;function Tre(){if(ZN)return Qb;ZN=1;var t=o4(),e=xre(),n=bre(),r=u4(),i=Ere(),a=ow(),s=200;function o(c,u,d){var h=-1,p=e,y=c.length,v=!0,S=[],x=S;if(d)v=!1,p=n;else if(y>=s){var T=u?null:i(c);if(T)return a(T);v=!1,p=r,x=new t}else x=u?[]:S;e:for(;++h<y;){var _=c[h],A=u?u(_):_;if(_=d||_!==0?_:0,v&&A===A){for(var O=x.length;O--;)if(x[O]===A)continue e;u&&x.push(A),S.push(_)}else p(x,A,d)||(x!==S&&x.push(A),S.push(_))}return S}return Qb=o,Qb}var Zb,JN;function Are(){if(JN)return Zb;JN=1;var t=ns(),e=Tre();function n(r,i){return r&&r.length?e(r,t(i,2)):[]}return Zb=n,Zb}var wre=Are();const e2=xt(wre);function b4(t,e,n){return e===!0?e2(t,n):Ge(e)?e2(t,e):t}function Tl(t){"@babel/helpers - typeof";return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tl(t)}var _re=["ref"];function t2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t2(Object(n),!0).forEach(function(r){ug(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E4(r.key),r)}}function Ore(t,e,n){return e&&n2(t.prototype,e),n&&n2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cre(t,e,n){return e=Gm(e),Lre(t,S4()?Reflect.construct(e,n||[],Gm(t).constructor):e.apply(t,n))}function Lre(t,e){if(e&&(Tl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dre(t)}function Dre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S4=function(){return!!t})()}function Gm(t){return Gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gm(t)}function Ire(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DT(t,e)}function DT(t,e){return DT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DT(t,e)}function ug(t,e,n){return e=E4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E4(t){var e=Pre(t,"string");return Tl(e)=="symbol"?e:e+""}function Pre(t,e){if(Tl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Nre(t,e){if(t==null)return{};var n=Mre(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function kre(t){return t.value}function jre(t,e){if(Q.isValidElement(t))return Q.cloneElement(t,e);if(typeof t=="function")return Q.createElement(t,e);e.ref;var n=Nre(e,_re);return Q.createElement(sw,n)}var r2=1,dl=function(t){function e(){var n;Rre(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Cre(this,e,[].concat(i)),ug(n,"lastBoundingBox",{width:-1,height:-1}),n}return Ire(e,t),Ore(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>r2||Math.abs(i.height-this.lastBoundingBox.height)>r2)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?qi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,h,p;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var y=this.getBBoxSnapshot();h={left:((u||0)-y.width)/2}}else h=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var v=this.getBBoxSnapshot();p={top:((d||0)-v.height)/2}}else p=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return qi(qi({},h),p)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,h=qi(qi({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return Q.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(y){r.wrapperNode=y}},jre(a,qi(qi({},this.props),{},{payload:b4(d,u,kre)})))}}],[{key:"getWithHeight",value:function(r,i){var a=qi(qi({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&ve(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(B.PureComponent);ug(dl,"displayName","Legend");ug(dl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Jb,i2;function Ure(){if(i2)return Jb;i2=1;var t=Qf(),e=lw(),n=Zn(),r=t?t.isConcatSpreadable:void 0;function i(a){return n(a)||e(a)||!!(r&&a&&a[r])}return Jb=i,Jb}var eS,a2;function T4(){if(a2)return eS;a2=1;var t=f4(),e=Ure();function n(r,i,a,s,o){var c=-1,u=r.length;for(a||(a=e),o||(o=[]);++c<u;){var d=r[c];i>0&&a(d)?i>1?n(d,i-1,a,s,o):t(o,d):s||(o[o.length]=d)}return o}return eS=n,eS}var tS,s2;function Bre(){if(s2)return tS;s2=1;function t(e){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),c=o.length;c--;){var u=o[e?c:++a];if(r(s[u],u,s)===!1)break}return n}}return tS=t,tS}var nS,o2;function Fre(){if(o2)return nS;o2=1;var t=Bre(),e=t();return nS=e,nS}var rS,l2;function A4(){if(l2)return rS;l2=1;var t=Fre(),e=lg();function n(r,i){return r&&t(r,i,e)}return rS=n,rS}var iS,u2;function $re(){if(u2)return iS;u2=1;var t=ed();function e(n,r){return function(i,a){if(i==null)return i;if(!t(i))return n(i,a);for(var s=i.length,o=r?s:-1,c=Object(i);(r?o--:++o<s)&&a(c[o],o,c)!==!1;);return i}}return iS=e,iS}var aS,c2;function dw(){if(c2)return aS;c2=1;var t=A4(),e=$re(),n=e(t);return aS=n,aS}var sS,f2;function w4(){if(f2)return sS;f2=1;var t=dw(),e=ed();function n(r,i){var a=-1,s=e(r)?Array(r.length):[];return t(r,function(o,c,u){s[++a]=i(o,c,u)}),s}return sS=n,sS}var oS,d2;function Gre(){if(d2)return oS;d2=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return oS=t,oS}var lS,h2;function Vre(){if(h2)return lS;h2=1;var t=nu();function e(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=t(n),c=r!==void 0,u=r===null,d=r===r,h=t(r);if(!u&&!h&&!o&&n>r||o&&c&&d&&!u&&!h||a&&c&&d||!i&&d||!s)return 1;if(!a&&!o&&!h&&n<r||h&&i&&s&&!a&&!o||u&&i&&s||!c&&s||!d)return-1}return 0}return lS=e,lS}var uS,m2;function qre(){if(m2)return uS;m2=1;var t=Vre();function e(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,c=s.length,u=i.length;++a<c;){var d=t(s[a],o[a]);if(d){if(a>=u)return d;var h=i[a];return d*(h=="desc"?-1:1)}}return n.index-r.index}return uS=e,uS}var cS,p2;function Hre(){if(p2)return cS;p2=1;var t=ZA(),e=JA(),n=ns(),r=w4(),i=Gre(),a=h4(),s=qre(),o=iu(),c=Zn();function u(d,h,p){h.length?h=t(h,function(S){return c(S)?function(x){return e(x,S.length===1?S[0]:S)}:S}):h=[o];var y=-1;h=t(h,a(n));var v=r(d,function(S,x,T){var _=t(h,function(A){return A(S)});return{criteria:_,index:++y,value:S}});return i(v,function(S,x){return s(S,x,p)})}return cS=u,cS}var fS,g2;function zre(){if(g2)return fS;g2=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return fS=t,fS}var dS,y2;function Kre(){if(y2)return dS;y2=1;var t=zre(),e=Math.max;function n(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,c=e(s.length-i,0),u=Array(c);++o<c;)u[o]=s[i+o];o=-1;for(var d=Array(i+1);++o<i;)d[o]=s[o];return d[i]=a(u),t(r,this,d)}}return dS=n,dS}var hS,v2;function Yre(){if(v2)return hS;v2=1;function t(e){return function(){return e}}return hS=t,hS}var mS,x2;function _4(){if(x2)return mS;x2=1;var t=to(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return mS=e,mS}var pS,b2;function Wre(){if(b2)return pS;b2=1;var t=Yre(),e=_4(),n=iu(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:n;return pS=r,pS}var gS,S2;function Xre(){if(S2)return gS;S2=1;var t=800,e=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),c=e-(o-s);if(s=o,c>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return gS=r,gS}var yS,E2;function Qre(){if(E2)return yS;E2=1;var t=Wre(),e=Xre(),n=e(t);return yS=n,yS}var vS,T2;function Zre(){if(T2)return vS;T2=1;var t=iu(),e=Kre(),n=Qre();function r(i,a){return n(e(i,a,t),i+"")}return vS=r,vS}var xS,A2;function cg(){if(A2)return xS;A2=1;var t=WA(),e=ed(),n=uw(),r=ts();function i(a,s,o){if(!r(o))return!1;var c=typeof s;return(c=="number"?e(o)&&n(s,o.length):c=="string"&&s in o)?t(o[s],a):!1}return xS=i,xS}var bS,w2;function Jre(){if(w2)return bS;w2=1;var t=T4(),e=Hre(),n=Zre(),r=cg(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),e(a,t(s,1),[])});return bS=i,bS}var eie=Jre();const hw=xt(eie);function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(t)}function IT(){return IT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IT.apply(this,arguments)}function tie(t,e){return aie(t)||iie(t,e)||rie(t,e)||nie()}function nie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rie(t,e){if(t){if(typeof t=="string")return _2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _2(t,e)}}function _2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function aie(t){if(Array.isArray(t))return t}function R2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R2(Object(n),!0).forEach(function(r){sie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sie(t,e,n){return e=oie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oie(t){var e=lie(t,"string");return nf(e)=="symbol"?e:e+""}function lie(t,e){if(nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uie(t){return Array.isArray(t)&&an(t[0])&&an(t[1])?t.join(" ~ "):t}var cie=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,h=e.formatter,p=e.itemSorter,y=e.wrapperClassName,v=e.labelClassName,S=e.label,x=e.labelFormatter,T=e.accessibilityLayer,_=T===void 0?!1:T,A=function(){if(d&&d.length){var G={padding:0,margin:0},K=(p?hw(d,p):d).map(function(W,Y){if(W.type==="none")return null;var j=SS({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},o),$=W.formatter||h||uie,q=W.value,Z=W.name,F=q,V=Z;if($&&F!=null&&V!=null){var H=$(q,Z,W,Y,d);if(Array.isArray(H)){var te=tie(H,2);F=te[0],V=te[1]}else F=H}return Q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:j},an(V)?Q.createElement("span",{className:"recharts-tooltip-item-name"},V):null,an(V)?Q.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Q.createElement("span",{className:"recharts-tooltip-item-value"},F),Q.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return Q.createElement("ul",{className:"recharts-tooltip-item-list",style:G},K)}return null},O=SS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),R=SS({margin:0},u),C=!Ye(S),L=C?S:"",P=et("recharts-default-tooltip",y),N=et("recharts-tooltip-label",v);C&&x&&d!==void 0&&d!==null&&(L=x(S,d));var k=_?{role:"status","aria-live":"assertive"}:{};return Q.createElement("div",IT({className:P,style:O},k),Q.createElement("p",{className:N,style:R},Q.isValidElement(L)?L:"".concat(L)),A())};function rf(t){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(t)}function Ch(t,e,n){return e=fie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fie(t){var e=die(t,"string");return rf(e)=="symbol"?e:e+""}function die(t,e){if(rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mc="recharts-tooltip-wrapper",hie={visibility:"hidden"};function mie(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return et(mc,Ch(Ch(Ch(Ch({},"".concat(mc,"-right"),ve(n)&&e&&ve(e.x)&&n>=e.x),"".concat(mc,"-left"),ve(n)&&e&&ve(e.x)&&n<e.x),"".concat(mc,"-bottom"),ve(r)&&e&&ve(e.y)&&r>=e.y),"".concat(mc,"-top"),ve(r)&&e&&ve(e.y)&&r<e.y))}function O2(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(a&&ve(a[r]))return a[r];var d=n[r]-o-i,h=n[r]+i;if(e[r])return s[r]?d:h;if(s[r]){var p=d,y=c[r];return p<y?Math.max(h,c[r]):Math.max(d,c[r])}var v=h+o,S=c[r]+u;return v>S?Math.max(d,c[r]):Math.max(h,c[r])}function pie(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function gie(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,c=t.viewBox,u,d,h;return s.height>0&&s.width>0&&n?(d=O2({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),h=O2({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=pie({translateX:d,translateY:h,useTranslate3d:o})):u=hie,{cssProperties:u,cssClasses:mie({translateX:d,translateY:h,coordinate:n})}}function Al(t){"@babel/helpers - typeof";return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Al(t)}function C2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C2(Object(n),!0).forEach(function(r){NT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O4(r.key),r)}}function xie(t,e,n){return e&&vie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bie(t,e,n){return e=Vm(e),Sie(t,R4()?Reflect.construct(e,n||[],Vm(t).constructor):e.apply(t,n))}function Sie(t,e){if(e&&(Al(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eie(t)}function Eie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R4=function(){return!!t})()}function Vm(t){return Vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vm(t)}function Tie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PT(t,e)}function PT(t,e){return PT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PT(t,e)}function NT(t,e,n){return e=O4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O4(t){var e=Aie(t,"string");return Al(e)=="symbol"?e:e+""}function Aie(t,e){if(Al(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Al(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var D2=1,wie=function(t){function e(){var n;yie(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=bie(this,e,[].concat(i)),NT(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),NT(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return Tie(e,t),xie(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>D2||Math.abs(r.height-this.state.lastBoundingBox.height)>D2)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,h=i.hasPayload,p=i.isAnimationActive,y=i.offset,v=i.position,S=i.reverseDirection,x=i.useTranslate3d,T=i.viewBox,_=i.wrapperStyle,A=gie({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:y,position:v,reverseDirection:S,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:T}),O=A.cssClasses,R=A.cssProperties,C=L2(L2({transition:p&&a?"transform ".concat(o,"ms ").concat(c):void 0},R),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},_);return Q.createElement("div",{tabIndex:-1,className:O,style:C,ref:function(P){r.wrapperNode=P}},u)}}])}(B.PureComponent),_ie=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},au={isSsr:_ie()};function wl(t){"@babel/helpers - typeof";return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wl(t)}function I2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function P2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I2(Object(n),!0).forEach(function(r){mw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L4(r.key),r)}}function Cie(t,e,n){return e&&Oie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lie(t,e,n){return e=qm(e),Die(t,C4()?Reflect.construct(e,n||[],qm(t).constructor):e.apply(t,n))}function Die(t,e){if(e&&(wl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iie(t)}function Iie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C4=function(){return!!t})()}function qm(t){return qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qm(t)}function Pie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MT(t,e)}function MT(t,e){return MT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MT(t,e)}function mw(t,e,n){return e=L4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L4(t){var e=Nie(t,"string");return wl(e)=="symbol"?e:e+""}function Nie(t,e){if(wl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Mie(t){return t.dataKey}function kie(t,e){return Q.isValidElement(t)?Q.cloneElement(t,e):typeof t=="function"?Q.createElement(t,e):Q.createElement(cie,e)}var mi=function(t){function e(){return Rie(this,e),Lie(this,e,arguments)}return Pie(e,t),Cie(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,h=i.filterNull,p=i.isAnimationActive,y=i.offset,v=i.payload,S=i.payloadUniqBy,x=i.position,T=i.reverseDirection,_=i.useTranslate3d,A=i.viewBox,O=i.wrapperStyle,R=v??[];h&&R.length&&(R=b4(v.filter(function(L){return L.value!=null&&(L.hide!==!0||r.props.includeHidden)}),S,Mie));var C=R.length>0;return Q.createElement(wie,{allowEscapeViewBox:s,animationDuration:o,animationEasing:c,isAnimationActive:p,active:a,coordinate:d,hasPayload:C,offset:y,position:x,reverseDirection:T,useTranslate3d:_,viewBox:A,wrapperStyle:O},kie(u,P2(P2({},this.props),{},{payload:R})))}}])}(B.PureComponent);mw(mi,"displayName","Tooltip");mw(mi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!au.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var ES,N2;function jie(){if(N2)return ES;N2=1;var t=_i(),e=function(){return t.Date.now()};return ES=e,ES}var TS,M2;function Uie(){if(M2)return TS;M2=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return TS=e,TS}var AS,k2;function Bie(){if(k2)return AS;k2=1;var t=Uie(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return AS=n,AS}var wS,j2;function D4(){if(j2)return wS;j2=1;var t=Bie(),e=ts(),n=nu(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=e(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=t(u);var h=a.test(u);return h||s.test(u)?o(u.slice(2),h?2:8):i.test(u)?r:+u}return wS=c,wS}var _S,U2;function Fie(){if(U2)return _S;U2=1;var t=ts(),e=jie(),n=D4(),r="Expected a function",i=Math.max,a=Math.min;function s(o,c,u){var d,h,p,y,v,S,x=0,T=!1,_=!1,A=!0;if(typeof o!="function")throw new TypeError(r);c=n(c)||0,t(u)&&(T=!!u.leading,_="maxWait"in u,p=_?i(n(u.maxWait)||0,c):p,A="trailing"in u?!!u.trailing:A);function O(K){var W=d,Y=h;return d=h=void 0,x=K,y=o.apply(Y,W),y}function R(K){return x=K,v=setTimeout(P,c),T?O(K):y}function C(K){var W=K-S,Y=K-x,j=c-W;return _?a(j,p-Y):j}function L(K){var W=K-S,Y=K-x;return S===void 0||W>=c||W<0||_&&Y>=p}function P(){var K=e();if(L(K))return N(K);v=setTimeout(P,C(K))}function N(K){return v=void 0,A&&d?O(K):(d=h=void 0,y)}function k(){v!==void 0&&clearTimeout(v),x=0,d=S=h=v=void 0}function M(){return v===void 0?y:N(e())}function G(){var K=e(),W=L(K);if(d=arguments,h=this,S=K,W){if(v===void 0)return R(S);if(_)return clearTimeout(v),v=setTimeout(P,c),O(S)}return v===void 0&&(v=setTimeout(P,c)),y}return G.cancel=k,G.flush=M,G}return _S=s,_S}var RS,B2;function $ie(){if(B2)return RS;B2=1;var t=Fie(),e=ts(),n="Expected a function";function r(i,a,s){var o=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return e(s)&&(o="leading"in s?!!s.leading:o,c="trailing"in s?!!s.trailing:c),t(i,a,{leading:o,maxWait:a,trailing:c})}return RS=r,RS}var Gie=$ie();const I4=xt(Gie);function af(t){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(t)}function F2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F2(Object(n),!0).forEach(function(r){Vie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vie(t,e,n){return e=qie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qie(t){var e=Hie(t,"string");return af(e)=="symbol"?e:e+""}function Hie(t,e){if(af(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zie(t,e){return Xie(t)||Wie(t,e)||Yie(t,e)||Kie()}function Kie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yie(t,e){if(t){if(typeof t=="string")return $2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $2(t,e)}}function $2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Xie(t){if(Array.isArray(t))return t}var Qie=B.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,s=a===void 0?"100%":a,o=t.height,c=o===void 0?"100%":o,u=t.minWidth,d=u===void 0?0:u,h=t.minHeight,p=t.maxHeight,y=t.children,v=t.debounce,S=v===void 0?0:v,x=t.id,T=t.className,_=t.onResize,A=t.style,O=A===void 0?{}:A,R=B.useRef(null),C=B.useRef();C.current=_,B.useImperativeHandle(e,function(){return Object.defineProperty(R.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),R.current},configurable:!0})});var L=B.useState({containerWidth:i.width,containerHeight:i.height}),P=zie(L,2),N=P[0],k=P[1],M=B.useCallback(function(K,W){k(function(Y){var j=Math.round(K),$=Math.round(W);return Y.containerWidth===j&&Y.containerHeight===$?Y:{containerWidth:j,containerHeight:$}})},[]);B.useEffect(function(){var K=function(Z){var F,V=Z[0].contentRect,H=V.width,te=V.height;M(H,te),(F=C.current)===null||F===void 0||F.call(C,H,te)};S>0&&(K=I4(K,S,{trailing:!0,leading:!1}));var W=new ResizeObserver(K),Y=R.current.getBoundingClientRect(),j=Y.width,$=Y.height;return M(j,$),W.observe(R.current),function(){W.disconnect()}},[M,S]);var G=B.useMemo(function(){var K=N.containerWidth,W=N.containerHeight;if(K<0||W<0)return null;ta(Us(s)||Us(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),ta(!n||n>0,"The aspect(%s) must be greater than zero.",n);var Y=Us(s)?K:s,j=Us(c)?W:c;n&&n>0&&(Y?j=Y/n:j&&(Y=j*n),p&&j>p&&(j=p)),ta(Y>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Y,j,s,c,d,h,n);var $=!Array.isArray(y)&&ea(y.type).endsWith("Chart");return Q.Children.map(y,function(q){return Q.isValidElement(q)?B.cloneElement(q,Lh({width:Y,height:j},$?{style:Lh({height:"100%",width:"100%",maxHeight:j,maxWidth:Y},q.props.style)}:{})):q})},[n,y,c,p,h,d,N,s]);return Q.createElement("div",{id:x?"".concat(x):void 0,className:et("recharts-responsive-container",T),style:Lh(Lh({},O),{},{width:s,height:c,minWidth:d,minHeight:h,maxHeight:p}),ref:R},G)}),P4=function(e){return null};P4.displayName="Cell";function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(t)}function G2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G2(Object(n),!0).forEach(function(r){Zie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zie(t,e,n){return e=Jie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jie(t){var e=eae(t,"string");return sf(e)=="symbol"?e:e+""}function eae(t,e){if(sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zo={widthCache:{},cacheCount:0},tae=2e3,nae={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},V2="recharts_measurement_span";function rae(t){var e=kT({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var kc=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||au.isSsr)return{width:0,height:0};var r=rae(n),i=JSON.stringify({text:e,copyStyle:r});if(zo.widthCache[i])return zo.widthCache[i];try{var a=document.getElementById(V2);a||(a=document.createElement("span"),a.setAttribute("id",V2),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=kT(kT({},nae),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),c={width:o.width,height:o.height};return zo.widthCache[i]=c,++zo.cacheCount>tae&&(zo.cacheCount=0,zo.widthCache={}),c}catch{return{width:0,height:0}}},iae=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function Hm(t,e){return lae(t)||oae(t,e)||sae(t,e)||aae()}function aae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sae(t,e){if(t){if(typeof t=="string")return q2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q2(t,e)}}function q2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function lae(t){if(Array.isArray(t))return t}function uae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fae(r.key),r)}}function cae(t,e,n){return e&&H2(t.prototype,e),n&&H2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fae(t){var e=dae(t,"string");return of(e)=="symbol"?e:e+""}function dae(t,e){if(of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var z2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,K2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hae=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mae=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,N4={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},pae=Object.keys(N4),ol="NaN";function gae(t,e){return t*N4[e]}var Dh=function(){function t(e,n){uae(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!hae.test(n)&&(this.num=NaN,this.unit=""),pae.includes(n)&&(this.num=gae(e,n),this.unit="px")}return cae(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=mae.exec(n))!==null&&r!==void 0?r:[],a=Hm(i,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])}();function M4(t){if(t.includes(ol))return ol;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=z2.exec(e))!==null&&n!==void 0?n:[],i=Hm(r,4),a=i[1],s=i[2],o=i[3],c=Dh.parse(a??""),u=Dh.parse(o??""),d=s==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return ol;e=e.replace(z2,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,p=(h=K2.exec(e))!==null&&h!==void 0?h:[],y=Hm(p,4),v=y[1],S=y[2],x=y[3],T=Dh.parse(v??""),_=Dh.parse(x??""),A=S==="+"?T.add(_):T.subtract(_);if(A.isNaN())return ol;e=e.replace(K2,A.toString())}return e}var Y2=/\(([^()]*)\)/;function yae(t){for(var e=t;e.includes("(");){var n=Y2.exec(e),r=Hm(n,2),i=r[1];e=e.replace(Y2,M4(i))}return e}function vae(t){var e=t.replace(/\s+/g,"");return e=yae(e),e=M4(e),e}function xae(t){try{return vae(t)}catch{return ol}}function OS(t){var e=xae(t.slice(5,-1));return e===ol?"":e}var bae=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Sae=["dx","dy","angle","className","breakAll"];function jT(){return jT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jT.apply(this,arguments)}function W2(t,e){if(t==null)return{};var n=Eae(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Eae(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function X2(t,e){return _ae(t)||wae(t,e)||Aae(t,e)||Tae()}function Tae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aae(t,e){if(t){if(typeof t=="string")return Q2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q2(t,e)}}function Q2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function _ae(t){if(Array.isArray(t))return t}var k4=/[ \f\n\r\t\v\u2028\u2029]+/,j4=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];Ye(n)||(r?a=n.toString().split(""):a=n.toString().split(k4));var s=a.map(function(c){return{word:c,width:kc(c,i).width}}),o=r?0:kc("",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},Rae=function(e,n,r,i,a){var s=e.maxLines,o=e.children,c=e.style,u=e.breakAll,d=ve(s),h=o,p=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce(function(j,$){var q=$.word,Z=$.width,F=j[j.length-1];if(F&&(i==null||a||F.width+Z+r<Number(i)))F.words.push(q),F.width+=Z+r;else{var V={words:[q],width:Z};j.push(V)}return j},[])},y=p(n),v=function(Y){return Y.reduce(function(j,$){return j.width>$.width?j:$})};if(!d)return y;for(var S="",x=function(Y){var j=h.slice(0,Y),$=j4({breakAll:u,style:c,children:j+S}).wordsWithComputedWidth,q=p($),Z=q.length>s||v(q).width>Number(i);return[Z,q]},T=0,_=h.length-1,A=0,O;T<=_&&A<=h.length-1;){var R=Math.floor((T+_)/2),C=R-1,L=x(C),P=X2(L,2),N=P[0],k=P[1],M=x(R),G=X2(M,1),K=G[0];if(!N&&!K&&(T=R+1),N&&K&&(_=R-1),!N&&K){O=k;break}A++}return O||y},Z2=function(e){var n=Ye(e)?[]:e.toString().split(k4);return[{words:n}]},Oae=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((n||r)&&!au.isSsr){var c,u,d=j4({breakAll:s,children:i,style:a});if(d){var h=d.wordsWithComputedWidth,p=d.spaceWidth;c=h,u=p}else return Z2(i);return Rae({breakAll:s,children:i,maxLines:o,style:a},c,u,n,r)}return Z2(i)},J2="#808080",zm=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,h=d===void 0?!1:d,p=e.textAnchor,y=p===void 0?"start":p,v=e.verticalAnchor,S=v===void 0?"end":v,x=e.fill,T=x===void 0?J2:x,_=W2(e,bae),A=B.useMemo(function(){return Oae({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:h,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,h,_.style,_.width]),O=_.dx,R=_.dy,C=_.angle,L=_.className,P=_.breakAll,N=W2(_,Sae);if(!an(r)||!an(a))return null;var k=r+(ve(O)?O:0),M=a+(ve(R)?R:0),G;switch(S){case"start":G=OS("calc(".concat(u,")"));break;case"middle":G=OS("calc(".concat((A.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:G=OS("calc(".concat(A.length-1," * -").concat(o,")"));break}var K=[];if(h){var W=A[0].width,Y=_.width;K.push("scale(".concat((ve(Y)?Y/W:1)/W,")"))}return C&&K.push("rotate(".concat(C,", ").concat(k,", ").concat(M,")")),K.length&&(N.transform=K.join(" ")),Q.createElement("text",jT({},We(N,!0),{x:k,y:M,className:et("recharts-text",L),textAnchor:y,fill:T.includes("url")?J2:T}),A.map(function(j,$){var q=j.words.join(P?"":" ");return Q.createElement("tspan",{x:k,dy:$===0?G:o,key:"".concat(q,"-").concat($)},q)}))};function Ka(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Cae(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pw(t){let e,n,r;t.length!==2?(e=Ka,n=(o,c)=>Ka(t(o),c),r=(o,c)=>t(o)-c):(e=t===Ka||t===Cae?t:Lae,n=t,r=t);function i(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(o[h],c)<0?u=h+1:d=h}while(u<d)}return u}function a(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(o[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function s(o,c,u=0,d=o.length){const h=i(o,c,u,d-1);return h>u&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function Lae(){return 0}function U4(t){return t===null?NaN:+t}function*Dae(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Iae=pw(Ka),td=Iae.right;pw(U4).center;class eM extends Map{constructor(e,n=Mae){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(tM(this,e))}has(e){return super.has(tM(this,e))}set(e,n){return super.set(Pae(this,e),n)}delete(e){return super.delete(Nae(this,e))}}function tM({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Pae({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Nae({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Mae(t){return t!==null&&typeof t=="object"?t.valueOf():t}function kae(t=Ka){if(t===Ka)return B4;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function B4(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const jae=Math.sqrt(50),Uae=Math.sqrt(10),Bae=Math.sqrt(2);function Km(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=jae?10:a>=Uae?5:a>=Bae?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?Km(t,e,n*2):[o,c,u]}function UT(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Km(e,t,n):Km(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function BT(t,e,n){return e=+e,t=+t,n=+n,Km(t,e,n)[2]}function FT(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?BT(e,t,n):BT(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function nM(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function rM(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function F4(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?B4:kae(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),y=Math.max(n,Math.floor(e-u*h/c+p)),v=Math.min(r,Math.floor(e+(c-u)*h/c+p));F4(t,e,y,v,i)}const a=t[e];let s=n,o=r;for(pc(t,n,e),i(t[r],a)>0&&pc(t,n,r);s<o;){for(pc(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?pc(t,n,o):(++o,pc(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function pc(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Fae(t,e,n){if(t=Float64Array.from(Dae(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return rM(t);if(e>=1)return nM(t);var r,i=(r-1)*e,a=Math.floor(i),s=nM(F4(t,a).subarray(0,a+1)),o=rM(t.subarray(a+1));return s+(o-s)*(i-a)}}function $ae(t,e,n=U4){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function Gae(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Br(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ma(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const $T=Symbol("implicit");function gw(){var t=new eM,e=[],n=[],r=$T;function i(a){let s=t.get(a);if(s===void 0){if(r!==$T)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new eM;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return gw(e,n).unknown(r)},Br.apply(i,arguments),i}function lf(){var t=gw().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,d=.5;delete t.unknown;function h(){var p=e().length,y=i<r,v=y?i:r,S=y?r:i;a=(S-v)/Math.max(1,p-c+u*2),o&&(a=Math.floor(a)),v+=(S-v-a*(p-c))*d,s=a*(1-c),o&&(v=Math.round(v),s=Math.round(s));var x=Gae(p).map(function(T){return v+a*T});return n(y?x.reverse():x)}return t.domain=function(p){return arguments.length?(e(p),h()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(p){return arguments.length?(o=!!p,h()):o},t.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),h()):c},t.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),h()):c},t.paddingOuter=function(p){return arguments.length?(u=+p,h()):u},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),h()):d},t.copy=function(){return lf(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(d)},Br.apply(h(),arguments)}function $4(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return $4(e())},t}function jc(){return $4(lf.apply(null,arguments).paddingInner(1))}function yw(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function G4(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function nd(){}var uf=.7,Ym=1/uf,hl="\\s*([+-]?\\d+)\\s*",cf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ei="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vae=/^#([0-9a-f]{3,8})$/,qae=new RegExp(`^rgb\\(${hl},${hl},${hl}\\)$`),Hae=new RegExp(`^rgb\\(${Ei},${Ei},${Ei}\\)$`),zae=new RegExp(`^rgba\\(${hl},${hl},${hl},${cf}\\)$`),Kae=new RegExp(`^rgba\\(${Ei},${Ei},${Ei},${cf}\\)$`),Yae=new RegExp(`^hsl\\(${cf},${Ei},${Ei}\\)$`),Wae=new RegExp(`^hsla\\(${cf},${Ei},${Ei},${cf}\\)$`),iM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yw(nd,ff,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:aM,formatHex:aM,formatHex8:Xae,formatHsl:Qae,formatRgb:sM,toString:sM});function aM(){return this.rgb().formatHex()}function Xae(){return this.rgb().formatHex8()}function Qae(){return V4(this).formatHsl()}function sM(){return this.rgb().formatRgb()}function ff(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Vae.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?oM(e):n===3?new Wn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ih(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ih(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qae.exec(t))?new Wn(e[1],e[2],e[3],1):(e=Hae.exec(t))?new Wn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=zae.exec(t))?Ih(e[1],e[2],e[3],e[4]):(e=Kae.exec(t))?Ih(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Yae.exec(t))?cM(e[1],e[2]/100,e[3]/100,1):(e=Wae.exec(t))?cM(e[1],e[2]/100,e[3]/100,e[4]):iM.hasOwnProperty(t)?oM(iM[t]):t==="transparent"?new Wn(NaN,NaN,NaN,0):null}function oM(t){return new Wn(t>>16&255,t>>8&255,t&255,1)}function Ih(t,e,n,r){return r<=0&&(t=e=n=NaN),new Wn(t,e,n,r)}function Zae(t){return t instanceof nd||(t=ff(t)),t?(t=t.rgb(),new Wn(t.r,t.g,t.b,t.opacity)):new Wn}function GT(t,e,n,r){return arguments.length===1?Zae(t):new Wn(t,e,n,r??1)}function Wn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}yw(Wn,GT,G4(nd,{brighter(t){return t=t==null?Ym:Math.pow(Ym,t),new Wn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?uf:Math.pow(uf,t),new Wn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Wn(Hs(this.r),Hs(this.g),Hs(this.b),Wm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lM,formatHex:lM,formatHex8:Jae,formatRgb:uM,toString:uM}));function lM(){return`#${Bs(this.r)}${Bs(this.g)}${Bs(this.b)}`}function Jae(){return`#${Bs(this.r)}${Bs(this.g)}${Bs(this.b)}${Bs((isNaN(this.opacity)?1:this.opacity)*255)}`}function uM(){const t=Wm(this.opacity);return`${t===1?"rgb(":"rgba("}${Hs(this.r)}, ${Hs(this.g)}, ${Hs(this.b)}${t===1?")":`, ${t})`}`}function Wm(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Hs(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Bs(t){return t=Hs(t),(t<16?"0":"")+t.toString(16)}function cM(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Zr(t,e,n,r)}function V4(t){if(t instanceof Zr)return new Zr(t.h,t.s,t.l,t.opacity);if(t instanceof nd||(t=ff(t)),!t)return new Zr;if(t instanceof Zr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Zr(s,o,c,t.opacity)}function ese(t,e,n,r){return arguments.length===1?V4(t):new Zr(t,e,n,r??1)}function Zr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}yw(Zr,ese,G4(nd,{brighter(t){return t=t==null?Ym:Math.pow(Ym,t),new Zr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?uf:Math.pow(uf,t),new Zr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Wn(CS(t>=240?t-240:t+120,i,r),CS(t,i,r),CS(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Zr(fM(this.h),Ph(this.s),Ph(this.l),Wm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Wm(this.opacity);return`${t===1?"hsl(":"hsla("}${fM(this.h)}, ${Ph(this.s)*100}%, ${Ph(this.l)*100}%${t===1?")":`, ${t})`}`}}));function fM(t){return t=(t||0)%360,t<0?t+360:t}function Ph(t){return Math.max(0,Math.min(1,t||0))}function CS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const vw=t=>()=>t;function tse(t,e){return function(n){return t+n*e}}function nse(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function rse(t){return(t=+t)==1?q4:function(e,n){return n-e?nse(e,n,t):vw(isNaN(e)?n:e)}}function q4(t,e){var n=e-t;return n?tse(t,n):vw(isNaN(t)?e:t)}const dM=function t(e){var n=rse(e);function r(i,a){var s=n((i=GT(i)).r,(a=GT(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=q4(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function ise(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function ase(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function sse(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=su(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function ose(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Xm(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function lse(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=su(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var VT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,LS=new RegExp(VT.source,"g");function use(t){return function(){return t}}function cse(t){return function(e){return t(e)+""}}function fse(t,e){var n=VT.lastIndex=LS.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=VT.exec(t))&&(i=LS.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Xm(r,i)})),n=LS.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?cse(c[0].x):use(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)o[(h=c[d]).i]=h.x(u);return o.join("")})}function su(t,e){var n=typeof e,r;return e==null||n==="boolean"?vw(e):(n==="number"?Xm:n==="string"?(r=ff(e))?(e=r,dM):fse:e instanceof ff?dM:e instanceof Date?ose:ase(e)?ise:Array.isArray(e)?sse:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?lse:Xm)(t,e)}function xw(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function dse(t,e){e===void 0&&(e=t,t=su);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function hse(t){return function(){return t}}function Qm(t){return+t}var hM=[0,1];function Fn(t){return t}function qT(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:hse(isNaN(e)?NaN:.5)}function mse(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function pse(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=qT(i,r),a=n(s,a)):(r=qT(r,i),a=n(a,s)),function(o){return a(r(o))}}function gse(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=qT(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=td(t,o,1,r)-1;return a[c](i[c](o))}}function rd(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function fg(){var t=hM,e=hM,n=su,r,i,a,s=Fn,o,c,u;function d(){var p=Math.min(t.length,e.length);return s!==Fn&&(s=mse(t[0],t[p-1])),o=p>2?gse:pse,c=u=null,h}function h(p){return p==null||isNaN(p=+p)?a:(c||(c=o(t.map(r),e,n)))(r(s(p)))}return h.invert=function(p){return s(i((u||(u=o(e,t.map(r),Xm)))(p)))},h.domain=function(p){return arguments.length?(t=Array.from(p,Qm),d()):t.slice()},h.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},h.rangeRound=function(p){return e=Array.from(p),n=xw,d()},h.clamp=function(p){return arguments.length?(s=p?!0:Fn,d()):s!==Fn},h.interpolate=function(p){return arguments.length?(n=p,d()):n},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,y){return r=p,i=y,d()}}function bw(){return fg()(Fn,Fn)}function yse(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Zm(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function _l(t){return t=Zm(Math.abs(t)),t?t[1]:NaN}function vse(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function xse(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var bse=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function df(t){if(!(e=bse.exec(t)))throw new Error("invalid format: "+t);var e;return new Sw({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}df.prototype=Sw.prototype;function Sw(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Sw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Sse(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var H4;function Ese(t,e){var n=Zm(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(H4=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Zm(t,Math.max(0,e+a-1))[0]}function mM(t,e){var n=Zm(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const pM={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:yse,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>mM(t*100,e),r:mM,s:Ese,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function gM(t){return t}var yM=Array.prototype.map,vM=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Tse(t){var e=t.grouping===void 0||t.thousands===void 0?gM:vse(yM.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?gM:xse(yM.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=df(h);var p=h.fill,y=h.align,v=h.sign,S=h.symbol,x=h.zero,T=h.width,_=h.comma,A=h.precision,O=h.trim,R=h.type;R==="n"?(_=!0,R="g"):pM[R]||(A===void 0&&(A=12),O=!0,R="g"),(x||p==="0"&&y==="=")&&(x=!0,p="0",y="=");var C=S==="$"?n:S==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",L=S==="$"?r:/[%p]/.test(R)?s:"",P=pM[R],N=/[defgprs%]/.test(R);A=A===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function k(M){var G=C,K=L,W,Y,j;if(R==="c")K=P(M)+K,M="";else{M=+M;var $=M<0||1/M<0;if(M=isNaN(M)?c:P(Math.abs(M),A),O&&(M=Sse(M)),$&&+M==0&&v!=="+"&&($=!1),G=($?v==="("?v:o:v==="-"||v==="("?"":v)+G,K=(R==="s"?vM[8+H4/3]:"")+K+($&&v==="("?")":""),N){for(W=-1,Y=M.length;++W<Y;)if(j=M.charCodeAt(W),48>j||j>57){K=(j===46?i+M.slice(W+1):M.slice(W))+K,M=M.slice(0,W);break}}}_&&!x&&(M=e(M,1/0));var q=G.length+M.length+K.length,Z=q<T?new Array(T-q+1).join(p):"";switch(_&&x&&(M=e(Z+M,Z.length?T-K.length:1/0),Z=""),y){case"<":M=G+M+K+Z;break;case"=":M=G+Z+M+K;break;case"^":M=Z.slice(0,q=Z.length>>1)+G+M+K+Z.slice(q);break;default:M=Z+G+M+K;break}return a(M)}return k.toString=function(){return h+""},k}function d(h,p){var y=u((h=df(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(_l(p)/3)))*3,S=Math.pow(10,-v),x=vM[8+v/3];return function(T){return y(S*T)+x}}return{format:u,formatPrefix:d}}var Nh,Ew,z4;Ase({thousands:",",grouping:[3],currency:["$",""]});function Ase(t){return Nh=Tse(t),Ew=Nh.format,z4=Nh.formatPrefix,Nh}function wse(t){return Math.max(0,-_l(Math.abs(t)))}function _se(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_l(e)/3)))*3-_l(Math.abs(t)))}function Rse(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,_l(e)-_l(t))+1}function K4(t,e,n,r){var i=FT(t,e,n),a;switch(r=df(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=_se(i,s))&&(r.precision=a),z4(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Rse(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=wse(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ew(r)}function rs(t){var e=t.domain;return t.ticks=function(n){var r=e();return UT(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return K4(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,d=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=BT(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function Jm(){var t=bw();return t.copy=function(){return rd(t,Jm())},Br.apply(t,arguments),rs(t)}function Y4(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Qm),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Y4(t).unknown(e)},t=arguments.length?Array.from(t,Qm):[0,1],rs(n)}function W4(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function xM(t){return Math.log(t)}function bM(t){return Math.exp(t)}function Ose(t){return-Math.log(-t)}function Cse(t){return-Math.exp(-t)}function Lse(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Dse(t){return t===10?Lse:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Ise(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function SM(t){return(e,n)=>-t(-e,n)}function Tw(t){const e=t(xM,bM),n=e.domain;let r=10,i,a;function s(){return i=Ise(r),a=Dse(r),n()[0]<0?(i=SM(i),a=SM(a),t(Ose,Cse)):t(xM,bM),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let p=i(u),y=i(d),v,S;const x=o==null?10:+o;let T=[];if(!(r%1)&&y-p<x){if(p=Math.floor(p),y=Math.ceil(y),u>0){for(;p<=y;++p)for(v=1;v<r;++v)if(S=p<0?v/a(-p):v*a(p),!(S<u)){if(S>d)break;T.push(S)}}else for(;p<=y;++p)for(v=r-1;v>=1;--v)if(S=p>0?v/a(-p):v*a(p),!(S<u)){if(S>d)break;T.push(S)}T.length*2<x&&(T=UT(u,d,x))}else T=UT(p,y,Math.min(y-p,x)).map(a);return h?T.reverse():T},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=df(c)).precision==null&&(c.trim=!0),c=Ew(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return d=>{let h=d/a(Math.round(i(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},e.nice=()=>n(W4(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function X4(){const t=Tw(fg()).domain([1,10]);return t.copy=()=>rd(t,X4()).base(t.base()),Br.apply(t,arguments),t}function EM(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function TM(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Aw(t){var e=1,n=t(EM(e),TM(e));return n.constant=function(r){return arguments.length?t(EM(e=+r),TM(e)):e},rs(n)}function Q4(){var t=Aw(fg());return t.copy=function(){return rd(t,Q4()).constant(t.constant())},Br.apply(t,arguments)}function AM(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Pse(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Nse(t){return t<0?-t*t:t*t}function ww(t){var e=t(Fn,Fn),n=1;function r(){return n===1?t(Fn,Fn):n===.5?t(Pse,Nse):t(AM(n),AM(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},rs(e)}function _w(){var t=ww(fg());return t.copy=function(){return rd(t,_w()).exponent(t.exponent())},Br.apply(t,arguments),t}function Mse(){return _w.apply(null,arguments).exponent(.5)}function wM(t){return Math.sign(t)*t*t}function kse(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Z4(){var t=bw(),e=[0,1],n=!1,r;function i(a){var s=kse(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(wM(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Qm)).map(wM)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Z4(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Br.apply(i,arguments),rs(i)}function J4(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=$ae(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[td(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Ka),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return J4().domain(t).range(e).unknown(r)},Br.apply(a,arguments)}function e6(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[td(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return e6().domain([t,e]).range(i).unknown(a)},Br.apply(rs(s),arguments)}function t6(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[td(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return t6().domain(t).range(e).unknown(n)},Br.apply(i,arguments)}const DS=new Date,IS=new Date;function on(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>on(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(DS.setTime(+a),IS.setTime(+s),t(DS),t(IS),Math.floor(n(DS,IS))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const ep=on(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ep.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?on(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ep);ep.range;const Xi=1e3,Cr=Xi*60,Qi=Cr*60,sa=Qi*24,Rw=sa*7,_M=sa*30,PS=sa*365,Fs=on(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Xi)},(t,e)=>(e-t)/Xi,t=>t.getUTCSeconds());Fs.range;const Ow=on(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xi)},(t,e)=>{t.setTime(+t+e*Cr)},(t,e)=>(e-t)/Cr,t=>t.getMinutes());Ow.range;const Cw=on(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Cr)},(t,e)=>(e-t)/Cr,t=>t.getUTCMinutes());Cw.range;const Lw=on(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xi-t.getMinutes()*Cr)},(t,e)=>{t.setTime(+t+e*Qi)},(t,e)=>(e-t)/Qi,t=>t.getHours());Lw.range;const Dw=on(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Qi)},(t,e)=>(e-t)/Qi,t=>t.getUTCHours());Dw.range;const id=on(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Cr)/sa,t=>t.getDate()-1);id.range;const dg=on(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sa,t=>t.getUTCDate()-1);dg.range;const n6=on(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sa,t=>Math.floor(t/sa));n6.range;function no(t){return on(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Cr)/Rw)}const hg=no(0),tp=no(1),jse=no(2),Use=no(3),Rl=no(4),Bse=no(5),Fse=no(6);hg.range;tp.range;jse.range;Use.range;Rl.range;Bse.range;Fse.range;function ro(t){return on(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Rw)}const mg=ro(0),np=ro(1),$se=ro(2),Gse=ro(3),Ol=ro(4),Vse=ro(5),qse=ro(6);mg.range;np.range;$se.range;Gse.range;Ol.range;Vse.range;qse.range;const Iw=on(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Iw.range;const Pw=on(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Pw.range;const oa=on(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());oa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:on(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});oa.range;const la=on(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());la.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:on(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});la.range;function r6(t,e,n,r,i,a){const s=[[Fs,1,Xi],[Fs,5,5*Xi],[Fs,15,15*Xi],[Fs,30,30*Xi],[a,1,Cr],[a,5,5*Cr],[a,15,15*Cr],[a,30,30*Cr],[i,1,Qi],[i,3,3*Qi],[i,6,6*Qi],[i,12,12*Qi],[r,1,sa],[r,2,2*sa],[n,1,Rw],[e,1,_M],[e,3,3*_M],[t,1,PS]];function o(u,d,h){const p=d<u;p&&([u,d]=[d,u]);const y=h&&typeof h.range=="function"?h:c(u,d,h),v=y?y.range(u,+d+1):[];return p?v.reverse():v}function c(u,d,h){const p=Math.abs(d-u)/h,y=pw(([,,x])=>x).right(s,p);if(y===s.length)return t.every(FT(u/PS,d/PS,h));if(y===0)return ep.every(Math.max(FT(u,d,h),1));const[v,S]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(S)}return[o,c]}const[Hse,zse]=r6(la,Pw,mg,n6,Dw,Cw),[Kse,Yse]=r6(oa,Iw,hg,id,Lw,Ow);function NS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function MS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function gc(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Wse(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=yc(i),d=vc(i),h=yc(a),p=vc(a),y=yc(s),v=vc(s),S=yc(o),x=vc(o),T=yc(c),_=vc(c),A={a:$,A:q,b:Z,B:F,c:null,d:IM,e:IM,f:voe,g:Ooe,G:Loe,H:poe,I:goe,j:yoe,L:i6,m:xoe,M:boe,p:V,q:H,Q:MM,s:kM,S:Soe,u:Eoe,U:Toe,V:Aoe,w:woe,W:_oe,x:null,X:null,y:Roe,Y:Coe,Z:Doe,"%":NM},O={a:te,A:ce,b:ye,B:ge,c:null,d:PM,e:PM,f:Moe,g:Hoe,G:Koe,H:Ioe,I:Poe,j:Noe,L:s6,m:koe,M:joe,p:Me,q:Re,Q:MM,s:kM,S:Uoe,u:Boe,U:Foe,V:$oe,w:Goe,W:Voe,x:null,X:null,y:qoe,Y:zoe,Z:Yoe,"%":NM},R={a:k,A:M,b:G,B:K,c:W,d:LM,e:LM,f:foe,g:CM,G:OM,H:DM,I:DM,j:ooe,L:coe,m:soe,M:loe,p:N,q:aoe,Q:hoe,s:moe,S:uoe,u:eoe,U:toe,V:noe,w:Jse,W:roe,x:Y,X:j,y:CM,Y:OM,Z:ioe,"%":doe};A.x=C(n,A),A.X=C(r,A),A.c=C(e,A),O.x=C(n,O),O.X=C(r,O),O.c=C(e,O);function C(pe,Ae){return function(Oe){var me=[],rt=-1,Be=0,It=pe.length,_e,je,Rt;for(Oe instanceof Date||(Oe=new Date(+Oe));++rt<It;)pe.charCodeAt(rt)===37&&(me.push(pe.slice(Be,rt)),(je=RM[_e=pe.charAt(++rt)])!=null?_e=pe.charAt(++rt):je=_e==="e"?" ":"0",(Rt=Ae[_e])&&(_e=Rt(Oe,je)),me.push(_e),Be=rt+1);return me.push(pe.slice(Be,rt)),me.join("")}}function L(pe,Ae){return function(Oe){var me=gc(1900,void 0,1),rt=P(me,pe,Oe+="",0),Be,It;if(rt!=Oe.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(Ae&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(Be=MS(gc(me.y,0,1)),It=Be.getUTCDay(),Be=It>4||It===0?np.ceil(Be):np(Be),Be=dg.offset(Be,(me.V-1)*7),me.y=Be.getUTCFullYear(),me.m=Be.getUTCMonth(),me.d=Be.getUTCDate()+(me.w+6)%7):(Be=NS(gc(me.y,0,1)),It=Be.getDay(),Be=It>4||It===0?tp.ceil(Be):tp(Be),Be=id.offset(Be,(me.V-1)*7),me.y=Be.getFullYear(),me.m=Be.getMonth(),me.d=Be.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),It="Z"in me?MS(gc(me.y,0,1)).getUTCDay():NS(gc(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(It+5)%7:me.w+me.U*7-(It+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,MS(me)):NS(me)}}function P(pe,Ae,Oe,me){for(var rt=0,Be=Ae.length,It=Oe.length,_e,je;rt<Be;){if(me>=It)return-1;if(_e=Ae.charCodeAt(rt++),_e===37){if(_e=Ae.charAt(rt++),je=R[_e in RM?Ae.charAt(rt++):_e],!je||(me=je(pe,Oe,me))<0)return-1}else if(_e!=Oe.charCodeAt(me++))return-1}return me}function N(pe,Ae,Oe){var me=u.exec(Ae.slice(Oe));return me?(pe.p=d.get(me[0].toLowerCase()),Oe+me[0].length):-1}function k(pe,Ae,Oe){var me=y.exec(Ae.slice(Oe));return me?(pe.w=v.get(me[0].toLowerCase()),Oe+me[0].length):-1}function M(pe,Ae,Oe){var me=h.exec(Ae.slice(Oe));return me?(pe.w=p.get(me[0].toLowerCase()),Oe+me[0].length):-1}function G(pe,Ae,Oe){var me=T.exec(Ae.slice(Oe));return me?(pe.m=_.get(me[0].toLowerCase()),Oe+me[0].length):-1}function K(pe,Ae,Oe){var me=S.exec(Ae.slice(Oe));return me?(pe.m=x.get(me[0].toLowerCase()),Oe+me[0].length):-1}function W(pe,Ae,Oe){return P(pe,e,Ae,Oe)}function Y(pe,Ae,Oe){return P(pe,n,Ae,Oe)}function j(pe,Ae,Oe){return P(pe,r,Ae,Oe)}function $(pe){return s[pe.getDay()]}function q(pe){return a[pe.getDay()]}function Z(pe){return c[pe.getMonth()]}function F(pe){return o[pe.getMonth()]}function V(pe){return i[+(pe.getHours()>=12)]}function H(pe){return 1+~~(pe.getMonth()/3)}function te(pe){return s[pe.getUTCDay()]}function ce(pe){return a[pe.getUTCDay()]}function ye(pe){return c[pe.getUTCMonth()]}function ge(pe){return o[pe.getUTCMonth()]}function Me(pe){return i[+(pe.getUTCHours()>=12)]}function Re(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var Ae=C(pe+="",A);return Ae.toString=function(){return pe},Ae},parse:function(pe){var Ae=L(pe+="",!1);return Ae.toString=function(){return pe},Ae},utcFormat:function(pe){var Ae=C(pe+="",O);return Ae.toString=function(){return pe},Ae},utcParse:function(pe){var Ae=L(pe+="",!0);return Ae.toString=function(){return pe},Ae}}}var RM={"-":"",_:" ",0:"0"},gn=/^\s*\d+/,Xse=/^%/,Qse=/[\\^$*+?|[\]().{}]/g;function tt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Zse(t){return t.replace(Qse,"\\$&")}function yc(t){return new RegExp("^(?:"+t.map(Zse).join("|")+")","i")}function vc(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Jse(t,e,n){var r=gn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function eoe(t,e,n){var r=gn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function toe(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function noe(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function roe(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function OM(t,e,n){var r=gn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function CM(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ioe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function aoe(t,e,n){var r=gn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function soe(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function LM(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ooe(t,e,n){var r=gn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function DM(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function loe(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function uoe(t,e,n){var r=gn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function coe(t,e,n){var r=gn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function foe(t,e,n){var r=gn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function doe(t,e,n){var r=Xse.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function hoe(t,e,n){var r=gn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function moe(t,e,n){var r=gn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function IM(t,e){return tt(t.getDate(),e,2)}function poe(t,e){return tt(t.getHours(),e,2)}function goe(t,e){return tt(t.getHours()%12||12,e,2)}function yoe(t,e){return tt(1+id.count(oa(t),t),e,3)}function i6(t,e){return tt(t.getMilliseconds(),e,3)}function voe(t,e){return i6(t,e)+"000"}function xoe(t,e){return tt(t.getMonth()+1,e,2)}function boe(t,e){return tt(t.getMinutes(),e,2)}function Soe(t,e){return tt(t.getSeconds(),e,2)}function Eoe(t){var e=t.getDay();return e===0?7:e}function Toe(t,e){return tt(hg.count(oa(t)-1,t),e,2)}function a6(t){var e=t.getDay();return e>=4||e===0?Rl(t):Rl.ceil(t)}function Aoe(t,e){return t=a6(t),tt(Rl.count(oa(t),t)+(oa(t).getDay()===4),e,2)}function woe(t){return t.getDay()}function _oe(t,e){return tt(tp.count(oa(t)-1,t),e,2)}function Roe(t,e){return tt(t.getFullYear()%100,e,2)}function Ooe(t,e){return t=a6(t),tt(t.getFullYear()%100,e,2)}function Coe(t,e){return tt(t.getFullYear()%1e4,e,4)}function Loe(t,e){var n=t.getDay();return t=n>=4||n===0?Rl(t):Rl.ceil(t),tt(t.getFullYear()%1e4,e,4)}function Doe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+tt(e/60|0,"0",2)+tt(e%60,"0",2)}function PM(t,e){return tt(t.getUTCDate(),e,2)}function Ioe(t,e){return tt(t.getUTCHours(),e,2)}function Poe(t,e){return tt(t.getUTCHours()%12||12,e,2)}function Noe(t,e){return tt(1+dg.count(la(t),t),e,3)}function s6(t,e){return tt(t.getUTCMilliseconds(),e,3)}function Moe(t,e){return s6(t,e)+"000"}function koe(t,e){return tt(t.getUTCMonth()+1,e,2)}function joe(t,e){return tt(t.getUTCMinutes(),e,2)}function Uoe(t,e){return tt(t.getUTCSeconds(),e,2)}function Boe(t){var e=t.getUTCDay();return e===0?7:e}function Foe(t,e){return tt(mg.count(la(t)-1,t),e,2)}function o6(t){var e=t.getUTCDay();return e>=4||e===0?Ol(t):Ol.ceil(t)}function $oe(t,e){return t=o6(t),tt(Ol.count(la(t),t)+(la(t).getUTCDay()===4),e,2)}function Goe(t){return t.getUTCDay()}function Voe(t,e){return tt(np.count(la(t)-1,t),e,2)}function qoe(t,e){return tt(t.getUTCFullYear()%100,e,2)}function Hoe(t,e){return t=o6(t),tt(t.getUTCFullYear()%100,e,2)}function zoe(t,e){return tt(t.getUTCFullYear()%1e4,e,4)}function Koe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ol(t):Ol.ceil(t),tt(t.getUTCFullYear()%1e4,e,4)}function Yoe(){return"+0000"}function NM(){return"%"}function MM(t){return+t}function kM(t){return Math.floor(+t/1e3)}var Ko,l6,u6;Woe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Woe(t){return Ko=Wse(t),l6=Ko.format,Ko.parse,u6=Ko.utcFormat,Ko.utcParse,Ko}function Xoe(t){return new Date(t)}function Qoe(t){return t instanceof Date?+t:+new Date(+t)}function Nw(t,e,n,r,i,a,s,o,c,u){var d=bw(),h=d.invert,p=d.domain,y=u(".%L"),v=u(":%S"),S=u("%I:%M"),x=u("%I %p"),T=u("%a %d"),_=u("%b %d"),A=u("%B"),O=u("%Y");function R(C){return(c(C)<C?y:o(C)<C?v:s(C)<C?S:a(C)<C?x:r(C)<C?i(C)<C?T:_:n(C)<C?A:O)(C)}return d.invert=function(C){return new Date(h(C))},d.domain=function(C){return arguments.length?p(Array.from(C,Qoe)):p().map(Xoe)},d.ticks=function(C){var L=p();return t(L[0],L[L.length-1],C??10)},d.tickFormat=function(C,L){return L==null?R:u(L)},d.nice=function(C){var L=p();return(!C||typeof C.range!="function")&&(C=e(L[0],L[L.length-1],C??10)),C?p(W4(L,C)):d},d.copy=function(){return rd(d,Nw(t,e,n,r,i,a,s,o,c,u))},d}function Zoe(){return Br.apply(Nw(Kse,Yse,oa,Iw,hg,id,Lw,Ow,Fs,l6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Joe(){return Br.apply(Nw(Hse,zse,la,Pw,mg,dg,Dw,Cw,Fs,u6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function pg(){var t=0,e=1,n,r,i,a,s=Fn,o=!1,c;function u(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function d(h){return function(p){var y,v;return arguments.length?([y,v]=p,s=h(y,v),u):[s(0),s(1)]}}return u.range=d(su),u.rangeRound=d(xw),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function is(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function c6(){var t=rs(pg()(Fn));return t.copy=function(){return is(t,c6())},ma.apply(t,arguments)}function f6(){var t=Tw(pg()).domain([1,10]);return t.copy=function(){return is(t,f6()).base(t.base())},ma.apply(t,arguments)}function d6(){var t=Aw(pg());return t.copy=function(){return is(t,d6()).constant(t.constant())},ma.apply(t,arguments)}function Mw(){var t=ww(pg());return t.copy=function(){return is(t,Mw()).exponent(t.exponent())},ma.apply(t,arguments)}function ele(){return Mw.apply(null,arguments).exponent(.5)}function h6(){var t=[],e=Fn;function n(r){if(r!=null&&!isNaN(r=+r))return e((td(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ka),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Fae(t,a/r))},n.copy=function(){return h6(e).domain(t)},ma.apply(n,arguments)}function gg(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=Fn,d,h=!1,p;function y(S){return isNaN(S=+S)?p:(S=.5+((S=+d(S))-a)*(r*S<r*a?o:c),u(h?Math.max(0,Math.min(1,S)):S))}y.domain=function(S){return arguments.length?([t,e,n]=S,i=d(t=+t),a=d(e=+e),s=d(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,y):[t,e,n]},y.clamp=function(S){return arguments.length?(h=!!S,y):h},y.interpolator=function(S){return arguments.length?(u=S,y):u};function v(S){return function(x){var T,_,A;return arguments.length?([T,_,A]=x,u=dse(S,[T,_,A]),y):[u(0),u(.5),u(1)]}}return y.range=v(su),y.rangeRound=v(xw),y.unknown=function(S){return arguments.length?(p=S,y):p},function(S){return d=S,i=S(t),a=S(e),s=S(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,y}}function m6(){var t=rs(gg()(Fn));return t.copy=function(){return is(t,m6())},ma.apply(t,arguments)}function p6(){var t=Tw(gg()).domain([.1,1,10]);return t.copy=function(){return is(t,p6()).base(t.base())},ma.apply(t,arguments)}function g6(){var t=Aw(gg());return t.copy=function(){return is(t,g6()).constant(t.constant())},ma.apply(t,arguments)}function kw(){var t=ww(gg());return t.copy=function(){return is(t,kw()).exponent(t.exponent())},ma.apply(t,arguments)}function tle(){return kw.apply(null,arguments).exponent(.5)}const jM=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:lf,scaleDiverging:m6,scaleDivergingLog:p6,scaleDivergingPow:kw,scaleDivergingSqrt:tle,scaleDivergingSymlog:g6,scaleIdentity:Y4,scaleImplicit:$T,scaleLinear:Jm,scaleLog:X4,scaleOrdinal:gw,scalePoint:jc,scalePow:_w,scaleQuantile:J4,scaleQuantize:e6,scaleRadial:Z4,scaleSequential:c6,scaleSequentialLog:f6,scaleSequentialPow:Mw,scaleSequentialQuantile:h6,scaleSequentialSqrt:ele,scaleSequentialSymlog:d6,scaleSqrt:Mse,scaleSymlog:Q4,scaleThreshold:t6,scaleTime:Zoe,scaleUtc:Joe,tickFormat:K4},Symbol.toStringTag,{value:"Module"}));var kS,UM;function y6(){if(UM)return kS;UM=1;var t=nu();function e(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],c=r(o);if(c!=null&&(u===void 0?c===c&&!t(c):i(c,u)))var u=c,d=o}return d}return kS=e,kS}var jS,BM;function nle(){if(BM)return jS;BM=1;function t(e,n){return e>n}return jS=t,jS}var US,FM;function rle(){if(FM)return US;FM=1;var t=y6(),e=nle(),n=iu();function r(i){return i&&i.length?t(i,n,e):void 0}return US=r,US}var ile=rle();const yg=xt(ile);var BS,$M;function ale(){if($M)return BS;$M=1;function t(e,n){return e<n}return BS=t,BS}var FS,GM;function sle(){if(GM)return FS;GM=1;var t=y6(),e=ale(),n=iu();function r(i){return i&&i.length?t(i,n,e):void 0}return FS=r,FS}var ole=sle();const vg=xt(ole);var $S,VM;function lle(){if(VM)return $S;VM=1;var t=ZA(),e=ns(),n=w4(),r=Zn();function i(a,s){var o=r(a)?t:n;return o(a,e(s,3))}return $S=i,$S}var GS,qM;function ule(){if(qM)return GS;qM=1;var t=T4(),e=lle();function n(r,i){return t(e(r,i),1)}return GS=n,GS}var cle=ule();const fle=xt(cle);var VS,HM;function dle(){if(HM)return VS;HM=1;var t=fw();function e(n,r){return t(n,r)}return VS=e,VS}var hle=dle();const xg=xt(hle);var ou=1e9,mle={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Uw,wt=!0,kr="[DecimalError] ",zs=kr+"Invalid argument: ",jw=kr+"Exponent out of range: ",lu=Math.floor,Is=Math.pow,ple=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,cr,mn=1e7,Et=7,v6=9007199254740991,rp=lu(v6/Et),be={};be.absoluteValue=be.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};be.comparedTo=be.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};be.decimalPlaces=be.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Et;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};be.dividedBy=be.div=function(t){return na(this,new this.constructor(t))};be.dividedToIntegerBy=be.idiv=function(t){var e=this,n=e.constructor;return vt(na(e,new n(t),0,1),n.precision)};be.equals=be.eq=function(t){return!this.cmp(t)};be.exponent=function(){return Xt(this)};be.greaterThan=be.gt=function(t){return this.cmp(t)>0};be.greaterThanOrEqualTo=be.gte=function(t){return this.cmp(t)>=0};be.isInteger=be.isint=function(){return this.e>this.d.length-2};be.isNegative=be.isneg=function(){return this.s<0};be.isPositive=be.ispos=function(){return this.s>0};be.isZero=function(){return this.s===0};be.lessThan=be.lt=function(t){return this.cmp(t)<0};be.lessThanOrEqualTo=be.lte=function(t){return this.cmp(t)<1};be.logarithm=be.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(cr))throw Error(kr+"NaN");if(n.s<1)throw Error(kr+(n.s?"NaN":"-Infinity"));return n.eq(cr)?new r(0):(wt=!1,e=na(hf(n,a),hf(t,a),a),wt=!0,vt(e,i))};be.minus=be.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?S6(e,t):x6(e,(t.s=-t.s,t))};be.modulo=be.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(kr+"NaN");return n.s?(wt=!1,e=na(n,t,0,1).times(t),wt=!0,n.minus(e)):vt(new r(n),i)};be.naturalExponential=be.exp=function(){return b6(this)};be.naturalLogarithm=be.ln=function(){return hf(this)};be.negated=be.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};be.plus=be.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?x6(e,t):S6(e,(t.s=-t.s,t))};be.precision=be.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(zs+t);if(e=Xt(i)+1,r=i.d.length-1,n=r*Et+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};be.squareRoot=be.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(kr+"NaN")}for(t=Xt(o),wt=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=gi(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=lu((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(na(o,a,s+2)).times(.5),gi(a.d).slice(0,s)===(e=gi(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(vt(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return wt=!0,vt(r,n)};be.times=be.mul=function(t){var e,n,r,i,a,s,o,c,u,d=this,h=d.constructor,p=d.d,y=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,n=d.e+t.e,c=p.length,u=y.length,c<u&&(a=p,p=y,y=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+y[r]*p[i-r-1]+e,a[i--]=o%mn|0,e=o/mn|0;a[i]=(a[i]+e)%mn|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,wt?vt(t,h.precision):t};be.toDecimalPlaces=be.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ai(t,0,ou),e===void 0?e=r.rounding:Ai(e,0,8),vt(n,t+Xt(n)+1,e))};be.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Qs(r,!0):(Ai(t,0,ou),e===void 0?e=i.rounding:Ai(e,0,8),r=vt(new i(r),t+1,e),n=Qs(r,!0,t+1)),n};be.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Qs(i):(Ai(t,0,ou),e===void 0?e=a.rounding:Ai(e,0,8),r=vt(new a(i),t+Xt(i)+1,e),n=Qs(r.abs(),!1,t+Xt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};be.toInteger=be.toint=function(){var t=this,e=t.constructor;return vt(new e(t),Xt(t)+1,e.rounding)};be.toNumber=function(){return+this};be.toPower=be.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(cr);if(o=new c(o),!o.s){if(t.s<1)throw Error(kr+"Infinity");return o}if(o.eq(cr))return o;if(r=c.precision,t.eq(cr))return vt(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=d<0?-d:d)<=v6){for(i=new c(cr),e=Math.ceil(r/Et+4),wt=!1;n%2&&(i=i.times(o),KM(i.d,e)),n=lu(n/2),n!==0;)o=o.times(o),KM(o.d,e);return wt=!0,t.s<0?new c(cr).div(i):vt(i,r)}}else if(a<0)throw Error(kr+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,wt=!1,i=t.times(hf(o,r+u)),wt=!0,i=b6(i),i.s=a,i};be.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Xt(i),r=Qs(i,n<=a.toExpNeg||n>=a.toExpPos)):(Ai(t,1,ou),e===void 0?e=a.rounding:Ai(e,0,8),i=vt(new a(i),t,e),n=Xt(i),r=Qs(i,t<=n||n<=a.toExpNeg,t)),r};be.toSignificantDigits=be.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ai(t,1,ou),e===void 0?e=r.rounding:Ai(e,0,8)),vt(new r(n),t,e)};be.toString=be.valueOf=be.val=be.toJSON=be[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Xt(t),n=t.constructor;return Qs(t,e<=n.toExpNeg||e>=n.toExpPos)};function x6(t,e){var n,r,i,a,s,o,c,u,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),wt?vt(e,h):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(h/Et),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/mn|0,c[a]%=mn;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,wt?vt(e,h):e}function Ai(t,e,n){if(t!==~~t||t<e||t>n)throw Error(zs+t)}function gi(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=Et-r.length,n&&(a+=Ga(n)),a+=r;s=t[e],r=s+"",n=Et-r.length,n&&(a+=Ga(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var na=function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%mn|0,s=a/mn|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*mn+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,d,h,p,y,v,S,x,T,_,A,O,R,C,L,P,N=r.constructor,k=r.s==i.s?1:-1,M=r.d,G=i.d;if(!r.s)return new N(r);if(!i.s)throw Error(kr+"Division by zero");for(c=r.e-i.e,L=G.length,R=M.length,y=new N(k),v=y.d=[],u=0;G[u]==(M[u]||0);)++u;if(G[u]>(M[u]||0)&&--c,a==null?_=a=N.precision:s?_=a+(Xt(r)-Xt(i))+1:_=a,_<0)return new N(0);if(_=_/Et+2|0,u=0,L==1)for(d=0,G=G[0],_++;(u<R||d)&&_--;u++)A=d*mn+(M[u]||0),v[u]=A/G|0,d=A%G|0;else{for(d=mn/(G[0]+1)|0,d>1&&(G=t(G,d),M=t(M,d),L=G.length,R=M.length),O=L,S=M.slice(0,L),x=S.length;x<L;)S[x++]=0;P=G.slice(),P.unshift(0),C=G[0],G[1]>=mn/2&&++C;do d=0,o=e(G,S,L,x),o<0?(T=S[0],L!=x&&(T=T*mn+(S[1]||0)),d=T/C|0,d>1?(d>=mn&&(d=mn-1),h=t(G,d),p=h.length,x=S.length,o=e(h,S,p,x),o==1&&(d--,n(h,L<p?P:G,p))):(d==0&&(o=d=1),h=G.slice()),p=h.length,p<x&&h.unshift(0),n(S,h,x),o==-1&&(x=S.length,o=e(G,S,L,x),o<1&&(d++,n(S,L<x?P:G,x))),x=S.length):o===0&&(d++,S=[0]),v[u++]=d,o&&S[0]?S[x++]=M[O]||0:(S=[M[O]],x=1);while((O++<R||S[0]!==void 0)&&_--)}return v[0]||v.shift(),y.e=c,vt(y,s?a+Xt(y)+1:a)}}();function b6(t,e){var n,r,i,a,s,o,c=0,u=0,d=t.constructor,h=d.precision;if(Xt(t)>16)throw Error(jw+Xt(t));if(!t.s)return new d(cr);for(wt=!1,o=h,s=new d(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(Is(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new d(cr),d.precision=o;;){if(i=vt(i.times(t),o),n=n.times(++c),s=a.plus(na(i,n,o)),gi(s.d).slice(0,o)===gi(a.d).slice(0,o)){for(;u--;)a=vt(a.times(a),o);return d.precision=h,e==null?(wt=!0,vt(a,h)):a}a=s}}function Xt(t){for(var e=t.e*Et,n=t.d[0];n>=10;n/=10)e++;return e}function qS(t,e,n){if(e>t.LN10.sd())throw wt=!0,n&&(t.precision=n),Error(kr+"LN10 precision limit exceeded");return vt(new t(t.LN10),e)}function Ga(t){for(var e="";t--;)e+="0";return e}function hf(t,e){var n,r,i,a,s,o,c,u,d,h=1,p=10,y=t,v=y.d,S=y.constructor,x=S.precision;if(y.s<1)throw Error(kr+(y.s?"NaN":"-Infinity"));if(y.eq(cr))return new S(0);if(e==null?(wt=!1,u=x):u=e,y.eq(10))return e==null&&(wt=!0),qS(S,u);if(u+=p,S.precision=u,n=gi(v),r=n.charAt(0),a=Xt(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(t),n=gi(y.d),r=n.charAt(0),h++;a=Xt(y),r>1?(y=new S("0."+n),a++):y=new S(r+"."+n.slice(1))}else return c=qS(S,u+2,x).times(a+""),y=hf(new S(r+"."+n.slice(1)),u-p).plus(c),S.precision=x,e==null?(wt=!0,vt(y,x)):y;for(o=s=y=na(y.minus(cr),y.plus(cr),u),d=vt(y.times(y),u),i=3;;){if(s=vt(s.times(d),u),c=o.plus(na(s,new S(i),u)),gi(c.d).slice(0,u)===gi(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(qS(S,u+2,x).times(a+""))),o=na(o,new S(h),u),S.precision=x,e==null?(wt=!0,vt(o,x)):o;o=c,i+=2}}function zM(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=lu(n/Et),t.d=[],r=(n+1)%Et,n<0&&(r+=Et),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Et;r<i;)t.d.push(+e.slice(r,r+=Et));e=e.slice(r),r=Et-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),wt&&(t.e>rp||t.e<-rp))throw Error(jw+n)}else t.s=0,t.e=0,t.d=[0];return t}function vt(t,e,n){var r,i,a,s,o,c,u,d,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=Et,i=e,u=h[d=0];else{if(d=Math.ceil((r+1)/Et),a=h.length,d>=a)return t;for(u=a=h[d],s=1;a>=10;a/=10)s++;r%=Et,i=r-Et+s}if(n!==void 0&&(a=Is(10,s-i-1),o=u/a%10|0,c=e<0||h[d+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/Is(10,s-i):0:h[d-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=Xt(t),h.length=1,e=e-a-1,h[0]=Is(10,(Et-e%Et)%Et),t.e=lu(-e/Et)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=d,a=1,d--):(h.length=d+1,a=Is(10,Et-r),h[d]=i>0?(u/Is(10,s-i)%Is(10,i)|0)*a:0),c)for(;;)if(d==0){(h[0]+=a)==mn&&(h[0]=1,++t.e);break}else{if(h[d]+=a,h[d]!=mn)break;h[d--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(wt&&(t.e>rp||t.e<-rp))throw Error(jw+Xt(t));return t}function S6(t,e){var n,r,i,a,s,o,c,u,d,h,p=t.constructor,y=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),wt?vt(e,y):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(d=s<0,d?(n=c,s=-s,o=h.length):(n=h,r=u,o=c.length),i=Math.max(Math.ceil(y/Et),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=h.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}s=0}for(d&&(n=c,c=h,h=n,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=mn-1;--c[a],c[i]+=mn}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,wt?vt(e,y):e):new p(0)}function Qs(t,e,n){var r,i=Xt(t),a=gi(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Ga(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Ga(-i-1)+a,n&&(r=n-s)>0&&(a+=Ga(r))):i>=s?(a+=Ga(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Ga(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Ga(r))),t.s<0?"-"+a:a}function KM(t,e){if(t.length>e)return t.length=e,!0}function E6(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(zs+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return zM(s,a.toString())}else if(typeof a!="string")throw Error(zs+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,ple.test(a))zM(s,a);else throw Error(zs+a)}if(i.prototype=be,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=E6,i.config=i.set=gle,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function gle(t){if(!t||typeof t!="object")throw Error(kr+"Object expected");var e,n,r,i=["precision",1,ou,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(lu(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(zs+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(zs+n+": "+r);return this}var Uw=E6(mle);cr=new Uw(1);const mt=Uw;function yle(t){return Sle(t)||ble(t)||xle(t)||vle()}function vle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xle(t,e){if(t){if(typeof t=="string")return HT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HT(t,e)}}function ble(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Sle(t){if(Array.isArray(t))return HT(t)}function HT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ele=function(e){return e},T6={},A6=function(e){return e===T6},YM=function(e){return function n(){return arguments.length===0||arguments.length===1&&A6(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Tle=function t(e,n){return e===1?n:YM(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==T6}).length;return s>=e?n.apply(void 0,i):t(e-s,YM(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var d=i.map(function(h){return A6(h)?c.shift():h});return n.apply(void 0,yle(d).concat(c))}))})},bg=function(e){return Tle(e.length,e)},zT=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Ale=bg(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),wle=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Ele;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,c){return c(o)},a.apply(void 0,arguments))}},KT=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},w6=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(o,c){return o===n[c]})||(n=a,r=e.apply(void 0,a)),r}};function _le(t){var e;return t===0?e=1:e=Math.floor(new mt(t).abs().log(10).toNumber())+1,e}function Rle(t,e,n){for(var r=new mt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var Ole=bg(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),Cle=bg(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Lle=bg(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const Sg={rangeStep:Rle,getDigitCount:_le,interpolateNumber:Ole,uninterpolateNumber:Cle,uninterpolateTruncation:Lle};function YT(t){return Ple(t)||Ile(t)||_6(t)||Dle()}function Dle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ile(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Ple(t){if(Array.isArray(t))return WT(t)}function mf(t,e){return kle(t)||Mle(t,e)||_6(t,e)||Nle()}function Nle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _6(t,e){if(t){if(typeof t=="string")return WT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WT(t,e)}}function WT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mle(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function kle(t){if(Array.isArray(t))return t}function R6(t){var e=mf(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function O6(t,e,n){if(t.lte(0))return new mt(0);var r=Sg.getDigitCount(t.toNumber()),i=new mt(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new mt(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?c:new mt(Math.ceil(c))}function jle(t,e,n){var r=1,i=new mt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new mt(10).pow(Sg.getDigitCount(t)-1),i=new mt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new mt(Math.floor(t)))}else t===0?i=new mt(Math.floor((e-1)/2)):n||(i=new mt(Math.floor(t)));var s=Math.floor((e-1)/2),o=wle(Ale(function(c){return i.add(new mt(c-s).mul(r)).toNumber()}),zT);return o(0,e)}function C6(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new mt(0),tickMin:new mt(0),tickMax:new mt(0)};var a=O6(new mt(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new mt(0):(s=new mt(t).add(e).div(2),s=s.sub(new mt(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),c=Math.ceil(new mt(e).sub(s).div(a).toNumber()),u=o+c+1;return u>n?C6(t,e,n,r,i+1):(u<n&&(c=e>0?c+(n-u):c,o=e>0?o:o+(n-u)),{step:a,tickMin:s.sub(new mt(o).mul(a)),tickMax:s.add(new mt(c).mul(a))})}function Ule(t){var e=mf(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=R6([n,r]),c=mf(o,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(YT(zT(0,i-1).map(function(){return 1/0}))):[].concat(YT(zT(0,i-1).map(function(){return-1/0})),[d]);return n>r?KT(h):h}if(u===d)return jle(u,i,a);var p=C6(u,d,s,a),y=p.step,v=p.tickMin,S=p.tickMax,x=Sg.rangeStep(v,S.add(new mt(.1).mul(y)),y);return n>r?KT(x):x}function Ble(t,e){var n=mf(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=R6([r,i]),o=mf(s,2),c=o[0],u=o[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(e,2),h=O6(new mt(u).sub(c).div(d-1),a,0),p=[].concat(YT(Sg.rangeStep(new mt(c),new mt(u).sub(new mt(.99).mul(h)),h)),[u]);return r>i?KT(p):p}var Fle=w6(Ule),$le=w6(Ble),Gle="Invariant failed";function Zs(t,e){throw new Error(Gle)}var Vle=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Cl(t){"@babel/helpers - typeof";return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cl(t)}function ip(){return ip=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ip.apply(this,arguments)}function qle(t,e){return Yle(t)||Kle(t,e)||zle(t,e)||Hle()}function Hle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zle(t,e){if(t){if(typeof t=="string")return WM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WM(t,e)}}function WM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kle(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Yle(t){if(Array.isArray(t))return t}function Wle(t,e){if(t==null)return{};var n=Xle(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Qle(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zle(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I6(r.key),r)}}function Jle(t,e,n){return e&&Zle(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eue(t,e,n){return e=ap(e),tue(t,L6()?Reflect.construct(e,n||[],ap(t).constructor):e.apply(t,n))}function tue(t,e){if(e&&(Cl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nue(t)}function nue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L6=function(){return!!t})()}function ap(t){return ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ap(t)}function rue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XT(t,e)}function XT(t,e){return XT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},XT(t,e)}function D6(t,e,n){return e=I6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I6(t){var e=iue(t,"string");return Cl(e)=="symbol"?e:e+""}function iue(t,e){if(Cl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ad=function(t){function e(){return Qle(this,e),eue(this,e,arguments)}return rue(e,t),Jle(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,p=Wle(r,Vle),y=We(p,!1);this.props.direction==="x"&&d.type!=="number"&&Zs();var v=c.map(function(S){var x=u(S,o),T=x.x,_=x.y,A=x.value,O=x.errorVal;if(!O)return null;var R=[],C,L;if(Array.isArray(O)){var P=qle(O,2);C=P[0],L=P[1]}else C=L=O;if(a==="vertical"){var N=d.scale,k=_+i,M=k+s,G=k-s,K=N(A-C),W=N(A+L);R.push({x1:W,y1:M,x2:W,y2:G}),R.push({x1:K,y1:k,x2:W,y2:k}),R.push({x1:K,y1:M,x2:K,y2:G})}else if(a==="horizontal"){var Y=h.scale,j=T+i,$=j-s,q=j+s,Z=Y(A-C),F=Y(A+L);R.push({x1:$,y1:F,x2:q,y2:F}),R.push({x1:j,y1:Z,x2:j,y2:F}),R.push({x1:$,y1:Z,x2:q,y2:Z})}return Q.createElement($t,ip({className:"recharts-errorBar",key:"bar-".concat(R.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},y),R.map(function(V){return Q.createElement("line",ip({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return Q.createElement($t,{className:"recharts-errorBars"},v)}}])}(Q.Component);D6(ad,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});D6(ad,"displayName","ErrorBar");function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function XM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XM(Object(n),!0).forEach(function(r){aue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aue(t,e,n){return e=sue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sue(t){var e=oue(t,"string");return pf(e)=="symbol"?e:e+""}function oue(t,e){if(pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var P6=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=lr(n,dl);if(!s)return null;var o=dl.defaultProps,c=o!==void 0?Rs(Rs({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(r||[]).reduce(function(d,h){var p=h.item,y=h.props,v=y.sectors||y.data||[];return d.concat(v.map(function(S){return{type:s.props.iconType||p.props.legendType,value:S.name,color:S.fill,payload:S}}))},[]):u=(r||[]).map(function(d){var h=d.item,p=h.type.defaultProps,y=p!==void 0?Rs(Rs({},p),h.props):{},v=y.dataKey,S=y.name,x=y.legendType,T=y.hide;return{inactive:T,dataKey:v,type:c.iconType||x||"square",color:Bw(h),value:S||v,payload:y}}),Rs(Rs(Rs({},c),dl.getWithHeight(s,i)),{},{payload:u,item:s})};function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function QM(t){return fue(t)||cue(t)||uue(t)||lue()}function lue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uue(t,e){if(t){if(typeof t=="string")return QT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QT(t,e)}}function cue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fue(t){if(Array.isArray(t))return QT(t)}function QT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ZM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZM(Object(n),!0).forEach(function(r){ml(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ml(t,e,n){return e=due(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function due(t){var e=hue(t,"string");return gf(e)=="symbol"?e:e+""}function hue(t,e){if(gf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dr(t,e,n){return Ye(t)||Ye(e)?n:an(e)?Ir(t,e,n):Ge(e)?e(t):n}function Uc(t,e,n,r){var i=fle(t,function(o){return dr(o,e)});if(n==="number"){var a=i.filter(function(o){return ve(o)||parseFloat(o)});return a.length?[vg(a),yg(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!Ye(o)}):i;return s.map(function(o){return an(o)||o instanceof Date?o:""})}var mue=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<o;u++){var d=u>0?i[u-1].coordinate:i[o-1].coordinate,h=i[u].coordinate,p=u>=o-1?i[0].coordinate:i[u+1].coordinate,y=void 0;if(Jr(h-d)!==Jr(p-h)){var v=[];if(Jr(p-h)===Jr(c[1]-c[0])){y=p;var S=h+c[1]-c[0];v[0]=Math.min(S,(S+d)/2),v[1]=Math.max(S,(S+d)/2)}else{y=d;var x=p+c[1]-c[0];v[0]=Math.min(h,(x+h)/2),v[1]=Math.max(h,(x+h)/2)}var T=[Math.min(h,(y+h)/2),Math.max(h,(y+h)/2)];if(e>T[0]&&e<=T[1]||e>=v[0]&&e<=v[1]){s=i[u].index;break}}else{var _=Math.min(d,p),A=Math.max(d,p);if(e>(_+h)/2&&e<=(A+h)/2){s=i[u].index;break}}}else for(var O=0;O<o;O++)if(O===0&&e<=(r[O].coordinate+r[O+1].coordinate)/2||O>0&&O<o-1&&e>(r[O].coordinate+r[O-1].coordinate)/2&&e<=(r[O].coordinate+r[O+1].coordinate)/2||O===o-1&&e>(r[O].coordinate+r[O-1].coordinate)/2){s=r[O].index;break}return s},Bw=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,c;switch(i){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:o;break;default:c=o;break}return c},pue=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),c=0,u=o.length;c<u;c++)for(var d=a[o[c]].stackGroups,h=Object.keys(d),p=0,y=h.length;p<y;p++){var v=d[h[p]],S=v.items,x=v.cateAxisId,T=S.filter(function(L){return ea(L.type).indexOf("Bar")>=0});if(T&&T.length){var _=T[0].type.defaultProps,A=_!==void 0?kt(kt({},_),T[0].props):T[0].props,O=A.barSize,R=A[x];s[R]||(s[R]=[]);var C=Ye(O)?n:O;s[R].push({item:T[0],stackList:T.slice(1),barSize:Ye(C)?void 0:Xs(C,r,0)})}}return s},gue=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,c=s.length;if(c<1)return null;var u=Xs(n,i,0,!0),d,h=[];if(s[0].barSize===+s[0].barSize){var p=!1,y=i/c,v=s.reduce(function(O,R){return O+R.barSize||0},0);v+=(c-1)*u,v>=i&&(v-=(c-1)*u,u=0),v>=i&&y>0&&(p=!0,y*=.9,v=c*y);var S=(i-v)/2>>0,x={offset:S-u,size:0};d=s.reduce(function(O,R){var C={item:R.item,position:{offset:x.offset+x.size+u,size:p?y:R.barSize}},L=[].concat(QM(O),[C]);return x=L[L.length-1].position,R.stackList&&R.stackList.length&&R.stackList.forEach(function(P){L.push({item:P,position:x})}),L},h)}else{var T=Xs(r,i,0,!0);i-2*T-(c-1)*u<=0&&(u=0);var _=(i-2*T-(c-1)*u)/c;_>1&&(_>>=0);var A=o===+o?Math.min(_,o):_;d=s.reduce(function(O,R,C){var L=[].concat(QM(O),[{item:R.item,position:{offset:T+(_+u)*C+(_-A)/2,size:A}}]);return R.stackList&&R.stackList.length&&R.stackList.forEach(function(P){L.push({item:P,position:L[L.length-1].position})}),L},h)}return d},yue=function(e,n,r,i){var a=r.children,s=r.width,o=r.margin,c=s-(o.left||0)-(o.right||0),u=P6({children:a,legendWidth:c});if(u){var d=i||{},h=d.width,p=d.height,y=u.align,v=u.verticalAlign,S=u.layout;if((S==="vertical"||S==="horizontal"&&v==="middle")&&y!=="center"&&ve(e[y]))return kt(kt({},e),{},ml({},y,e[y]+(h||0)));if((S==="horizontal"||S==="vertical"&&y==="center")&&v!=="middle"&&ve(e[v]))return kt(kt({},e),{},ml({},v,e[v]+(p||0)))}return e},vue=function(e,n,r){return Ye(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},N6=function(e,n,r,i,a){var s=n.props.children,o=Pr(s,ad).filter(function(u){return vue(i,a,u.props.direction)});if(o&&o.length){var c=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var h=dr(d,r);if(Ye(h))return u;var p=Array.isArray(h)?[vg(h),yg(h)]:[h,h],y=c.reduce(function(v,S){var x=dr(d,S,0),T=p[0]-Math.abs(Array.isArray(x)?x[0]:x),_=p[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(T,v[0]),Math.max(_,v[1])]},[1/0,-1/0]);return[Math.min(y[0],u[0]),Math.max(y[1],u[1])]},[1/0,-1/0])}return null},xue=function(e,n,r,i,a){var s=n.map(function(o){return N6(e,o,r,a,i)}).filter(function(o){return!Ye(o)});return s&&s.length?s.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},M6=function(e,n,r,i,a){var s=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&N6(e,c,u,i)||Uc(e,u,r,a)});if(r==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)o[u[d]]||(o[u[d]]=!0,c.push(u[d]));return c},[])},k6=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},j6=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var a,s,o=e.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===r&&(s=!0),c.coordinate});return a||o.push(n),s||o.push(r),o},Zi=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Jr(o[0]-o[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(h){var p=a?a.indexOf(h):h;return{coordinate:i(p)+u,value:h,offset:u}});return d.filter(function(h){return!Zf(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,p){return{coordinate:i(h)+u,value:h,index:p,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(h){return{coordinate:i(h)+u,value:h,offset:u}}):i.domain().map(function(h,p){return{coordinate:i(h)+u,value:a?a[h]:h,index:p,offset:u}})},HS=new WeakMap,Mh=function(e,n){if(typeof n!="function")return e;HS.has(e)||HS.set(e,new WeakMap);var r=HS.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},bue=function(e,n,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:lf(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:Jm(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:jc(),realScaleType:"point"}:a==="category"?{scale:lf(),realScaleType:"band"}:{scale:Jm(),realScaleType:"linear"};if(Ws(i)){var c="scale".concat(ig(i));return{scale:(jM[c]||jc)(),realScaleType:jM[c]?c:"point"}}return Ge(i)?{scale:i}:{scale:jc(),realScaleType:"point"}},JM=1e-4,Sue=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-JM,s=Math.max(i[0],i[1])+JM,o=e(n[0]),c=e(n[r-1]);(o<a||o>s||c<a||c>s)&&e.domain([n[0],n[r-1]])}},Eue=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Tue=function(e,n){if(!n||n.length!==2||!ve(n[0])||!ve(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!ve(e[0])||e[0]<r)&&(a[0]=r),(!ve(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},Aue=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<n;++o){var c=Zf(e[o][r][1])?e[o][r][0]:e[o][r][1];c>=0?(e[o][r][0]=a,e[o][r][1]=a+c,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+c,s=e[o][r][1])}},wue=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var o=Zf(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},_ue={sign:Aue,expand:lne,none:Sl,silhouette:une,wiggle:cne,positive:wue},Rue=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),a=_ue[r],s=one().keys(i).value(function(o,c){return+dr(o,c,0)}).order(RT).offset(a);return s(e)},Oue=function(e,n,r,i,a,s){if(!e)return null;var o=s?n.reverse():n,c={},u=o.reduce(function(h,p){var y,v=(y=p.type)!==null&&y!==void 0&&y.defaultProps?kt(kt({},p.type.defaultProps),p.props):p.props,S=v.stackId,x=v.hide;if(x)return h;var T=v[r],_=h[T]||{hasStack:!1,stackGroups:{}};if(an(S)){var A=_.stackGroups[S]||{numericAxisId:r,cateAxisId:i,items:[]};A.items.push(p),_.hasStack=!0,_.stackGroups[S]=A}else _.stackGroups[Jf("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[p]};return kt(kt({},h),{},ml({},T,_))},c),d={};return Object.keys(u).reduce(function(h,p){var y=u[p];if(y.hasStack){var v={};y.stackGroups=Object.keys(y.stackGroups).reduce(function(S,x){var T=y.stackGroups[x];return kt(kt({},S),{},ml({},x,{numericAxisId:r,cateAxisId:i,items:T.items,stackedData:Rue(e,T.items,a)}))},v)}return kt(kt({},h),{},ml({},p,y))},d)},Cue=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=Fle(u,a,o);return e.domain([vg(d),yg(d)]),{niceTicks:d}}if(a&&i==="number"){var h=e.domain(),p=$le(h,a,o);return{niceTicks:p}}return null};function ek(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ye(i[e.dataKey])){var o=Pm(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var c=dr(i,Ye(s)?e.dataKey:s);return Ye(c)?null:e.scale(c)}var tk=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var c=dr(s,n.dataKey,n.domain[o]);return Ye(c)?null:n.scale(c)-a/2+i},Lue=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},Due=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(an(a)){var s=n[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},Iue=function(e){return e.reduce(function(n,r){return[vg(r.concat([n[0]]).filter(ve)),yg(r.concat([n[1]]).filter(ve))]},[1/0,-1/0])},U6=function(e,n,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,c=o.reduce(function(u,d){var h=Iue(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},nk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ZT=function(e,n,r){if(Ge(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(ve(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(nk.test(e[0])){var a=+nk.exec(e[0])[1];i[0]=n[0]-a}else Ge(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(ve(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(rk.test(e[1])){var s=+rk.exec(e[1])[1];i[1]=n[1]+s}else Ge(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},sp=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=hw(n,function(h){return h.coordinate}),s=1/0,o=1,c=a.length;o<c;o++){var u=a[o],d=a[o-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},ik=function(e,n,r){return!e||!e.length||xg(e,Ir(r,"type.defaultProps.domain"))?n:e},B6=function(e,n){var r=e.type.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return kt(kt({},We(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:Bw(e),value:dr(n,i),type:c,payload:n,chartType:u,hide:d})};function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function ak(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ak(Object(n),!0).forEach(function(r){Pue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ak(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pue(t,e,n){return e=Nue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nue(t){var e=Mue(t,"string");return yf(e)=="symbol"?e:e+""}function Mue(t,e){if(yf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var op=Math.PI/180,kue=function(e){return e*180/Math.PI},wn=function(e,n,r,i){return{x:e+Math.cos(-op*i)*r,y:n+Math.sin(-op*i)*r}},jue=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},Uue=function(e,n){var r=e.x,i=e.y,a=n.cx,s=n.cy,o=jue({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var c=(r-a)/o,u=Math.acos(c);return i>s&&(u=2*Math.PI-u),{radius:o,angle:kue(u),angleInRadian:u}},Bue=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},Fue=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},ok=function(e,n){var r=e.x,i=e.y,a=Uue({x:r,y:i},n),s=a.radius,o=a.angle,c=n.innerRadius,u=n.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var d=Bue(n),h=d.startAngle,p=d.endAngle,y=o,v;if(h<=p){for(;y>p;)y-=360;for(;y<h;)y+=360;v=y>=h&&y<=p}else{for(;y>h;)y-=360;for(;y<p;)y+=360;v=y>=p&&y<=h}return v?sk(sk({},n),{},{radius:s,angle:Fue(y,n)}):null};function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}var $ue=["offset"];function Gue(t){return zue(t)||Hue(t)||que(t)||Vue()}function Vue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function que(t,e){if(t){if(typeof t=="string")return JT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JT(t,e)}}function Hue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zue(t){if(Array.isArray(t))return JT(t)}function JT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kue(t,e){if(t==null)return{};var n=Yue(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Yue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function lk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lk(Object(n),!0).forEach(function(r){Wue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wue(t,e,n){return e=Xue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xue(t){var e=Que(t,"string");return vf(e)=="symbol"?e:e+""}function Que(t,e){if(vf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xf(){return xf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xf.apply(this,arguments)}var Zue=function(e){var n=e.value,r=e.formatter,i=Ye(e.children)?n:e.children;return Ge(r)?r(i):i},Jue=function(e,n){var r=Jr(n-e),i=Math.min(Math.abs(n-e),360);return r*i},ece=function(e,n,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,c=a,u=c.cx,d=c.cy,h=c.innerRadius,p=c.outerRadius,y=c.startAngle,v=c.endAngle,S=c.clockWise,x=(h+p)/2,T=Jue(y,v),_=T>=0?1:-1,A,O;i==="insideStart"?(A=y+_*s,O=S):i==="insideEnd"?(A=v-_*s,O=!S):i==="end"&&(A=v+_*s,O=S),O=T<=0?O:!O;var R=wn(u,d,x,A),C=wn(u,d,x,A+(O?1:-1)*359),L="M".concat(R.x,",").concat(R.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(O?0:1,`,
    `).concat(C.x,",").concat(C.y),P=Ye(e.id)?Jf("recharts-radial-line-"):e.id;return Q.createElement("text",xf({},r,{dominantBaseline:"central",className:et("recharts-radial-bar-label",o)}),Q.createElement("defs",null,Q.createElement("path",{id:P,d:L})),Q.createElement("textPath",{xlinkHref:"#".concat(P)},n))},tce=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,s=a.cx,o=a.cy,c=a.innerRadius,u=a.outerRadius,d=a.startAngle,h=a.endAngle,p=(d+h)/2;if(i==="outside"){var y=wn(s,o,u+r,p),v=y.x,S=y.y;return{x:v,y:S,textAnchor:v>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,T=wn(s,o,x,p),_=T.x,A=T.y;return{x:_,y:A,textAnchor:"middle",verticalAnchor:"middle"}},nce=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=n,o=s.x,c=s.y,u=s.width,d=s.height,h=d>=0?1:-1,p=h*i,y=h>0?"end":"start",v=h>0?"start":"end",S=u>=0?1:-1,x=S*i,T=S>0?"end":"start",_=S>0?"start":"end";if(a==="top"){var A={x:o+u/2,y:c-h*i,textAnchor:"middle",verticalAnchor:y};return nn(nn({},A),r?{height:Math.max(c-r.y,0),width:u}:{})}if(a==="bottom"){var O={x:o+u/2,y:c+d+p,textAnchor:"middle",verticalAnchor:v};return nn(nn({},O),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(a==="left"){var R={x:o-x,y:c+d/2,textAnchor:T,verticalAnchor:"middle"};return nn(nn({},R),r?{width:Math.max(R.x-r.x,0),height:d}:{})}if(a==="right"){var C={x:o+u+x,y:c+d/2,textAnchor:_,verticalAnchor:"middle"};return nn(nn({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:d}:{})}var L=r?{width:u,height:d}:{};return a==="insideLeft"?nn({x:o+x,y:c+d/2,textAnchor:_,verticalAnchor:"middle"},L):a==="insideRight"?nn({x:o+u-x,y:c+d/2,textAnchor:T,verticalAnchor:"middle"},L):a==="insideTop"?nn({x:o+u/2,y:c+p,textAnchor:"middle",verticalAnchor:v},L):a==="insideBottom"?nn({x:o+u/2,y:c+d-p,textAnchor:"middle",verticalAnchor:y},L):a==="insideTopLeft"?nn({x:o+x,y:c+p,textAnchor:_,verticalAnchor:v},L):a==="insideTopRight"?nn({x:o+u-x,y:c+p,textAnchor:T,verticalAnchor:v},L):a==="insideBottomLeft"?nn({x:o+x,y:c+d-p,textAnchor:_,verticalAnchor:y},L):a==="insideBottomRight"?nn({x:o+u-x,y:c+d-p,textAnchor:T,verticalAnchor:y},L):ru(a)&&(ve(a.x)||Us(a.x))&&(ve(a.y)||Us(a.y))?nn({x:o+Xs(a.x,u),y:c+Xs(a.y,d),textAnchor:"end",verticalAnchor:"end"},L):nn({x:o+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},L)},rce=function(e){return"cx"in e&&ve(e.cx)};function Pn(t){var e=t.offset,n=e===void 0?5:e,r=Kue(t,$ue),i=nn({offset:n},r),a=i.viewBox,s=i.position,o=i.value,c=i.children,u=i.content,d=i.className,h=d===void 0?"":d,p=i.textBreakAll;if(!a||Ye(o)&&Ye(c)&&!B.isValidElement(u)&&!Ge(u))return null;if(B.isValidElement(u))return B.cloneElement(u,i);var y;if(Ge(u)){if(y=B.createElement(u,i),B.isValidElement(y))return y}else y=Zue(i);var v=rce(a),S=We(i,!0);if(v&&(s==="insideStart"||s==="insideEnd"||s==="end"))return ece(i,y,S);var x=v?tce(i):nce(i);return Q.createElement(zm,xf({className:et("recharts-label",h)},S,x,{breakAll:p}),y)}Pn.displayName="Label";var F6=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,h=e.x,p=e.y,y=e.top,v=e.left,S=e.width,x=e.height,T=e.clockWise,_=e.labelViewBox;if(_)return _;if(ve(S)&&ve(x)){if(ve(h)&&ve(p))return{x:h,y:p,width:S,height:x};if(ve(y)&&ve(v))return{x:y,y:v,width:S,height:x}}return ve(h)&&ve(p)?{x:h,y:p,width:0,height:0}:ve(n)&&ve(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:d||c||o||0,clockWise:T}:e.viewBox?e.viewBox:{}},ice=function(e,n){return e?e===!0?Q.createElement(Pn,{key:"label-implicit",viewBox:n}):an(e)?Q.createElement(Pn,{key:"label-implicit",viewBox:n,value:e}):B.isValidElement(e)?e.type===Pn?B.cloneElement(e,{key:"label-implicit",viewBox:n}):Q.createElement(Pn,{key:"label-implicit",content:e,viewBox:n}):Ge(e)?Q.createElement(Pn,{key:"label-implicit",content:e,viewBox:n}):ru(e)?Q.createElement(Pn,xf({viewBox:n},e,{key:"label-implicit"})):null:null},ace=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=F6(e),s=Pr(i,Pn).map(function(c,u){return B.cloneElement(c,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return s;var o=ice(e.label,n||a);return[o].concat(Gue(s))};Pn.parseViewBox=F6;Pn.renderCallByParent=ace;var zS,uk;function sce(){if(uk)return zS;uk=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return zS=t,zS}var oce=sce();const lce=xt(oce);function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}var uce=["valueAccessor"],cce=["data","dataKey","clockWise","id","textBreakAll"];function fce(t){return pce(t)||mce(t)||hce(t)||dce()}function dce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hce(t,e){if(t){if(typeof t=="string")return e1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e1(t,e)}}function mce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pce(t){if(Array.isArray(t))return e1(t)}function e1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lp(){return lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lp.apply(this,arguments)}function ck(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ck(Object(n),!0).forEach(function(r){gce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ck(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gce(t,e,n){return e=yce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yce(t){var e=vce(t,"string");return bf(e)=="symbol"?e:e+""}function vce(t,e){if(bf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dk(t,e){if(t==null)return{};var n=xce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var bce=function(e){return Array.isArray(e.value)?lce(e.value):e.value};function Ya(t){var e=t.valueAccessor,n=e===void 0?bce:e,r=dk(t,uce),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,c=r.textBreakAll,u=dk(r,cce);return!i||!i.length?null:Q.createElement($t,{className:"recharts-label-list"},i.map(function(d,h){var p=Ye(a)?n(d,h):dr(d&&d.payload,a),y=Ye(o)?{}:{id:"".concat(o,"-").concat(h)};return Q.createElement(Pn,lp({},We(d,!0),u,y,{parentViewBox:d.parentViewBox,value:p,textBreakAll:c,viewBox:Pn.parseViewBox(Ye(s)?d:fk(fk({},d),{},{clockWise:s})),key:"label-".concat(h),index:h}))}))}Ya.displayName="LabelList";function Sce(t,e){return t?t===!0?Q.createElement(Ya,{key:"labelList-implicit",data:e}):Q.isValidElement(t)||Ge(t)?Q.createElement(Ya,{key:"labelList-implicit",data:e,content:t}):ru(t)?Q.createElement(Ya,lp({data:e},t,{key:"labelList-implicit"})):null:null}function Ece(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Pr(r,Ya).map(function(s,o){return B.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var a=Sce(t.label,e);return[a].concat(fce(i))}Ya.renderCallByParent=Ece;function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function t1(){return t1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t1.apply(this,arguments)}function hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hk(Object(n),!0).forEach(function(r){Tce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tce(t,e,n){return e=Ace(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ace(t){var e=wce(t,"string");return Sf(e)=="symbol"?e:e+""}function wce(t,e){if(Sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _ce=function(e,n){var r=Jr(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},kh=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(o?1:-1)+i,h=Math.asin(c/d)/op,p=u?a:a+s*h,y=wn(n,r,d,p),v=wn(n,r,i,p),S=u?a-s*h:a,x=wn(n,r,d*Math.cos(h*op),S);return{center:y,circleTangency:v,lineTangency:x,theta:h}},$6=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,c=_ce(s,o),u=s+c,d=wn(n,r,a,s),h=wn(n,r,a,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var y=wn(n,r,i,s),v=wn(n,r,i,u);p+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},Rce=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,h=Jr(d-u),p=kh({cx:n,cy:r,radius:a,angle:u,sign:h,cornerRadius:s,cornerIsExternal:c}),y=p.circleTangency,v=p.lineTangency,S=p.theta,x=kh({cx:n,cy:r,radius:a,angle:d,sign:-h,cornerRadius:s,cornerIsExternal:c}),T=x.circleTangency,_=x.lineTangency,A=x.theta,O=c?Math.abs(u-d):Math.abs(u-d)-S-A;if(O<0)return o?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):$6({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var R="M ".concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(O>180),",").concat(+(h<0),",").concat(T.x,",").concat(T.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,`
  `);if(i>0){var C=kh({cx:n,cy:r,radius:i,angle:u,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),L=C.circleTangency,P=C.lineTangency,N=C.theta,k=kh({cx:n,cy:r,radius:i,angle:d,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),M=k.circleTangency,G=k.lineTangency,K=k.theta,W=c?Math.abs(u-d):Math.abs(u-d)-N-K;if(W<0&&s===0)return"".concat(R,"L").concat(n,",").concat(r,"Z");R+="L".concat(G.x,",").concat(G.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(W>180),",").concat(+(h>0),",").concat(L.x,",").concat(L.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,"Z")}else R+="L".concat(n,",").concat(r,"Z");return R},Oce={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},G6=function(e){var n=mk(mk({},Oce),e),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,p=n.className;if(s<a||d===h)return null;var y=et("recharts-sector",p),v=s-a,S=Xs(o,v,0,!0),x;return S>0&&Math.abs(d-h)<360?x=Rce({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(S,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):x=$6({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:h}),Q.createElement("path",t1({},We(n,!0),{className:y,d:x,role:"img"}))};function Ef(t){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(t)}function n1(){return n1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n1.apply(this,arguments)}function pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pk(Object(n),!0).forEach(function(r){Cce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cce(t,e,n){return e=Lce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lce(t){var e=Dce(t,"string");return Ef(e)=="symbol"?e:e+""}function Dce(t,e){if(Ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yk={curveBasisClosed:Xte,curveBasisOpen:Qte,curveBasis:Wte,curveBumpX:Mte,curveBumpY:kte,curveLinearClosed:Zte,curveLinear:sg,curveMonotoneX:Jte,curveMonotoneY:ene,curveNatural:tne,curveStep:nne,curveStepAfter:ine,curveStepBefore:rne},jh=function(e){return e.x===+e.x&&e.y===+e.y},xc=function(e){return e.x},bc=function(e){return e.y},Ice=function(e,n){if(Ge(e))return e;var r="curve".concat(ig(e));return(r==="curveMonotone"||r==="curveBump")&&n?yk["".concat(r).concat(n==="vertical"?"Y":"X")]:yk[r]||sg},Pce=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=Ice(r,o),h=u?a.filter(function(S){return jh(S)}):a,p;if(Array.isArray(s)){var y=u?s.filter(function(S){return jh(S)}):s,v=h.map(function(S,x){return gk(gk({},S),{},{base:y[x]})});return o==="vertical"?p=Oh().y(bc).x1(xc).x0(function(S){return S.base.x}):p=Oh().x(xc).y1(bc).y0(function(S){return S.base.y}),p.defined(jh).curve(d),p(v)}return o==="vertical"&&ve(s)?p=Oh().y(bc).x1(xc).x0(s):ve(s)?p=Oh().x(xc).y1(bc).y0(s):p=z5().x(xc).y(bc),p.defined(jh).curve(d),p(h)},r1=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?Pce(e):i;return Q.createElement("path",n1({},We(e,!1),Nm(e),{className:et("recharts-curve",n),d:s,ref:a}))},KS={exports:{}},YS,vk;function Nce(){if(vk)return YS;vk=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return YS=t,YS}var WS,xk;function Mce(){if(xk)return WS;xk=1;var t=Nce();function e(){}function n(){}return n.resetWarningCache=e,WS=function(){function r(s,o,c,u,d,h){if(h!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},WS}var bk;function kce(){return bk||(bk=1,KS.exports=Mce()()),KS.exports}var jce=kce();const at=xt(jce);var Uce=Object.getOwnPropertyNames,Bce=Object.getOwnPropertySymbols,Fce=Object.prototype.hasOwnProperty;function Sk(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function Uh(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);var c=t(n,r,i);return a.delete(n),a.delete(r),c}}function Ek(t){return Uce(t).concat(Bce(t))}var $ce=Object.hasOwn||function(t,e){return Fce.call(t,e)};function io(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Gce="__v",Vce="__o",qce="_owner",Tk=Object.getOwnPropertyDescriptor,Ak=Object.keys;function Hce(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function zce(t,e){return io(t.getTime(),e.getTime())}function Kce(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Yce(t,e){return t===e}function wk(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),s,o,c=0;(s=a.next())&&!s.done;){for(var u=e.entries(),d=!1,h=0;(o=u.next())&&!o.done;){if(i[h]){h++;continue}var p=s.value,y=o.value;if(n.equals(p[0],y[0],c,h,t,e,n)&&n.equals(p[1],y[1],p[0],y[0],t,e,n)){d=i[h]=!0;break}h++}if(!d)return!1;c++}return!0}var Wce=io;function Xce(t,e,n){var r=Ak(t),i=r.length;if(Ak(e).length!==i)return!1;for(;i-- >0;)if(!V6(t,e,n,r[i]))return!1;return!0}function Sc(t,e,n){var r=Ek(t),i=r.length;if(Ek(e).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=r[i],!V6(t,e,n,a)||(s=Tk(t,a),o=Tk(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function Qce(t,e){return io(t.valueOf(),e.valueOf())}function Zce(t,e){return t.source===e.source&&t.flags===e.flags}function _k(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),s,o;(s=a.next())&&!s.done;){for(var c=e.values(),u=!1,d=0;(o=c.next())&&!o.done;){if(!i[d]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function Jce(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function efe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function V6(t,e,n,r){return(r===qce||r===Vce||r===Gce)&&(t.$$typeof||e.$$typeof)?!0:$ce(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var tfe="[object Arguments]",nfe="[object Boolean]",rfe="[object Date]",ife="[object Error]",afe="[object Map]",sfe="[object Number]",ofe="[object Object]",lfe="[object RegExp]",ufe="[object Set]",cfe="[object String]",ffe="[object URL]",dfe=Array.isArray,Rk=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Ok=Object.assign,hfe=Object.prototype.toString.call.bind(Object.prototype.toString);function mfe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,s=t.areNumbersEqual,o=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,h=t.areTypedArraysEqual,p=t.areUrlsEqual;return function(v,S,x){if(v===S)return!0;if(v==null||S==null)return!1;var T=typeof v;if(T!==typeof S)return!1;if(T!=="object")return T==="number"?s(v,S,x):T==="function"?i(v,S,x):!1;var _=v.constructor;if(_!==S.constructor)return!1;if(_===Object)return o(v,S,x);if(dfe(v))return e(v,S,x);if(Rk!=null&&Rk(v))return h(v,S,x);if(_===Date)return n(v,S,x);if(_===RegExp)return u(v,S,x);if(_===Map)return a(v,S,x);if(_===Set)return d(v,S,x);var A=hfe(v);return A===rfe?n(v,S,x):A===lfe?u(v,S,x):A===afe?a(v,S,x):A===ufe?d(v,S,x):A===ofe?typeof v.then!="function"&&typeof S.then!="function"&&o(v,S,x):A===ffe?p(v,S,x):A===ife?r(v,S,x):A===tfe?o(v,S,x):A===nfe||A===sfe||A===cfe?c(v,S,x):!1}}function pfe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Sc:Hce,areDatesEqual:zce,areErrorsEqual:Kce,areFunctionsEqual:Yce,areMapsEqual:r?Sk(wk,Sc):wk,areNumbersEqual:Wce,areObjectsEqual:r?Sc:Xce,arePrimitiveWrappersEqual:Qce,areRegExpsEqual:Zce,areSetsEqual:r?Sk(_k,Sc):_k,areTypedArraysEqual:r?Sc:Jce,areUrlsEqual:efe};if(n&&(i=Ok({},i,n(i))),e){var a=Uh(i.areArraysEqual),s=Uh(i.areMapsEqual),o=Uh(i.areObjectsEqual),c=Uh(i.areSetsEqual);i=Ok({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:c})}return i}function gfe(t){return function(e,n,r,i,a,s,o){return t(e,n,o)}}function yfe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(c,u){var d=r(),h=d.cache,p=h===void 0?e?new WeakMap:void 0:h,y=d.meta;return n(c,u,{cache:p,equals:i,meta:y,strict:a})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,u){return n(c,u,s)}}var vfe=as();as({strict:!0});as({circular:!0});as({circular:!0,strict:!0});as({createInternalComparator:function(){return io}});as({strict:!0,createInternalComparator:function(){return io}});as({circular:!0,createInternalComparator:function(){return io}});as({circular:!0,createInternalComparator:function(){return io},strict:!0});function as(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,s=a===void 0?!1:a,o=pfe(t),c=mfe(o),u=r?r(c):gfe(c);return yfe({circular:n,comparator:c,createState:i,equals:u,strict:s})}function xfe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function Ck(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):xfe(i)};requestAnimationFrame(r)}function i1(t){"@babel/helpers - typeof";return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i1(t)}function bfe(t){return Afe(t)||Tfe(t)||Efe(t)||Sfe()}function Sfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Efe(t,e){if(t){if(typeof t=="string")return Lk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lk(t,e)}}function Lk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Afe(t){if(Array.isArray(t))return t}function wfe(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=bfe(s),c=o[0],u=o.slice(1);if(typeof c=="number"){Ck(i.bind(null,u),c);return}i(c),Ck(i.bind(null,u));return}i1(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Tf(t){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(t)}function Dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ik(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dk(Object(n),!0).forEach(function(r){q6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function q6(t,e,n){return e=_fe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _fe(t){var e=Rfe(t,"string");return Tf(e)==="symbol"?e:String(e)}function Rfe(t,e){if(Tf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ofe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},Cfe=function(e){return e},Lfe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Bc=function(e,n){return Object.keys(n).reduce(function(r,i){return Ik(Ik({},r),{},q6({},i,e(i,n[i])))},{})},Pk=function(e,n,r){return e.map(function(i){return"".concat(Lfe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Dfe(t,e){return Nfe(t)||Pfe(t,e)||H6(t,e)||Ife()}function Ife(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pfe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Nfe(t){if(Array.isArray(t))return t}function Mfe(t){return Ufe(t)||jfe(t)||H6(t)||kfe()}function kfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H6(t,e){if(t){if(typeof t=="string")return a1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a1(t,e)}}function jfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ufe(t){if(Array.isArray(t))return a1(t)}function a1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var up=1e-4,z6=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},K6=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},Nk=function(e,n){return function(r){var i=z6(e,n);return K6(i,r)}},Bfe=function(e,n){return function(r){var i=z6(e,n),a=[].concat(Mfe(i.map(function(s,o){return s*o}).slice(1)),[0]);return K6(a,r)}},Mk=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=Dfe(u,4);i=d[0],a=d[1],s=d[2],o=d[3]}}}var h=Nk(i,s),p=Nk(a,o),y=Bfe(i,s),v=function(T){return T>1?1:T<0?0:T},S=function(T){for(var _=T>1?1:T,A=_,O=0;O<8;++O){var R=h(A)-_,C=y(A);if(Math.abs(R-_)<up||C<up)return p(A);A=v(A-R/C)}return p(A)};return S.isStepper=!1,S},Ffe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,c=function(d,h,p){var y=-(d-h)*r,v=p*a,S=p+(y-v)*o/1e3,x=p*o/1e3+d;return Math.abs(x-h)<up&&Math.abs(S)<up?[h,0]:[x,S]};return c.isStepper=!0,c.dt=o,c},$fe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Mk(i);case"spring":return Ffe();default:if(i.split("(")[0]==="cubic-bezier")return Mk(i)}return typeof i=="function"?i:null};function Af(t){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(t)}function kk(t){return qfe(t)||Vfe(t)||Y6(t)||Gfe()}function Gfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qfe(t){if(Array.isArray(t))return o1(t)}function jk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jk(Object(n),!0).forEach(function(r){s1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function s1(t,e,n){return e=Hfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hfe(t){var e=zfe(t,"string");return Af(e)==="symbol"?e:String(e)}function zfe(t,e){if(Af(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Af(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kfe(t,e){return Xfe(t)||Wfe(t,e)||Y6(t,e)||Yfe()}function Yfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y6(t,e){if(t){if(typeof t=="string")return o1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o1(t,e)}}function o1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wfe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Xfe(t){if(Array.isArray(t))return t}var cp=function(e,n,r){return e+(n-e)*r},l1=function(e){var n=e.from,r=e.to;return n!==r},Qfe=function t(e,n,r){var i=Bc(function(a,s){if(l1(s)){var o=e(s.from,s.to,s.velocity),c=Kfe(o,2),u=c[0],d=c[1];return Tn(Tn({},s),{},{from:u,velocity:d})}return s},n);return r<1?Bc(function(a,s){return l1(s)?Tn(Tn({},s),{},{velocity:cp(s.velocity,i[a].velocity,r),from:cp(s.from,i[a].from,r)}):s},n):t(e,i,r-1)};const Zfe=function(t,e,n,r,i){var a=Ofe(t,e),s=a.reduce(function(x,T){return Tn(Tn({},x),{},s1({},T,[t[T],e[T]]))},{}),o=a.reduce(function(x,T){return Tn(Tn({},x),{},s1({},T,{from:t[T],velocity:0,to:e[T]}))},{}),c=-1,u,d,h=function(){return null},p=function(){return Bc(function(T,_){return _.from},o)},y=function(){return!Object.values(o).filter(l1).length},v=function(T){u||(u=T);var _=T-u,A=_/n.dt;o=Qfe(n,o,A),i(Tn(Tn(Tn({},t),e),p())),u=T,y()||(c=requestAnimationFrame(h))},S=function(T){d||(d=T);var _=(T-d)/r,A=Bc(function(R,C){return cp.apply(void 0,kk(C).concat([n(_)]))},s);if(i(Tn(Tn(Tn({},t),e),A)),_<1)c=requestAnimationFrame(h);else{var O=Bc(function(R,C){return cp.apply(void 0,kk(C).concat([n(1)]))},s);i(Tn(Tn(Tn({},t),e),O))}};return h=n.isStepper?v:S,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Ll(t){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ll(t)}var Jfe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function ede(t,e){if(t==null)return{};var n=tde(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tde(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function XS(t){return ade(t)||ide(t)||rde(t)||nde()}function nde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rde(t,e){if(t){if(typeof t=="string")return u1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u1(t,e)}}function ide(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ade(t){if(Array.isArray(t))return u1(t)}function u1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Uk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uk(Object(n),!0).forEach(function(r){Oc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oc(t,e,n){return e=W6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ode(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,W6(r.key),r)}}function lde(t,e,n){return e&&ode(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function W6(t){var e=ude(t,"string");return Ll(e)==="symbol"?e:String(e)}function ude(t,e){if(Ll(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ll(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c1(t,e)}function c1(t,e){return c1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},c1(t,e)}function fde(t){var e=dde();return function(){var r=fp(t),i;if(e){var a=fp(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return f1(this,i)}}function f1(t,e){if(e&&(Ll(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d1(t)}function d1(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fp(t){return fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fp(t)}var ua=function(t){cde(n,t);var e=fde(n);function n(r,i){var a;sde(this,n),a=e.call(this,r,i);var s=a.props,o=s.isActive,c=s.attributeName,u=s.from,d=s.to,h=s.steps,p=s.children,y=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(d1(a)),a.changeStyle=a.changeStyle.bind(d1(a)),!o||y<=0)return a.state={style:{}},typeof p=="function"&&(a.state={style:d}),f1(a);if(h&&h.length)a.state={style:h[0].style};else if(u){if(typeof p=="function")return a.state={style:u},f1(a);a.state={style:c?Oc({},c,u):u}}else a.state={style:{}};return a}return lde(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,d=a.to,h=a.from,p=this.state.style;if(o){if(!s){var y={style:c?Oc({},c,d):d};this.state&&p&&(c&&p[c]!==d||!c&&p!==d)&&this.setState(y);return}if(!(vfe(i.to,d)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var S=v||u?h:i.to;if(this.state&&p){var x={style:c?Oc({},c,S):S};(c&&p[c]!==S||!c&&p!==S)&&this.setState(x)}this.runAnimation(qr(qr({},this.props),{},{from:S,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,c=i.duration,u=i.easing,d=i.begin,h=i.onAnimationEnd,p=i.onAnimationStart,y=Zfe(s,o,$fe(u),c,this.changeStyle),v=function(){a.stopJSAnimation=y()};this.manager.start([p,d,v,c,h])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,c=i.onAnimationStart,u=s[0],d=u.style,h=u.duration,p=h===void 0?0:h,y=function(S,x,T){if(T===0)return S;var _=x.duration,A=x.easing,O=A===void 0?"ease":A,R=x.style,C=x.properties,L=x.onAnimationEnd,P=T>0?s[T-1]:x,N=C||Object.keys(R);if(typeof O=="function"||O==="spring")return[].concat(XS(S),[a.runJSAnimation.bind(a,{from:P.style,to:R,duration:_,easing:O}),_]);var k=Pk(N,_,O),M=qr(qr(qr({},P.style),R),{},{transition:k});return[].concat(XS(S),[M,_,L]).filter(Cfe)};return this.manager.start([c].concat(XS(s.reduce(y,[d,Math.max(p,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=wfe());var a=i.begin,s=i.duration,o=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,h=i.onAnimationEnd,p=i.steps,y=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof y=="function"||u==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var S=o?Oc({},o,c):c,x=Pk(Object.keys(S),s,u);v.start([d,a,qr(qr({},S),{},{transition:x}),s,h])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=ede(i,Jfe),u=B.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!o||u===0||s<=0)return a;var h=function(y){var v=y.props,S=v.style,x=S===void 0?{}:S,T=v.className,_=B.cloneElement(y,qr(qr({},c),{},{style:qr(qr({},x),d),className:T}));return _};return u===1?h(B.Children.only(a)):Q.createElement("div",null,B.Children.map(a,function(p){return h(p)}))}}]),n}(B.PureComponent);ua.displayName="Animate";ua.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ua.propTypes={from:at.oneOfType([at.object,at.string]),to:at.oneOfType([at.object,at.string]),attributeName:at.string,duration:at.number,begin:at.number,easing:at.oneOfType([at.string,at.func]),steps:at.arrayOf(at.shape({duration:at.number.isRequired,style:at.object.isRequired,easing:at.oneOfType([at.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),at.func]),properties:at.arrayOf("string"),onAnimationEnd:at.func})),children:at.oneOfType([at.node,at.func]),isActive:at.bool,canBegin:at.bool,onAnimationEnd:at.func,shouldReAnimate:at.bool,onAnimationStart:at.func,onAnimationReStart:at.func};function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}function dp(){return dp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dp.apply(this,arguments)}function hde(t,e){return yde(t)||gde(t,e)||pde(t,e)||mde()}function mde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pde(t,e){if(t){if(typeof t=="string")return Bk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bk(t,e)}}function Bk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function yde(t){if(Array.isArray(t))return t}function Fk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $k(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fk(Object(n),!0).forEach(function(r){vde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vde(t,e,n){return e=xde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xde(t){var e=bde(t,"string");return wf(e)=="symbol"?e:e+""}function bde(t,e){if(wf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gk=function(e,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(s>0&&a instanceof Array){for(var h=[0,0,0,0],p=0,y=4;p<y;p++)h[p]=a[p]>s?s:a[p];d="M".concat(e,",").concat(n+o*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+c*h[0],",").concat(n)),d+="L ".concat(e+r-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+o*h[1])),d+="L ".concat(e+r,",").concat(n+i-o*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-c*h[2],",").concat(n+i)),d+="L ".concat(e+c*h[3],",").concat(n+i),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-o*h[3])),d+="Z"}else if(s>0&&a===+a&&a>0){var v=Math.min(s,a);d="M ".concat(e,",").concat(n+o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+c*v,",").concat(n,`
            L `).concat(e+r-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r,",").concat(n+o*v,`
            L `).concat(e+r,",").concat(n+i-o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r-c*v,",").concat(n+i,`
            L `).concat(e+c*v,",").concat(n+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e,",").concat(n+i-o*v," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},Sde=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,s=n.y,o=n.width,c=n.height;if(Math.abs(o)>0&&Math.abs(c)>0){var u=Math.min(a,a+o),d=Math.max(a,a+o),h=Math.min(s,s+c),p=Math.max(s,s+c);return r>=u&&r<=d&&i>=h&&i<=p}return!1},Ede={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Fw=function(e){var n=$k($k({},Ede),e),r=B.useRef(),i=B.useState(-1),a=hde(i,2),s=a[0],o=a[1];B.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var O=r.current.getTotalLength();O&&o(O)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,p=n.radius,y=n.className,v=n.animationEasing,S=n.animationDuration,x=n.animationBegin,T=n.isAnimationActive,_=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var A=et("recharts-rectangle",y);return _?Q.createElement(ua,{canBegin:s>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:S,animationEasing:v,isActive:_},function(O){var R=O.width,C=O.height,L=O.x,P=O.y;return Q.createElement(ua,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:S,isActive:T,easing:v},Q.createElement("path",dp({},We(n,!0),{className:A,d:Gk(L,P,R,C,p),ref:r})))}):Q.createElement("path",dp({},We(n,!0),{className:A,d:Gk(c,u,d,h,p)}))};function h1(){return h1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h1.apply(this,arguments)}var $w=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,s=et("recharts-dot",a);return n===+n&&r===+r&&i===+i?Q.createElement("circle",h1({},We(e,!1),Nm(e),{className:s,cx:n,cy:r,r:i})):null};function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}var Tde=["x","y","top","left","width","height","className"];function m1(){return m1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m1.apply(this,arguments)}function Vk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ade(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vk(Object(n),!0).forEach(function(r){wde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wde(t,e,n){return e=_de(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _de(t){var e=Rde(t,"string");return _f(e)=="symbol"?e:e+""}function Rde(t,e){if(_f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ode(t,e){if(t==null)return{};var n=Cde(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Lde=function(e,n,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},Dde=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,c=e.left,u=c===void 0?0:c,d=e.width,h=d===void 0?0:d,p=e.height,y=p===void 0?0:p,v=e.className,S=Ode(e,Tde),x=Ade({x:r,y:a,top:o,left:u,width:h,height:y},S);return!ve(r)||!ve(a)||!ve(h)||!ve(y)||!ve(o)||!ve(u)?null:Q.createElement("path",m1({},We(x,!0),{className:et("recharts-cross",v),d:Lde(r,a,h,y,o,u)}))},QS,qk;function Ide(){if(qk)return QS;qk=1;var t=p4(),e=t(Object.getPrototypeOf,Object);return QS=e,QS}var ZS,Hk;function Pde(){if(Hk)return ZS;Hk=1;var t=da(),e=Ide(),n=ha(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,c=s.call(Object);function u(d){if(!n(d)||t(d)!=r)return!1;var h=e(d);if(h===null)return!0;var p=o.call(h,"constructor")&&h.constructor;return typeof p=="function"&&p instanceof p&&s.call(p)==c}return ZS=u,ZS}var Nde=Pde();const Mde=xt(Nde);var JS,zk;function kde(){if(zk)return JS;zk=1;var t=da(),e=ha(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return JS=r,JS}var jde=kde();const Ude=xt(jde);function Rf(t){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(t)}function hp(){return hp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hp.apply(this,arguments)}function Bde(t,e){return Vde(t)||Gde(t,e)||$de(t,e)||Fde()}function Fde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $de(t,e){if(t){if(typeof t=="string")return Kk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kk(t,e)}}function Kk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Vde(t){if(Array.isArray(t))return t}function Yk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yk(Object(n),!0).forEach(function(r){qde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qde(t,e,n){return e=Hde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hde(t){var e=zde(t,"string");return Rf(e)=="symbol"?e:e+""}function zde(t,e){if(Rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xk=function(e,n,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-s/2,",").concat(n+a),o+="L ".concat(e+r-s/2-i,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},Kde={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Yde=function(e){var n=Wk(Wk({},Kde),e),r=B.useRef(),i=B.useState(-1),a=Bde(i,2),s=a[0],o=a[1];B.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&o(A)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,p=n.height,y=n.className,v=n.animationEasing,S=n.animationDuration,x=n.animationBegin,T=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||p!==+p||d===0&&h===0||p===0)return null;var _=et("recharts-trapezoid",y);return T?Q.createElement(ua,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:p,x:c,y:u},duration:S,animationEasing:v,isActive:T},function(A){var O=A.upperWidth,R=A.lowerWidth,C=A.height,L=A.x,P=A.y;return Q.createElement(ua,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:S,easing:v},Q.createElement("path",hp({},We(n,!0),{className:_,d:Xk(L,P,O,R,C),ref:r})))}):Q.createElement("g",null,Q.createElement("path",hp({},We(n,!0),{className:_,d:Xk(c,u,d,h,p)})))},Wde=["option","shapeType","propTransformer","activeClassName","isActive"];function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}function Xde(t,e){if(t==null)return{};var n=Qde(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Qde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Qk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qk(Object(n),!0).forEach(function(r){Zde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zde(t,e,n){return e=Jde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jde(t){var e=ehe(t,"string");return Of(e)=="symbol"?e:e+""}function ehe(t,e){if(Of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function the(t,e){return mp(mp({},e),t)}function nhe(t,e){return t==="symbols"}function Zk(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Q.createElement(Fw,n);case"trapezoid":return Q.createElement(Yde,n);case"sector":return Q.createElement(G6,n);case"symbols":if(nhe(e))return Q.createElement(aw,n);break;default:return null}}function rhe(t){return B.isValidElement(t)?t.props:t}function ihe(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?the:r,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,c=Xde(t,Wde),u;if(B.isValidElement(e))u=B.cloneElement(e,mp(mp({},c),rhe(e)));else if(Ge(e))u=e(c);else if(Mde(e)&&!Ude(e)){var d=i(e,c);u=Q.createElement(Zk,{shapeType:n,elementProps:d})}else{var h=c;u=Q.createElement(Zk,{shapeType:n,elementProps:h})}return o?Q.createElement($t,{className:s},u):u}function Eg(t,e){return e!=null&&"trapezoids"in t.props}function Tg(t,e){return e!=null&&"sectors"in t.props}function Cf(t,e){return e!=null&&"points"in t.props}function ahe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function she(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function ohe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function lhe(t,e){var n;return Eg(t,e)?n=ahe:Tg(t,e)?n=she:Cf(t,e)&&(n=ohe),n}function uhe(t,e){var n;return Eg(t,e)?n="trapezoids":Tg(t,e)?n="sectors":Cf(t,e)&&(n="points"),n}function che(t,e){if(Eg(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Tg(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Cf(t,e)?e.payload:{}}function fhe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=uhe(n,e),a=che(n,e),s=r.filter(function(c,u){var d=xg(a,c),h=n.props[i].filter(function(v){var S=lhe(n,e);return S(v,e)}),p=n.props[i].indexOf(h[h.length-1]),y=u===p;return d&&y}),o=r.indexOf(s[s.length-1]);return o}var eE,Jk;function dhe(){if(Jk)return eE;Jk=1;var t=Math.ceil,e=Math.max;function n(r,i,a,s){for(var o=-1,c=e(t((i-r)/(a||1)),0),u=Array(c);c--;)u[s?c:++o]=r,r+=a;return u}return eE=n,eE}var tE,ej;function X6(){if(ej)return tE;ej=1;var t=D4(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*n}return i===i?i:0}return tE=r,tE}var nE,tj;function hhe(){if(tj)return nE;tj=1;var t=dhe(),e=cg(),n=X6();function r(i){return function(a,s,o){return o&&typeof o!="number"&&e(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),t(a,s,o,i)}}return nE=r,nE}var rE,nj;function mhe(){if(nj)return rE;nj=1;var t=hhe(),e=t();return rE=e,rE}var phe=mhe();const pp=xt(phe);function Lf(t){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lf(t)}function rj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ij(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rj(Object(n),!0).forEach(function(r){Q6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q6(t,e,n){return e=ghe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ghe(t){var e=yhe(t,"string");return Lf(e)=="symbol"?e:e+""}function yhe(t,e){if(Lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vhe=["Webkit","Moz","O","ms"],xhe=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=vhe.reduce(function(a,s){return ij(ij({},a),{},Q6({},s+r,n))},{});return i[e]=n,i};function Dl(t){"@babel/helpers - typeof";return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dl(t)}function gp(){return gp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gp.apply(this,arguments)}function aj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aj(Object(n),!0).forEach(function(r){or(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J6(r.key),r)}}function She(t,e,n){return e&&sj(t.prototype,e),n&&sj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ehe(t,e,n){return e=yp(e),The(t,Z6()?Reflect.construct(e,n||[],yp(t).constructor):e.apply(t,n))}function The(t,e){if(e&&(Dl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ahe(t)}function Ahe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z6=function(){return!!t})()}function yp(t){return yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yp(t)}function whe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p1(t,e)}function p1(t,e){return p1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},p1(t,e)}function or(t,e,n){return e=J6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J6(t){var e=_he(t,"string");return Dl(e)=="symbol"?e:e+""}function _he(t,e){if(Dl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Rhe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=jc().domain(pp(0,c)).range([a,a+s-o]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},oj=function(e){return e.changedTouches&&!!e.changedTouches.length},Il=function(t){function e(n){var r;return bhe(this,e),r=Ehe(this,e,[n]),or(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),or(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),or(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s==null||s({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),or(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),or(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),or(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),or(r,"handleSlideDragStart",function(i){var a=oj(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return whe(e,t),She(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,c=o.gap,u=o.data,d=u.length-1,h=Math.min(i,a),p=Math.max(i,a),y=e.getIndexInRange(s,h),v=e.getIndexInRange(s,p);return{startIndex:y-y%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,c=dr(a[r],o,r);return Ge(s)?s(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,p=c.startIndex,y=c.endIndex,v=c.onChange,S=r.pageX-a;S>0?S=Math.min(S,u+d-h-o,u+d-h-s):S<0&&(S=Math.max(S,u-s,u-o));var x=this.getIndex({startX:s+S,endX:o+S});(x.startIndex!==p||x.endIndex!==y)&&v&&v(x),this.setState({startX:s+S,endX:o+S,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=oj(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,c=i.startX,u=this.state[s],d=this.props,h=d.x,p=d.width,y=d.travellerWidth,v=d.onChange,S=d.gap,x=d.data,T={startX:this.state.startX,endX:this.state.endX},_=r.pageX-a;_>0?_=Math.min(_,h+p-y-u):_<0&&(_=Math.max(_,h-u)),T[s]=u+_;var A=this.getIndex(T),O=A.startIndex,R=A.endIndex,C=function(){var P=x.length-1;return s==="startX"&&(o>c?O%S===0:R%S===0)||o<c&&R===P||s==="endX"&&(o>c?R%S===0:O%S===0)||o>c&&R===P};this.setState(or(or({},s,u+_),"brushMoveStartX",r.pageX),function(){v&&C()&&v(A)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,c=s.startX,u=s.endX,d=this.state[i],h=o.indexOf(d);if(h!==-1){var p=h+r;if(!(p===-1||p>=o.length)){var y=o[p];i==="startX"&&y>=u||i==="endX"&&y<=c||this.setState(or({},i,y),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.fill,u=r.stroke;return Q.createElement("rect",{stroke:u,fill:c,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.data,u=r.children,d=r.padding,h=B.Children.only(u);return h?Q.cloneElement(h,{x:i,y:a,width:s,height:o,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,p=c.traveller,y=c.ariaLabel,v=c.data,S=c.startIndex,x=c.endIndex,T=Math.max(r,this.props.x),_=iE(iE({},We(this.props,!1)),{},{x:T,y:u,width:d,height:h}),A=y||"Min value: ".concat((a=v[S])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=v[x])===null||s===void 0?void 0:s.name);return Q.createElement($t,{tabIndex:0,role:"slider","aria-label":A,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(R){["ArrowLeft","ArrowRight"].includes(R.key)&&(R.preventDefault(),R.stopPropagation(),o.handleTravellerMoveKeyboard(R.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,_))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,c=a.stroke,u=a.travellerWidth,d=Math.min(r,i)+u,h=Math.max(Math.abs(i-r)-u,0);return Q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:s,width:h,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,p=d.endX,y=5,v={pointerEvents:"none",fill:u};return Q.createElement($t,{className:"recharts-brush-texts"},Q.createElement(zm,gp({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,p)-y,y:s+o/2},v),this.getTextOfTick(i)),Q.createElement(zm,gp({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,p)+c+y,y:s+o/2},v),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,p=this.state,y=p.startX,v=p.endX,S=p.isTextActive,x=p.isSlideMoving,T=p.isTravellerMoving,_=p.isTravellerFocused;if(!i||!i.length||!ve(o)||!ve(c)||!ve(u)||!ve(d)||u<=0||d<=0)return null;var A=et("recharts-brush",a),O=Q.Children.count(s)===1,R=xhe("userSelect","none");return Q.createElement($t,{className:A,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:R},this.renderBackground(),O&&this.renderPanorama(),this.renderSlide(y,v),this.renderTravellerLayer(y,"startX"),this.renderTravellerLayer(v,"endX"),(S||x||T||_||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,c=r.stroke,u=Math.floor(a+o/2)-1;return Q.createElement(Q.Fragment,null,Q.createElement("rect",{x:i,y:a,width:s,height:o,fill:c,stroke:"none"}),Q.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),Q.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return Q.isValidElement(r)?a=Q.cloneElement(r,i):Ge(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return iE({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s},a&&a.length?Rhe({data:a,width:s,x:o,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([o,o+s-c]);var p=i.scale.domain().map(function(y){return i.scale(y)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var c=Math.floor((s+o)/2);r[c]>i?o=c:s=c}return i>=r[o]?o:s}}])}(B.PureComponent);or(Il,"displayName","Brush");or(Il,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var aE,lj;function Ohe(){if(lj)return aE;lj=1;var t=dw();function e(n,r){var i;return t(n,function(a,s,o){return i=r(a,s,o),!i}),!!i}return aE=e,aE}var sE,uj;function Che(){if(uj)return sE;uj=1;var t=l4(),e=ns(),n=Ohe(),r=Zn(),i=cg();function a(s,o,c){var u=r(s)?t:n;return c&&i(s,o,c)&&(o=void 0),u(s,e(o,3))}return sE=a,sE}var Lhe=Che();const Dhe=xt(Lhe);var Ti=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},oE,cj;function Ihe(){if(cj)return oE;cj=1;var t=_4();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return oE=e,oE}var lE,fj;function Phe(){if(fj)return lE;fj=1;var t=Ihe(),e=A4(),n=ns();function r(i,a){var s={};return a=n(a,3),e(i,function(o,c,u){t(s,c,a(o,c,u))}),s}return lE=r,lE}var Nhe=Phe();const Mhe=xt(Nhe);var uE,dj;function khe(){if(dj)return uE;dj=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}return uE=t,uE}var cE,hj;function jhe(){if(hj)return cE;hj=1;var t=dw();function e(n,r){var i=!0;return t(n,function(a,s,o){return i=!!r(a,s,o),i}),i}return cE=e,cE}var fE,mj;function Uhe(){if(mj)return fE;mj=1;var t=khe(),e=jhe(),n=ns(),r=Zn(),i=cg();function a(s,o,c){var u=r(s)?t:e;return c&&i(s,o,c)&&(o=void 0),u(s,n(o,3))}return fE=a,fE}var Bhe=Uhe();const e8=xt(Bhe);var Fhe=["x","y"];function Df(t){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Df(t)}function g1(){return g1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g1.apply(this,arguments)}function pj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ec(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pj(Object(n),!0).forEach(function(r){$he(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $he(t,e,n){return e=Ghe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ghe(t){var e=Vhe(t,"string");return Df(e)=="symbol"?e:e+""}function Vhe(t,e){if(Df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qhe(t,e){if(t==null)return{};var n=Hhe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zhe(t,e){var n=t.x,r=t.y,i=qhe(t,Fhe),a="".concat(n),s=parseInt(a,10),o="".concat(r),c=parseInt(o,10),u="".concat(e.height||i.height),d=parseInt(u,10),h="".concat(e.width||i.width),p=parseInt(h,10);return Ec(Ec(Ec(Ec(Ec({},e),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:p,name:e.name,radius:e.radius})}function gj(t){return Q.createElement(ihe,g1({shapeType:"rectangle",propTransformer:zhe,activeClassName:"recharts-active-bar"},t))}var Khe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=typeof r=="number";return a?e(r,i):(a||Zs(),n)}},Yhe=["value","background"],t8;function Pl(t){"@babel/helpers - typeof";return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pl(t)}function Whe(t,e){if(t==null)return{};var n=Xhe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vp(){return vp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vp.apply(this,arguments)}function yj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yj(Object(n),!0).forEach(function(r){za(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r8(r.key),r)}}function Zhe(t,e,n){return e&&vj(t.prototype,e),n&&vj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jhe(t,e,n){return e=xp(e),eme(t,n8()?Reflect.construct(e,n||[],xp(t).constructor):e.apply(t,n))}function eme(t,e){if(e&&(Pl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tme(t)}function tme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n8=function(){return!!t})()}function xp(t){return xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xp(t)}function nme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y1(t,e)}function y1(t,e){return y1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},y1(t,e)}function za(t,e,n){return e=r8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r8(t){var e=rme(t,"string");return Pl(e)=="symbol"?e:e+""}function rme(t,e){if(Pl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var sd=function(t){function e(){var n;Qhe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Jhe(this,e,[].concat(i)),za(n,"state",{isAnimationFinished:!1}),za(n,"id",Jf("recharts-bar-")),za(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),za(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return nme(e,t),Zhe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,c=a.activeIndex,u=a.activeBar,d=We(this.props,!1);return r&&r.map(function(h,p){var y=p===c,v=y?u:s,S=Kt(Kt(Kt({},d),h),{},{isActive:y,option:v,index:p,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Q.createElement($t,vp({className:"recharts-bar-rectangle"},Mm(i.props,h,p),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(p)}),Q.createElement(gj,S))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,h=i.animationId,p=this.state.prevData;return Q.createElement(ua,{begin:c,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var v=y.t,S=a.map(function(x,T){var _=p&&p[T];if(_){var A=Qr(_.x,x.x),O=Qr(_.y,x.y),R=Qr(_.width,x.width),C=Qr(_.height,x.height);return Kt(Kt({},x),{},{x:A(v),y:O(v),width:R(v),height:C(v)})}if(s==="horizontal"){var L=Qr(0,x.height),P=L(v);return Kt(Kt({},x),{},{y:x.y+x.height-P,height:P})}var N=Qr(0,x.width),k=N(v);return Kt(Kt({},x),{},{width:k})});return Q.createElement($t,null,r.renderRectanglesStatically(S))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!xg(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,c=We(this.props.background,!1);return a.map(function(u,d){u.value;var h=u.background,p=Whe(u,Yhe);if(!h)return null;var y=Kt(Kt(Kt(Kt(Kt({},p),{},{fill:"#eee"},h),c),Mm(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return Q.createElement(gj,vp({key:"background-bar-".concat(d),option:r.props.background,isActive:d===o},y))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=Pr(d,ad);if(!h)return null;var p=u==="vertical"?s[0].height/2:s[0].width/2,y=function(x,T){var _=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:_,errorVal:dr(x,T)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Q.createElement($t,v,h.map(function(S){return Q.cloneElement(S,{key:"error-bar-".concat(i,"-").concat(S.props.dataKey),data:s,xAxis:o,yAxis:c,layout:u,offset:p,dataPointFormatter:y})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,p=r.height,y=r.isAnimationActive,v=r.background,S=r.id;if(i||!a||!a.length)return null;var x=this.state.isAnimationFinished,T=et("recharts-bar",s),_=o&&o.allowDataOverflow,A=c&&c.allowDataOverflow,O=_||A,R=Ye(S)?this.id:S;return Q.createElement($t,{className:T},_||A?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(R)},Q.createElement("rect",{x:_?u:u-h/2,y:A?d:d-p/2,width:_?h:h*2,height:A?p:p*2}))):null,Q.createElement($t,{className:"recharts-bar-rectangles",clipPath:O?"url(#clipPath-".concat(R,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(O,R),(!y||x)&&Ya.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(B.PureComponent);t8=sd;za(sd,"displayName","Bar");za(sd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!au.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});za(sd,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,p=t.offset,y=Eue(r,n);if(!y)return null;var v=e.layout,S=n.type.defaultProps,x=S!==void 0?Kt(Kt({},S),n.props):n.props,T=x.dataKey,_=x.children,A=x.minPointSize,O=v==="horizontal"?s:a,R=u?O.scale.domain():null,C=Lue({numericAxis:O}),L=Pr(_,P4),P=h.map(function(N,k){var M,G,K,W,Y,j;u?M=Tue(u[d+k],R):(M=dr(N,T),Array.isArray(M)||(M=[C,M]));var $=Khe(A,t8.defaultProps.minPointSize)(M[1],k);if(v==="horizontal"){var q,Z=[s.scale(M[0]),s.scale(M[1])],F=Z[0],V=Z[1];G=tk({axis:a,ticks:o,bandSize:i,offset:y.offset,entry:N,index:k}),K=(q=V??F)!==null&&q!==void 0?q:void 0,W=y.size;var H=F-V;if(Y=Number.isNaN(H)?0:H,j={x:G,y:s.y,width:W,height:s.height},Math.abs($)>0&&Math.abs(Y)<Math.abs($)){var te=Jr(Y||$)*(Math.abs($)-Math.abs(Y));K-=te,Y+=te}}else{var ce=[a.scale(M[0]),a.scale(M[1])],ye=ce[0],ge=ce[1];if(G=ye,K=tk({axis:s,ticks:c,bandSize:i,offset:y.offset,entry:N,index:k}),W=ge-ye,Y=y.size,j={x:a.x,y:K,width:a.width,height:Y},Math.abs($)>0&&Math.abs(W)<Math.abs($)){var Me=Jr(W||$)*(Math.abs($)-Math.abs(W));W+=Me}}return Kt(Kt(Kt({},N),{},{x:G,y:K,width:W,height:Y,value:u?M:M[1],payload:N,background:j},L&&L[k]&&L[k].props),{},{tooltipPayload:[B6(n,N)],tooltipPosition:{x:G+W/2,y:K+Y/2}})});return Kt({data:P,layout:v},p)});function If(t){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(t)}function ime(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i8(r.key),r)}}function ame(t,e,n){return e&&xj(t.prototype,e),n&&xj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bj(Object(n),!0).forEach(function(r){Ag(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ag(t,e,n){return e=i8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i8(t){var e=sme(t,"string");return If(e)=="symbol"?e:e+""}function sme(t,e){if(If(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(If(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ome=function(e,n,r,i,a){var s=e.width,o=e.height,c=e.layout,u=e.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},p=!!lr(u,sd);return d.reduce(function(y,v){var S=n[v],x=S.orientation,T=S.domain,_=S.padding,A=_===void 0?{}:_,O=S.mirror,R=S.reversed,C="".concat(x).concat(O?"Mirror":""),L,P,N,k,M;if(S.type==="number"&&(S.padding==="gap"||S.padding==="no-gap")){var G=T[1]-T[0],K=1/0,W=S.categoricalDomain.sort(ate);if(W.forEach(function(ce,ye){ye>0&&(K=Math.min((ce||0)-(W[ye-1]||0),K))}),Number.isFinite(K)){var Y=K/G,j=S.layout==="vertical"?r.height:r.width;if(S.padding==="gap"&&(L=Y*j/2),S.padding==="no-gap"){var $=Xs(e.barCategoryGap,Y*j),q=Y*j/2;L=q-$-(q-$)/j*$}}}i==="xAxis"?P=[r.left+(A.left||0)+(L||0),r.left+r.width-(A.right||0)-(L||0)]:i==="yAxis"?P=c==="horizontal"?[r.top+r.height-(A.bottom||0),r.top+(A.top||0)]:[r.top+(A.top||0)+(L||0),r.top+r.height-(A.bottom||0)-(L||0)]:P=S.range,R&&(P=[P[1],P[0]]);var Z=bue(S,a,p),F=Z.scale,V=Z.realScaleType;F.domain(T).range(P),Sue(F);var H=Cue(F,Wr(Wr({},S),{},{realScaleType:V}));i==="xAxis"?(M=x==="top"&&!O||x==="bottom"&&O,N=r.left,k=h[C]-M*S.height):i==="yAxis"&&(M=x==="left"&&!O||x==="right"&&O,N=h[C]-M*S.width,k=r.top);var te=Wr(Wr(Wr({},S),H),{},{realScaleType:V,x:N,y:k,scale:F,width:i==="xAxis"?r.width:S.width,height:i==="yAxis"?r.height:S.height});return te.bandSize=sp(te,H),!S.hide&&i==="xAxis"?h[C]+=(M?-1:1)*te.height:S.hide||(h[C]+=(M?-1:1)*te.width),Wr(Wr({},y),{},Ag({},v,te))},{})},a8=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},lme=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return a8({x:n,y:r},{x:i,y:a})},s8=function(){function t(e){ime(this,t),this.scale=e}return ame(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();Ag(s8,"EPS",1e-4);var Gw=function(e){var n=Object.keys(e).reduce(function(r,i){return Wr(Wr({},r),{},Ag({},i,s8.create(e[i])))},{});return Wr(Wr({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return Mhe(i,function(c,u){return n[u].apply(c,{bandAware:s,position:o})})},isInRange:function(i){return e8(i,function(a,s){return n[s].isInRange(a)})}})};function ume(t){return(t%180+180)%180}var cme=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=ume(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},dE,Sj;function fme(){if(Sj)return dE;Sj=1;var t=ns(),e=ed(),n=lg();function r(i){return function(a,s,o){var c=Object(a);if(!e(a)){var u=t(s,3);a=n(a),s=function(h){return u(c[h],h,c)}}var d=i(a,s,o);return d>-1?c[u?a[d]:d]:void 0}}return dE=r,dE}var hE,Ej;function dme(){if(Ej)return hE;Ej=1;var t=X6();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return hE=e,hE}var mE,Tj;function hme(){if(Tj)return mE;Tj=1;var t=x4(),e=ns(),n=dme(),r=Math.max;function i(a,s,o){var c=a==null?0:a.length;if(!c)return-1;var u=o==null?0:n(o);return u<0&&(u=r(c+u,0)),t(a,e(s,3),u)}return mE=i,mE}var pE,Aj;function mme(){if(Aj)return pE;Aj=1;var t=fme(),e=hme(),n=t(e);return pE=n,pE}var pme=mme();const gme=xt(pme);var yme=M5();const vme=xt(yme);var xme=vme(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),Vw=B.createContext(void 0),qw=B.createContext(void 0),o8=B.createContext(void 0),l8=B.createContext({}),u8=B.createContext(void 0),c8=B.createContext(0),f8=B.createContext(0),wj=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=e.clipPathId,o=e.children,c=e.width,u=e.height,d=xme(a);return Q.createElement(Vw.Provider,{value:r},Q.createElement(qw.Provider,{value:i},Q.createElement(l8.Provider,{value:a},Q.createElement(o8.Provider,{value:d},Q.createElement(u8.Provider,{value:s},Q.createElement(c8.Provider,{value:u},Q.createElement(f8.Provider,{value:c},o)))))))},bme=function(){return B.useContext(u8)},d8=function(e){var n=B.useContext(Vw);n==null&&Zs();var r=n[e];return r==null&&Zs(),r},Sme=function(){var e=B.useContext(Vw);return Ha(e)},Eme=function(){var e=B.useContext(qw),n=gme(e,function(r){return e8(r.domain,Number.isFinite)});return n||Ha(e)},h8=function(e){var n=B.useContext(qw);n==null&&Zs();var r=n[e];return r==null&&Zs(),r},Tme=function(){var e=B.useContext(o8);return e},Ame=function(){return B.useContext(l8)},Hw=function(){return B.useContext(f8)},zw=function(){return B.useContext(c8)};function Nl(t){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nl(t)}function wme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p8(r.key),r)}}function Rme(t,e,n){return e&&_me(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ome(t,e,n){return e=bp(e),Cme(t,m8()?Reflect.construct(e,n||[],bp(t).constructor):e.apply(t,n))}function Cme(t,e){if(e&&(Nl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lme(t)}function Lme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m8=function(){return!!t})()}function bp(t){return bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bp(t)}function Dme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v1(t,e)}function v1(t,e){return v1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},v1(t,e)}function _j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_j(Object(n),!0).forEach(function(r){Kw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_j(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kw(t,e,n){return e=p8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p8(t){var e=Ime(t,"string");return Nl(e)=="symbol"?e:e+""}function Ime(t,e){if(Nl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Pme(t,e){return jme(t)||kme(t,e)||Mme(t,e)||Nme()}function Nme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mme(t,e){if(t){if(typeof t=="string")return Oj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oj(t,e)}}function Oj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kme(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function jme(t){if(Array.isArray(t))return t}function x1(){return x1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x1.apply(this,arguments)}var Ume=function(e,n){var r;return Q.isValidElement(e)?r=Q.cloneElement(e,n):Ge(e)?r=e(n):r=Q.createElement("line",x1({},n,{className:"recharts-reference-line-line"})),r},Bme=function(e,n,r,i,a,s,o,c,u){var d=a.x,h=a.y,p=a.width,y=a.height;if(r){var v=u.y,S=e.y.apply(v,{position:s});if(Ti(u,"discard")&&!e.y.isInRange(S))return null;var x=[{x:d+p,y:S},{x:d,y:S}];return c==="left"?x.reverse():x}if(n){var T=u.x,_=e.x.apply(T,{position:s});if(Ti(u,"discard")&&!e.x.isInRange(_))return null;var A=[{x:_,y:h+y},{x:_,y:h}];return o==="top"?A.reverse():A}if(i){var O=u.segment,R=O.map(function(C){return e.apply(C,{position:s})});return Ti(u,"discard")&&Dhe(R,function(C){return!e.isInRange(C)})?null:R}return null};function Fme(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,c=t.alwaysShow,u=bme(),d=d8(i),h=h8(a),p=Tme();if(!u||!p)return null;ta(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var y=Gw({x:d.scale,y:h.scale}),v=an(e),S=an(n),x=r&&r.length===2,T=Bme(y,v,S,x,p,t.position,d.orientation,h.orientation,t);if(!T)return null;var _=Pme(T,2),A=_[0],O=A.x,R=A.y,C=_[1],L=C.x,P=C.y,N=Ti(t,"hidden")?"url(#".concat(u,")"):void 0,k=Rj(Rj({clipPath:N},We(t,!0)),{},{x1:O,y1:R,x2:L,y2:P});return Q.createElement($t,{className:et("recharts-reference-line",o)},Ume(s,k),Pn.renderCallByParent(t,lme({x1:O,y1:R,x2:L,y2:P})))}var Yw=function(t){function e(){return wme(this,e),Ome(this,e,arguments)}return Dme(e,t),Rme(e,[{key:"render",value:function(){return Q.createElement(Fme,this.props)}}])}(Q.Component);Kw(Yw,"displayName","ReferenceLine");Kw(Yw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function b1(){return b1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b1.apply(this,arguments)}function Ml(t){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ml(t)}function Cj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cj(Object(n),!0).forEach(function(r){wg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gme(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y8(r.key),r)}}function Vme(t,e,n){return e&&Gme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qme(t,e,n){return e=Sp(e),Hme(t,g8()?Reflect.construct(e,n||[],Sp(t).constructor):e.apply(t,n))}function Hme(t,e){if(e&&(Ml(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zme(t)}function zme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g8=function(){return!!t})()}function Sp(t){return Sp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sp(t)}function Kme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S1(t,e)}function S1(t,e){return S1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},S1(t,e)}function wg(t,e,n){return e=y8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y8(t){var e=Yme(t,"string");return Ml(e)=="symbol"?e:e+""}function Yme(t,e){if(Ml(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ml(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Wme=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=Gw({x:i.scale,y:a.scale}),o=s.apply({x:n,y:r},{bandAware:!0});return Ti(e,"discard")&&!s.isInRange(o)?null:o},_g=function(t){function e(){return $me(this,e),qme(this,e,arguments)}return Kme(e,t),Vme(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,c=r.clipPathId,u=an(i),d=an(a);if(ta(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=Wme(this.props);if(!h)return null;var p=h.x,y=h.y,v=this.props,S=v.shape,x=v.className,T=Ti(this.props,"hidden")?"url(#".concat(c,")"):void 0,_=Lj(Lj({clipPath:T},We(this.props,!0)),{},{cx:p,cy:y});return Q.createElement($t,{className:et("recharts-reference-dot",x)},e.renderDot(S,_),Pn.renderCallByParent(this.props,{x:p-s,y:y-s,width:2*s,height:2*s}))}}])}(Q.Component);wg(_g,"displayName","ReferenceDot");wg(_g,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});wg(_g,"renderDot",function(t,e){var n;return Q.isValidElement(t)?n=Q.cloneElement(t,e):Ge(t)?n=t(e):n=Q.createElement($w,b1({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function E1(){return E1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E1.apply(this,arguments)}function kl(t){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kl(t)}function Dj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ij(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dj(Object(n),!0).forEach(function(r){Rg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qme(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x8(r.key),r)}}function Zme(t,e,n){return e&&Qme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jme(t,e,n){return e=Ep(e),epe(t,v8()?Reflect.construct(e,n||[],Ep(t).constructor):e.apply(t,n))}function epe(t,e){if(e&&(kl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tpe(t)}function tpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v8=function(){return!!t})()}function Ep(t){return Ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ep(t)}function npe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T1(t,e)}function T1(t,e){return T1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},T1(t,e)}function Rg(t,e,n){return e=x8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x8(t){var e=rpe(t,"string");return kl(e)=="symbol"?e:e+""}function rpe(t,e){if(kl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ipe=function(e,n,r,i,a){var s=a.x1,o=a.x2,c=a.y1,u=a.y2,d=a.xAxis,h=a.yAxis;if(!d||!h)return null;var p=Gw({x:d.scale,y:h.scale}),y={x:e?p.x.apply(s,{position:"start"}):p.x.rangeMin,y:r?p.y.apply(c,{position:"start"}):p.y.rangeMin},v={x:n?p.x.apply(o,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(u,{position:"end"}):p.y.rangeMax};return Ti(a,"discard")&&(!p.isInRange(y)||!p.isInRange(v))?null:a8(y,v)},Og=function(t){function e(){return Xme(this,e),Jme(this,e,arguments)}return npe(e,t),Zme(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;ta(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=an(i),p=an(a),y=an(s),v=an(o),S=this.props.shape;if(!h&&!p&&!y&&!v&&!S)return null;var x=ipe(h,p,y,v,this.props);if(!x&&!S)return null;var T=Ti(this.props,"hidden")?"url(#".concat(d,")"):void 0;return Q.createElement($t,{className:et("recharts-reference-area",c)},e.renderRect(S,Ij(Ij({clipPath:T},We(this.props,!0)),x)),Pn.renderCallByParent(this.props,x))}}])}(Q.Component);Rg(Og,"displayName","ReferenceArea");Rg(Og,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Rg(Og,"renderRect",function(t,e){var n;return Q.isValidElement(t)?n=Q.cloneElement(t,e):Ge(t)?n=t(e):n=Q.createElement(Fw,E1({},e,{className:"recharts-reference-area-rect"})),n});function b8(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function ape(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return cme(r,n)}function spe(t,e,n){var r=n==="width",i=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function Tp(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function ope(t,e){return b8(t,e+1)}function lpe(t,e,n,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,c=0,u=1,d=s,h=function(){var v=r==null?void 0:r[c];if(v===void 0)return{v:b8(r,u)};var S=c,x,T=function(){return x===void 0&&(x=n(v,S)),x},_=v.coordinate,A=c===0||Tp(t,_,T,d,o);A||(c=0,d=s,u+=1),A&&(d=_+t*(T()/2+i),c+=u)},p;u<=a.length;)if(p=h(),p)return p.v;return[]}function Pf(t){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pf(t)}function Pj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pj(Object(n),!0).forEach(function(r){upe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function upe(t,e,n){return e=cpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cpe(t){var e=fpe(t,"string");return Pf(e)=="symbol"?e:e+""}function fpe(t,e){if(Pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dpe(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,c=e.end,u=function(p){var y=a[p],v,S=function(){return v===void 0&&(v=n(y,p)),v};if(p===s-1){var x=t*(y.coordinate+t*S()/2-c);a[p]=y=Dn(Dn({},y),{},{tickCoord:x>0?y.coordinate-x*t:y.coordinate})}else a[p]=y=Dn(Dn({},y),{},{tickCoord:y.coordinate});var T=Tp(t,y.tickCoord,S,o,c);T&&(c=y.tickCoord-t*(S()/2+i),a[p]=Dn(Dn({},y),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return a}function hpe(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,c=e.start,u=e.end;if(a){var d=r[o-1],h=n(d,o-1),p=t*(d.coordinate+t*h/2-u);s[o-1]=d=Dn(Dn({},d),{},{tickCoord:p>0?d.coordinate-p*t:d.coordinate});var y=Tp(t,d.tickCoord,function(){return h},c,u);y&&(u=d.tickCoord-t*(h/2+i),s[o-1]=Dn(Dn({},d),{},{isShow:!0}))}for(var v=a?o-1:o,S=function(_){var A=s[_],O,R=function(){return O===void 0&&(O=n(A,_)),O};if(_===0){var C=t*(A.coordinate-t*R()/2-c);s[_]=A=Dn(Dn({},A),{},{tickCoord:C<0?A.coordinate-C*t:A.coordinate})}else s[_]=A=Dn(Dn({},A),{},{tickCoord:A.coordinate});var L=Tp(t,A.tickCoord,R,c,u);L&&(c=A.tickCoord+t*(R()/2+i),s[_]=Dn(Dn({},A),{},{isShow:!0}))},x=0;x<v;x++)S(x);return s}function Ww(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,h=t.angle;if(!i||!i.length||!r)return[];if(ve(c)||au.isSsr)return ope(i,typeof c=="number"&&ve(c)?c:0);var p=[],y=o==="top"||o==="bottom"?"width":"height",v=d&&y==="width"?kc(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},S=function(A,O){var R=Ge(u)?u(A.value,O):A.value;return y==="width"?ape(kc(R,{fontSize:e,letterSpacing:n}),v,h):kc(R,{fontSize:e,letterSpacing:n})[y]},x=i.length>=2?Jr(i[1].coordinate-i[0].coordinate):1,T=spe(a,x,y);return c==="equidistantPreserveStart"?lpe(x,T,S,i,s):(c==="preserveStart"||c==="preserveStartEnd"?p=hpe(x,T,S,i,s,c==="preserveStartEnd"):p=dpe(x,T,S,i,s),p.filter(function(_){return _.isShow}))}var mpe=["viewBox"],ppe=["viewBox"],gpe=["ticks"];function jl(t){"@babel/helpers - typeof";return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jl(t)}function ll(){return ll=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ll.apply(this,arguments)}function Nj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Un(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nj(Object(n),!0).forEach(function(r){Xw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gE(t,e){if(t==null)return{};var n=ype(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ype(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E8(r.key),r)}}function xpe(t,e,n){return e&&Mj(t.prototype,e),n&&Mj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bpe(t,e,n){return e=Ap(e),Spe(t,S8()?Reflect.construct(e,n||[],Ap(t).constructor):e.apply(t,n))}function Spe(t,e){if(e&&(jl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Epe(t)}function Epe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S8=function(){return!!t})()}function Ap(t){return Ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ap(t)}function Tpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A1(t,e)}function A1(t,e){return A1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},A1(t,e)}function Xw(t,e,n){return e=E8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E8(t){var e=Ape(t,"string");return jl(e)=="symbol"?e:e+""}function Ape(t,e){if(jl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var uu=function(t){function e(n){var r;return vpe(this,e),r=bpe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Tpe(e,t),xpe(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=gE(r,mpe),o=this.props,c=o.viewBox,u=gE(o,ppe);return!fl(a,c)||!fl(s,u)||!fl(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,c=i.height,u=i.orientation,d=i.tickSize,h=i.mirror,p=i.tickMargin,y,v,S,x,T,_,A=h?-1:1,O=r.tickSize||d,R=ve(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":y=v=r.coordinate,x=s+ +!h*c,S=x-A*O,_=S-A*p,T=R;break;case"left":S=x=r.coordinate,v=a+ +!h*o,y=v-A*O,T=y-A*p,_=R;break;case"right":S=x=r.coordinate,v=a+ +h*o,y=v+A*O,T=y+A*p,_=R;break;default:y=v=r.coordinate,x=s+ +h*c,S=x+A*O,_=S+A*p,T=R;break}return{line:{x1:y,y1:S,x2:v,y2:x},tick:{x:T,y:_}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=Un(Un(Un({},We(this.props,!1)),We(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);h=Un(Un({},h),{},{x1:i,y1:a+p*o,x2:i+s,y2:a+p*o})}else{var y=+(c==="left"&&!u||c==="right"&&u);h=Un(Un({},h),{},{x1:i+y*s,y1:a,x2:i+y*s,y2:a+o})}return Q.createElement("line",ll({},h,{className:et("recharts-cartesian-axis-line",Ir(d,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,c=o.tickLine,u=o.stroke,d=o.tick,h=o.tickFormatter,p=o.unit,y=Ww(Un(Un({},this.props),{},{ticks:r}),i,a),v=this.getTickTextAnchor(),S=this.getTickVerticalAnchor(),x=We(this.props,!1),T=We(d,!1),_=Un(Un({},x),{},{fill:"none"},We(c,!1)),A=y.map(function(O,R){var C=s.getTickLineCoord(O),L=C.line,P=C.tick,N=Un(Un(Un(Un({textAnchor:v,verticalAnchor:S},x),{},{stroke:"none",fill:u},T),P),{},{index:R,payload:O,visibleTicksCount:y.length,tickFormatter:h});return Q.createElement($t,ll({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},Mm(s.props,O,R)),c&&Q.createElement("line",ll({},_,L,{className:et("recharts-cartesian-axis-tick-line",Ir(c,"className"))})),d&&e.renderTickItem(d,N,"".concat(Ge(h)?h(O.value,R):O.value).concat(p||"")))});return Q.createElement("g",{className:"recharts-cartesian-axis-ticks"},A)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var h=this.props,p=h.ticks,y=gE(h,gpe),v=p;return Ge(c)&&(v=p&&p.length>0?c(this.props):c(y)),s<=0||o<=0||!v||!v.length?null:Q.createElement($t,{className:et("recharts-cartesian-axis",u),ref:function(x){r.layerReference=x}},a&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Pn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return Q.isValidElement(r)?s=Q.cloneElement(r,i):Ge(r)?s=r(i):s=Q.createElement(zm,ll({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(B.Component);Xw(uu,"displayName","CartesianAxis");Xw(uu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var wpe=["x1","y1","x2","y2","key"],_pe=["offset"];function Js(t){"@babel/helpers - typeof";return Js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Js(t)}function kj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kj(Object(n),!0).forEach(function(r){Rpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rpe(t,e,n){return e=Ope(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ope(t){var e=Cpe(t,"string");return Js(e)=="symbol"?e:e+""}function Cpe(t,e){if(Js(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Js(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $s(){return $s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$s.apply(this,arguments)}function jj(t,e){if(t==null)return{};var n=Lpe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Dpe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,c=e.ry;return Q.createElement("rect",{x:i,y:a,ry:c,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function T8(t,e){var n;if(Q.isValidElement(t))n=Q.cloneElement(t,e);else if(Ge(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,c=jj(e,wpe),u=We(c,!1);u.offset;var d=jj(u,_pe);n=Q.createElement("line",$s({},d,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function Ipe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,c){var u=Nn(Nn({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(c),index:c});return T8(i,u)});return Q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Ppe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,c){var u=Nn(Nn({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(c),index:c});return T8(i,u)});return Q.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Npe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,s=t.height,o=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=o.map(function(p){return Math.round(p+i-i)}).sort(function(p,y){return p-y});i!==d[0]&&d.unshift(0);var h=d.map(function(p,y){var v=!d[y+1],S=v?i+s-p:d[y+1]-p;if(S<=0)return null;var x=y%e.length;return Q.createElement("rect",{key:"react-".concat(y),y:p,x:r,height:S,width:a,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Mpe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(p){return Math.round(p+a-a)}).sort(function(p,y){return p-y});a!==d[0]&&d.unshift(0);var h=d.map(function(p,y){var v=!d[y+1],S=v?a+o-p:d[y+1]-p;if(S<=0)return null;var x=y%r.length;return Q.createElement("rect",{key:"react-".concat(y),x:p,y:s,width:S,height:c,stroke:"none",fill:r[x],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var kpe=function(e,n){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return j6(Ww(Nn(Nn(Nn({},uu.defaultProps),r),{},{ticks:Zi(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},jpe=function(e,n){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return j6(Ww(Nn(Nn(Nn({},uu.defaultProps),r),{},{ticks:Zi(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},Yo={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function A8(t){var e,n,r,i,a,s,o=Hw(),c=zw(),u=Ame(),d=Nn(Nn({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Yo.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Yo.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Yo.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Yo.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Yo.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:Yo.verticalFill,x:ve(t.x)?t.x:u.left,y:ve(t.y)?t.y:u.top,width:ve(t.width)?t.width:u.width,height:ve(t.height)?t.height:u.height}),h=d.x,p=d.y,y=d.width,v=d.height,S=d.syncWithTicks,x=d.horizontalValues,T=d.verticalValues,_=Sme(),A=Eme();if(!ve(y)||y<=0||!ve(v)||v<=0||!ve(h)||h!==+h||!ve(p)||p!==+p)return null;var O=d.verticalCoordinatesGenerator||kpe,R=d.horizontalCoordinatesGenerator||jpe,C=d.horizontalPoints,L=d.verticalPoints;if((!C||!C.length)&&Ge(R)){var P=x&&x.length,N=R({yAxis:A?Nn(Nn({},A),{},{ticks:P?x:A.ticks}):void 0,width:o,height:c,offset:u},P?!0:S);ta(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Js(N),"]")),Array.isArray(N)&&(C=N)}if((!L||!L.length)&&Ge(O)){var k=T&&T.length,M=O({xAxis:_?Nn(Nn({},_),{},{ticks:k?T:_.ticks}):void 0,width:o,height:c,offset:u},k?!0:S);ta(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Js(M),"]")),Array.isArray(M)&&(L=M)}return Q.createElement("g",{className:"recharts-cartesian-grid"},Q.createElement(Dpe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),Q.createElement(Ipe,$s({},d,{offset:u,horizontalPoints:C,xAxis:_,yAxis:A})),Q.createElement(Ppe,$s({},d,{offset:u,verticalPoints:L,xAxis:_,yAxis:A})),Q.createElement(Npe,$s({},d,{horizontalPoints:C})),Q.createElement(Mpe,$s({},d,{verticalPoints:L})))}A8.displayName="CartesianGrid";var Upe=["type","layout","connectNulls","ref"],Bpe=["key"];function Ul(t){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ul(t)}function Uj(t,e){if(t==null)return{};var n=Fpe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Fc(){return Fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fc.apply(this,arguments)}function Bj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bj(Object(n),!0).forEach(function(r){Xr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wo(t){return qpe(t)||Vpe(t)||Gpe(t)||$pe()}function $pe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gpe(t,e){if(t){if(typeof t=="string")return w1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w1(t,e)}}function Vpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qpe(t){if(Array.isArray(t))return w1(t)}function w1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_8(r.key),r)}}function zpe(t,e,n){return e&&Fj(t.prototype,e),n&&Fj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kpe(t,e,n){return e=wp(e),Ype(t,w8()?Reflect.construct(e,n||[],wp(t).constructor):e.apply(t,n))}function Ype(t,e){if(e&&(Ul(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wpe(t)}function Wpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w8=function(){return!!t})()}function wp(t){return wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wp(t)}function Xpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_1(t,e)}function _1(t,e){return _1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_1(t,e)}function Xr(t,e,n){return e=_8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _8(t){var e=Qpe(t,"string");return Ul(e)=="symbol"?e:e+""}function Qpe(t,e){if(Ul(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ul(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var od=function(t){function e(){var n;Hpe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Kpe(this,e,[].concat(i)),Xr(n,"state",{isAnimationFinished:!0,totalLength:0}),Xr(n,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),Xr(n,"getStrokeDasharray",function(s,o,c){var u=c.reduce(function(T,_){return T+_});if(!u)return n.generateSimpleStrokeDasharray(o,s);for(var d=Math.floor(s/u),h=s%u,p=o-s,y=[],v=0,S=0;v<c.length;S+=c[v],++v)if(S+c[v]>h){y=[].concat(Wo(c.slice(0,v)),[h-S]);break}var x=y.length%2===0?[0,p]:[p];return[].concat(Wo(e.repeat(c,d)),Wo(y),x).map(function(T){return"".concat(T,"px")}).join(", ")}),Xr(n,"id",Jf("recharts-line-")),Xr(n,"pathRef",function(s){n.mainCurve=s}),Xr(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Xr(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Xpe(e,t),zpe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,o=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=Pr(d,ad);if(!h)return null;var p=function(S,x){return{x:S.x,y:S.y,value:S.value,errorVal:dr(S.payload,x)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Q.createElement($t,y,h.map(function(v){return Q.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:s,xAxis:o,yAxis:c,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,u=o.points,d=o.dataKey,h=We(this.props,!1),p=We(c,!0),y=u.map(function(S,x){var T=sr(sr(sr({key:"dot-".concat(x),r:3},h),p),{},{index:x,cx:S.x,cy:S.y,value:S.value,dataKey:d,payload:S.payload,points:u});return e.renderDotItem(c,T)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return Q.createElement($t,Fc({className:"recharts-line-dots",key:"dots"},v),y)}},{key:"renderCurveStatically",value:function(r,i,a,s){var o=this.props,c=o.type,u=o.layout,d=o.connectNulls;o.ref;var h=Uj(o,Upe),p=sr(sr(sr({},We(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:c,layout:u,connectNulls:d});return Q.createElement(r1,Fc({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,c=s.strokeDasharray,u=s.isAnimationActive,d=s.animationBegin,h=s.animationDuration,p=s.animationEasing,y=s.animationId,v=s.animateNewValues,S=s.width,x=s.height,T=this.state,_=T.prevPoints,A=T.totalLength;return Q.createElement(ua,{begin:d,duration:h,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(O){var R=O.t;if(_){var C=_.length/o.length,L=o.map(function(G,K){var W=Math.floor(K*C);if(_[W]){var Y=_[W],j=Qr(Y.x,G.x),$=Qr(Y.y,G.y);return sr(sr({},G),{},{x:j(R),y:$(R)})}if(v){var q=Qr(S*2,G.x),Z=Qr(x/2,G.y);return sr(sr({},G),{},{x:q(R),y:Z(R)})}return sr(sr({},G),{},{x:G.x,y:G.y})});return a.renderCurveStatically(L,r,i)}var P=Qr(0,A),N=P(R),k;if(c){var M="".concat(c).split(/[,\s]+/gim).map(function(G){return parseFloat(G)});k=a.getStrokeDasharray(N,A,M)}else k=a.generateSimpleStrokeDasharray(A,N);return a.renderCurveStatically(o,r,i,{strokeDasharray:k})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,o=a.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return o&&s&&s.length&&(!u&&d>0||!xg(u,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,c=i.className,u=i.xAxis,d=i.yAxis,h=i.top,p=i.left,y=i.width,v=i.height,S=i.isAnimationActive,x=i.id;if(a||!o||!o.length)return null;var T=this.state.isAnimationFinished,_=o.length===1,A=et("recharts-line",c),O=u&&u.allowDataOverflow,R=d&&d.allowDataOverflow,C=O||R,L=Ye(x)?this.id:x,P=(r=We(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},N=P.r,k=N===void 0?3:N,M=P.strokeWidth,G=M===void 0?2:M,K=mte(s)?s:{},W=K.clipDot,Y=W===void 0?!0:W,j=k*2+G;return Q.createElement($t,{className:A},O||R?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(L)},Q.createElement("rect",{x:O?p:p-y/2,y:R?h:h-v/2,width:O?y:y*2,height:R?v:v*2})),!Y&&Q.createElement("clipPath",{id:"clipPath-dots-".concat(L)},Q.createElement("rect",{x:p-j/2,y:h-j/2,width:y+j,height:v+j}))):null,!_&&this.renderCurve(C,L),this.renderErrorBar(C,L),(_||s)&&this.renderDots(C,Y,L),(!S||T)&&Ya.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Wo(r),[0]):r,s=[],o=0;o<i;++o)s=[].concat(Wo(s),Wo(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(Q.isValidElement(r))a=Q.cloneElement(r,i);else if(Ge(r))a=r(i);else{var s=i.key,o=Uj(i,Bpe),c=et("recharts-line-dot",typeof r!="boolean"?r.className:"");a=Q.createElement($w,Fc({key:s},o,{className:c}))}return a}}])}(B.PureComponent);Xr(od,"displayName","Line");Xr(od,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!au.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Xr(od,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,s=t.dataKey,o=t.bandSize,c=t.displayedData,u=t.offset,d=e.layout,h=c.map(function(p,y){var v=dr(p,s);return d==="horizontal"?{x:ek({axis:n,ticks:i,bandSize:o,entry:p,index:y}),y:Ye(v)?null:r.scale(v),value:v,payload:p}:{x:Ye(v)?null:n.scale(v),y:ek({axis:r,ticks:a,bandSize:o,entry:p,index:y}),value:v,payload:p}});return sr({points:h,layout:d},u)});function Bl(t){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bl(t)}function Zpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C8(r.key),r)}}function ege(t,e,n){return e&&Jpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tge(t,e,n){return e=_p(e),nge(t,R8()?Reflect.construct(e,n||[],_p(t).constructor):e.apply(t,n))}function nge(t,e){if(e&&(Bl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rge(t)}function rge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R8=function(){return!!t})()}function _p(t){return _p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_p(t)}function ige(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R1(t,e)}function R1(t,e){return R1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},R1(t,e)}function O8(t,e,n){return e=C8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C8(t){var e=age(t,"string");return Bl(e)=="symbol"?e:e+""}function age(t,e){if(Bl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function O1(){return O1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O1.apply(this,arguments)}function sge(t){var e=t.xAxisId,n=Hw(),r=zw(),i=d8(e);return i==null?null:Q.createElement(uu,O1({},i,{className:et("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return Zi(s,!0)}}))}var Cg=function(t){function e(){return Zpe(this,e),tge(this,e,arguments)}return ige(e,t),ege(e,[{key:"render",value:function(){return Q.createElement(sge,this.props)}}])}(Q.Component);O8(Cg,"displayName","XAxis");O8(Cg,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Fl(t){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fl(t)}function oge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I8(r.key),r)}}function uge(t,e,n){return e&&lge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cge(t,e,n){return e=Rp(e),fge(t,L8()?Reflect.construct(e,n||[],Rp(t).constructor):e.apply(t,n))}function fge(t,e){if(e&&(Fl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dge(t)}function dge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L8=function(){return!!t})()}function Rp(t){return Rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rp(t)}function hge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C1(t,e)}function C1(t,e){return C1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},C1(t,e)}function D8(t,e,n){return e=I8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I8(t){var e=mge(t,"string");return Fl(e)=="symbol"?e:e+""}function mge(t,e){if(Fl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function L1(){return L1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L1.apply(this,arguments)}var pge=function(e){var n=e.yAxisId,r=Hw(),i=zw(),a=h8(n);return a==null?null:Q.createElement(uu,L1({},a,{className:et("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return Zi(o,!0)}}))},Lg=function(t){function e(){return oge(this,e),cge(this,e,arguments)}return hge(e,t),uge(e,[{key:"render",value:function(){return Q.createElement(pge,this.props)}}])}(Q.Component);D8(Lg,"displayName","YAxis");D8(Lg,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function $j(t){return xge(t)||vge(t)||yge(t)||gge()}function gge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yge(t,e){if(t){if(typeof t=="string")return D1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D1(t,e)}}function vge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xge(t){if(Array.isArray(t))return D1(t)}function D1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var I1=function(e,n,r,i,a){var s=Pr(e,Yw),o=Pr(e,_g),c=[].concat($j(s),$j(o)),u=Pr(e,Og),d="".concat(i,"Id"),h=i[0],p=n;if(c.length&&(p=c.reduce(function(S,x){if(x.props[d]===r&&Ti(x.props,"extendDomain")&&ve(x.props[h])){var T=x.props[h];return[Math.min(S[0],T),Math.max(S[1],T)]}return S},p)),u.length){var y="".concat(h,"1"),v="".concat(h,"2");p=u.reduce(function(S,x){if(x.props[d]===r&&Ti(x.props,"extendDomain")&&ve(x.props[y])&&ve(x.props[v])){var T=x.props[y],_=x.props[v];return[Math.min(S[0],T,_),Math.max(S[1],T,_)]}return S},p)}return a&&a.length&&(p=a.reduce(function(S,x){return ve(x)?[Math.min(S[0],x),Math.max(S[1],x)]:S},p)),p},yE={exports:{}},Gj;function bge(){return Gj||(Gj=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,h||c,p),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],y]:c._events[v].push(y):(c._events[v]=y,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,y=h.length,v=new Array(y);p<y;p++)v[p]=h[p].fn;return v},o.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,p,y,v){var S=n?n+u:u;if(!this._events[S])return!1;var x=this._events[S],T=arguments.length,_,A;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),T){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,h),!0;case 4:return x.fn.call(x.context,d,h,p),!0;case 5:return x.fn.call(x.context,d,h,p,y),!0;case 6:return x.fn.call(x.context,d,h,p,y,v),!0}for(A=1,_=new Array(T-1);A<T;A++)_[A-1]=arguments[A];x.fn.apply(x.context,_)}else{var O=x.length,R;for(A=0;A<O;A++)switch(x[A].once&&this.removeListener(u,x[A].fn,void 0,!0),T){case 1:x[A].fn.call(x[A].context);break;case 2:x[A].fn.call(x[A].context,d);break;case 3:x[A].fn.call(x[A].context,d,h);break;case 4:x[A].fn.call(x[A].context,d,h,p);break;default:if(!_)for(R=1,_=new Array(T-1);R<T;R++)_[R-1]=arguments[R];x[A].fn.apply(x[A].context,_)}}return!0},o.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,p){var y=n?n+u:u;if(!this._events[y])return this;if(!d)return s(this,y),this;var v=this._events[y];if(v.fn)v.fn===d&&(!p||v.once)&&(!h||v.context===h)&&s(this,y);else{for(var S=0,x=[],T=v.length;S<T;S++)(v[S].fn!==d||p&&!v[S].once||h&&v[S].context!==h)&&x.push(v[S]);x.length?this._events[y]=x.length===1?x[0]:x:s(this,y)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o}(yE)),yE.exports}var Sge=bge();const Ege=xt(Sge);var vE=new Ege,xE="recharts.syncMouseEvents";function Nf(t){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nf(t)}function Tge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Age(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P8(r.key),r)}}function wge(t,e,n){return e&&Age(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bE(t,e,n){return e=P8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P8(t){var e=_ge(t,"string");return Nf(e)=="symbol"?e:e+""}function _ge(t,e){if(Nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Rge=function(){function t(){Tge(this,t),bE(this,"activeIndex",0),bE(this,"coordinateList",[]),bE(this,"layout","horizontal")}return wge(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,o=s===void 0?null:s,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,p=n.mouseHandlerCallback,y=p===void 0?null:p;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=y??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=a+c+u,p=s+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:h,pageY:p})}}}])}();function Oge(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&ve(r)&&ve(i))return!0}return!1}function Cge(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function N8(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,s=wn(e,n,r,i),o=wn(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function Lge(t,e,n){var r,i,a,s;if(t==="horizontal")r=e.x,a=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,h=e.angle,p=wn(o,c,u,h),y=wn(o,c,d,h);r=p.x,i=p.y,a=y.x,s=y.y}else return N8(e);return[{x:r,y:i},{x:a,y:s}]}function Mf(t){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mf(t)}function Vj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vj(Object(n),!0).forEach(function(r){Dge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dge(t,e,n){return e=Ige(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ige(t){var e=Pge(t,"string");return Mf(e)=="symbol"?e:e+""}function Pge(t,e){if(Mf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nge(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,h=t.layout,p=t.chartName,y=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!y||!a||!s||p!=="ScatterChart"&&i!=="axis")return null;var v,S=r1;if(p==="ScatterChart")v=s,S=Dde;else if(p==="BarChart")v=Cge(h,s,c,d),S=Fw;else if(h==="radial"){var x=N8(s),T=x.cx,_=x.cy,A=x.radius,O=x.startAngle,R=x.endAngle;v={cx:T,cy:_,startAngle:O,endAngle:R,innerRadius:A,outerRadius:A},S=G6}else v={points:Lge(h,s,c)},S=r1;var C=Bh(Bh(Bh(Bh({stroke:"#ccc",pointerEvents:"none"},c),v),We(y,!1)),{},{payload:o,payloadIndex:u,className:et("recharts-tooltip-cursor",y.className)});return B.isValidElement(y)?B.cloneElement(y,C):B.createElement(S,C)}var Mge=["item"],kge=["children","className","width","height","style","compact","title","desc"];function $l(t){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$l(t)}function ul(){return ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ul.apply(this,arguments)}function qj(t,e){return Bge(t)||Uge(t,e)||k8(t,e)||jge()}function jge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Bge(t){if(Array.isArray(t))return t}function Hj(t,e){if(t==null)return{};var n=Fge(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j8(r.key),r)}}function Vge(t,e,n){return e&&Gge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qge(t,e,n){return e=Op(e),Hge(t,M8()?Reflect.construct(e,n||[],Op(t).constructor):e.apply(t,n))}function Hge(t,e){if(e&&($l(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zge(t)}function zge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M8=function(){return!!t})()}function Op(t){return Op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Op(t)}function Kge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P1(t,e)}function P1(t,e){return P1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},P1(t,e)}function Gl(t){return Xge(t)||Wge(t)||k8(t)||Yge()}function Yge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k8(t,e){if(t){if(typeof t=="string")return N1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N1(t,e)}}function Wge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xge(t){if(Array.isArray(t))return N1(t)}function N1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zj(Object(n),!0).forEach(function(r){De(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function De(t,e,n){return e=j8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j8(t){var e=Qge(t,"string");return $l(e)=="symbol"?e:e+""}function Qge(t,e){if($l(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($l(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zge={xAxis:["bottom","top"],yAxis:["left","right"]},Jge={width:"100%",height:"100%"},U8={x:0,y:0};function Fh(t){return t}var e0e=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},t0e=function(e,n,r,i){var a=n.find(function(d){return d&&d.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return le(le(le({},i),wn(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var c=a.coordinate,u=i.angle;return le(le(le({},i),wn(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return U8},Dg=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(o,c){var u=c.props.data;return u&&u.length?[].concat(Gl(o),Gl(u)):o},[]);return s.length>0?s:e&&e.length&&ve(i)&&ve(a)?e.slice(i,a+1):[]};function B8(t){return t==="number"?[0,"auto"]:void 0}var M1=function(e,n,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=Dg(n,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var y=h===void 0?o:h;p=Pm(y,s.dataKey,i)}else p=h&&h[r]||o[r];return p?[].concat(Gl(c),[B6(u,p)]):c},[])},Kj=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},s=e0e(a,r),o=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=mue(s,o,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,p=M1(e,n,d,h),y=t0e(r,o,d,a);return{activeTooltipIndex:d,activeLabel:h,activePayload:p,activeCoordinate:y}}return null},n0e=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,p=e.stackOffset,y=k6(d,a);return r.reduce(function(v,S){var x,T=S.type.defaultProps!==void 0?le(le({},S.type.defaultProps),S.props):S.props,_=T.type,A=T.dataKey,O=T.allowDataOverflow,R=T.allowDuplicatedCategory,C=T.scale,L=T.ticks,P=T.includeHidden,N=T[s];if(v[N])return v;var k=Dg(e.data,{graphicalItems:i.filter(function(H){var te,ce=s in H.props?H.props[s]:(te=H.type.defaultProps)===null||te===void 0?void 0:te[s];return ce===N}),dataStartIndex:c,dataEndIndex:u}),M=k.length,G,K,W;Oge(T.domain,O,_)&&(G=ZT(T.domain,null,O),y&&(_==="number"||C!=="auto")&&(W=Uc(k,A,"category")));var Y=B8(_);if(!G||G.length===0){var j,$=(j=T.domain)!==null&&j!==void 0?j:Y;if(A){if(G=Uc(k,A,_),_==="category"&&y){var q=ite(G);R&&q?(K=G,G=pp(0,M)):R||(G=ik($,G,S).reduce(function(H,te){return H.indexOf(te)>=0?H:[].concat(Gl(H),[te])},[]))}else if(_==="category")R?G=G.filter(function(H){return H!==""&&!Ye(H)}):G=ik($,G,S).reduce(function(H,te){return H.indexOf(te)>=0||te===""||Ye(te)?H:[].concat(Gl(H),[te])},[]);else if(_==="number"){var Z=xue(k,i.filter(function(H){var te,ce,ye=s in H.props?H.props[s]:(te=H.type.defaultProps)===null||te===void 0?void 0:te[s],ge="hide"in H.props?H.props.hide:(ce=H.type.defaultProps)===null||ce===void 0?void 0:ce.hide;return ye===N&&(P||!ge)}),A,a,d);Z&&(G=Z)}y&&(_==="number"||C!=="auto")&&(W=Uc(k,A,"category"))}else y?G=pp(0,M):o&&o[N]&&o[N].hasStack&&_==="number"?G=p==="expand"?[0,1]:U6(o[N].stackGroups,c,u):G=M6(k,i.filter(function(H){var te=s in H.props?H.props[s]:H.type.defaultProps[s],ce="hide"in H.props?H.props.hide:H.type.defaultProps.hide;return te===N&&(P||!ce)}),_,d,!0);if(_==="number")G=I1(h,G,N,a,L),$&&(G=ZT($,G,O));else if(_==="category"&&$){var F=$,V=G.every(function(H){return F.indexOf(H)>=0});V&&(G=F)}}return le(le({},v),{},De({},N,le(le({},T),{},{axisType:a,domain:G,categoricalDomain:W,duplicateDomain:K,originalDomain:(x=T.domain)!==null&&x!==void 0?x:Y,isCategorical:y,layout:d})))},{})},r0e=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,p=Dg(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),y=p.length,v=k6(d,a),S=-1;return r.reduce(function(x,T){var _=T.type.defaultProps!==void 0?le(le({},T.type.defaultProps),T.props):T.props,A=_[s],O=B8("number");if(!x[A]){S++;var R;return v?R=pp(0,y):o&&o[A]&&o[A].hasStack?(R=U6(o[A].stackGroups,c,u),R=I1(h,R,A,a)):(R=ZT(O,M6(p,r.filter(function(C){var L,P,N=s in C.props?C.props[s]:(L=C.type.defaultProps)===null||L===void 0?void 0:L[s],k="hide"in C.props?C.props.hide:(P=C.type.defaultProps)===null||P===void 0?void 0:P.hide;return N===A&&!k}),"number",d),i.defaultProps.allowDataOverflow),R=I1(h,R,A,a)),le(le({},x),{},De({},A,le(le({axisType:a},i.defaultProps),{},{hide:!0,orientation:Ir(Zge,"".concat(a,".").concat(S%2),null),domain:R,originalDomain:O,isCategorical:v,layout:d})))}return x},{})},i0e=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,h="".concat(i,"Id"),p=Pr(d,a),y={};return p&&p.length?y=n0e(e,{axes:p,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:o,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(y=r0e(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:o,dataStartIndex:c,dataEndIndex:u})),y},a0e=function(e){var n=Ha(e),r=Zi(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:hw(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:sp(n,r)}},Yj=function(e){var n=e.children,r=e.defaultShowTooltip,i=lr(n,Il),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},s0e=function(e){return!e||!e.length?!1:e.some(function(n){var r=ea(n&&n.type);return r&&r.indexOf("Bar")>=0})},Wj=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},o0e=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,c=o===void 0?{}:o,u=r.width,d=r.height,h=r.children,p=r.margin||{},y=lr(h,Il),v=lr(h,dl),S=Object.keys(c).reduce(function(R,C){var L=c[C],P=L.orientation;return!L.mirror&&!L.hide?le(le({},R),{},De({},P,R[P]+L.width)):R},{left:p.left||0,right:p.right||0}),x=Object.keys(s).reduce(function(R,C){var L=s[C],P=L.orientation;return!L.mirror&&!L.hide?le(le({},R),{},De({},P,Ir(R,"".concat(P))+L.height)):R},{top:p.top||0,bottom:p.bottom||0}),T=le(le({},x),S),_=T.bottom;y&&(T.bottom+=y.props.height||Il.defaultProps.height),v&&n&&(T=yue(T,i,r,n));var A=u-T.left-T.right,O=d-T.top-T.bottom;return le(le({brushBottom:_},T),{},{width:Math.max(A,0),height:Math.max(O,0)})},l0e=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},u0e=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,p=function(T,_){var A=_.graphicalItems,O=_.stackGroups,R=_.offset,C=_.updateId,L=_.dataStartIndex,P=_.dataEndIndex,N=T.barSize,k=T.layout,M=T.barGap,G=T.barCategoryGap,K=T.maxBarSize,W=Wj(k),Y=W.numericAxisName,j=W.cateAxisName,$=s0e(A),q=[];return A.forEach(function(Z,F){var V=Dg(T.data,{graphicalItems:[Z],dataStartIndex:L,dataEndIndex:P}),H=Z.type.defaultProps!==void 0?le(le({},Z.type.defaultProps),Z.props):Z.props,te=H.dataKey,ce=H.maxBarSize,ye=H["".concat(Y,"Id")],ge=H["".concat(j,"Id")],Me={},Re=c.reduce(function(Jt,vn){var Ri=_["".concat(vn.axisType,"Map")],Oi=H["".concat(vn.axisType,"Id")];Ri&&Ri[Oi]||vn.axisType==="zAxis"||Zs();var ss=Ri[Oi];return le(le({},Jt),{},De(De({},vn.axisType,ss),"".concat(vn.axisType,"Ticks"),Zi(ss)))},Me),pe=Re[j],Ae=Re["".concat(j,"Ticks")],Oe=O&&O[ye]&&O[ye].hasStack&&Due(Z,O[ye].stackGroups),me=ea(Z.type).indexOf("Bar")>=0,rt=sp(pe,Ae),Be=[],It=$&&pue({barSize:N,stackGroups:O,totalSize:l0e(Re,j)});if(me){var _e,je,Rt=Ye(ce)?K:ce,yn=(_e=(je=sp(pe,Ae,!0))!==null&&je!==void 0?je:Rt)!==null&&_e!==void 0?_e:0;Be=gue({barGap:M,barCategoryGap:G,bandSize:yn!==rt?yn:rt,sizeList:It[ge],maxBarSize:Rt}),yn!==rt&&(Be=Be.map(function(Jt){return le(le({},Jt),{},{position:le(le({},Jt.position),{},{offset:Jt.position.offset-yn/2})})}))}var Zt=Z&&Z.type&&Z.type.getComposedData;Zt&&q.push({props:le(le({},Zt(le(le({},Re),{},{displayedData:V,props:T,dataKey:te,item:Z,bandSize:rt,barPosition:Be,offset:R,stackedData:Oe,layout:k,dataStartIndex:L,dataEndIndex:P}))),{},De(De(De({key:Z.key||"item-".concat(F)},Y,Re[Y]),j,Re[j]),"animationId",C)),childIndex:yte(Z,T.children),item:Z})}),q},y=function(T,_){var A=T.props,O=T.dataStartIndex,R=T.dataEndIndex,C=T.updateId;if(!vP({props:A}))return null;var L=A.children,P=A.layout,N=A.stackOffset,k=A.data,M=A.reverseStackOrder,G=Wj(P),K=G.numericAxisName,W=G.cateAxisName,Y=Pr(L,r),j=Oue(k,Y,"".concat(K,"Id"),"".concat(W,"Id"),N,M),$=c.reduce(function(H,te){var ce="".concat(te.axisType,"Map");return le(le({},H),{},De({},ce,i0e(A,le(le({},te),{},{graphicalItems:Y,stackGroups:te.axisType===K&&j,dataStartIndex:O,dataEndIndex:R}))))},{}),q=o0e(le(le({},$),{},{props:A,graphicalItems:Y}),_==null?void 0:_.legendBBox);Object.keys($).forEach(function(H){$[H]=d(A,$[H],q,H.replace("Map",""),n)});var Z=$["".concat(W,"Map")],F=a0e(Z),V=p(A,le(le({},$),{},{dataStartIndex:O,dataEndIndex:R,updateId:C,graphicalItems:Y,stackGroups:j,offset:q}));return le(le({formattedGraphicalItems:V,graphicalItems:Y,offset:q,stackGroups:j},F),$)},v=function(x){function T(_){var A,O,R;return $ge(this,T),R=qge(this,T,[_]),De(R,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),De(R,"accessibilityManager",new Rge),De(R,"handleLegendBBoxUpdate",function(C){if(C){var L=R.state,P=L.dataStartIndex,N=L.dataEndIndex,k=L.updateId;R.setState(le({legendBBox:C},y({props:R.props,dataStartIndex:P,dataEndIndex:N,updateId:k},le(le({},R.state),{},{legendBBox:C}))))}}),De(R,"handleReceiveSyncEvent",function(C,L,P){if(R.props.syncId===C){if(P===R.eventEmitterSymbol&&typeof R.props.syncMethod!="function")return;R.applySyncEvent(L)}}),De(R,"handleBrushChange",function(C){var L=C.startIndex,P=C.endIndex;if(L!==R.state.dataStartIndex||P!==R.state.dataEndIndex){var N=R.state.updateId;R.setState(function(){return le({dataStartIndex:L,dataEndIndex:P},y({props:R.props,dataStartIndex:L,dataEndIndex:P,updateId:N},R.state))}),R.triggerSyncEvent({dataStartIndex:L,dataEndIndex:P})}}),De(R,"handleMouseEnter",function(C){var L=R.getMouseInfo(C);if(L){var P=le(le({},L),{},{isTooltipActive:!0});R.setState(P),R.triggerSyncEvent(P);var N=R.props.onMouseEnter;Ge(N)&&N(P,C)}}),De(R,"triggeredAfterMouseMove",function(C){var L=R.getMouseInfo(C),P=L?le(le({},L),{},{isTooltipActive:!0}):{isTooltipActive:!1};R.setState(P),R.triggerSyncEvent(P);var N=R.props.onMouseMove;Ge(N)&&N(P,C)}),De(R,"handleItemMouseEnter",function(C){R.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),De(R,"handleItemMouseLeave",function(){R.setState(function(){return{isTooltipActive:!1}})}),De(R,"handleMouseMove",function(C){C.persist(),R.throttleTriggeredAfterMouseMove(C)}),De(R,"handleMouseLeave",function(C){R.throttleTriggeredAfterMouseMove.cancel();var L={isTooltipActive:!1};R.setState(L),R.triggerSyncEvent(L);var P=R.props.onMouseLeave;Ge(P)&&P(L,C)}),De(R,"handleOuterEvent",function(C){var L=gte(C),P=Ir(R.props,"".concat(L));if(L&&Ge(P)){var N,k;/.*touch.*/i.test(L)?k=R.getMouseInfo(C.changedTouches[0]):k=R.getMouseInfo(C),P((N=k)!==null&&N!==void 0?N:{},C)}}),De(R,"handleClick",function(C){var L=R.getMouseInfo(C);if(L){var P=le(le({},L),{},{isTooltipActive:!0});R.setState(P),R.triggerSyncEvent(P);var N=R.props.onClick;Ge(N)&&N(P,C)}}),De(R,"handleMouseDown",function(C){var L=R.props.onMouseDown;if(Ge(L)){var P=R.getMouseInfo(C);L(P,C)}}),De(R,"handleMouseUp",function(C){var L=R.props.onMouseUp;if(Ge(L)){var P=R.getMouseInfo(C);L(P,C)}}),De(R,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&R.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),De(R,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&R.handleMouseDown(C.changedTouches[0])}),De(R,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&R.handleMouseUp(C.changedTouches[0])}),De(R,"handleDoubleClick",function(C){var L=R.props.onDoubleClick;if(Ge(L)){var P=R.getMouseInfo(C);L(P,C)}}),De(R,"handleContextMenu",function(C){var L=R.props.onContextMenu;if(Ge(L)){var P=R.getMouseInfo(C);L(P,C)}}),De(R,"triggerSyncEvent",function(C){R.props.syncId!==void 0&&vE.emit(xE,R.props.syncId,C,R.eventEmitterSymbol)}),De(R,"applySyncEvent",function(C){var L=R.props,P=L.layout,N=L.syncMethod,k=R.state.updateId,M=C.dataStartIndex,G=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)R.setState(le({dataStartIndex:M,dataEndIndex:G},y({props:R.props,dataStartIndex:M,dataEndIndex:G,updateId:k},R.state)));else if(C.activeTooltipIndex!==void 0){var K=C.chartX,W=C.chartY,Y=C.activeTooltipIndex,j=R.state,$=j.offset,q=j.tooltipTicks;if(!$)return;if(typeof N=="function")Y=N(q,C);else if(N==="value"){Y=-1;for(var Z=0;Z<q.length;Z++)if(q[Z].value===C.activeLabel){Y=Z;break}}var F=le(le({},$),{},{x:$.left,y:$.top}),V=Math.min(K,F.x+F.width),H=Math.min(W,F.y+F.height),te=q[Y]&&q[Y].value,ce=M1(R.state,R.props.data,Y),ye=q[Y]?{x:P==="horizontal"?q[Y].coordinate:V,y:P==="horizontal"?H:q[Y].coordinate}:U8;R.setState(le(le({},C),{},{activeLabel:te,activeCoordinate:ye,activePayload:ce,activeTooltipIndex:Y}))}else R.setState(C)}),De(R,"renderCursor",function(C){var L,P=R.state,N=P.isTooltipActive,k=P.activeCoordinate,M=P.activePayload,G=P.offset,K=P.activeTooltipIndex,W=P.tooltipAxisBandSize,Y=R.getTooltipEventType(),j=(L=C.props.active)!==null&&L!==void 0?L:N,$=R.props.layout,q=C.key||"_recharts-cursor";return Q.createElement(Nge,{key:q,activeCoordinate:k,activePayload:M,activeTooltipIndex:K,chartName:n,element:C,isActive:j,layout:$,offset:G,tooltipAxisBandSize:W,tooltipEventType:Y})}),De(R,"renderPolarAxis",function(C,L,P){var N=Ir(C,"type.axisType"),k=Ir(R.state,"".concat(N,"Map")),M=C.type.defaultProps,G=M!==void 0?le(le({},M),C.props):C.props,K=k&&k[G["".concat(N,"Id")]];return B.cloneElement(C,le(le({},K),{},{className:et(N,K.className),key:C.key||"".concat(L,"-").concat(P),ticks:Zi(K,!0)}))}),De(R,"renderPolarGrid",function(C){var L=C.props,P=L.radialLines,N=L.polarAngles,k=L.polarRadius,M=R.state,G=M.radiusAxisMap,K=M.angleAxisMap,W=Ha(G),Y=Ha(K),j=Y.cx,$=Y.cy,q=Y.innerRadius,Z=Y.outerRadius;return B.cloneElement(C,{polarAngles:Array.isArray(N)?N:Zi(Y,!0).map(function(F){return F.coordinate}),polarRadius:Array.isArray(k)?k:Zi(W,!0).map(function(F){return F.coordinate}),cx:j,cy:$,innerRadius:q,outerRadius:Z,key:C.key||"polar-grid",radialLines:P})}),De(R,"renderLegend",function(){var C=R.state.formattedGraphicalItems,L=R.props,P=L.children,N=L.width,k=L.height,M=R.props.margin||{},G=N-(M.left||0)-(M.right||0),K=P6({children:P,formattedGraphicalItems:C,legendWidth:G,legendContent:u});if(!K)return null;var W=K.item,Y=Hj(K,Mge);return B.cloneElement(W,le(le({},Y),{},{chartWidth:N,chartHeight:k,margin:M,onBBoxUpdate:R.handleLegendBBoxUpdate}))}),De(R,"renderTooltip",function(){var C,L=R.props,P=L.children,N=L.accessibilityLayer,k=lr(P,mi);if(!k)return null;var M=R.state,G=M.isTooltipActive,K=M.activeCoordinate,W=M.activePayload,Y=M.activeLabel,j=M.offset,$=(C=k.props.active)!==null&&C!==void 0?C:G;return B.cloneElement(k,{viewBox:le(le({},j),{},{x:j.left,y:j.top}),active:$,label:Y,payload:$?W:[],coordinate:K,accessibilityLayer:N})}),De(R,"renderBrush",function(C){var L=R.props,P=L.margin,N=L.data,k=R.state,M=k.offset,G=k.dataStartIndex,K=k.dataEndIndex,W=k.updateId;return B.cloneElement(C,{key:C.key||"_recharts-brush",onChange:Mh(R.handleBrushChange,C.props.onChange),data:N,x:ve(C.props.x)?C.props.x:M.left,y:ve(C.props.y)?C.props.y:M.top+M.height+M.brushBottom-(P.bottom||0),width:ve(C.props.width)?C.props.width:M.width,startIndex:G,endIndex:K,updateId:"brush-".concat(W)})}),De(R,"renderReferenceElement",function(C,L,P){if(!C)return null;var N=R,k=N.clipPathId,M=R.state,G=M.xAxisMap,K=M.yAxisMap,W=M.offset,Y=C.type.defaultProps||{},j=C.props,$=j.xAxisId,q=$===void 0?Y.xAxisId:$,Z=j.yAxisId,F=Z===void 0?Y.yAxisId:Z;return B.cloneElement(C,{key:C.key||"".concat(L,"-").concat(P),xAxis:G[q],yAxis:K[F],viewBox:{x:W.left,y:W.top,width:W.width,height:W.height},clipPathId:k})}),De(R,"renderActivePoints",function(C){var L=C.item,P=C.activePoint,N=C.basePoint,k=C.childIndex,M=C.isRange,G=[],K=L.props.key,W=L.item.type.defaultProps!==void 0?le(le({},L.item.type.defaultProps),L.item.props):L.item.props,Y=W.activeDot,j=W.dataKey,$=le(le({index:k,dataKey:j,cx:P.x,cy:P.y,r:4,fill:Bw(L.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},We(Y,!1)),Nm(Y));return G.push(T.renderActiveDot(Y,$,"".concat(K,"-activePoint-").concat(k))),N?G.push(T.renderActiveDot(Y,le(le({},$),{},{cx:N.x,cy:N.y}),"".concat(K,"-basePoint-").concat(k))):M&&G.push(null),G}),De(R,"renderGraphicChild",function(C,L,P){var N=R.filterFormatItem(C,L,P);if(!N)return null;var k=R.getTooltipEventType(),M=R.state,G=M.isTooltipActive,K=M.tooltipAxis,W=M.activeTooltipIndex,Y=M.activeLabel,j=R.props.children,$=lr(j,mi),q=N.props,Z=q.points,F=q.isRange,V=q.baseLine,H=N.item.type.defaultProps!==void 0?le(le({},N.item.type.defaultProps),N.item.props):N.item.props,te=H.activeDot,ce=H.hide,ye=H.activeBar,ge=H.activeShape,Me=!!(!ce&&G&&$&&(te||ye||ge)),Re={};k!=="axis"&&$&&$.props.trigger==="click"?Re={onClick:Mh(R.handleItemMouseEnter,C.props.onClick)}:k!=="axis"&&(Re={onMouseLeave:Mh(R.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:Mh(R.handleItemMouseEnter,C.props.onMouseEnter)});var pe=B.cloneElement(C,le(le({},N.props),Re));function Ae(vn){return typeof K.dataKey=="function"?K.dataKey(vn.payload):null}if(Me)if(W>=0){var Oe,me;if(K.dataKey&&!K.allowDuplicatedCategory){var rt=typeof K.dataKey=="function"?Ae:"payload.".concat(K.dataKey.toString());Oe=Pm(Z,rt,Y),me=F&&V&&Pm(V,rt,Y)}else Oe=Z==null?void 0:Z[W],me=F&&V&&V[W];if(ge||ye){var Be=C.props.activeIndex!==void 0?C.props.activeIndex:W;return[B.cloneElement(C,le(le(le({},N.props),Re),{},{activeIndex:Be})),null,null]}if(!Ye(Oe))return[pe].concat(Gl(R.renderActivePoints({item:N,activePoint:Oe,basePoint:me,childIndex:W,isRange:F})))}else{var It,_e=(It=R.getItemByXY(R.state.activeCoordinate))!==null&&It!==void 0?It:{graphicalItem:pe},je=_e.graphicalItem,Rt=je.item,yn=Rt===void 0?C:Rt,Zt=je.childIndex,Jt=le(le(le({},N.props),Re),{},{activeIndex:Zt});return[B.cloneElement(yn,Jt),null,null]}return F?[pe,null,null]:[pe,null]}),De(R,"renderCustomized",function(C,L,P){return B.cloneElement(C,le(le({key:"recharts-customized-".concat(P)},R.props),R.state))}),De(R,"renderMap",{CartesianGrid:{handler:Fh,once:!0},ReferenceArea:{handler:R.renderReferenceElement},ReferenceLine:{handler:Fh},ReferenceDot:{handler:R.renderReferenceElement},XAxis:{handler:Fh},YAxis:{handler:Fh},Brush:{handler:R.renderBrush,once:!0},Bar:{handler:R.renderGraphicChild},Line:{handler:R.renderGraphicChild},Area:{handler:R.renderGraphicChild},Radar:{handler:R.renderGraphicChild},RadialBar:{handler:R.renderGraphicChild},Scatter:{handler:R.renderGraphicChild},Pie:{handler:R.renderGraphicChild},Funnel:{handler:R.renderGraphicChild},Tooltip:{handler:R.renderCursor,once:!0},PolarGrid:{handler:R.renderPolarGrid,once:!0},PolarAngleAxis:{handler:R.renderPolarAxis},PolarRadiusAxis:{handler:R.renderPolarAxis},Customized:{handler:R.renderCustomized}}),R.clipPathId="".concat((A=_.id)!==null&&A!==void 0?A:Jf("recharts"),"-clip"),R.throttleTriggeredAfterMouseMove=I4(R.triggeredAfterMouseMove,(O=_.throttleDelay)!==null&&O!==void 0?O:1e3/60),R.state={},R}return Kge(T,x),Vge(T,[{key:"componentDidMount",value:function(){var A,O;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var A=this.props,O=A.children,R=A.data,C=A.height,L=A.layout,P=lr(O,mi);if(P){var N=P.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var k=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,M=M1(this.state,R,N,k),G=this.state.tooltipTicks[N].coordinate,K=(this.state.offset.top+C)/2,W=L==="horizontal",Y=W?{x:G,y:K}:{y:G,x:K},j=this.state.formattedGraphicalItems.find(function(q){var Z=q.item;return Z.type.name==="Scatter"});j&&(Y=le(le({},Y),j.props.points[N].tooltipPosition),M=j.props.points[N].tooltipPayload);var $={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:k,activePayload:M,activeCoordinate:Y};this.setState($),this.renderCursor(P),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(A,O){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==O.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==A.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==A.margin){var R,C;this.accessibilityManager.setDetails({offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(A){bT([lr(A.children,mi)],[lr(this.props.children,mi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var A=lr(this.props.children,mi);if(A&&typeof A.props.shared=="boolean"){var O=A.props.shared?"axis":"item";return o.indexOf(O)>=0?O:a}return a}},{key:"getMouseInfo",value:function(A){if(!this.container)return null;var O=this.container,R=O.getBoundingClientRect(),C=iae(R),L={chartX:Math.round(A.pageX-C.left),chartY:Math.round(A.pageY-C.top)},P=R.width/O.offsetWidth||1,N=this.inRange(L.chartX,L.chartY,P);if(!N)return null;var k=this.state,M=k.xAxisMap,G=k.yAxisMap,K=this.getTooltipEventType(),W=Kj(this.state,this.props.data,this.props.layout,N);if(K!=="axis"&&M&&G){var Y=Ha(M).scale,j=Ha(G).scale,$=Y&&Y.invert?Y.invert(L.chartX):null,q=j&&j.invert?j.invert(L.chartY):null;return le(le({},L),{},{xValue:$,yValue:q},W)}return W?le(le({},L),W):null}},{key:"inRange",value:function(A,O){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,L=A/R,P=O/R;if(C==="horizontal"||C==="vertical"){var N=this.state.offset,k=L>=N.left&&L<=N.left+N.width&&P>=N.top&&P<=N.top+N.height;return k?{x:L,y:P}:null}var M=this.state,G=M.angleAxisMap,K=M.radiusAxisMap;if(G&&K){var W=Ha(G);return ok({x:L,y:P},W)}return null}},{key:"parseEventsOfWrapper",value:function(){var A=this.props.children,O=this.getTooltipEventType(),R=lr(A,mi),C={};R&&O==="axis"&&(R.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var L=Nm(this.props,this.handleOuterEvent);return le(le({},L),C)}},{key:"addListener",value:function(){vE.on(xE,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){vE.removeListener(xE,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(A,O,R){for(var C=this.state.formattedGraphicalItems,L=0,P=C.length;L<P;L++){var N=C[L];if(N.item===A||N.props.key===A.key||O===ea(N.item.type)&&R===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var A=this.clipPathId,O=this.state.offset,R=O.left,C=O.top,L=O.height,P=O.width;return Q.createElement("defs",null,Q.createElement("clipPath",{id:A},Q.createElement("rect",{x:R,y:C,height:L,width:P})))}},{key:"getXScales",value:function(){var A=this.state.xAxisMap;return A?Object.entries(A).reduce(function(O,R){var C=qj(R,2),L=C[0],P=C[1];return le(le({},O),{},De({},L,P.scale))},{}):null}},{key:"getYScales",value:function(){var A=this.state.yAxisMap;return A?Object.entries(A).reduce(function(O,R){var C=qj(R,2),L=C[0],P=C[1];return le(le({},O),{},De({},L,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(A){var O;return(O=this.state.xAxisMap)===null||O===void 0||(O=O[A])===null||O===void 0?void 0:O.scale}},{key:"getYScaleByAxisId",value:function(A){var O;return(O=this.state.yAxisMap)===null||O===void 0||(O=O[A])===null||O===void 0?void 0:O.scale}},{key:"getItemByXY",value:function(A){var O=this.state,R=O.formattedGraphicalItems,C=O.activeItem;if(R&&R.length)for(var L=0,P=R.length;L<P;L++){var N=R[L],k=N.props,M=N.item,G=M.type.defaultProps!==void 0?le(le({},M.type.defaultProps),M.props):M.props,K=ea(M.type);if(K==="Bar"){var W=(k.data||[]).find(function(q){return Sde(A,q)});if(W)return{graphicalItem:N,payload:W}}else if(K==="RadialBar"){var Y=(k.data||[]).find(function(q){return ok(A,q)});if(Y)return{graphicalItem:N,payload:Y}}else if(Eg(N,C)||Tg(N,C)||Cf(N,C)){var j=fhe({graphicalItem:N,activeTooltipItem:C,itemData:G.data}),$=G.activeIndex===void 0?j:G.activeIndex;return{graphicalItem:le(le({},N),{},{childIndex:$}),payload:Cf(N,C)?G.data[j]:N.props.data[j]}}}return null}},{key:"render",value:function(){var A=this;if(!vP(this))return null;var O=this.props,R=O.children,C=O.className,L=O.width,P=O.height,N=O.style,k=O.compact,M=O.title,G=O.desc,K=Hj(O,kge),W=We(K,!1);if(k)return Q.createElement(wj,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement(ET,ul({},W,{width:L,height:P,title:M,desc:G}),this.renderClipPath(),bP(R,this.renderMap)));if(this.props.accessibilityLayer){var Y,j;W.tabIndex=(Y=this.props.tabIndex)!==null&&Y!==void 0?Y:0,W.role=(j=this.props.role)!==null&&j!==void 0?j:"application",W.onKeyDown=function(q){A.accessibilityManager.keyboardEvent(q)},W.onFocus=function(){A.accessibilityManager.focus()}}var $=this.parseEventsOfWrapper();return Q.createElement(wj,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement("div",ul({className:et("recharts-wrapper",C),style:le({position:"relative",cursor:"default",width:L,height:P},N)},$,{ref:function(Z){A.container=Z}}),Q.createElement(ET,ul({},W,{width:L,height:P,title:M,desc:G,style:Jge}),this.renderClipPath(),bP(R,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(B.Component);De(v,"displayName",n),De(v,"defaultProps",le({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),De(v,"getDerivedStateFromProps",function(x,T){var _=x.dataKey,A=x.data,O=x.children,R=x.width,C=x.height,L=x.layout,P=x.stackOffset,N=x.margin,k=T.dataStartIndex,M=T.dataEndIndex;if(T.updateId===void 0){var G=Yj(x);return le(le(le({},G),{},{updateId:0},y(le(le({props:x},G),{},{updateId:0}),T)),{},{prevDataKey:_,prevData:A,prevWidth:R,prevHeight:C,prevLayout:L,prevStackOffset:P,prevMargin:N,prevChildren:O})}if(_!==T.prevDataKey||A!==T.prevData||R!==T.prevWidth||C!==T.prevHeight||L!==T.prevLayout||P!==T.prevStackOffset||!fl(N,T.prevMargin)){var K=Yj(x),W={chartX:T.chartX,chartY:T.chartY,isTooltipActive:T.isTooltipActive},Y=le(le({},Kj(T,A,L)),{},{updateId:T.updateId+1}),j=le(le(le({},K),W),Y);return le(le(le({},j),y(le({props:x},j),T)),{},{prevDataKey:_,prevData:A,prevWidth:R,prevHeight:C,prevLayout:L,prevStackOffset:P,prevMargin:N,prevChildren:O})}if(!bT(O,T.prevChildren)){var $,q,Z,F,V=lr(O,Il),H=V&&($=(q=V.props)===null||q===void 0?void 0:q.startIndex)!==null&&$!==void 0?$:k,te=V&&(Z=(F=V.props)===null||F===void 0?void 0:F.endIndex)!==null&&Z!==void 0?Z:M,ce=H!==k||te!==M,ye=!Ye(A),ge=ye&&!ce?T.updateId:T.updateId+1;return le(le({updateId:ge},y(le(le({props:x},T),{},{updateId:ge,dataStartIndex:H,dataEndIndex:te}),T)),{},{prevChildren:O,dataStartIndex:H,dataEndIndex:te})}return null}),De(v,"renderActiveDot",function(x,T,_){var A;return B.isValidElement(x)?A=B.cloneElement(x,T):Ge(x)?A=x(T):A=Q.createElement($w,T),Q.createElement($t,{className:"recharts-active-dot",key:_},A)});var S=B.forwardRef(function(T,_){return Q.createElement(v,ul({},T,{ref:_}))});return S.displayName=v.displayName,S},c0e=u0e({chartName:"LineChart",GraphicalChild:od,axisComponents:[{axisType:"xAxis",AxisComp:Cg},{axisType:"yAxis",AxisComp:Lg}],formatAxisMap:ome});const SE=(t,e)=>{if(!t||t.length<2)return null;const n=t[0][e],r=t[t.length-1][e];if(n===0)return null;const i=(r-n)/Math.abs(n)*100;return console.log(`Change from ${n} to ${r}: ${i.toFixed(2)}%`),Number(i.toFixed(2))},Xj=()=>{const t=Vt(),e=Qt(),{data:n,timeRange:r,loading:i,error:a}=qt(x=>x.dashboard);B.useEffect(()=>{t(pee(r))},[t,r]);const s=x=>{t(gee(x))},o={"Total Users":b.jsx("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a4 4 0 00-3-3.87M9 20h6M3 20h5v-2a4 4 0 013-3.87M16 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Total Devices":b.jsxs("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[b.jsx("rect",{x:"3",y:"7",width:"18",height:"13",rx:"2"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 21h8"})]}),"Total Content":b.jsx("svg",{className:"w-8 h-8 text-purple-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 19V5a2 2 0 012-2h8a2 2 0 012 2v14M16 7h2a2 2 0 012 2v10a2 2 0 01-2 2h-2"})}),"Total Subscriptions":b.jsx("svg",{className:"w-8 h-8 text-yellow-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Daily Active Users":b.jsx("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a4 4 0 00-3-3.87M9 20h6M3 20h5v-2a4 4 0 013-3.87M16 7a4 4 0 11-8 0 4 4 0 018 0z"})})},c=(x,T,_,A=!1)=>{const O=_>0?"text-green-500":_<0?"text-red-500":"text-gray-500",R=_>0?"":_<0?"":"";return b.jsxs("div",{className:"bg-gradient-to-br from-gray-50 via-white to-blue-50 p-6 rounded-xl shadow-lg flex-1 min-w-[200px] flex flex-col items-start gap-2 hover:shadow-xl transition-shadow duration-200",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o[x],b.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:x})]}),b.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:A?`$${T}`:T}),_!==void 0&&b.jsxs("p",{className:`text-sm mt-1 ${O}`,children:[R," ",Math.abs(_),"%"," ",b.jsx("span",{className:"text-gray-500",children:"vs last period"})]})]})},u=(x,T,_)=>!x||x.length===0?b.jsxs("div",{className:"bg-gradient-to-br from-gray-50 via-white to-blue-50 p-6 rounded-xl shadow-lg col-span-full md:col-span-1 transition-shadow duration-200 hover:shadow-xl",children:[b.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[_," Trend"]}),b.jsx("div",{className:"flex items-center justify-center h-48 text-gray-500",children:"No chart data available for this period."})]}):b.jsxs("div",{className:"bg-gradient-to-br from-gray-50 via-white to-blue-50 p-6 rounded-xl shadow-lg col-span-full md:col-span-1 transition-shadow duration-200 hover:shadow-xl",children:[b.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[_," Trend"]}),b.jsx(Qie,{width:"100%",height:200,children:b.jsxs(c0e,{data:x,margin:{top:5,right:20,left:10,bottom:5},children:[b.jsx(A8,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),b.jsx(Cg,{dataKey:"date",tickLine:!1}),b.jsx(Lg,{tickLine:!1}),b.jsx(mi,{}),b.jsx(od,{type:"monotone",dataKey:T,stroke:"#8884d8",strokeWidth:2,activeDot:{r:8}})]})})]});if(i)return b.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),b.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading dashboard data..."})]});if(a)return b.jsxs("div",{className:"text-center p-6 text-red-500",children:[b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Dashboard"}),b.jsx("p",{children:a.message||"An unexpected error occurred."}),b.jsx("p",{className:"text-sm mt-2",children:"Please try again later."})]});if(!n)return b.jsx("div",{className:"text-center p-6 text-gray-600",children:"No dashboard data available. Please select a time range."});const{users:d,devices:h,content:p,views:y,subscriptions:v,meta:S}=n;return b.jsxs("div",{className:"p-6 bg-gray-50 min-h-full",children:[b.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start mb-6 gap-4",children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Overview"}),b.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 lg:mt-0",role:"group","aria-label":"Select dashboard time range",children:[b.jsx("button",{onClick:()=>s("week"),className:`px-4 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-400 ${r==="week"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,"aria-pressed":r==="week",children:"Week"}),b.jsx("button",{onClick:()=>s("month"),className:`px-4 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-400 ${r==="month"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,"aria-pressed":r==="month",children:"Month"}),b.jsx("button",{onClick:()=>s("year"),className:`px-4 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-400 ${r==="year"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,"aria-pressed":r==="year",children:"Year"})]})]}),b.jsxs("p",{className:"text-center lg:text-right text-sm text-gray-500 mb-6",children:["Last Updated: ",S.last_updated||"N/A"]}),b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[c("Daily Active Users",h.daily_active),c("Total Devices",h.total,SE(h.chart,"count")),c("Total Content",p.total,SE(p.chart,"count")),c("Total Subscriptions",v.total,SE(v.chart,"count"))]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Trends"}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[u(h.chart,"count","Devices"),u(p.chart,"count","Contents"),u(y.chart,"total_views","Content Views"),u(v.chart,"count","Subscriptions")]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Popular Content"}),p.popular_content&&p.popular_content.length>0?b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:p.popular_content.map(x=>b.jsxs("div",{className:"bg-gradient-to-br from-white via-blue-50 to-gray-50 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 flex flex-col",children:[b.jsx("img",{src:x.coverImg||`https://placehold.co/400x200/cccccc/333333?text=${x.title}`,alt:x.title,className:"w-full h-40 object-cover rounded-t-xl border-b border-blue-100"}),b.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate mb-1",children:x.title}),b.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:x.content}),b.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:x.tags.map((T,_)=>b.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded-full shadow-sm font-medium",children:["#",T]},_))}),b.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[b.jsx("span",{className:"font-semibold text-blue-600",children:"Views:"})," ",x.views_count||0]}),b.jsx("button",{onClick:()=>e(`/contents/details/${x.id}`),className:"mt-auto px-4 py-2 bg-blue-600 text-white rounded-md shadow hover:bg-blue-700 transition duration-200 text-sm font-semibold w-full","aria-label":`View details for ${x.title}`,children:"View Details "})]})]},x.id))}):b.jsx("p",{className:"text-gray-600 text-center py-8",children:"No popular content to display for this period."})]})},f0e=async t=>{var e,n;try{return(await Xe.post("/contents",t)).data}catch(r){throw console.error("Error creating content:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},d0e=async t=>{var e;try{return(await Xe.get(`/contents?page=${t}`)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||n.message}},h0e=async t=>{var e;try{return(await Xe.get(`/contents/${t}`)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||n.message}},m0e=async(t,e)=>{var n;try{return(await Xe.put(`/contents/${t}`,e)).data}catch(r){throw((n=r.response)==null?void 0:n.data)||r.message}},p0e=async t=>{var e;try{return(await Xe.delete(`/contents/${t}`)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||n.message}},g0e=t=>async e=>{e({type:EF});try{const n=await f0e(t);return e({type:TF,payload:n}),Promise.resolve(n)}catch(n){return e({type:AF,payload:n}),Promise.reject(n)}},Qj=t=>async e=>{e({type:gF});try{const n=await d0e(t);e({type:yF,payload:n})}catch(n){e({type:vF,payload:n})}},F8=t=>async e=>{e({type:xF});try{const n=await h0e(t);e({type:bF,payload:n})}catch(n){e({type:SF,payload:n})}},y0e=(t,e)=>async n=>{n({type:wF});try{const r=await m0e(t,e);return n({type:_F,payload:r}),Promise.resolve(r)}catch(r){return n({type:RF,payload:r}),Promise.reject(r)}},v0e=t=>async e=>{e({type:OF});try{return await p0e(t),e({type:CF,payload:t}),Promise.resolve()}catch(n){return e({type:LF,payload:n}),Promise.reject(n)}},x0e=({path:t})=>b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:t})}),b0e=()=>{const t=Vt(),e=Qt(),{contents:n,pagination:r,loading:i,error:a}=qt(h=>h.contents);B.useEffect(()=>{t(Qj(1))},[t]);const s=async h=>{if(window.confirm("Are you sure you want to delete this content?"))try{await t(v0e(h)),alert("Content deleted successfully!")}catch(p){alert(`Error deleting content: ${p.message||JSON.stringify(p)}`)}},o=h=>{h&&t(Qj(h))},c={"&laquo;":"","&raquo;":"","&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'","&nbsp;":""};function u(h){return h.replace(/&[a-zA-Z0-9#]+;/g,p=>c[p]||"")}const d=h=>({__html:u(h)});return i&&n.length===0?b.jsx("div",{className:"flex justify-center items-center h-screen",children:b.jsx("div",{className:"text-lg font-semibold text-gray-600",children:"Loading..."})}):a?b.jsxs("div",{className:"text-center p-6 text-red-500",children:["Error loading contents: ",a.message]}):b.jsx("div",{className:"p-2 sm:p-6 lg:p-8 bg-gray-50 min-h-screen",children:b.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4 sm:mb-0",children:"Content Management"}),b.jsxs("button",{onClick:()=>e("/contents/new"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75",children:[b.jsx(x0e,{path:"M12 4v16m8-8H4"}),b.jsx("span",{children:"Create New Content"})]})]}),b.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-x-auto",children:n.length===0?b.jsxs("div",{className:"text-center py-20",children:[b.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"No Content Found"}),b.jsx("p",{className:"text-gray-500 mt-2",children:"Start by creating new content to see it listed here."})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"overflow-x-auto w-full",children:b.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsxs("tr",{children:[b.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),b.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),b.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),b.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"VIP"}),b.jsx("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-right text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),b.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(h=>b.jsxs("tr",{className:"hover:bg-gray-50",children:[b.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-700",children:h.id}),b.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap",children:b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:"flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10",children:b.jsx("img",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full object-cover",src:h.profileImg,alt:""})}),b.jsx("div",{className:"ml-4",children:b.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:h.title})})]})}),b.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-700",children:h.category}),b.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap",children:b.jsx("span",{className:`px-1 sm:px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${h.isvip?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.isvip?"Yes":"No"})}),b.jsx("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-right text-xs sm:text-sm font-medium",children:b.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-0 sm:justify-end items-end sm:items-center",children:[b.jsx("button",{onClick:()=>e(`/contents/details/${h.id}`),className:"text-gray-500 hover:text-blue-600 sm:mr-3 font-semibold",children:"View"}),b.jsx("button",{onClick:()=>e(`/contents/edit/${h.id}`),className:"text-indigo-600 hover:text-indigo-900 sm:mr-3 font-semibold",children:"Edit"}),b.jsx("button",{onClick:()=>s(h.id),className:"text-red-600 hover:text-red-900 font-semibold",children:"Delete"})]})})]},h.id))})]})}),b.jsxs("div",{className:"px-2 sm:px-6 py-2 sm:py-4 border-t border-gray-200 flex flex-col gap-2 sm:flex-row items-center justify-between",children:[b.jsxs("div",{className:"text-xs sm:text-sm text-gray-700 mb-2 sm:mb-0",children:["Showing ",b.jsx("span",{className:"font-medium",children:r.from})," ","to ",b.jsx("span",{className:"font-medium",children:r.to})," of"," ",b.jsx("span",{className:"font-medium",children:r.total})," ","results"]}),b.jsx("div",{className:"flex flex-wrap gap-1 sm:inline-flex rounded-md shadow-sm -space-x-px w-full sm:w-auto justify-center sm:justify-start",children:r.links.map((h,p)=>{const y=h.url?new URL(h.url).searchParams.get("page"):null;return b.jsx("button",{onClick:()=>o(y),disabled:!h.url||i,className:`relative inline-flex items-center px-2 sm:px-4 py-1 sm:py-2 border text-xs sm:text-sm font-medium
                                    ${h.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}
                                    ${p===0?"rounded-l-md":""}
                                    ${p===r.links.length-1?"rounded-r-md":""}
                                    disabled:opacity-50 disabled:cursor-not-allowed`,dangerouslySetInnerHTML:d(h.label)},p)})})]})]})})]})})},ld=t=>{const[e,n]=B.useState(!1),[r,i]=B.useState(!1),[a,s]=B.useState(null);return B.useEffect(()=>{if(!t){n(!1),s(null);return}if(!/^https?:\/\/.+/.test(t)){n(!1),s("Invalid URL format");return}i(!0);const o=new Image;return o.onload=()=>{n(!0),i(!1),s(null)},o.onerror=()=>{n(!1),i(!1),s("Image failed to load")},o.src=t,()=>{o.src=""}},[t]),{isValid:e,isLoading:r,error:a}},Zj=()=>{const t=Vt(),e=Qt(),{id:n}=fa(),[r,i]=B.useState(""),{loading:a,error:s,selectedContent:o}=qt(j=>j.contents),c=B.useMemo(()=>{var $,q,Z;if(!o||!o.content)return null;const j=o.content;try{return{...j,casts:Array.isArray(j.casts)?j.casts:j.casts?JSON.parse(j.casts):[],files:{trailer:(($=o.content.files)==null?void 0:$.trailer)||{url:"",quality:"",size:""},stream:((q=o.content.files)==null?void 0:q.stream)||[],download:((Z=o.content.files)==null?void 0:Z.download)||[]}}}catch(F){return console.error("Error parsing content data:",F),null}},[o]),[u,d]=B.useState(()=>{const j=sessionStorage.getItem("currentStep");return j?parseInt(j):1}),[h,p]=B.useState(()=>{const j=sessionStorage.getItem("contentFormData");return j?JSON.parse(j):{title:"",profileImg:"",coverImg:"",duration:"",links:[],content:"",tags:[],category:"",casts:[],files:{trailer:{url:"",quality:"",size:""},stream:[],download:[]},isvip:!1}}),[y,v]=B.useState({});B.useEffect(()=>{sessionStorage.setItem("contentFormData",JSON.stringify(h))},[h]),B.useEffect(()=>{sessionStorage.setItem("currentStep",u.toString())},[u]),B.useEffect(()=>{n&&(sessionStorage.removeItem("contentFormData"),sessionStorage.removeItem("currentStep"),t(F8(n)))},[t,n]),B.useEffect(()=>{var j,$,q;n&&c&&c.id.toString()===n&&p({title:c.title||"",profileImg:c.profileImg||"",coverImg:c.coverImg||"",duration:c.duration||"",links:c.links||[],content:c.content||"",tags:c.tags||[],category:c.category||"",casts:c.casts||[],files:{trailer:((j=c.files)==null?void 0:j.trailer)||{url:"",quality:"",size:""},stream:(($=c.files)==null?void 0:$.stream)||[],download:((q=c.files)==null?void 0:q.download)||[]},isvip:c.isvip||!1})},[n,c]);const S=j=>{const{name:$,value:q,type:Z,checked:F}=j.target;if($.includes(".")){const[V,H,te]=$.split(".");p(te?ce=>{var ye;return{...ce,[V]:{...ce[V],[H]:{...((ye=ce[V])==null?void 0:ye[H])||{},[te]:q}}}}:ce=>({...ce,[V]:{...ce[V],[H]:q}}))}else p(V=>({...V,[$]:Z==="checkbox"?F:q}))},x=(j,$)=>{const q=j.target.value;p(Z=>({...Z,[$]:q.split(",").map(F=>F.trim()).filter(Boolean)}))},T=()=>{const j=r.trim();j&&!h.links.includes(j)&&p({...h,links:[...h.links,j]}),i("")},_=j=>{const $=h.links.filter((q,Z)=>Z!==j);p({...h,links:$})},A=j=>{p($=>j&&!$.tags.includes(j)?{...$,tags:[...$.tags,j]}:$)},O=j=>{p($=>({...$,tags:$.tags.filter((q,Z)=>Z!==j)}))},R=(j,$,q)=>{const Z=[...h.casts];Z[j][$]=q,p(F=>({...F,casts:Z}))},C=()=>{p(j=>({...j,casts:[...j.casts,{name:"",role:""}]}))},L=j=>{p($=>({...$,casts:$.casts.filter((q,Z)=>Z!==j)}))},P=(j,$,q,Z)=>{const F=[...h.files[Z]];F[j]||(F[j]={}),F[j][$]=q,p(V=>({...V,files:{...V.files,[Z]:F}}))},N=j=>{p($=>({...$,files:{...$.files,[j]:[...$.files[j],{url:"",quality:"",size:""}]}}))},k=(j,$)=>{p(q=>({...q,files:{...q.files,[$]:q.files[$].filter((Z,F)=>F!==j)}}))},M=j=>{var Z,F;const $={};let q=!0;if(v(V=>{const H={...V};return j===1?(delete H.title,delete H.duration,delete H.content,delete H.category):j===2&&(delete H.profileImg,delete H.coverImg,delete H.trailerUrl),H}),console.log(j),j===1)h.title||($.title="Title is required"),h.duration||($.duration="Duration is required"),h.content||($.content="Content description is required"),h.category||($.category="Category is required");else if(j===2)h.profileImg||($.profileImg="Profile Image URL is required"),h.profileImg&&!/^https?:\/\/.+/.test(h.profileImg)&&($.profileImg="Invalid URL format"),h.coverImg||($.coverImg="Cover Image URL is required"),h.coverImg&&!/^https?:\/\/.+/.test(h.coverImg)&&($.coverImg="Invalid URL format"),(F=(Z=h.files)==null?void 0:Z.trailer)!=null&&F.url?/^https?:\/\/.+/.test(h.files.trailer.url)||($.trailerUrl="Invalid URL format"):$.trailerUrl="Trailer URL is required",h.files.stream.length===0?$.download="At least one stream file is required":h.files.stream.forEach((V,H)=>{V.url?/^https?:\/\/.+/.test(V.url)||($[`downloadUrl${H}`]=`Invalid URL format for file ${H+1}`):$[`downloadUrl${H}`]=`Download URL is required for file ${H+1}`});else if(j==3)h.files.download.length===0?$.download="At least one download file is required":h.files.download.forEach((V,H)=>{V.url?/^https?:\/\/.+/.test(V.url)||($[`downloadUrl${H}`]=`Invalid URL format for file ${H+1}`):$[`downloadUrl${H}`]=`Download URL is required for file ${H+1}`});else if(j===4)return v(V=>({...V,...$})),q=Object.keys($).length===0,q;return u==3&&n?(d(u+1),!1):(v(V=>({...V,...$})),q=Object.keys($).length===0,q)},G=()=>{M(u)&&d(j=>j+1)},K=()=>{d(j=>j-1),v({})},W=async j=>{if(j.preventDefault(),!!M(u))try{n?(await t(y0e(n,h)),alert("Content updated successfully!")):(await t(g0e(h)),alert("Content created successfully!")),e("/contents"),sessionStorage.removeItem("contentFormData"),sessionStorage.removeItem("currentStep")}catch($){console.error("Failed to save content:",$),alert(`Error: ${$.message||($.errors?JSON.stringify($.errors):JSON.stringify($))}`)}};if(n&&a&&!o)return b.jsx("div",{className:"text-center p-6",children:"Loading content..."});if(n&&s)return b.jsxs("div",{className:"text-center p-6 text-red-500",children:["Error loading content: ",s.message]});const Y=()=>{switch(console.log("Current Step:",u),u){case 1:return b.jsx(S0e,{formData:h,handleChange:S,formErrors:y,addTag:A,removeTag:O});case 2:return b.jsx(T0e,{formData:h,handleChange:S,handleFileArrayChange:P,addFileEntry:N,removeFileEntry:k,formErrors:y});case 3:return b.jsx(Jj,{newLink:r,addImageLink:T,setNewLink:i,removeImage:_,formData:h,handleChange:S,handleArrayChange:x,handleCastChange:R,addCast:C,removeCast:L,addFileEntry:N,removeFileEntry:k,handleFileArrayChange:P});case 4:return b.jsx(Jj,{formData:h,newLink:r,addImageLink:T,setNewLink:i,removeImage:_,handleChange:S,handleArrayChange:x,handleCastChange:R,addCast:C,removeCast:L,addFileEntry:N,removeFileEntry:k,handleFileArrayChange:P});default:return null}};return b.jsxs("div",{className:"p-4 sm:p-6 bg-gradient-to-br from-blue-50 via-white to-gray-100 rounded-xl shadow-xl max-w-full sm:max-w-3xl md:max-w-4xl mx-auto",children:[b.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold text-blue-700 mb-6 text-center tracking-tight drop-shadow",children:n?"Edit Content":"Create New Content"}),b.jsx("div",{className:"flex items-center justify-center mb-8 w-full max-w-2xl mx-auto",children:["Basic Info","Media & Files","Advanced Details"].map((j,$,q)=>{const Z=u>=$+1;return b.jsx(Q.Fragment,{children:b.jsxs("div",{className:"flex flex-col items-center w-1/3 relative",children:[b.jsx("div",{className:`z-10 p-2 rounded-full mb-2 w-10 h-10 flex items-center justify-center text-lg sm:text-xl transition-all duration-200
                    ${Z?"bg-blue-600 text-white font-extrabold shadow-lg border-2 border-blue-600":"bg-gray-100 text-gray-400 border-2 border-gray-200"}`,children:$+1}),b.jsx("span",{className:`text-xs sm:text-base font-semibold transition-all duration-200 ${Z?"text-blue-700":"text-gray-400"}`,children:j}),$<q.length-1&&b.jsx("div",{className:"absolute top-5 left-1/2 w-full h-0 flex items-center justify-center",children:b.jsx("div",{className:`w-full border-t-2 ${Z?"border-blue-600":"border-blue-200"}`,style:{zIndex:0,marginLeft:"20px",marginRight:"-20px"}})})]})},j)})}),b.jsxs("form",{onSubmit:W,className:"space-y-6",children:[Y(),b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-8 gap-3",children:[u==1&&b.jsx("button",{type:"button",onClick:()=>e("/contents"),className:"w-full sm:w-auto px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),u>1&&b.jsx("button",{type:"button",onClick:K,className:"w-full sm:w-auto px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Previous"}),u<3?b.jsx("button",{type:"button",onClick:G,className:`w-full sm:w-auto inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u===1?"sm:ml-auto":""}`,children:"Next"}):b.jsx("button",{type:"submit",className:"w-full sm:w-auto inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-auto",disabled:a,children:a?n?"Updating...":"Creating...":n?"Update Content":"Create Content"})]}),s&&b.jsxs("p",{className:"text-red-500 text-sm mt-4 text-center",children:["Error: ",s.message||JSON.stringify(s)]})]})]})},S0e=({formData:t,handleChange:e,formErrors:n,addTag:r,removeTag:i})=>b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),b.jsx("input",{type:"text",name:"title",id:"title",value:t.title,onChange:e,className:`mt-1 block w-full border ${n.title?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"Example Movie Title",required:!0}),n.title&&b.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:n.title})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700",children:"Duration (e.g., HH:MM:SS)"}),b.jsx("input",{type:"text",name:"duration",id:"duration",value:t.duration,onChange:e,className:`mt-1 block w-full border ${n.duration?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"2:15:00",required:!0}),n.duration&&b.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:n.duration})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Content Description"}),b.jsx("textarea",{name:"content",id:"content",rows:"4",value:t.content,onChange:e,className:`mt-1 block w-full border ${n.content?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"Full movie description here...",required:!0}),n.content&&b.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:n.content})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),b.jsx("input",{type:"text",name:"category",id:"category",value:t.category,onChange:e,className:`mt-1 block w-full border ${n.category?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"Engsub, Dubbed, etc.",required:!0}),n.category&&b.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:n.category})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"tagInput",className:"block text-sm font-medium text-gray-700",children:"Tags"}),b.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[b.jsx("input",{type:"text",id:"tagInput",onKeyDown:a=>{a.key==="Enter"&&a.target.value.trim()!==""&&(a.preventDefault(),r(a.target.value.trim()),a.target.value="")},className:"block flex-1 border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Add a tag and press Enter"}),b.jsx("button",{type:"button",onClick:()=>{const a=document.getElementById("tagInput");a.value.trim()!==""&&(r(a.value.trim()),a.value="")},className:"px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm",children:"Add"})]}),b.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.tags.map((a,s)=>b.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 shadow",children:[a,b.jsx("button",{type:"button",onClick:()=>i(s),className:"ml-2 -mr-0.5 h-4 w-4 flex-shrink-0 text-blue-400 hover:text-blue-700 focus:outline-none",children:""})]},s))})]})]}),E0e=({url:t})=>{const{isValid:e,isLoading:n,error:r}=ld(t);return t?n?b.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:b.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})}):e?b.jsxs("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:[b.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Profile Image Preview:"}),b.jsx("img",{src:t,alt:"Profile Preview",className:"max-w-full h-auto max-h-48 object-contain mx-auto rounded-md",onError:i=>{i.target.src="https://via.placeholder.com/150?text=Invalid+Image"}})]}):b.jsx("div",{className:"mt-2 p-2 border border-red-200 rounded-md bg-red-50 text-center",children:b.jsx("p",{className:"text-sm text-red-600",children:r||"Invalid image URL"})}):null},$8=({url:t})=>{const{isValid:e,isLoading:n,error:r}=ld(t);return t?n?b.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:b.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})}):e?b.jsxs("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:[b.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cover Image Preview:"}),b.jsx("img",{src:t,alt:"Cover Preview",className:"max-w-full h-auto max-h-48 object-contain mx-auto rounded-md",onError:i=>{i.target.src="https://via.placeholder.com/300x150?text=Invalid+Image"}})]}):b.jsx("div",{className:"mt-2 p-2 border border-red-200 rounded-md bg-red-50 text-center",children:b.jsx("p",{className:"text-sm text-red-600",children:r||"Invalid image URL"})}):null},T0e=({formData:t,handleChange:e,handleFileArrayChange:n,addFileEntry:r,removeFileEntry:i,formErrors:a})=>{var s,o,c;return b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"profileImg",className:"block text-sm font-medium text-gray-700",children:"Profile Image URL"}),b.jsx("input",{type:"url",name:"profileImg",id:"profileImg",value:t.profileImg,onChange:e,className:`mt-1 block w-full border ${a.profileImg?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"https://example.com/images/profile.jpg",required:!0}),a.profileImg&&b.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a.profileImg}),t.profileImg&&b.jsx(E0e,{url:t.profileImg})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"coverImg",className:"block text-sm font-medium text-gray-700",children:"Cover Image URL"}),b.jsx("input",{type:"url",name:"coverImg",id:"coverImg",value:t.coverImg,onChange:e,className:`mt-1 block w-full border ${a.coverImg?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500`,placeholder:"https://example.com/covers/cover.jpg",required:!0}),a.coverImg&&b.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a.coverImg}),t.coverImg&&b.jsx($8,{url:t.coverImg})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trailer File"}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"trailerUrl",className:"block text-xs font-medium text-gray-500",children:"URL"}),b.jsx("input",{type:"url",name:"files.trailer.url",id:"trailerUrl",value:((s=t.files.trailer)==null?void 0:s.url)||"",onChange:e,className:`mt-1 block w-full border ${a.trailerUrl?"border-red-500":"border-gray-300"} rounded-md shadow-sm p-2`,placeholder:"https://example.com/trailer.mp4"}),a.trailerUrl&&b.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a.trailerUrl})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"trailerQuality",className:"block text-xs font-medium text-gray-500",children:"Quality"}),b.jsx("input",{type:"text",name:"files.trailer.quality",id:"trailerQuality",value:((o=t.files.trailer)==null?void 0:o.quality)||"",onChange:e,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"1080p"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"trailerSize",className:"block text-xs font-medium text-gray-500",children:"Size"}),b.jsx("input",{type:"text",name:"files.trailer.size",id:"trailerSize",value:((c=t.files.trailer)==null?void 0:c.size)||"",onChange:e,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"250MB"})]})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stream Files"}),t.files.stream.map((u,d)=>b.jsxs("div",{className:"flex lg:flex-col  flex-col  space-y-2 sm:space-y-0 sm:space-x-2 mb-2 items-end bg-blue-50 rounded-lg p-2 shadow",children:[b.jsxs("div",{className:"flex-1 w-full",children:[b.jsx("label",{htmlFor:`streamUrl${d}`,className:"block text-xs font-medium text-gray-500",children:"URL"}),b.jsx("input",{type:"url",id:`streamUrl${d}`,value:u.url,onChange:h=>n(d,"url",h.target.value,"stream"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"https://stream.com/v1.mp4"})]}),b.jsxs("div",{className:"w-full",children:[b.jsx("label",{htmlFor:`streamQuality${d}`,className:"block text-xs font-medium text-gray-500",children:"Quality"}),b.jsx("input",{type:"text",id:`streamQuality${d}`,value:u.quality,onChange:h=>n(d,"quality",h.target.value,"stream"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"720p"})]}),b.jsxs("div",{className:"w-full",children:[b.jsx("label",{htmlFor:`streamSize${d}`,className:"block text-xs font-medium text-gray-500",children:"Size"}),b.jsx("input",{type:"text",id:`streamSize${d}`,value:u.size,onChange:h=>n(d,"size",h.target.value,"stream"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"1.2GB"})]}),b.jsx("button",{type:"button",onClick:()=>i(d,"stream"),className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 mb-1",children:"Remove"})]},d)),b.jsx("button",{type:"button",onClick:()=>r("stream"),className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 shadow",children:"+ Add Stream File"}),a.stream&&b.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a.stream}),t.files.stream.map((u,d)=>a[`streamUrl${d}`]&&b.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:a[`streamUrl${d}`]},`error-${d}`))]})]})},Jj=({newLink:t,addImageLink:e,setNewLink:n,removeImage:r,formData:i,handleChange:a,handleArrayChange:s,handleCastChange:o,addCast:c,removeCast:u,addFileEntry:d,removeFileEntry:h,handleFileArrayChange:p})=>b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"newLink",className:"block text-sm font-medium text-gray-700",children:"Add Image URL"}),b.jsxs("div",{className:"flex gap-2 mt-1",children:[b.jsx("input",{type:"text",id:"newLink",name:"newLink",value:t,onChange:y=>n(y.target.value),className:"flex-1 block border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/image.jpg"}),b.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add"})]})]}),i.links.length>0&&b.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mt-4",children:i.links.map((y,v)=>b.jsxs("div",{className:"border p-2 rounded-lg shadow relative group bg-white flex flex-col items-center",children:[b.jsx($8,{url:y}),b.jsx("p",{className:"mt-1 text-xs text-gray-500 truncate w-full text-center",children:y}),b.jsx("button",{onClick:()=>r(v),className:"absolute top-1 right-1 text-red-600 bg-white border rounded-full px-1 text-xs opacity-0 group-hover:opacity-100 transition",title:"Remove",children:""})]},v))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Casts"}),i.casts.map((y,v)=>b.jsxs("div",{className:"flex space-x-2 mb-2 items-end",children:[b.jsx("input",{type:"text",value:y.name,onChange:S=>o(v,"name",S.target.value),className:"block w-full flex-1 border border-gray-300 rounded-md shadow-sm p-2",placeholder:"Actor Name"}),b.jsx("input",{type:"text",value:y.role,onChange:S=>o(v,"role",S.target.value),className:"block w-full flex-1 border border-gray-300 rounded-md shadow-sm p-2",placeholder:"Role (e.g., Actor, Director)"}),b.jsx("button",{type:"button",onClick:()=>u(v),className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Remove"})]},v)),b.jsx("button",{type:"button",onClick:c,className:"mt-2 px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600",children:"Add Cast"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Download Files"}),i.files.download.map((y,v)=>b.jsxs("div",{className:"flex lg:flex-col flex-col space-y-2 sm:space-y-0 sm:space-x-2 mb-2 items-end bg-green-50 rounded-lg p-2 shadow",children:[b.jsxs("div",{className:"flex-1 w-full",children:[b.jsx("label",{htmlFor:`downloadUrl${v}`,className:"block text-xs font-medium text-gray-500",children:"URL"}),b.jsx("input",{type:"url",id:`downloadUrl${v}`,value:y.url,onChange:S=>p(v,"url",S.target.value,"download"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"https://download.com/file1.mp4"})]}),b.jsxs("div",{className:"w-full",children:[b.jsx("label",{htmlFor:`downloadQuality${v}`,className:"block text-xs font-medium text-gray-500",children:"Quality"}),b.jsx("input",{type:"text",id:`downloadQuality${v}`,value:y.quality,onChange:S=>p(v,"quality",S.target.value,"download"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"1080p"})]}),b.jsxs("div",{className:"w-full",children:[b.jsx("label",{htmlFor:`downloadSize${v}`,className:"block text-xs font-medium text-gray-500",children:"Size"}),b.jsx("input",{type:"text",id:`downloadSize${v}`,value:y.size,onChange:S=>p(v,"size",S.target.value,"download"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"2.5GB"})]}),b.jsx("button",{type:"button",onClick:()=>h(v,"download"),className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 mb-1",children:"Remove"})]},v)),b.jsx("button",{type:"button",onClick:()=>d("download"),className:"mt-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 shadow",children:"+ Add Download File"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{type:"checkbox",name:"isvip",id:"isvip",checked:i.isvip,onChange:a,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),b.jsx("label",{htmlFor:"isvip",className:"ml-2 block text-sm font-medium text-gray-700",children:"Is VIP Content?"})]})]}),A0e=()=>b.jsxs("div",{className:"min-h-full flex flex-col items-center justify-center bg-gray-50 p-6 text-center",children:[b.jsx("h1",{className:"text-9xl font-extrabold text-gray-800 mb-4",children:"404"}),b.jsx("p",{className:"text-2xl font-semibold text-gray-600 mb-6",children:"Page Not Found"}),b.jsx("p",{className:"text-lg text-gray-500 mb-8 max-w-lg",children:"Oops! The page you're looking for doesn't exist. It might have been moved or deleted."}),b.jsx(Kr,{to:"/dashboard",className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition duration-300 ease-in-out",children:"Go to Dashboard"})]}),w0e=()=>{var A,O,R,C,L,P;const{id:t}=fa(),e=Vt(),n=Qt(),{selectedContent:r,loading:i,error:a}=qt(N=>N.contents);B.useEffect(()=>{t&&e(F8(t))},[e,t]);const s=B.useMemo(()=>{var k,M,G;if(!r||!r.content)return null;const N=r.content;try{return{...N,casts:Array.isArray(N.casts)?N.casts:N.casts?JSON.parse(N.casts):[],files:{trailer:((k=r.content.files)==null?void 0:k.trailer)||{url:"",quality:"",size:""},stream:((M=r.content.files)==null?void 0:M.stream)||[],download:((G=r.content.files)==null?void 0:G.download)||[]}}}catch(K){return console.error("Error parsing content data:",K),null}},[r]);if(i)return b.jsx("div",{className:"text-center p-6 text-gray-700",children:"Loading content details..."});if(a)return b.jsxs("div",{className:"text-center p-6 text-red-500",children:["Error: ",a.message||"Could not load content details."]});if(!s)return b.jsx("div",{className:"text-center p-6 text-gray-700",children:"Content not found."});const{title:o,profileImg:c,coverImg:u,duration:d,links:h,content:p,tags:y,category:v,casts:S,files:x,isvip:T,views_count:_}=s;return b.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg max-w-5xl mx-auto my-8",children:[b.jsx("button",{onClick:()=>n("/contents"),className:"mb-6 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:" Back to Contents List"}),b.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 mb-4",children:o}),u&&b.jsx("div",{className:"mb-6",children:b.jsx("img",{src:u,alt:`${o} Cover`,className:"w-full h-96 object-cover rounded-lg shadow-md",onError:N=>N.target.src=""})}),c&&b.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[b.jsx("img",{src:c,alt:`${o} Profile`,className:"w-24 h-24 object-cover rounded-full border-4 border-white shadow-md",onError:N=>N.target.src=""}),b.jsxs("div",{children:[b.jsxs("p",{className:"text-sm text-gray-500",children:["Duration: ",d]}),b.jsxs("p",{className:"text-sm text-gray-500",children:["Category:"," ",b.jsx("span",{className:"font-medium text-gray-700",children:v})]}),b.jsxs("p",{className:"text-sm text-gray-500",children:["Views: ",_]}),b.jsx("p",{className:`text-sm font-semibold ${T?"text-green-600":"text-blue-600"}`,children:T?"VIP Content":"Free Content"})]})]}),b.jsxs("div",{className:"mb-6",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Description"}),b.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:p})]}),y&&y.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Tags"}),b.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((N,k)=>b.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full",children:N},k))})]}),S&&S.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Casts"}),b.jsx("ul",{className:"list-disc list-inside text-gray-700",children:S.map((N,k)=>b.jsxs("li",{children:[N.name," (",N.role,")"]},k))})]}),h&&h.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Related Links"}),b.jsx("ul",{className:"list-disc list-inside text-blue-600",children:h.map((N,k)=>b.jsx("li",{children:b.jsx("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:N})},k))})]}),x&&(((A=x.trailer)==null?void 0:A.url)||((O=x.stream)==null?void 0:O.length)>0||((R=x.download)==null?void 0:R.length)>0)&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Files"}),((C=x.trailer)==null?void 0:C.url)&&b.jsxs("div",{className:"mb-4",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-1",children:"Trailer"}),b.jsxs("p",{className:"text-gray-700",children:["URL:"," ",b.jsx("a",{href:x.trailer.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:x.trailer.url})]}),b.jsxs("p",{className:"text-gray-700",children:["Quality: ",x.trailer.quality||"N/A",", Size:"," ",x.trailer.size||"N/A"]})]}),((L=x.stream)==null?void 0:L.length)>0&&b.jsxs("div",{className:"mb-4",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-1",children:"Stream Options"}),b.jsx("ul",{className:"list-disc list-inside text-gray-700",children:x.stream.map((N,k)=>b.jsxs("li",{children:["URL:"," ",b.jsx("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:N.url})," ","(Quality: ",N.quality||"N/A",", Size:"," ",N.size||"N/A",")"]},k))})]}),((P=x.download)==null?void 0:P.length)>0&&b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-1",children:"Download Options"}),b.jsx("ul",{className:"list-disc list-inside text-gray-700",children:x.download.map((N,k)=>b.jsxs("li",{children:["URL:"," ",b.jsx("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:N.url})," ","(Quality: ",N.quality||"N/A",", Size:"," ",N.size||"N/A",")"]},k))})]})]}),r.related_content&&r.related_content.length>0&&b.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Related Content"}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.related_content.map(N=>b.jsxs("div",{className:"bg-gray-50 rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[b.jsx("img",{src:N.coverImg||"https://via.placeholder.com/1280x720?text=Related+Content",alt:N.title,className:"w-full h-48 object-cover"}),b.jsxs("div",{className:"p-4",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate",children:N.title}),b.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:N.short_description}),b.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:N.tags.map((k,M)=>b.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:k},M))}),b.jsx("button",{onClick:()=>n(`/contents/details/${N.id}`),className:"mt-2 px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700",children:"View Details"})]})]},N.id))})]})]})},_0e=async(t=1,e=20)=>{var n,r;try{return(await Xe.get("/devices",{params:{page:t,per_page:e}})).data}catch(i){throw console.error("Error fetching devices:",((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},R0e=async t=>{var e,n;try{return(await Xe.get(`/devices/${t}`)).data}catch(r){throw console.error(`Error fetching device with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},O0e=async t=>{var e,n;try{return(await Xe.post("/devices",t)).data}catch(r){throw console.error("Error creating device:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},C0e=async(t,e)=>{var n,r;try{return(await Xe.put(`/devices/${t}`,e)).data}catch(i){throw console.error(`Error updating device with ID ${t}:`,((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},L0e=async t=>{var e,n;try{return await Xe.delete(`/devices/${t}`),t}catch(r){throw console.error(`Error deleting device with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},$h=(t=1,e=20)=>async n=>{n({type:MF});try{const r=await _0e(t,e);n({type:kF,payload:r})}catch(r){n({type:jF,payload:r})}},G8=t=>async e=>{e({type:UF});try{const n=await R0e(t);e({type:BF,payload:n})}catch(n){e({type:FF,payload:n})}},D0e=t=>async e=>{e({type:$F});try{const n=await O0e(t);return e({type:GF,payload:n}),Promise.resolve(n)}catch(n){return e({type:VF,payload:n}),Promise.reject(n)}},I0e=(t,e)=>async n=>{n({type:qF});try{const r=await C0e(t,e);return n({type:HF,payload:r}),Promise.resolve(r)}catch(r){return n({type:zF,payload:r}),Promise.reject(r)}},P0e=t=>async e=>{e({type:KF});try{return await L0e(t),e({type:YF,payload:t}),Promise.resolve(t)}catch(n){return e({type:WF,payload:n}),Promise.reject(n)}},N0e=t=>{if(!t.vip_expires_at)return"N/A";const e=new Date,n=new Date(t.vip_expires_at);return n<e?b.jsx("span",{className:"text-red-600 font-semibold",children:"Expired"}):`${FY(n,e)} left`},M0e=({device:t,onDelete:e})=>{const n=Qt();return b.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 flex flex-col transition-shadow hover:shadow-lg",children:[b.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[b.jsx("p",{className:"font-bold text-gray-800 truncate",title:t.device_id,children:t.username||t.device_id}),b.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${t.is_vip?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.is_vip?"VIP":"Free"})]}),b.jsxs("div",{className:"p-4 grid grid-cols-2 gap-x-4 gap-y-3 text-sm flex-grow",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-gray-500",children:"Platform"}),b.jsx("p",{className:"font-medium text-gray-900",children:t.platform||"N/A"})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-gray-500",children:"Version"}),b.jsx("p",{className:"font-medium text-gray-900",children:t.appversion||"N/A"})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-gray-500",children:"Referrals"}),b.jsx("p",{className:"font-medium text-gray-900",children:t.referral_count??"N/A"})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-gray-500",children:"VIP Expires"}),b.jsx("p",{className:"font-medium text-gray-900",children:N0e(t)})]}),b.jsxs("div",{className:"col-span-2",children:[b.jsx("p",{className:"text-gray-500",children:"Last Active"}),b.jsx("p",{className:"font-medium text-gray-900",title:t.last_active_at?pn(new Date(t.last_active_at),"PPP p"):"",children:t.last_active_at?$Y(new Date(t.last_active_at),{addSuffix:!0}):"N/A"})]})]}),b.jsxs("div",{className:"p-3 bg-gray-50 border-t border-gray-200 flex gap-2 justify-end",children:[b.jsx("button",{onClick:()=>n(`/devices/details/${t.device_id}`),className:"px-3 py-1.5 text-xs font-semibold text-blue-600 bg-blue-100 hover:bg-blue-200 rounded-md transition",title:"View Details",children:"View"}),b.jsx("button",{onClick:()=>n(`/devices/edit/${t.device_id}`),className:"px-3 py-1.5 text-xs font-semibold text-yellow-600 bg-yellow-100 hover:bg-yellow-200 rounded-md transition",title:"Edit Device",children:"Edit"}),b.jsx("button",{onClick:()=>e(t.id,t.device_id),className:"px-3 py-1.5 text-xs font-semibold text-red-600 bg-red-100 hover:bg-red-200 rounded-md transition",title:"Delete Device",children:"Delete"})]})]})},k0e=()=>{const t=Vt(),e=Qt(),{devices:n,pagination:r,loading:i,error:a}=qt(p=>p.devices);B.useEffect(()=>{t($h(r.current_page,r.per_page))},[t,r.current_page,r.per_page]);const s=p=>{p>=1&&p<=r.last_page&&t($h(p,r.per_page))},o=p=>{t($h(1,parseInt(p.target.value,10)))},c=async(p,y)=>{if(window.confirm(`Are you sure you want to delete device "${y}"? This action cannot be undone.`))try{await t(P0e(y)),t($h(r.current_page,r.per_page))}catch(v){alert(`Failed to delete device: ${v.message||JSON.stringify(v)}`),console.error("Delete failed:",v)}};if(i&&n.length===0)return b.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),b.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading devices..."})]});if(a)return b.jsxs("div",{className:"text-center p-6 text-red-500",children:[b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Devices"}),b.jsx("p",{children:a.message||"An unexpected error occurred while fetching devices."})]});const u=n.filter(p=>p.is_vip),d=n.filter(p=>!p.is_vip),h=(p,y)=>b.jsxs("div",{className:"mb-10",children:[b.jsxs("h2",{className:"text-xl font-bold mb-4 text-gray-800 border-b pb-2",children:[y," (",p.length,")"]}),p.length===0?b.jsx("div",{className:"text-center py-10 bg-gray-50 rounded-lg",children:b.jsxs("p",{className:"text-gray-500",children:["No ",y.toLowerCase()," found."]})}):b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(v=>b.jsx(M0e,{device:v,onDelete:c},v.id))})]});return b.jsx("div",{className:"p-4 sm:p-6 bg-gray-50 min-h-screen",children:b.jsxs("div",{className:"max-w-7xl mx-auto",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Device Management"}),b.jsx("button",{onClick:()=>e("/devices/new"),className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition font-semibold",children:"+ Add New Device"})]}),n.length===0&&!i?b.jsx("div",{className:"text-center py-16 bg-white rounded-lg shadow-md",children:b.jsx("p",{className:"text-gray-600 text-lg",children:"No devices found."})}):b.jsxs(b.Fragment,{children:[h(u,"VIP Devices"),h(d,"Free Devices"),i&&n.length>0&&b.jsx("div",{className:"text-center py-4 text-blue-600",children:b.jsxs("div",{className:"flex items-center justify-center",children:[b.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500 mr-3"}),"Loading more..."]})}),r.last_page>1&&b.jsxs("div",{className:"mt-6 p-4 bg-white rounded-lg shadow-md flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("label",{htmlFor:"perPage",className:"text-sm text-gray-700",children:"Show:"}),b.jsx("select",{id:"perPage",value:r.per_page,onChange:o,className:"block w-20 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[10,20,50,100].map(p=>b.jsx("option",{value:p,children:p},p))})]}),b.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[b.jsx("button",{onClick:()=>s(1),disabled:r.current_page===1,className:"px-3 py-1.5 rounded-md text-sm hover:bg-gray-200 disabled:opacity-50",children:"First"}),b.jsx("button",{onClick:()=>s(r.current_page-1),disabled:r.current_page===1,className:"px-3 py-1.5 rounded-md text-sm hover:bg-gray-200 disabled:opacity-50",children:"Prev"}),b.jsxs("span",{className:"px-3 py-1.5 text-sm",children:["Page ",r.current_page," of ",r.last_page]}),b.jsx("button",{onClick:()=>s(r.current_page+1),disabled:r.current_page===r.last_page,className:"px-3 py-1.5 rounded-md text-sm hover:bg-gray-200 disabled:opacity-50",children:"Next"}),b.jsx("button",{onClick:()=>s(r.last_page),disabled:r.current_page===r.last_page,className:"px-3 py-1.5 rounded-md text-sm hover:bg-gray-200 disabled:opacity-50",children:"Last"})]}),b.jsxs("div",{className:"text-sm text-gray-700 text-center sm:text-right",children:["Total ",r.total," devices"]})]})]})]})})},j0e=()=>{const{id:t}=fa(),e=Qt(),n=Vt(),{selectedDevice:r,loading:i,error:a}=qt(s=>s.devices);return B.useEffect(()=>{t&&n(G8(t))},[n,t]),console.log("DeviceDetailsPage",r,i,a),i?b.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),b.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading device details..."})]}):a?b.jsxs("div",{className:"text-center p-6 text-red-500",children:[b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Device Details"}),b.jsx("p",{children:a.message||"An unexpected error occurred."}),b.jsx("button",{onClick:()=>e("/devices"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Device List"})]}):r?b.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-2xl mx-auto",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Device Details"}),b.jsx("button",{onClick:()=>e("/devices"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:" Back to List"})]}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"ID:"}),b.jsx("span",{className:"text-gray-900",children:r.device.id})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Device ID:"}),b.jsx("span",{className:"text-gray-900",children:r.device.device_id})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Platform:"}),b.jsx("span",{className:"text-gray-900",children:r.device.platform||"N/A"})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"OS Version:"}),b.jsx("span",{className:"text-gray-900",children:r.device.osversion||"N/A"})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"App Version:"}),b.jsx("span",{className:"text-gray-900",children:r.device.appversion||"N/A"})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Last Active:"}),b.jsx("span",{className:"text-gray-900",children:r.device.last_active_at?pn(new Date(r.device.last_active_at),"MMM dd, yyyy HH:mm"):"N/A"})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"VIP Status:"}),b.jsx("span",{className:`font-semibold ${r.device.is_vip?"text-green-600":"text-red-600"}`,children:r.device.is_vip?"VIP":"Free"})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"VIP Expires At:"}),b.jsx("span",{className:"text-gray-900",children:r.device.vip_expires_at?pn(new Date(r.device.vip_expires_at),"MMM dd, yyyy HH:mm"):"N/A"})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Created At:"}),b.jsx("span",{className:"text-gray-900",children:r.device.created_at?pn(new Date(r.device.created_at),"MMM dd, yyyy HH:mm"):"N/A"})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Updated At:"}),b.jsx("span",{className:"text-gray-900",children:r.device.updated_at?pn(new Date(r.device.updated_at),"MMM dd, yyyy HH:mm"):"N/A"})]})]}),b.jsx("div",{className:"mt-8 flex justify-end space-x-3",children:b.jsx("button",{onClick:()=>e(`/devices/edit/${r.device.device_id}`),className:"px-5 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Edit Device"})})]}):b.jsxs("div",{className:"text-center p-6 text-gray-600",children:[b.jsxs("p",{children:["No device found with ID: ",t,"."]}),b.jsx("button",{onClick:()=>e("/devices"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Device List"})]})},U0e=()=>{const{id:t}=fa(),e=Qt(),n=Vt(),{selectedDevice:r,loading:i,error:a}=qt(x=>x.devices),s=!!t,[o,c]=B.useState({device_id:"",is_vip:!1,osversion:"",appversion:"",platform:"",vip_expires_at:""}),[u,d]=B.useState({}),[h,p]=B.useState(!1);B.useEffect(()=>(s&&n(G8(t)),()=>{}),[n,t,s]),B.useEffect(()=>{s&&r?c({device_id:r.device.device_id||"",is_vip:r.device.is_vip,osversion:r.device.osversion||"",appversion:r.device.appversion||"",platform:r.device.platform||"",vip_expires_at:r.device.vip_expires_at?pn(new Date(r.device.vip_expires_at),"yyyy-MM-dd'T'HH:mm"):""}):s||c({device_id:"",is_vip:!1,osversion:"",appversion:"",platform:"",vip_expires_at:""})},[s,r,t]);const y=x=>{const{name:T,value:_,type:A,checked:O}=x.target;c(R=>({...R,[T]:A==="checkbox"?O:_}))},v=()=>{const x={};return o.device_id.trim()||(x.device_id="Device ID is required."),o.platform.trim()||(x.platform="Platform is required."),d(x),Object.keys(x).length===0},S=async x=>{if(x.preventDefault(),!!v()){p(!0);try{const T={...o,vip_expires_at:o.vip_expires_at?new Date(o.vip_expires_at).toISOString():null};s?(await n(I0e(t,T)),alert("Device updated successfully!")):(await n(D0e(T)),alert("Device created successfully!")),e("/devices")}catch(T){const _=T.message||JSON.stringify(T);alert(`Operation failed: ${_}`),console.error("Form submission error:",T)}finally{p(!1)}}};return s&&i&&!r?b.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),b.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading device for editing..."})]}):a&&s?b.jsxs("div",{className:"text-center p-6 text-red-500",children:[b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Device"}),b.jsx("p",{children:a.message||"An unexpected error occurred while fetching device details."}),b.jsx("button",{onClick:()=>e("/devices"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Device List"})]}):b.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-xl mx-auto",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:s?"Edit Device":"Create New Device"}),b.jsx("button",{onClick:()=>e("/devices"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:" Back to List"})]}),b.jsxs("form",{onSubmit:S,className:"space-y-5",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"device_id",className:"block text-sm font-medium text-gray-700",children:"Device ID"}),b.jsx("input",{type:"text",id:"device_id",name:"device_id",value:o.device_id,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),u.device_id&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.device_id})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"platform",className:"block text-sm font-medium text-gray-700",children:"Platform"}),b.jsx("input",{type:"text",id:"platform",name:"platform",value:o.platform,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),u.platform&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.platform})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"osversion",className:"block text-sm font-medium text-gray-700",children:"OS Version"}),b.jsx("input",{type:"text",id:"osversion",name:"osversion",value:o.osversion,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"appversion",className:"block text-sm font-medium text-gray-700",children:"App Version"}),b.jsx("input",{type:"text",id:"appversion",name:"appversion",value:o.appversion,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"is_vip",name:"is_vip",type:"checkbox",checked:o.is_vip,onChange:y,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"is_vip",className:"ml-2 block text-sm text-gray-900",children:"Is VIP Device?"})]}),o.is_vip&&b.jsxs("div",{children:[b.jsx("label",{htmlFor:"vip_expires_at",className:"block text-sm font-medium text-gray-700",children:"VIP Expires At"}),b.jsx("input",{type:"datetime-local",id:"vip_expires_at",name:"vip_expires_at",value:o.vip_expires_at,onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),b.jsx("div",{className:"flex justify-end space-x-3",children:b.jsx("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Saving...":s?"Update Device":"Create Device"})})]})]})},B0e=async()=>{var t,e;try{return(await Xe.get("/subscription-keys")).data}catch(n){throw console.error("Error fetching subscription keys:",((t=n.response)==null?void 0:t.data)||n.message),((e=n.response)==null?void 0:e.data)||n.message}},F0e=async(t,e)=>{var n,r;try{return(await Xe.post("/create-key",{type:t,max_devices:e})).data}catch(i){throw console.error("Error generating subscription key:",((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},$0e=async t=>{var e,n;try{return(await Xe.put(`/subscriptions/${t}/deactivate`)).data.subscription}catch(r){throw console.error(`Error deactivating key ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},G0e=()=>async t=>{t({type:n$});try{const e=await B0e();t({type:r$,payload:e.subscription_keys})}catch(e){t({type:i$,payload:e})}},V0e=(t,e)=>async n=>{n({type:a$});try{const r=await F0e(t,e);return n({type:s$,payload:r}),Promise.resolve(r)}catch(r){return n({type:o$,payload:r}),Promise.reject(r)}},q0e=t=>async e=>{e({type:l$});try{const n=await $0e(t);return e({type:u$,payload:n}),Promise.resolve(n)}catch(n){return e({type:c$,payload:n}),Promise.reject(n)}},eU=t=>{navigator.clipboard.writeText(t).then(()=>{alert("Subscription key copied to clipboard! ")}).catch(e=>{console.error("Failed to copy text: ",e),alert("Failed to copy key. Please try again.")})},H0e=()=>{const t=Vt(),{subscriptionKeys:e,loading:n,error:r}=qt(x=>x.subscriptions),[i,a]=B.useState(!1),[s,o]=B.useState("1month"),[c,u]=B.useState(2),[d,h]=B.useState(!1);B.useEffect(()=>{t(G0e())},[t]);const p=async()=>{if(!s||c<2){alert("Please select a key type and specify at least 2 maximum devices.");return}h(!0);try{await t(V0e(s,c)),alert("Subscription key generated successfully! "),a(!1),o("1month"),u(2)}catch(x){alert(`Failed to generate key: ${x.message||JSON.stringify(x)}`),console.error("Generate key failed:",x)}finally{h(!1)}},y=async x=>{if(window.confirm(`Are you sure you want to deactivate key "${x}"? This will make it unusable.`))try{await t(q0e(x)),alert("Subscription key deactivated successfully! ")}catch(T){alert(`Failed to deactivate key: ${T.message||JSON.stringify(T)}`),console.error("Deactivate key failed:",T)}},v=e.filter(x=>x.is_active),S=e.filter(x=>!x.is_active);return n&&e.length===0?b.jsxs("div",{className:"flex flex-col justify-center items-center h-screen bg-gray-50 p-6",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),b.jsx("p",{className:"mt-4 text-lg text-gray-700",children:"Loading subscription keys..."})]}):r?b.jsxs("div",{className:"text-center p-6 bg-red-50 border border-red-200 rounded-lg shadow-sm m-4",children:[b.jsx("h2",{className:"text-2xl font-bold mb-2 text-red-700",children:"Error Loading Subscriptions "}),b.jsx("p",{className:"text-red-600",children:r.message||"An unexpected error occurred while fetching subscription keys."}),b.jsx("p",{className:"text-sm mt-2 text-red-500",children:"Please try again later."})]}):b.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 min-h-screen",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[b.jsx("h1",{className:"text-3xl font-extrabold text-gray-800 mb-4 sm:mb-0",children:"Subscription Keys"}),b.jsx("button",{onClick:()=>a(!0),className:"px-6 py-3 bg-green-600 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 transition duration-200 ease-in-out transform hover:scale-105",children:" Generate New Key"})]}),e.length===0&&!n?b.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-white rounded-lg shadow-md border border-gray-200",children:[b.jsx("p",{className:"text-gray-600 text-lg mb-4",children:"No subscription keys found."}),b.jsx("p",{className:"text-gray-500",children:"Generate one to get started!"})]}):b.jsxs(b.Fragment,{children:[v.length>0&&b.jsxs("div",{className:"mb-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-4",children:"Active Subscription Keys"}),b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(x=>b.jsxs("div",{className:"relative bg-white rounded-xl shadow-lg border border-green-200 p-6 flex flex-col justify-between overflow-hidden hover:shadow-xl transition-shadow duration-300 ease-in-out",children:[b.jsx("div",{className:"absolute top-3 -left-10 w-36 h-8 flex items-center justify-center transform -rotate-45 z-10 bg-yellow-400 text-white",style:{fontStyle:"italic",letterSpacing:"0.5px",boxShadow:"0 2px 8px rgba(0,0,0,0.12)",borderTopLeftRadius:"0.75rem",borderBottomRightRadius:"0.75rem"},children:b.jsx("span",{className:"text-xs font-semibold w-full text-center tracking-wide",children:x.type})}),b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center justify-between mb-4 mt-6",children:[b.jsx("h3",{className:"text-xl font-bold text-gray-800 break-all",children:x.key}),b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx("button",{onClick:()=>eU(x.key),className:"text-gray-400 hover:text-green-600 p-1 rounded-full hover:bg-gray-100 transition-colors duration-200",title:"Copy key to clipboard",children:b.jsx(uI,{className:"h-6 w-6"})}),b.jsx("span",{className:"px-3 py-1 inline-flex text-xs font-bold leading-5 rounded-full bg-green-100 text-green-800",children:"Active"})]})]}),b.jsxs("div",{className:"space-y-2 text-gray-600",children:[b.jsxs("p",{className:"flex items-center",children:[b.jsx("span",{className:"font-semibold text-gray-900 w-28",children:"Devices:"}),b.jsxs("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded-md",children:[x.devices_used," / ",x.max_devices]})]}),b.jsxs("p",{className:"flex items-center",children:[b.jsx("span",{className:"font-semibold text-gray-900 w-28",children:"Expires:"}),b.jsx("span",{className:"text-sm",children:x.expires_at?pn(new Date(x.expires_at),"MMM dd, yyyy"):"Lifetime"})]})]})]}),b.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 flex justify-end",children:b.jsx("button",{onClick:()=>y(x.key),className:"text-red-600 font-medium hover:text-red-800 px-4 py-2 rounded-lg bg-red-50 hover:bg-red-100 transition-colors duration-200",children:"Deactivate"})})]},x.key))})]}),S.length>0&&b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-4",children:"Inactive Subscription Keys"}),b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(x=>b.jsxs("div",{className:"relative bg-gray-100 rounded-xl shadow-lg border border-gray-300 p-6 flex flex-col justify-between overflow-hidden",children:[b.jsx("div",{className:"absolute top-3 -left-10 w-36 h-8 flex items-center justify-center transform -rotate-45 z-10 bg-gray-400 text-white",style:{fontStyle:"italic",letterSpacing:"0.5px",boxShadow:"0 2px 8px rgba(0,0,0,0.12)",borderTopLeftRadius:"0.75rem",borderBottomRightRadius:"0.75rem"},children:b.jsx("span",{className:"text-xs font-semibold w-full text-center tracking-wide",children:x.type})}),b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center justify-between mb-4 mt-6",children:[b.jsx("h3",{className:"text-xl font-bold text-gray-500 break-all",children:x.key}),b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx("button",{onClick:()=>eU(x.key),className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-200 transition-colors duration-200",title:"Copy key to clipboard",children:b.jsx(uI,{className:"h-6 w-6"})}),b.jsx("span",{className:"px-3 py-1 inline-flex text-xs font-bold leading-5 rounded-full bg-red-100 text-red-800",children:"Inactive"})]})]}),b.jsxs("div",{className:"space-y-2 text-gray-400",children:[b.jsxs("p",{className:"flex items-center",children:[b.jsx("span",{className:"font-semibold text-gray-500 w-28",children:"Devices:"}),b.jsxs("span",{className:"font-mono text-sm bg-gray-200 text-gray-500 px-2 py-1 rounded-md",children:[x.devices_used," / ",x.max_devices]})]}),b.jsxs("p",{className:"flex items-center",children:[b.jsx("span",{className:"font-semibold text-gray-500 w-28",children:"Expires:"}),b.jsx("span",{className:"text-sm",children:x.expires_at?pn(new Date(x.expires_at),"MMM dd, yyyy"):"Lifetime"})]})]})]})]},x.key))})]}),n&&e.length>0&&b.jsxs("div",{className:"flex items-center justify-center p-6 col-span-1 sm:col-span-2 lg:col-span-3",children:[b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400 mr-3"}),b.jsx("p",{className:"text-gray-500",children:"Loading more keys..."})]})]}),i&&b.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 overflow-y-auto h-full w-full z-50 flex justify-center items-center p-4",children:b.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-md p-6 sm:p-8 transform transition-transform duration-300 scale-100",children:[b.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 text-center",children:"Generate New Subscription Key"}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"keyType",className:"block text-sm font-medium text-gray-700",children:"Key Type"}),b.jsxs("select",{id:"keyType",name:"keyType",value:s,onChange:x=>o(x.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition duration-150",children:[b.jsx("option",{value:"1month",children:"1 Month"}),b.jsx("option",{value:"3months",children:"3 Months"}),b.jsx("option",{value:"5months",children:"5 Months"}),b.jsx("option",{value:"8months",children:"8 Months"}),b.jsx("option",{value:"1year",children:"1 Year"}),b.jsx("option",{value:"lifetime",children:"Lifetime"})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"maxDevices",className:"block text-sm font-medium text-gray-700",children:"Max Devices (min: 2)"}),b.jsx("input",{type:"number",id:"maxDevices",name:"maxDevices",value:c,onChange:x=>u(Math.max(2,parseInt(x.target.value,10)||2)),min:"2",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition duration-150"})]})]}),b.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[b.jsx("button",{onClick:()=>a(!1),className:"px-5 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition duration-200 disabled:opacity-50",disabled:d,children:"Cancel"}),b.jsx("button",{onClick:p,className:"px-5 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:d,children:d?"Generating...":"Generate Key"})]})]})})]})},z0e=async()=>{var t,e;try{return(await Xe.get("/suggestions")).data}catch(n){throw console.error("Error fetching suggestions:",((t=n.response)==null?void 0:t.data)||n.message),((e=n.response)==null?void 0:e.data)||n.message}},K0e=async t=>{var e,n;try{return(await Xe.get(`/suggestions/${t}`)).data}catch(r){throw console.error(`Error fetching suggestion with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},Y0e=async t=>{var e,n;try{return(await Xe.post("/suggestions",t)).data}catch(r){throw console.error("Error creating suggestion:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},W0e=async(t,e)=>{var n,r;try{return(await Xe.put(`/suggestions/${t}`,e)).data}catch(i){throw console.error(`Error updating suggestion with ID ${t}:`,((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},X0e=async t=>{var e,n;try{return await Xe.delete(`/suggestions/${t}`),t}catch(r){throw console.error(`Error deleting suggestion with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},tU=()=>async t=>{t({type:f$});try{const e=await z0e();t({type:d$,payload:e})}catch(e){t({type:h$,payload:e})}},V8=t=>async e=>{e({type:m$});try{const n=await K0e(t);e({type:p$,payload:n})}catch(n){e({type:g$,payload:n})}},Q0e=t=>async e=>{e({type:y$});try{const n=await Y0e(t);return e({type:v$,payload:n}),Promise.resolve(n)}catch(n){return e({type:x$,payload:n}),Promise.reject(n)}},Z0e=(t,e)=>async n=>{n({type:b$});try{const r=await W0e(t,e);return n({type:S$,payload:r}),Promise.resolve(r)}catch(r){return n({type:E$,payload:r}),Promise.reject(r)}},J0e=t=>async e=>{e({type:T$});try{return await X0e(t),e({type:A$,payload:t}),Promise.resolve(t)}catch(n){return e({type:w$,payload:n}),Promise.reject(n)}},eye=()=>{const t=Vt(),e=Qt(),{suggestions:n,loading:r,error:i}=qt(o=>o.suggestions),a=({url:o})=>{const{isLoading:c}=ld(o);if(!o)return null;if(c)return b.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:b.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})})};B.useEffect(()=>{t(tU())},[t]);const s=async o=>{if(window.confirm(`Are you sure you want to delete this suggestion (ID: ${o})? This action cannot be undone.`))try{await t(J0e(o)),alert("Suggestion deleted successfully!"),t(tU())}catch(c){alert(`Failed to delete suggestion: ${c.message||JSON.stringify(c)}`),console.error("Delete failed:",c)}};return r&&n.length===0?b.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),b.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading suggestions..."})]}):i?b.jsxs("div",{className:"text-center p-6 text-red-500",children:[b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Suggestions"}),b.jsx("p",{children:i.message||"An unexpected error occurred while fetching suggestions."}),b.jsx("p",{className:"text-sm mt-2",children:"Please try again later."})]}):b.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Feature Suggestions"}),b.jsx("button",{onClick:()=>e("/suggestions/new"),className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Add New Suggestion"})]}),n.length===0&&!r?b.jsx("p",{className:"text-gray-600 text-center py-8",children:"No suggestions found. Add one to get started!"}):b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsxs("tr",{children:[b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Content ID"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Link"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Is Ad?"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),b.jsx("th",{scope:"col",className:"relative px-6 py-3 text-center",children:"Actions"})]})}),b.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[n.map(o=>b.jsxs("tr",{className:"hover:bg-gray-50",children:[b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:o.id}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.contentId||"N/A"}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.imgUrl&&b.jsx(a,{url:o.imgUrl})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.link?b.jsx("a",{href:o.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline truncate max-w-[150px] block",children:o.link.length>30?o.link.substring(0,27)+"...":o.link}):"N/A"}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${o.is_ads?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:o.is_ads?"Yes":"No"})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.created_at?pn(new Date(o.created_at),"MMM dd,yyyy HH:mm"):"N/A"}),b.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium space-x-2",children:[b.jsx("button",{onClick:()=>e(`/suggestions/details/${o.id}`),className:"text-blue-600 hover:text-blue-900 px-2 py-1 rounded-md hover:bg-blue-100 transition-colors duration-200",title:"View Details",children:"View"}),b.jsx("button",{onClick:()=>e(`/suggestions/edit/${o.id}`),className:"text-yellow-600 hover:text-yellow-900 px-2 py-1 rounded-md hover:bg-yellow-100 transition-colors duration-200",title:"Edit Suggestion",children:"Edit"}),b.jsx("button",{onClick:()=>s(o.id),className:"text-red-600 hover:text-red-900 px-2 py-1 rounded-md hover:bg-red-100 transition-colors duration-200",title:"Delete Suggestion",children:"Delete"})]})]},o.id)),r&&n.length>0&&b.jsx("tr",{children:b.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:b.jsxs("div",{className:"flex items-center justify-center",children:[b.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-400 mr-3"}),"Loading more suggestions..."]})})})]})]})})]})},tye=()=>{const{id:t}=fa(),e=Qt(),n=Vt(),{selectedSuggestion:r,loading:i,error:a}=qt(o=>o.suggestions),s=({url:o})=>{const{isLoading:c}=ld(o);if(!o)return null;if(c)return b.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:b.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})})};return B.useEffect(()=>{t&&n(V8(t))},[n,t]),i?b.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),b.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading suggestion details..."})]}):a?b.jsxs("div",{className:"text-center p-6 text-red-500",children:[b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Suggestion Details"}),b.jsx("p",{children:a.message||"An unexpected error occurred."}),b.jsx("button",{onClick:()=>e("/suggestions"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Suggestions List"})]}):r?b.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-2xl mx-auto",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Suggestion Details"}),b.jsx("button",{onClick:()=>e("/suggestions"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:" Back to List"})]}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"ID:"}),b.jsx("span",{className:"text-gray-900",children:r.id})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Content ID:"}),b.jsx("span",{className:"text-gray-900",children:r.contentId||"N/A"})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Image URL:"}),b.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.imgUrl?b.jsx("a",{href:r.imgUrl,target:"_blank",rel:"noopener noreferrer",children:r.imgUrl}):"N/A"})]}),r.imgUrl&&b.jsx(s,{url:r.imgUrl}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Link:"}),b.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.link?b.jsx("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",children:r.link}):"N/A"})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Is Ad?:"}),b.jsx("span",{className:`font-semibold ${r.is_ads?"text-purple-600":"text-gray-600"}`,children:r.is_ads?"Yes":"No"})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Created At:"}),b.jsx("span",{className:"text-gray-900",children:r.created_at?pn(new Date(r.created_at),"MMM dd, yyyy HH:mm"):"N/A"})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Updated At:"}),b.jsx("span",{className:"text-gray-900",children:r.updated_at?pn(new Date(r.updated_at),"MMM dd, yyyy HH:mm"):"N/A"})]})]}),b.jsx("div",{className:"mt-8 flex justify-end space-x-3",children:b.jsx("button",{onClick:()=>e(`/suggestions/edit/${r.id}`),className:"px-5 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Edit Suggestion"})})]}):b.jsxs("div",{className:"text-center p-6 text-gray-600",children:[b.jsxs("p",{children:["No suggestion found with ID: ",t,"."]}),b.jsx("button",{onClick:()=>e("/suggestions"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Suggestions List"})]})},nU=()=>{const{id:t}=fa(),e=Qt(),n=Vt(),{selectedSuggestion:r,loading:i,error:a}=qt(T=>T.suggestions),s=({url:T})=>{const{isLoading:_}=ld(T);if(!T)return null;if(_)return b.jsx("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:b.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})})},o=!!t,[c,u]=B.useState({contentId:"",imgUrl:"",link:"",is_ads:!1}),[d,h]=B.useState({}),[p,y]=B.useState(!1);B.useEffect(()=>{o&&n(V8(t))},[n,t,o]),B.useEffect(()=>{o&&r&&r.id===parseInt(t)?u({contentId:r.contentId||"",imgUrl:r.imgUrl||"",link:r.link||"",is_ads:r.is_ads}):o||u({contentId:"",imgUrl:"",link:"",is_ads:!1})},[o,r,t]);const v=T=>{const{name:_,value:A,type:O,checked:R}=T.target;u(C=>({...C,[_]:O==="checkbox"?R:A}))},S=()=>{const T={};return c.contentId.trim()||(T.contentId="Content ID is required."),c.imgUrl.trim()?/^https?:\/\/.+/.test(c.imgUrl)||(T.imgUrl="Invalid Image URL format."):T.imgUrl="Image URL is required.",c.link.trim()?/^https?:\/\/.+/.test(c.link)||(T.link="Invalid Link URL format."):T.link="Link is required.",h(T),Object.keys(T).length===0},x=async T=>{if(T.preventDefault(),!!S()){y(!0);try{o?(await n(Z0e(t,c)),alert("Suggestion updated successfully!")):(await n(Q0e(c)),alert("Suggestion created successfully!")),e("/suggestions")}catch(_){const A=_.message||JSON.stringify(_);alert(`Operation failed: ${A}`),console.error("Form submission error:",_)}finally{y(!1)}}};return o&&i&&!r?b.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),b.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading suggestion for editing..."})]}):a&&o?b.jsxs("div",{className:"text-center p-6 text-red-500",children:[b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Suggestion"}),b.jsx("p",{children:a.message||"An unexpected error occurred while fetching suggestion details."}),b.jsx("button",{onClick:()=>e("/suggestions"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Suggestion List"})]}):b.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-xl mx-auto",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:o?"Edit Suggestion":"Create New Suggestion"}),b.jsx("button",{onClick:()=>e("/suggestions"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:" Back to List"})]}),b.jsxs("form",{onSubmit:x,className:"space-y-5",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"contentId",className:"block text-sm font-medium text-gray-700",children:"Content ID"}),b.jsx("input",{type:"text",id:"contentId",name:"contentId",value:c.contentId,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),d.contentId&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.contentId})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"imgUrl",className:"block text-sm font-medium text-gray-700",children:"Image URL"}),b.jsx("input",{type:"url",id:"imgUrl",name:"imgUrl",value:c.imgUrl,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),d.imgUrl&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.imgUrl}),c.imgUrl&&b.jsx(s,{url:c.imgUrl})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"link",className:"block text-sm font-medium text-gray-700",children:"Link URL"}),b.jsx("input",{type:"url",id:"link",name:"link",value:c.link,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),d.link&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.link})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"is_ads",name:"is_ads",type:"checkbox",checked:c.is_ads,onChange:v,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"is_ads",className:"ml-2 block text-sm text-gray-900",children:"Is this an Ad?"})]}),b.jsx("div",{className:"flex justify-end space-x-3",children:b.jsx("button",{type:"submit",disabled:p,className:"px-6 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving...":o?"Update Suggestion":"Create Suggestion"})})]})]})},nye=async(t=1,e=15)=>{var n,r;try{return(await Xe.get("/contents/live-sport",{params:{page:t,per_page:e}})).data}catch(i){throw console.error("Error fetching live sports:",((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},rye=async t=>{var e,n;try{return(await Xe.get(`/contents/${t}`)).data.content}catch(r){throw console.error(`Error fetching live sport with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},iye=async t=>{var e,n;try{return(await Xe.post("/contents",t)).data}catch(r){throw console.error("Error creating live sport:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},aye=async(t,e)=>{var n,r;try{return(await Xe.put(`/contents/${t}`,e)).data}catch(i){throw console.error(`Error updating live sport with ID ${t}:`,((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},sye=async t=>{var e,n;try{return await Xe.delete(`/contents/${t}`),t}catch(r){throw console.error(`Error deleting live sport with ID ${t}:`,((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},Gh=(t=1,e=15)=>async n=>{n({type:_$});try{const r=await nye(t,e);n({type:R$,payload:r})}catch(r){n({type:O$,payload:r})}},q8=t=>async e=>{e({type:C$});try{const n=await rye(t);e({type:L$,payload:n})}catch(n){e({type:D$,payload:n})}},oye=t=>async e=>{e({type:I$});try{const n=await iye(t);return e({type:P$,payload:n}),Promise.resolve(n)}catch(n){return e({type:N$,payload:n}),Promise.reject(n)}},lye=(t,e)=>async n=>{n({type:M$});try{const r=await aye(t,e);return n({type:k$,payload:r}),Promise.resolve(r)}catch(r){return n({type:j$,payload:r}),Promise.reject(r)}},uye=t=>async e=>{e({type:U$});try{return await sye(t),e({type:B$,payload:t}),Promise.resolve(t)}catch(n){return e({type:F$,payload:n}),Promise.reject(n)}},cye=()=>{const t=Vt(),e=Qt(),{livesports:n,pagination:r,loading:i,error:a}=qt(u=>u.livesports);B.useEffect(()=>{t(Gh(r.current_page,r.per_page))},[t,r.current_page,r.per_page]);const s=u=>{u>=1&&u<=r.last_page&&t(Gh(u,r.per_page))},o=u=>{t(Gh(1,parseInt(u.target.value,10)))},c=async(u,d)=>{if(window.confirm(`Are you sure you want to delete "${d}" (ID: ${u})? This action cannot be undone.`))try{await t(uye(u)),alert("Live Sport content deleted successfully!"),t(Gh(r.current_page,r.per_page))}catch(h){alert(`Failed to delete content: ${h.message||JSON.stringify(h)}`),console.error("Delete failed:",h)}};return i&&n.length===0?b.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),b.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading live sports content..."})]}):a?b.jsxs("div",{className:"text-center p-6 text-red-500",children:[b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Live Sports Content"}),b.jsx("p",{children:a.message||"An unexpected error occurred while fetching live sports content."}),b.jsx("p",{className:"text-sm mt-2",children:"Please try again later."})]}):b.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[b.jsxs("div",{className:"lg:flex justify-between items-center mb-6",children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Live Sports Content"}),b.jsxs("div",{className:"space-x-2 mt-3",children:[b.jsx("button",{onClick:()=>e("/livesports/new/live"),className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Add New Live TV"}),b.jsx("button",{onClick:()=>e("/livesports/new/sport"),className:"px-4 py-2 bg-purple-600 text-white rounded-md shadow-sm hover:bg-purple-700 transition duration-200",children:"Add New Sport Event"})]})]}),n.length===0&&!i?b.jsx("p",{className:"text-gray-600 text-center py-8",children:"No live sports content found."}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsxs("tr",{children:[b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thumbnail"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Content URL / Streams"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),b.jsx("th",{scope:"col",className:"relative px-6 py-3 text-center",children:"Actions"})]})}),b.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[n.map(u=>b.jsxs("tr",{className:"hover:bg-gray-50",children:[b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.id}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.title}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${u.category==="Live"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:u.category})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.profileImg&&b.jsx("img",{src:u.profileImg,alt:"Thumbnail",className:"w-16 h-16 object-cover rounded-md",onError:d=>{}})}),b.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:u.content&&u.category==="Live"?b.jsx("a",{href:u.content,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:u.content.length>50?`${u.content.substring(0,47)}...`:u.content}):u.category==="Sport"&&u.files&&u.files.stream_list?b.jsx("ul",{className:"list-disc list-inside text-xs",children:u.files.stream_list.map((d,h)=>b.jsx("li",{className:"truncate",children:b.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:underline",children:[d.quality,":"," ",d.url.length>30?`${d.url.substring(0,27)}...`:d.url]})},h))}):"N/A"}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.tags&&u.tags.length>0?u.tags.join(", "):"N/A"}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.created_at?pn(new Date(u.created_at),"MMM dd,yyyy HH:mm"):"N/A"}),b.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium space-x-2",children:[b.jsx("button",{onClick:()=>e(`/livesports/details/${u.id}`),className:"text-blue-600 hover:text-blue-900 px-2 py-1 rounded-md hover:bg-blue-100 transition-colors duration-200",title:"View Details",children:"View"}),b.jsx("button",{onClick:()=>e(`/livesports/edit/${u.id}`),className:"text-yellow-600 hover:text-yellow-900 px-2 py-1 rounded-md hover:bg-yellow-100 transition-colors duration-200",title:"Edit Content",children:"Edit"}),b.jsx("button",{onClick:()=>c(u.id,u.title),className:"text-red-600 hover:text-red-900 px-2 py-1 rounded-md hover:bg-red-100 transition-colors duration-200",title:"Delete Content",children:"Delete"})]})]},u.id)),i&&n.length>0&&b.jsx("tr",{children:b.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:b.jsxs("div",{className:"flex items-center justify-center",children:[b.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-400 mr-3"}),"Loading more content..."]})})})]})]})}),b.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx("label",{htmlFor:"perPage",className:"text-sm text-gray-700",children:"Show:"}),b.jsx("select",{id:"perPage",value:r.per_page,onChange:o,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm",children:[10,15,20,50].map(u=>b.jsx("option",{value:u,children:u},u))}),b.jsx("span",{className:"text-sm text-gray-700",children:"entries"})]}),b.jsxs("div",{className:"flex items-center space-x-1",children:[b.jsx("button",{onClick:()=>s(r.current_page-1),disabled:r.current_page===1,className:"px-3 py-1 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:r.last_page},(u,d)=>d+1).map(u=>b.jsx("button",{onClick:()=>s(u),className:`px-3 py-1 rounded-md ${r.current_page===u?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:u},u)),b.jsx("button",{onClick:()=>s(r.current_page+1),disabled:r.current_page===r.last_page,className:"px-3 py-1 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),b.jsxs("div",{className:"text-sm text-gray-700",children:["Page ",r.current_page," of ",r.last_page," (Total"," ",r.total," items)"]})]})]})]})},rU=()=>{const{id:t,type:e}=fa(),n=Qt(),r=Vt(),{selectedLiveSport:i,loading:a,error:s}=qt(M=>M.livesports),o=!!t,c=e||(o&&i?i.category==="Live"?"live":"sport":"live"),u={title:"",profileImg:"",coverImg:"",content:"Long content here",tags:[],category:c==="live"?"Live":"Sport",duration:"unknow",isvip:!1,files:{trailer:{url:"https://telegram.org",quality:"",size:""},stream:[{url:"",quality:"",size:""}],download:[{url:"https://telegram.org",quality:"",size:""}]}},[d,h]=B.useState(u),[p,y]=B.useState({}),[v,S]=B.useState(!1),[x,T]=B.useState("");B.useEffect(()=>{o&&r(q8(t))},[r,t,o]),B.useEffect(()=>{o&&i&&i.id===parseInt(t)?(h({title:i.title||"",profileImg:i.profileImg||"",coverImg:i.coverImg||"",content:i.content||"",tags:i.tags||[],category:i.category||"Live",duration:i.duration||"unknow",isvip:i.isvip||!1,files:i.files||{stream:[]}}),T("")):o||h({...u,category:c==="live"?"Live":"Sport"})},[o,i,t,c]);const _=M=>{const{name:G,value:K,type:W,checked:Y}=M.target;h(j=>({...j,[G]:W==="checkbox"?Y:K}))},A=M=>{T(M.target.value)},O=()=>{x.trim()!==""&&!d.tags.includes(x.trim())&&(h(M=>({...M,tags:[...M.tags,x.trim()]})),T(""))},R=M=>{h(G=>({...G,tags:G.tags.filter(K=>K!==M)}))},C=(M,G,K)=>{const W=d.files.stream.map((Y,j)=>j===M?{...Y,[G]:K}:Y);h(Y=>({...Y,files:{...Y.files,stream:W}}))},L=()=>{h(M=>({...M,files:{...M.files,stream:[...M.files.stream,{quality:"",url:"",size:""}]}}))},P=M=>{h(G=>({...G,files:{...G.files,stream:G.files.stream.filter((K,W)=>W!==M)}}))},N=()=>{const M={};return d.title.trim()||(M.title="Title is required."),d.profileImg.trim()?/^https?:\/\/.+/.test(d.profileImg)||(M.profileImg="Invalid Profile Image URL."):M.profileImg="Profile Image URL is required.",d.coverImg.trim()?/^https?:\/\/.+/.test(d.coverImg)||(M.coverImg="Invalid Cover Image URL."):M.coverImg="Cover Image URL is required.",c==="live"?d.content.trim()?/^https?:\/\/.+\.m3u8/.test(d.content)||(M.content="Content URL must be a valid .m3u8 URL."):M.content="Content URL is required for Live TV.":c==="sport"&&(!d.files.stream||d.files.stream.length===0?M.stream="At least one stream is required for Sport events.":d.files.stream.forEach((G,K)=>{G.quality.trim()||(M[`stream_quality_${K}`]="Quality is required."),G.url.trim()?/^https?:\/\/.+/.test(G.url)||(M[`stream_url_${K}`]="Invalid URL format."):M[`stream_url_${K}`]="URL is required."})),y(M),Object.keys(M).length===0},k=async M=>{if(M.preventDefault(),!!N()){S(!0);try{const G={...d,category:d.category};c==="live"&&delete G.files,o?(await r(lye(t,G)),alert("Live Sport content updated successfully!")):(await r(oye(G)),alert("Live Sport content created successfully!")),n("/livesports")}catch(G){const K=G.message||JSON.stringify(G);alert(`Operation failed: ${K}`),console.error("Form submission error:",G)}finally{S(!1)}}};return o&&a&&!i?b.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),b.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading content for editing..."})]}):s&&o?b.jsxs("div",{className:"text-center p-6 text-red-500",children:[b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Content"}),b.jsx("p",{children:s.message||"An unexpected error occurred while fetching content details."}),b.jsx("button",{onClick:()=>n("/livesports"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Live Sports List"})]}):b.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-2xl mx-auto",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[o?"Edit":"Create New"," ",c==="live"?"Live TV":"Sport Event"]}),b.jsx("button",{onClick:()=>n("/livesports"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:" Back to List"})]}),b.jsxs("form",{onSubmit:k,className:"space-y-5",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),b.jsx("input",{type:"text",id:"title",name:"title",value:d.title,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p.title&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.title})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"profileImg",className:"block text-sm font-medium text-gray-700",children:"Profile Image URL (Thumbnail)"}),b.jsx("input",{type:"url",id:"profileImg",name:"profileImg",value:d.profileImg,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p.profileImg&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.profileImg}),d.profileImg&&b.jsxs("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:[b.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Preview:"}),b.jsx("img",{src:d.profileImg,alt:"Profile Img Preview",className:"max-w-full h-auto max-h-32 object-contain mx-auto rounded-md",onError:M=>{}})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"coverImg",className:"block text-sm font-medium text-gray-700",children:"Cover Image URL"}),b.jsx("input",{type:"url",id:"coverImg",name:"coverImg",value:d.coverImg,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p.coverImg&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.coverImg}),d.coverImg&&b.jsxs("div",{className:"mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 text-center",children:[b.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Preview:"}),b.jsx("img",{src:d.coverImg,alt:"Cover Img Preview",className:"max-w-full h-auto max-h-32 object-contain mx-auto rounded-md",onError:M=>{}})]})]}),c==="live"&&b.jsxs("div",{children:[b.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Live Stream Content URL (.m3u8)"}),b.jsx("input",{type:"url",id:"content",name:"content",value:d.content,onChange:_,placeholder:"e.g., https://example.com/live/stream.m3u8",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p.content&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.content})]}),c==="sport"&&b.jsxs("div",{className:"border border-gray-200 p-4 rounded-md",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Stream List for Sport Event"}),d.files.stream.map((M,G)=>b.jsxs("div",{className:"flex space-x-2 mb-3 items-end",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("label",{htmlFor:`quality-${G}`,className:"block text-xs font-medium text-gray-700",children:"Quality"}),b.jsx("input",{type:"text",id:`quality-${G}`,value:M.quality,onChange:K=>C(G,"quality",K.target.value),placeholder:"e.g., SD, HD, FHD",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p[`stream_quality_${G}`]&&b.jsx("p",{className:"mt-1 text-xs text-red-600",children:p[`stream_quality_${G}`]})]}),b.jsxs("div",{className:"flex-2",children:[b.jsx("label",{htmlFor:`url-${G}`,className:"block text-xs font-medium text-gray-700",children:"Stream URL"}),b.jsx("input",{type:"url",id:`url-${G}`,value:M.url,onChange:K=>C(G,"url",K.target.value),placeholder:"e.g., https://example.com/sport/event.m3u8",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),p[`stream_url_${G}`]&&b.jsx("p",{className:"mt-1 text-xs text-red-600",children:p[`stream_url_${G}`]})]}),b.jsx("button",{type:"button",onClick:()=>P(G),className:"p-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition duration-200",children:"Remove"})]},G)),b.jsx("button",{type:"button",onClick:L,className:"mt-2 px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition duration-200",children:"Add Stream"}),p.stream&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.stream})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700",children:"Tags (press Enter to add)"}),b.jsxs("div",{className:"flex items-center mt-1",children:[b.jsx("input",{type:"text",id:"tagInput",value:x,onChange:A,onKeyDown:M=>{M.key==="Enter"&&(M.preventDefault(),O())},placeholder:"e.g., football, premier league",className:"block w-full border border-gray-300 rounded-l-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),b.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-r-md hover:bg-gray-300 transition duration-200",children:"Add"})]}),b.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:d.tags.map(M=>b.jsxs("span",{className:"flex items-center bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:[M,b.jsx("button",{type:"button",onClick:()=>R(M),className:"ml-1 text-blue-800 hover:text-blue-900",children:""})]},M))})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700",children:"Duration (e.g., 1h 30m, unknown)"}),b.jsx("input",{type:"text",id:"duration",name:"duration",value:d.duration,onChange:_,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"isvip",name:"isvip",type:"checkbox",checked:d.isvip,onChange:_,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"isvip",className:"ml-2 block text-sm text-gray-900",children:"Is VIP Content?"})]}),b.jsx("div",{className:"flex justify-end space-x-3",children:b.jsx("button",{type:"submit",disabled:v,className:"px-6 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Saving...":o?"Update Content":"Create Content"})})]})]})},fye=()=>{var s;const{id:t}=fa(),e=Qt(),n=Vt(),{selectedLiveSport:r,loading:i,error:a}=qt(o=>o.livesports);return B.useEffect(()=>{t&&n(q8(t))},[n,t]),i?b.jsxs("div",{className:"flex justify-center items-center h-full p-6",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),b.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading content details..."})]}):a?b.jsxs("div",{className:"text-center p-6 text-red-500",children:[b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Content Details"}),b.jsx("p",{children:a.message||"An unexpected error occurred."}),b.jsx("button",{onClick:()=>e("/livesports"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Live Sports List"})]}):r?b.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md max-w-2xl mx-auto",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Live Sports Details"}),b.jsx("button",{onClick:()=>e("/livesports"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:" Back to List"})]}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"ID:"}),b.jsx("span",{className:"text-gray-900",children:r.id})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Title:"}),b.jsx("span",{className:"text-gray-900",children:r.title||"N/A"})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Category:"}),b.jsx("span",{className:`font-semibold ${r.category==="Live"?"text-blue-600":"text-orange-600"}`,children:r.category||"N/A"})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Profile Image URL:"}),b.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.profileImg?b.jsx("a",{href:r.profileImg,target:"_blank",rel:"noopener noreferrer",children:r.profileImg}):"N/A"})]}),r.profileImg&&b.jsx("div",{className:"text-center mt-2",children:b.jsx("img",{src:r.profileImg,alt:"Profile Image Preview",className:"max-w-full h-auto max-h-48 object-contain mx-auto rounded-md border border-gray-200",onError:o=>{o.target.src="https://via.placeholder.com/300x200?text=Image+Not+Available"}})}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Cover Image URL:"}),b.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.coverImg?b.jsx("a",{href:r.coverImg,target:"_blank",rel:"noopener noreferrer",children:r.coverImg}):"N/A"})]}),r.coverImg&&b.jsx("div",{className:"text-center mt-2",children:b.jsx("img",{src:r.coverImg,alt:"Cover Image Preview",className:"max-w-full h-auto max-h-48 object-contain mx-auto rounded-md border border-gray-200",onError:o=>{o.target.src="https://via.placeholder.com/300x200?text=Image+Not+Available"}})}),r.category==="Live"&&b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Content URL:"}),b.jsx("span",{className:"text-blue-600 hover:underline break-all max-w-[70%]",children:r.content?b.jsx("a",{href:r.content,target:"_blank",rel:"noopener noreferrer",children:r.content}):"N/A"})]}),r.category==="Sport"&&((s=r.files)==null?void 0:s.stream_list)&&b.jsxs("div",{children:[b.jsx("span",{className:"font-semibold text-gray-700 block mb-2",children:"Stream List:"}),b.jsx("ul",{className:"list-disc list-inside space-y-1",children:r.files.stream_list.map((o,c)=>b.jsxs("li",{className:"text-gray-900 break-words",children:[b.jsxs("span",{className:"font-medium",children:[o.quality||"N/A",":"]})," ",b.jsx("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:o.url||"N/A"})]},c))})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Tags:"}),b.jsx("span",{className:"text-gray-900",children:r.tags&&r.tags.length>0?r.tags.join(", "):"N/A"})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Duration:"}),b.jsx("span",{className:"text-gray-900",children:r.duration||"N/A"})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Is VIP:"}),b.jsx("span",{className:`font-semibold ${r.isvip?"text-green-600":"text-red-600"}`,children:r.isvip?"Yes":"No"})]}),b.jsxs("div",{className:"flex justify-between border-b pb-2",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Created At:"}),b.jsx("span",{className:"text-gray-900",children:r.created_at?pn(new Date(r.created_at),"MMM dd,yyyy HH:mm"):"N/A"})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:"font-semibold text-gray-700",children:"Updated At:"}),b.jsx("span",{className:"text-gray-900",children:r.updated_at?pn(new Date(r.updated_at),"MMM dd,yyyy HH:mm"):"N/A"})]})]}),b.jsx("div",{className:"mt-8 flex justify-end space-x-3",children:b.jsx("button",{onClick:()=>e(`/livesports/edit/${r.id}`),className:"px-5 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-200",children:"Edit Content"})})]}):b.jsxs("div",{className:"text-center p-6 text-gray-600",children:[b.jsxs("p",{children:["No live sports content found with ID: ",t,"."]}),b.jsx("button",{onClick:()=>e("/livesports"),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",children:"Back to Live Sports List"})]})},dye=async()=>{var t;try{return(await Xe.get("/matches")).data}catch(e){throw((t=e.response)==null?void 0:t.data)||{message:"Failed to fetch matches."}}},hye=async t=>{var e;try{return(await Xe.get(`/matches/${t}/servers`)).data}catch(n){throw((e=n.response)==null?void 0:e.data)||{message:"Failed to fetch match details."}}},mye=()=>async t=>{t({type:$$});try{const e=await dye();t({type:G$,payload:e})}catch(e){t({type:V$,payload:e})}},pye=t=>async e=>{e({type:q$});try{const n=await hye(t);e({type:H$,payload:n})}catch(n){e({type:z$,payload:n})}},gye=["live","upcoming","finished"],yye=()=>{var c;const t=Vt(),e=Qt(),{matches:n,loading:r,error:i}=qt(u=>u.sport),[a,s]=B.useState("live");B.useEffect(()=>{t(mye())},[t]);const o=((c=n.football)==null?void 0:c[a])||[];return b.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 via-white to-gray-100 rounded-2xl shadow-xl max-w-full sm:max-w-6xl mx-auto",children:[b.jsx("h1",{className:"text-4xl font-extrabold text-blue-700 mb-8 text-center tracking-tight drop-shadow",children:"Football Matches"}),b.jsx("div",{className:"flex justify-center gap-3 mb-8",children:gye.map(u=>b.jsx("button",{onClick:()=>s(u),className:`px-6 py-2 rounded-full text-base font-semibold shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400 ${a===u?"bg-blue-600 text-white scale-105 shadow-lg":"bg-white text-blue-700 border border-blue-200 hover:bg-blue-100"}`,children:u.charAt(0).toUpperCase()+u.slice(1)},u))}),r?b.jsxs("div",{className:"flex flex-col justify-center items-center h-40",children:[b.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mb-4"}),b.jsx("span",{className:"text-xl text-blue-700 font-semibold",children:"Loading matches..."})]}):i?b.jsx("div",{className:"text-center text-red-500 text-lg font-semibold py-8",children:i.message||"Failed to load matches."}):o.length===0?b.jsx("div",{className:"text-center text-gray-500 py-12 text-lg font-medium",children:"No matches found."}):b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map((u,d)=>b.jsxs("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-shadow duration-300 flex flex-col border border-blue-100 overflow-hidden group",children:[b.jsxs("div",{className:"flex flex-row items-center justify-between p-4 sm:p-6 bg-gradient-to-r from-blue-50 via-white to-gray-50 gap-2 sm:gap-4 w-full overflow-x-auto",children:[b.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 min-w-0",children:[b.jsx("img",{src:u.home_team_logo,alt:u.home_team_name,className:"w-14 h-14 object-contain rounded-full border-2 border-blue-200 group-hover:border-blue-400 transition"}),b.jsx("span",{className:"font-bold text-gray-800 text-sm sm:text-base text-center overflow-hidden text-ellipsis whitespace-nowrap max-w-[100px] sm:max-w-[140px]",children:u.home_team_name})]}),b.jsx("span",{className:"text-base text-blue-500 font-bold mx-2 sm:mx-4 my-2 sm:my-0",children:"vs"}),b.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 min-w-0",children:[b.jsx("img",{src:u.away_team_logo,alt:u.away_team_name,className:"w-14 h-14 object-contain rounded-full border-2 border-blue-200 group-hover:border-blue-400 transition"}),b.jsx("span",{className:"font-bold text-gray-800 text-sm sm:text-base text-center overflow-hidden text-ellipsis whitespace-nowrap max-w-[100px] sm:max-w-[140px]",children:u.away_team_name})]})]}),b.jsxs("div",{className:"px-6 pb-6 flex flex-col gap-2",children:[b.jsx("span",{className:"text-sm text-blue-600 font-semibold tracking-wide",children:u.league_name}),b.jsx("span",{className:"text-xs text-gray-500 font-medium",children:(()=>{let h;return typeof u.match_time=="string"&&u.match_time.includes("MMT")?h=new Date(u.match_time.replace(" MMT","").replace(/-/g,"/")):h=new Date(u.match_time),GY(h)?`Today ${pn(h,"HH:mm")} MMT`:HY(h)?`Yesterday ${pn(h,"HH:mm")} MMT`:VY(h)?`Tomorrow ${pn(h,"HH:mm")} MMT`:`${pn(h,"yyyy-MM-dd HH:mm")} MMT`})()}),b.jsx("button",{onClick:()=>e(`/sport/match/${u.room_num}`),className:"mt-4 px-5 py-2 bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 transition duration-200 text-base font-bold w-full group-hover:scale-105 group-hover:shadow-lg",children:"View Details"})]})]},d))})]})},xe=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},vye=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=xye},xye=Number.MAX_SAFE_INTEGER||9007199254740991;let Te=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),re=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",t.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",t.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.ASSET_LIST_LOAD_ERROR="assetListLoadError",t.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",t.ASSET_LIST_PARSING_ERROR="assetListParsingError",t.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.ATTACH_MEDIA_ERROR="attachMediaError",t.UNKNOWN="unknown",t}({}),D=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.MEDIA_ENDED="hlsMediaEnded",t.STALL_RESOLVED="hlsStallResolved",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFERED_TO_END="hlsBufferedToEnd",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t.ASSET_LIST_LOADING="hlsAssetListLoading",t.ASSET_LIST_LOADED="hlsAssetListLoaded",t.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",t.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",t.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",t.INTERSTITIAL_STARTED="hlsInterstitialStarted",t.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",t.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",t.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",t.INTERSTITIAL_ENDED="hlsInterstitialEnded",t.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",t.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",t.EVENT_CUE_ENTER="hlsEventCueEnter",t}({});var He={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Se={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Xo{constructor(e,n=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=n,this.totalWeight_=r}sample(e,n){const r=Math.pow(this.alpha_,e);this.estimate_=n*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class bye{constructor(e,n,r,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Xo(e),this.fast_=new Xo(n),this.defaultTTFB_=i,this.ttfb_=new Xo(e)}update(e,n){const{slow_:r,fast_:i,ttfb_:a}=this;r.halfLife!==e&&(this.slow_=new Xo(e,r.getEstimate(),r.getTotalWeight())),i.halfLife!==n&&(this.fast_=new Xo(n,i.getEstimate(),i.getTotalWeight())),a.halfLife!==e&&(this.ttfb_=new Xo(e,a.getEstimate(),a.getTotalWeight()))}sample(e,n){e=Math.max(e,this.minDelayMs_);const r=8*n,i=e/1e3,a=r/i;this.fast_.sample(i,a),this.slow_.sample(i,a)}sampleTTFB(e){const n=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(n,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Sye(t,e,n){return(e=Tye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ut(){return ut=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ut.apply(null,arguments)}function iU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iU(Object(n),!0).forEach(function(r){Sye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tye(t){var e=Eye(t,"string");return typeof e=="symbol"?e:e+""}class ii{constructor(e,n){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const r=`[${e}]:`;this.trace=Va,this.debug=n.debug.bind(null,r),this.log=n.log.bind(null,r),this.warn=n.warn.bind(null,r),this.info=n.info.bind(null,r),this.error=n.error.bind(null,r)}}const Va=function(){},Aye={trace:Va,debug:Va,log:Va,warn:Va,info:Va,error:Va};function k1(){return ut({},Aye)}function wye(t,e){const n=self.console[t];return n?n.bind(self.console,`${e?"["+e+"] ":""}[${t}] >`):Va}function aU(t,e,n){return e[t]?e[t].bind(e):wye(t,n)}const j1=k1();function _ye(t,e,n){const r=k1();if(typeof console=="object"&&t===!0||typeof t=="object"){const i=["debug","log","info","warn","error"];i.forEach(a=>{r[a]=aU(a,t,n)});try{r.log(`Debug logs enabled for "${e}" in hls.js version 1.6.7`)}catch{return k1()}i.forEach(a=>{j1[a]=aU(a,t)})}else ut(j1,r);return r}const Je=j1;function Za(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function Rye(t){return typeof self<"u"&&t===self.ManagedMediaSource}function H8(t,e){const n=Object.keys(t),r=Object.keys(e),i=n.length,a=r.length;return!i||!a||i===a&&!n.some(s=>r.indexOf(s)===-1)}function fr(t,e=!1){if(typeof TextDecoder<"u"){const u=new TextDecoder("utf-8").decode(t);if(e){const d=u.indexOf("\0");return d!==-1?u.substring(0,d):u}return u.replace(/\0/g,"")}const n=t.length;let r,i,a,s="",o=0;for(;o<n;){if(r=t[o++],r===0&&e)return s;if(r===0||r===3)continue;switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(r);break;case 12:case 13:i=t[o++],s+=String.fromCharCode((r&31)<<6|i&63);break;case 14:i=t[o++],a=t[o++],s+=String.fromCharCode((r&15)<<12|(i&63)<<6|(a&63)<<0);break}}return s}const Ns={hexDump:function(t){let e="";for(let n=0;n<t.length;n++){let r=t[n].toString(16);r.length<2&&(r="0"+r),e+=r}return e}};function z8(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function Oye(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var EE={exports:{}},sU;function Cye(){return sU||(sU=1,function(t,e){(function(n){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(c,u,d){if(d=d||{},c=c.trim(),u=u.trim(),!u){if(!d.alwaysNormalize)return c;var h=o.parseURL(c);if(!h)throw new Error("Error trying to parse base URL.");return h.path=o.normalizePath(h.path),o.buildURLFromParts(h)}var p=o.parseURL(u);if(!p)throw new Error("Error trying to parse relative URL.");if(p.scheme)return d.alwaysNormalize?(p.path=o.normalizePath(p.path),o.buildURLFromParts(p)):u;var y=o.parseURL(c);if(!y)throw new Error("Error trying to parse base URL.");if(!y.netLoc&&y.path&&y.path[0]!=="/"){var v=i.exec(y.path);y.netLoc=v[1],y.path=v[2]}y.netLoc&&!y.path&&(y.path="/");var S={scheme:y.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};if(!p.netLoc&&(S.netLoc=y.netLoc,p.path[0]!=="/"))if(!p.path)S.path=y.path,p.params||(S.params=y.params,p.query||(S.query=y.query));else{var x=y.path,T=x.substring(0,x.lastIndexOf("/")+1)+p.path;S.path=o.normalizePath(T)}return S.path===null&&(S.path=d.alwaysNormalize?o.normalizePath(p.path):p.path),o.buildURLFromParts(S)},parseURL:function(c){var u=r.exec(c);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(c){for(c=c.split("").reverse().join("").replace(a,"");c.length!==(c=c.replace(s,"")).length;);return c.split("").reverse().join("")},buildURLFromParts:function(c){return c.scheme+c.netLoc+c.path+c.params+c.query+c.fragment}};t.exports=o})()}(EE)),EE.exports}var Qw=Cye();class Zw{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var yt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class K8{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,Dye(this,"stats")}setByteRange(e,n){const r=e.split("@",2);let i;r.length===1?i=(n==null?void 0:n.byteRangeEndOffset)||0:i=parseInt(r[1]),this._byteRange=[i,parseInt(r[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[yt.AUDIO]:null,[yt.VIDEO]:null,[yt.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new Zw),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Qw.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[yt.AUDIO]=null,e[yt.VIDEO]=null,e[yt.AUDIOVIDEO]=null}}function Wt(t){return t.sn!=="initSegment"}class TE extends K8{constructor(e,n){super(n),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange){const e=this.byteRange[0],n=this.byteRange[1];if(xe(e)&&xe(n))return n-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const n=this.levelkeys.identity;if(n)this._decryptdata=n.getDecryptData(this.sn);else{const r=Object.keys(this.levelkeys);if(r.length===1)return this._decryptdata=this.levelkeys[r[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=xe(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const n=Object.keys(this.levelkeys),r=n.length;if(r>1||r===1&&this.levelkeys[n[0]].encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!xe(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return Wt(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const n=this.levelkeys[e];n&&!this._decryptdata&&(this._decryptdata=n.getDecryptData(this.sn))}}abortRequests(){var e,n;(e=this.loader)==null||e.abort(),(n=this.keyLoader)==null||n.abort()}setElementaryStreamInfo(e,n,r,i,a,s=!1){const{elementaryStreams:o}=this,c=o[e];if(!c){o[e]={startPTS:n,endPTS:r,startDTS:i,endDTS:a,partial:s};return}c.startPTS=Math.min(c.startPTS,n),c.endPTS=Math.max(c.endPTS,r),c.startDTS=Math.min(c.startDTS,i),c.endDTS=Math.max(c.endDTS,a)}}class Lye extends K8{constructor(e,n,r,i,a){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=n,this.index=i;const s=e.enumeratedString("BYTERANGE");s&&this.setByteRange(s,a),a&&(this.fragOffset=a.fragOffset+a.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function Y8(t,e){const n=Object.getPrototypeOf(t);if(n){const r=Object.getOwnPropertyDescriptor(n,e);return r||Y8(n,e)}}function Dye(t,e){const n=Y8(t,e);n&&(n.enumerable=!0,Object.defineProperty(t,e,n))}const oU=Math.pow(2,32)-1,Iye=[].push,W8={video:1,audio:2,id3:3,text:4};function hn(t){return String.fromCharCode.apply(null,t)}function X8(t,e){const n=t[e]<<8|t[e+1];return n<0?65536+n:n}function Ne(t,e){const n=Q8(t,e);return n<0?4294967296+n:n}function lU(t,e){let n=Ne(t,e);return n*=Math.pow(2,32),n+=Ne(t,e+4),n}function Q8(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function Pye(t){const e=t.byteLength;for(let n=0;n<e;){const r=Ne(t,n);if(r>8&&t[n+4]===109&&t[n+5]===111&&t[n+6]===111&&t[n+7]===102)return!0;n=r>1?n+r:e}return!1}function Ve(t,e){const n=[];if(!e.length)return n;const r=t.byteLength;for(let i=0;i<r;){const a=Ne(t,i),s=hn(t.subarray(i+4,i+8)),o=a>1?i+a:r;if(s===e[0])if(e.length===1)n.push(t.subarray(i+8,o));else{const c=Ve(t.subarray(i+8,o),e.slice(1));c.length&&Iye.apply(n,c)}i=o}return n}function Nye(t){const e=[],n=t[0];let r=8;const i=Ne(t,r);r+=4;let a=0,s=0;n===0?(a=Ne(t,r),s=Ne(t,r+4),r+=8):(a=lU(t,r),s=lU(t,r+8),r+=16),r+=2;let o=t.length+s;const c=X8(t,r);r+=2;for(let u=0;u<c;u++){let d=r;const h=Ne(t,d);d+=4;const p=h&2147483647;if((h&2147483648)>>>31===1)return Je.warn("SIDX has hierarchical references (not supported)"),null;const v=Ne(t,d);d+=4,e.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/i,start:o,end:o+p-1}}),o+=p,d+=4,r=d}return{earliestPresentationTime:a,timescale:i,version:n,referencesCount:c,references:e}}function Z8(t){const e=[],n=Ve(t,["moov","trak"]);for(let i=0;i<n.length;i++){const a=n[i],s=Ve(a,["tkhd"])[0];if(s){let o=s[0];const c=Ne(s,o===0?12:20),u=Ve(a,["mdia","mdhd"])[0];if(u){o=u[0];const d=Ne(u,o===0?12:20),h=Ve(a,["mdia","hdlr"])[0];if(h){const p=hn(h.subarray(8,12)),y={soun:yt.AUDIO,vide:yt.VIDEO}[p],v=Ve(a,["mdia","minf","stbl","stsd"])[0],S=Mye(v);y?(e[c]={timescale:d,type:y,stsd:S},e[y]=ht({timescale:d,id:c},S)):e[c]={timescale:d,type:p,stsd:S}}}}}return Ve(t,["moov","mvex","trex"]).forEach(i=>{const a=Ne(i,4),s=e[a];s&&(s.default={duration:Ne(i,12),flags:Ne(i,20)})}),e}function Mye(t){const e=t.subarray(8),n=e.subarray(86),r=hn(e.subarray(4,8));let i=r,a;const s=r==="enca"||r==="encv";if(s){const u=Ve(e,[r])[0].subarray(r==="enca"?28:78);Ve(u,["sinf"]).forEach(h=>{const p=Ve(h,["schm"])[0];if(p){const y=hn(p.subarray(4,8));if(y==="cbcs"||y==="cenc"){const v=Ve(h,["frma"])[0];v&&(i=hn(v))}}})}const o=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const c=Ve(n,["avcC"])[0];c&&c.length>3&&(i+="."+qh(c[1])+qh(c[2])+qh(c[3]),a=Vh(o==="avc1"?"dva1":"dvav",n));break}case"mp4a":{const c=Ve(e,[r])[0],u=Ve(c.subarray(28),["esds"])[0];if(u&&u.length>7){let d=4;if(u[d++]!==3)break;d=AE(u,d),d+=2;const h=u[d++];if(h&128&&(d+=2),h&64&&(d+=u[d++]),u[d++]!==4)break;d=AE(u,d);const p=u[d++];if(p===64)i+="."+qh(p);else break;if(d+=12,u[d++]!==5)break;d=AE(u,d);const y=u[d++];let v=(y&248)>>3;v===31&&(v+=1+((y&7)<<3)+((u[d]&224)>>5)),i+="."+v}break}case"hvc1":case"hev1":{const c=Ve(n,["hvcC"])[0];if(c&&c.length>12){const u=c[1],d=["","A","B","C"][u>>6],h=u&31,p=Ne(c,2),y=(u&32)>>5?"H":"L",v=c[12],S=c.subarray(6,12);i+="."+d+h,i+="."+kye(p).toString(16).toUpperCase(),i+="."+y+v;let x="";for(let T=S.length;T--;){const _=S[T];(_||x)&&(x="."+_.toString(16).toUpperCase()+x)}i+=x}a=Vh(o=="hev1"?"dvhe":"dvh1",n);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=Vh(i,n)||i;break}case"vp09":{const c=Ve(n,["vpcC"])[0];if(c&&c.length>6){const u=c[4],d=c[5],h=c[6]>>4&15;i+="."+hi(u)+"."+hi(d)+"."+hi(h)}break}case"av01":{const c=Ve(n,["av1C"])[0];if(c&&c.length>2){const u=c[1]>>>5,d=c[1]&31,h=c[2]>>>7?"H":"M",p=(c[2]&64)>>6,y=(c[2]&32)>>5,v=u===2&&p?y?12:10:p?10:8,S=(c[2]&16)>>4,x=(c[2]&8)>>3,T=(c[2]&4)>>2,_=c[2]&3;i+="."+u+"."+hi(d)+h+"."+hi(v)+"."+S+"."+x+T+_+"."+hi(1)+"."+hi(1)+"."+hi(1)+"."+0,a=Vh("dav1",n)}break}}return{codec:i,encrypted:s,supplemental:a}}function Vh(t,e){const n=Ve(e,["dvvC"]),r=n.length?n[0]:Ve(e,["dvcC"])[0];if(r){const i=r[2]>>1&127,a=r[2]<<5&32|r[3]>>3&31;return t+"."+hi(i)+"."+hi(a)}}function kye(t){let e=0;for(let n=0;n<32;n++)e|=(t>>n&1)<<31-n;return e>>>0}function AE(t,e){const n=e+5;for(;t[e++]&128&&e<n;);return e}function qh(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function hi(t){return(t<10?"0":"")+t}function jye(t,e){if(!t||!e)return t;const n=e.keyId;return n&&e.isCommonEncryption&&Ve(t,["moov","trak"]).forEach(i=>{const s=Ve(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let o=Ve(s,["enca"]);const c=o.length>0;c||(o=Ve(s,["encv"])),o.forEach(u=>{const d=c?u.subarray(28):u.subarray(78);Ve(d,["sinf"]).forEach(p=>{const y=Uye(p);if(y){const v=y.subarray(8,24);v.some(S=>S!==0)||(Je.log(`[eme] Patching keyId in 'enc${c?"a":"v"}>sinf>>tenc' box: ${Ns.hexDump(v)} -> ${Ns.hexDump(n)}`),y.set(n,8))}})})}),t}function Uye(t){const e=Ve(t,["schm"])[0];if(e){const n=hn(e.subarray(4,8));if(n==="cbcs"||n==="cenc")return Ve(t,["schi","tenc"])[0]}return null}function Bye(t,e,n){const r={},i=Ve(t,["moof","traf"]);for(let a=0;a<i.length;a++){const s=i[a],o=Ve(s,["tfhd"])[0],c=Ne(o,4),u=e[c];if(!u)continue;const d=r[c]||(r[c]={start:NaN,duration:0,sampleCount:0,timescale:u.timescale,type:u.type}),h=Ve(s,["tfdt"])[0];if(h){const A=h[0];let O=Ne(h,4);A===1&&(O===oU?n.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(O*=oU+1,O+=Ne(h,8))),xe(O)&&(!xe(d.start)||O<d.start)&&(d.start=O)}const p=u.default,y=Ne(o,0)|(p==null?void 0:p.flags);let v=(p==null?void 0:p.duration)||0;y&8&&(y&2?v=Ne(o,12):v=Ne(o,8));const S=Ve(s,["trun"]);let x=d.start||0,T=0,_=v;for(let A=0;A<S.length;A++){const O=S[A],R=Ne(O,4),C=d.sampleCount;d.sampleCount+=R;const L=O[3]&1,P=O[3]&4,N=O[2]&1,k=O[2]&2,M=O[2]&4,G=O[2]&8;let K=8,W=R;for(L&&(K+=4),P&&R&&(!(O[K+1]&1)&&d.keyFrameIndex===void 0&&(d.keyFrameIndex=C),K+=4,N?(_=Ne(O,K),K+=4):_=v,k&&(K+=4),G&&(K+=4),x+=_,T+=_,W--);W--;)N?(_=Ne(O,K),K+=4):_=v,k&&(K+=4),M&&(O[K+1]&1||d.keyFrameIndex===void 0&&(d.keyFrameIndex=d.sampleCount-(W+1),d.keyFrameStart=x),K+=4),G&&(K+=4),x+=_,T+=_;!T&&v&&(T+=v*R)}d.duration+=T}if(!Object.keys(r).some(a=>r[a].duration)){let a=1/0,s=0;const o=Ve(t,["sidx"]);for(let c=0;c<o.length;c++){const u=Nye(o[c]);if(u!=null&&u.references){a=Math.min(a,u.earliestPresentationTime/u.timescale);const d=u.references.reduce((h,p)=>h+p.info.duration||0,0);s=Math.max(s,d+u.earliestPresentationTime/u.timescale)}}s&&xe(s)&&Object.keys(r).forEach(c=>{r[c].duration||(r[c].duration=s*r[c].timescale-r[c].start)})}return r}function Fye(t){const e={valid:null,remainder:null},n=Ve(t,["moof"]);if(n.length<2)return e.remainder=t,e;const r=n[n.length-1];return e.valid=t.slice(0,r.byteOffset-8),e.remainder=t.slice(r.byteOffset-8),e}function jr(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function uU(t,e){const n=[],r=e.samples,i=e.timescale,a=e.id;let s=!1;return Ve(r,["moof"]).map(c=>{const u=c.byteOffset-8;Ve(c,["traf"]).map(h=>{const p=Ve(h,["tfdt"]).map(y=>{const v=y[0];let S=Ne(y,4);return v===1&&(S*=Math.pow(2,32),S+=Ne(y,8)),S/i})[0];return p!==void 0&&(t=p),Ve(h,["tfhd"]).map(y=>{const v=Ne(y,4),S=Ne(y,0)&16777215,x=(S&1)!==0,T=(S&2)!==0,_=(S&8)!==0;let A=0;const O=(S&16)!==0;let R=0;const C=(S&32)!==0;let L=8;v===a&&(x&&(L+=8),T&&(L+=4),_&&(A=Ne(y,L),L+=4),O&&(R=Ne(y,L),L+=4),C&&(L+=4),e.type==="video"&&(s=Ig(e.codec)),Ve(h,["trun"]).map(P=>{const N=P[0],k=Ne(P,0)&16777215,M=(k&1)!==0;let G=0;const K=(k&4)!==0,W=(k&256)!==0;let Y=0;const j=(k&512)!==0;let $=0;const q=(k&1024)!==0,Z=(k&2048)!==0;let F=0;const V=Ne(P,4);let H=8;M&&(G=Ne(P,H),H+=4),K&&(H+=4);let te=G+u;for(let ce=0;ce<V;ce++){if(W?(Y=Ne(P,H),H+=4):Y=A,j?($=Ne(P,H),H+=4):$=R,q&&(H+=4),Z&&(N===0?F=Ne(P,H):F=Q8(P,H),H+=4),e.type===yt.VIDEO){let ye=0;for(;ye<$;){const ge=Ne(r,te);if(te+=4,$ye(s,r[te])){const Me=r.subarray(te,te+ge);Jw(Me,s?2:1,t+F/i,n)}te+=ge,ye+=ge+4}}t+=Y/i}}))})})}),n}function Ig(t){if(!t)return!1;const e=t.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function $ye(t,e){if(t){const n=e>>1&63;return n===39||n===40}else return(e&31)===6}function Jw(t,e,n,r){const i=J8(t);let a=0;a+=e;let s=0,o=0,c=0;for(;a<i.length;){s=0;do{if(a>=i.length)break;c=i[a++],s+=c}while(c===255);o=0;do{if(a>=i.length)break;c=i[a++],o+=c}while(c===255);const u=i.length-a;let d=a;if(o<u)a+=o;else if(o>u){Je.error(`Malformed SEI payload. ${o} is too small, only ${u} bytes left to parse.`);break}if(s===4){if(i[d++]===181){const p=X8(i,d);if(d+=2,p===49){const y=Ne(i,d);if(d+=4,y===1195456820){const v=i[d++];if(v===3){const S=i[d++],x=31&S,T=64&S,_=T?2+x*3:0,A=new Uint8Array(_);if(T){A[0]=S;for(let O=1;O<_;O++)A[O]=i[d++]}r.push({type:v,payloadType:s,pts:n,bytes:A})}}}}}else if(s===5&&o>16){const h=[];for(let v=0;v<16;v++){const S=i[d++].toString(16);h.push(S.length==1?"0"+S:S),(v===3||v===5||v===7||v===9)&&h.push("-")}const p=o-16,y=new Uint8Array(p);for(let v=0;v<p;v++)y[v]=i[d++];r.push({payloadType:s,pts:n,uuid:h.join(""),userData:fr(y),userDataBytes:y})}}}function J8(t){const e=t.byteLength,n=[];let r=1;for(;r<e-2;)t[r]===0&&t[r+1]===0&&t[r+2]===3?(n.push(r+2),r+=2):r++;if(n.length===0)return t;const i=e-n.length,a=new Uint8Array(i);let s=0;for(r=0;r<i;s++,r++)s===n[0]&&(s++,n.shift()),a[r]=t[s];return a}function Gye(t){const e=t[0];let n="",r="",i=0,a=0,s=0,o=0,c=0,u=0;if(e===0){for(;hn(t.subarray(u,u+1))!=="\0";)n+=hn(t.subarray(u,u+1)),u+=1;for(n+=hn(t.subarray(u,u+1)),u+=1;hn(t.subarray(u,u+1))!=="\0";)r+=hn(t.subarray(u,u+1)),u+=1;r+=hn(t.subarray(u,u+1)),u+=1,i=Ne(t,12),a=Ne(t,16),o=Ne(t,20),c=Ne(t,24),u=28}else if(e===1){u+=4,i=Ne(t,u),u+=4;const h=Ne(t,u);u+=4;const p=Ne(t,u);for(u+=4,s=2**32*h+p,vye(s)||(s=Number.MAX_SAFE_INTEGER,Je.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Ne(t,u),u+=4,c=Ne(t,u),u+=4;hn(t.subarray(u,u+1))!=="\0";)n+=hn(t.subarray(u,u+1)),u+=1;for(n+=hn(t.subarray(u,u+1)),u+=1;hn(t.subarray(u,u+1))!=="\0";)r+=hn(t.subarray(u,u+1)),u+=1;r+=hn(t.subarray(u,u+1)),u+=1}const d=t.subarray(u,t.byteLength);return{schemeIdUri:n,value:r,timeScale:i,presentationTime:s,presentationTimeDelta:a,eventDuration:o,id:c,payload:d}}function Vye(t,...e){const n=e.length;let r=8,i=n;for(;i--;)r+=e[i].byteLength;const a=new Uint8Array(r);for(a[0]=r>>24&255,a[1]=r>>16&255,a[2]=r>>8&255,a[3]=r&255,a.set(t,4),i=0,r=8;i<n;i++)a.set(e[i],r),r+=e[i].byteLength;return a}function qye(t,e,n){if(t.byteLength!==16)throw new RangeError("Invalid system id");let r,i;r=0,i=new Uint8Array;let a;r>0?(a=new Uint8Array(4),e.length>0&&new DataView(a.buffer).setUint32(0,e.length,!1)):a=new Uint8Array;const s=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(s.buffer).setUint32(0,n.byteLength,!1),Vye([112,115,115,104],new Uint8Array([r,0,0,0]),t,a,i,s,n||new Uint8Array)}const eG=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Vl={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function e_(t,e){const n=Vl[e];return!!n&&!!n[t.slice(0,4)]}function U1(t,e,n=!0){return!t.split(",").some(r=>!t_(r,e,n))}function t_(t,e,n=!0){var r;const i=Za(n);return(r=i==null?void 0:i.isTypeSupported(kf(t,e)))!=null?r:!1}function kf(t,e){return`${e}/mp4;codecs=${t}`}function cU(t){if(t){const e=t.substring(0,4);return Vl.video[e]}return 2}function Cp(t){const e=eG();return t.split(",").reduce((n,r)=>{const a=e&&Ig(r)?9:Vl.video[r];return a?(a*2+n)/(n?3:2):(Vl.audio[r]+n)/(n?2:1)},0)}const wE={};function Hye(t,e=!0){if(wE[t])return wE[t];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[t];for(let i=0;i<n.length;i++){var r;if(t_(n[i],"audio",e))return wE[t]=n[i],n[i];if(n[i]==="mp3"&&(r=Za(e))!=null&&r.isTypeSupported("audio/mpeg"))return""}return t}const zye=/flac|opus|mp4a\.40\.34/i;function Lp(t,e=!0){return t.replace(zye,n=>Hye(n.toLowerCase(),e))}function Kye(t,e){const n=[];if(t){const r=t.split(",");for(let i=0;i<r.length;i++)e_(r[i],"video")||n.push(r[i])}return e&&n.push(e),n.join(",")}function fm(t,e){if(t&&(t.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(t)!==-1)&&(fU(t,"audio")||fU(t,"video")))return t;if(e){const n=e.split(",");if(n.length>1){if(t){for(let r=n.length;r--;)if(n[r].substring(0,4)===t.substring(0,4))return n[r]}return n[0]}}return e||t}function fU(t,e){return e_(t,e)&&t_(t,e)}function Yye(t){const e=t.split(",");for(let n=0;n<e.length;n++){const r=e[n].split(".");r.length>2&&r[0]==="avc1"&&(e[n]=`avc1.${parseInt(r[1]).toString(16)}${("000"+parseInt(r[2]).toString(16)).slice(-4)}`)}return e.join(",")}function Wye(t){if(t.startsWith("av01.")){const e=t.split("."),n=["0","111","01","01","01","0"];for(let r=e.length;r>4&&r<10;r++)e[r]=n[r-4];return e.join(".")}return t}function dU(t){const e=Za(t)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function B1(t){return t.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const tG={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function nG(t,e){return{supported:!1,configurations:e,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:t}}function Xye(t,e,n,r,i,a){const s=t.videoCodec,o=t.audioCodec?t.audioGroups:null,c=a==null?void 0:a.audioCodec,u=a==null?void 0:a.channels,d=u?parseInt(u):c?1/0:2;let h=null;if(o!=null&&o.length)try{o.length===1&&o[0]?h=e.groups[o[0]].channels:h=o.reduce((p,y)=>{if(y){const v=e.groups[y];if(!v)throw new Error(`Audio track group ${y} not found`);Object.keys(v.channels).forEach(S=>{p[S]=(p[S]||0)+v.channels[S]})}return p},{2:0})}catch{return!0}return s!==void 0&&(s.split(",").some(p=>Ig(p))||t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(r,30)||t.videoRange!=="SDR"&&t.videoRange!==n||t.bitrate>Math.max(i,8e6))||!!h&&xe(d)&&Object.keys(h).some(p=>parseInt(p)>d)}function rG(t,e,n,r={}){const i=t.videoCodec;if(!i&&!t.audioCodec||!n)return Promise.resolve(tG);const a=[],s=Qye(t),o=s.length,c=Zye(t,e,o>0),u=c.length;for(let d=o||1*u||1;d--;){const h={type:"media-source"};if(o&&(h.video=s[d%o]),u){h.audio=c[d%u];const p=h.audio.bitrate;h.video&&p&&(h.video.bitrate-=p)}a.push(h)}if(i){const d=navigator.userAgent;if(i.split(",").some(h=>Ig(h))&&eG())return Promise.resolve(nG(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${d})`),a))}return Promise.all(a.map(d=>{const h=eve(d);return r[h]||(r[h]=n.decodingInfo(d))})).then(d=>({supported:!d.some(h=>!h.supported),configurations:a,decodingInfoResults:d})).catch(d=>({supported:!1,configurations:a,decodingInfoResults:[],error:d}))}function Qye(t){var e;const n=(e=t.videoCodec)==null?void 0:e.split(","),r=iG(t),i=t.width||640,a=t.height||480,s=t.frameRate||30,o=t.videoRange.toLowerCase();return n?n.map(c=>{const u={contentType:kf(Wye(c),"video"),width:i,height:a,bitrate:r,framerate:s};return o!=="sdr"&&(u.transferFunction=o),u}):[]}function Zye(t,e,n){var r;const i=(r=t.audioCodec)==null?void 0:r.split(","),a=iG(t);return i&&t.audioGroups?t.audioGroups.reduce((s,o)=>{var c;const u=o?(c=e.groups[o])==null?void 0:c.tracks:null;return u?u.reduce((d,h)=>{if(h.groupId===o){const p=parseFloat(h.channels||"");i.forEach(y=>{const v={contentType:kf(y,"audio"),bitrate:n?Jye(y,a):a};p&&(v.channels=""+p),d.push(v)})}return d},s):s},[]):[]}function Jye(t,e){if(e<=1)return 1;let n=128e3;return t==="ec-3"?n=768e3:t==="ac-3"&&(n=64e4),Math.min(e/2,n)}function iG(t){return Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)/1e3)*1e3||1}function eve(t){let e="";const{audio:n,video:r}=t;if(r){const i=B1(r.contentType);e+=`${i}_r${r.height}x${r.width}f${Math.ceil(r.framerate)}${r.transferFunction||"sd"}_${Math.ceil(r.bitrate/1e5)}`}if(n){const i=B1(n.contentType);e+=`${r?"_":""}${i}_c${n.channels}`}return e}const F1=["NONE","TYPE-0","TYPE-1",null];function tve(t){return F1.indexOf(t)>-1}const Dp=["SDR","PQ","HLG"];function nve(t){return!!t&&Dp.indexOf(t)>-1}var dm={No:"",Yes:"YES",v2:"v2"};function hU(t){const{canSkipUntil:e,canSkipDateRanges:n,age:r}=t,i=r<e/2;return e&&i?n?dm.v2:dm.Yes:dm.No}class mU{constructor(e,n,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=n,this.skip=r}addDirectives(e){const n=new self.URL(e);return this.msn!==void 0&&n.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&n.searchParams.set("_HLS_part",this.part.toString()),this.skip&&n.searchParams.set("_HLS_skip",this.skip),n.href}}class jf{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(r=>!!r).map(r=>r.substring(0,4)).join(","),"supplemental"in e){var n;this.supplemental=e.supplemental;const r=(n=e.supplemental)==null?void 0:n.videoCodec;r&&r!==e.videoCodec&&(this.codecSet+=`,${r.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return pU(this._audioGroups,e)}hasSubtitleGroup(e){return pU(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,n){if(n){if(e==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(n)===-1&&r.push(n)}else if(e==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(n)===-1&&r.push(n)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function pU(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function rve(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function ive(t,e){let n=!1,r=[];if(t&&(n=t!=="SDR",r=[t]),e){r=e.allowedVideoRanges||Dp.slice(0);const i=r.join("")!=="SDR"&&!e.videoCodec;n=e.preferHDR!==void 0?e.preferHDR:i&&rve(),n||(r=["SDR"])}return{preferHDR:n,allowedVideoRanges:r}}const ave=t=>{const e=new WeakSet;return(n,r)=>{if(t&&(r=t(n,r)),typeof r=="object"&&r!==null){if(e.has(r))return;e.add(r)}return r}},Tt=(t,e)=>JSON.stringify(t,ave(e));function sve(t,e,n,r,i){const a=Object.keys(t),s=r==null?void 0:r.channels,o=r==null?void 0:r.audioCodec,c=i==null?void 0:i.videoCodec,u=s&&parseInt(s)===2;let d=!1,h=!1,p=1/0,y=1/0,v=1/0,S=1/0,x=0,T=[];const{preferHDR:_,allowedVideoRanges:A}=ive(e,i);for(let P=a.length;P--;){const N=t[a[P]];d||(d=N.channels[2]>0),p=Math.min(p,N.minHeight),y=Math.min(y,N.minFramerate),v=Math.min(v,N.minBitrate),A.filter(M=>N.videoRanges[M]>0).length>0&&(h=!0)}p=xe(p)?p:0,y=xe(y)?y:0;const O=Math.max(1080,p),R=Math.max(30,y);v=xe(v)?v:n,n=Math.max(v,n),h||(e=void 0);const C=a.length>1;return{codecSet:a.reduce((P,N)=>{const k=t[N];if(N===P)return P;if(T=h?A.filter(M=>k.videoRanges[M]>0):[],C){if(k.minBitrate>n)return di(N,`min bitrate of ${k.minBitrate} > current estimate of ${n}`),P;if(!k.hasDefaultAudio)return di(N,"no renditions with default or auto-select sound found"),P;if(o&&N.indexOf(o.substring(0,4))%5!==0)return di(N,`audio codec preference "${o}" not found`),P;if(s&&!u){if(!k.channels[s])return di(N,`no renditions with ${s} channel sound found (channels options: ${Object.keys(k.channels)})`),P}else if((!o||u)&&d&&k.channels[2]===0)return di(N,"no renditions with stereo sound found"),P;if(k.minHeight>O)return di(N,`min resolution of ${k.minHeight} > maximum of ${O}`),P;if(k.minFramerate>R)return di(N,`min framerate of ${k.minFramerate} > maximum of ${R}`),P;if(!T.some(M=>k.videoRanges[M]>0))return di(N,`no variants with VIDEO-RANGE of ${Tt(T)} found`),P;if(c&&N.indexOf(c.substring(0,4))%5!==0)return di(N,`video codec preference "${c}" not found`),P;if(k.maxScore<x)return di(N,`max score of ${k.maxScore} < selected max of ${x}`),P}return P&&(Cp(N)>=Cp(P)||k.fragmentError>t[P].fragmentError)?P:(S=k.minIndex,x=k.maxScore,N)},void 0),videoRanges:T,preferHDR:_,minFramerate:y,minBitrate:v,minIndex:S}}function di(t,e){Je.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function aG(t){return t.reduce((e,n)=>{let r=e.groups[n.groupId];r||(r=e.groups[n.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(n);const i=n.channels||"2";return r.channels[i]=(r.channels[i]||0)+1,r.hasDefault=r.hasDefault||n.default,r.hasAutoSelect=r.hasAutoSelect||n.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function ove(t,e,n,r){return t.slice(n,r+1).reduce((i,a,s)=>{if(!a.codecSet)return i;const o=a.audioGroups;let c=i[a.codecSet];c||(i[a.codecSet]=c={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:s,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),c.minBitrate=Math.min(c.minBitrate,a.bitrate);const u=Math.min(a.height,a.width);return c.minHeight=Math.min(c.minHeight,u),c.minFramerate=Math.min(c.minFramerate,a.frameRate),c.minIndex=Math.min(c.minIndex,s),c.maxScore=Math.max(c.maxScore,a.score),c.fragmentError+=a.fragmentError,c.videoRanges[a.videoRange]=(c.videoRanges[a.videoRange]||0)+1,o&&o.forEach(d=>{if(!d)return;const h=e.groups[d];h&&(c.hasDefaultAudio=c.hasDefaultAudio||e.hasDefaultAudio?h.hasDefault:h.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(h.channels).forEach(p=>{c.channels[p]=(c.channels[p]||0)+h.channels[p]}))}),i},{})}function gU(t){if(!t)return t;const{lang:e,assocLang:n,characteristics:r,channels:i,audioCodec:a}=t;return{lang:e,assocLang:n,characteristics:r,channels:i,audioCodec:a}}function yi(t,e,n){if("attrs"in t){const r=e.indexOf(t);if(r!==-1)return r}for(let r=0;r<e.length;r++){const i=e[r];if(Ks(t,i,n))return r}return-1}function Ks(t,e,n){const{groupId:r,name:i,lang:a,assocLang:s,default:o}=t,c=t.forced;return(r===void 0||e.groupId===r)&&(i===void 0||e.name===i)&&(a===void 0||lve(a,e.lang))&&(a===void 0||e.assocLang===s)&&(o===void 0||e.default===o)&&(c===void 0||e.forced===c)&&(!("characteristics"in t)||uve(t.characteristics||"",e.characteristics))&&(n===void 0||n(t,e))}function lve(t,e="--"){return t.length===e.length?t===e:t.startsWith(e)||e.startsWith(t)}function uve(t,e=""){const n=t.split(","),r=e.split(",");return n.length===r.length&&!n.some(i=>r.indexOf(i)===-1)}function Ps(t,e){const{audioCodec:n,channels:r}=t;return(n===void 0||(e.audioCodec||"").substring(0,4)===n.substring(0,4))&&(r===void 0||r===(e.channels||"2"))}function cve(t,e,n,r,i){const a=e[r],o=e.reduce((p,y,v)=>{const S=y.uri;return(p[S]||(p[S]=[])).push(v),p},{})[a.uri];o.length>1&&(r=Math.max.apply(Math,o));const c=a.videoRange,u=a.frameRate,d=a.codecSet.substring(0,4),h=yU(e,r,p=>{if(p.videoRange!==c||p.frameRate!==u||p.codecSet.substring(0,4)!==d)return!1;const y=p.audioGroups,v=n.filter(S=>!y||y.indexOf(S.groupId)!==-1);return yi(t,v,i)>-1});return h>-1?h:yU(e,r,p=>{const y=p.audioGroups,v=n.filter(S=>!y||y.indexOf(S.groupId)!==-1);return yi(t,v,i)>-1})}function yU(t,e,n){for(let r=e;r>-1;r--)if(n(t[r]))return r;for(let r=e+1;r<t.length;r++)if(n(t[r]))return r;return-1}function Ip(t,e){var n;return!!t&&t!==((n=e.loadLevelObj)==null?void 0:n.uri)}class fve extends ii{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=n=>{var r;const{fragCurrent:i,partCurrent:a,hls:s}=this,{autoLevelEnabled:o,media:c}=s;if(!i||!c)return;const u=performance.now(),d=a?a.stats:i.stats,h=a?a.duration:i.duration,p=u-d.loading.start,y=s.minAutoLevel,v=i.level,S=this._nextAutoLevel;if(d.aborted||d.loaded&&d.loaded===d.total||v<=y){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const x=S>-1&&S!==v,T=!!n||x;if(!T&&(c.paused||!c.playbackRate||!c.readyState))return;const _=s.mainForwardBufferInfo;if(!T&&_===null)return;const A=this.bwEstimator.getEstimateTTFB(),O=Math.abs(c.playbackRate);if(p<=Math.max(A,1e3*(h/(O*2))))return;const R=_?_.len/O:0,C=d.loading.first?d.loading.first-d.loading.start:-1,L=d.loaded&&C>-1,P=this.getBwEstimate(),N=s.levels,k=N[v],M=Math.max(d.loaded,Math.round(h*(i.bitrate||k.averageBitrate)/8));let G=L?p-C:p;G<1&&L&&(G=Math.min(p,d.loaded*8/P));const K=L?d.loaded*1e3/G:0,W=A/1e3,Y=K?(M-d.loaded)/K:M*8/P+W;if(Y<=R)return;const j=K?K*8:P,$=((r=(n==null?void 0:n.details)||this.hls.latestLevelDetails)==null?void 0:r.live)===!0,q=this.hls.config.abrBandWidthUpFactor;let Z=Number.POSITIVE_INFINITY,F;for(F=v-1;F>y;F--){const ce=N[F].maxBitrate,ye=!N[F].details||$;if(Z=this.getTimeToLoadFrag(W,j,h*ce,ye),Z<Math.min(R,h+W))break}if(Z>=Y||Z>h*10)return;L?this.bwEstimator.sample(p-Math.min(A,C),d.loaded):this.bwEstimator.sampleTTFB(p);const V=N[F].maxBitrate;this.getBwEstimate()*q>V&&this.resetEstimator(V);const H=this.findBestLevel(V,y,F,0,R,1,1);H>-1&&(F=H),this.warn(`Fragment ${i.sn}${a?" part "+a.index:""} of level ${v} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${R.toFixed(3)} s
      Estimated load time for current fragment: ${Y.toFixed(3)} s
      Estimated load time for down switch fragment: ${Z.toFixed(3)} s
      TTFB estimate: ${C|0} ms
      Current BW estimate: ${xe(P)?P|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${F} @ ${V|0} bps`),s.nextLoadLevel=s.nextAutoLevel=F,this.clearTimer();const te=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===F&&F>0){const ce=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${F>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${ce.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,F>y){let ye=this.findBestLevel(this.hls.levels[y].bitrate,y,F,0,ce,1,1);ye===-1&&(ye=y),this.hls.nextLoadLevel=this.hls.nextAutoLevel=ye,this.resetEstimator(this.hls.levels[ye].bitrate)}}};x||Y>Z*2?te():this.timer=self.setInterval(te,Z*1e3),s.trigger(D.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:a,stats:d})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new bye(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.FRAG_LOADING,this.onFragLoading,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.FRAG_LOADING,this.onFragLoading,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(D.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,n){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,n){const r=n.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var i;this.fragCurrent=r,this.partCurrent=(i=n.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,n){this.clearTimer()}onError(e,n){if(!n.fatal)switch(n.details){case re.BUFFER_ADD_CODEC_ERROR:case re.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case re.FRAG_LOAD_TIMEOUT:{const r=n.frag,{fragCurrent:i,partCurrent:a}=this;if(r&&i&&r.sn===i.sn&&r.level===i.level){const s=performance.now(),o=a?a.stats:r.stats,c=s-o.loading.start,u=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&u>-1){const h=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(c-Math.min(h,u),o.loaded)}else this.bwEstimator.sampleTTFB(c)}break}}}getTimeToLoadFrag(e,n,r,i){const a=e+r/n,s=i?e+this.lastLevelLoadSec:0;return a+s}onLevelLoaded(e,n){const r=this.hls.config,{loading:i}=n.stats,a=i.end-i.first;xe(a)&&(this.lastLevelLoadSec=a/1e3),n.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(n.levelInfo)}onFragLoaded(e,{frag:n,part:r}){const i=r?r.stats:n.stats;if(n.type===Se.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const a=r?r.duration:n.duration,s=this.hls.levels[n.level],o=(s.loaded?s.loaded.bytes:0)+i.loaded,c=(s.loaded?s.loaded.duration:0)+a;s.loaded={bytes:o,duration:c},s.realBitrate=Math.round(8*o/c)}if(n.bitrateTest){const a={stats:i,frag:n,part:r,id:n.type};this.onFragBuffered(D.FRAG_BUFFERED,a),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,n){const{frag:r,part:i}=n,a=i!=null&&i.stats.loaded?i.stats:r.stats;if(a.aborted||this.ignoreFragment(r))return;const s=a.parsing.end-a.loading.start-Math.min(a.loading.first-a.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,a.loaded),a.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Se.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:n}=this.hls,r=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,a=this.findBestLevel(r,n,e,0,i,1,1);if(a>-1)return a;const s=this.hls.firstLevel,o=Math.min(Math.max(s,n),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${s} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!r||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const a=r&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const s=this.hls.levels;if(s.length>Math.max(e,a)&&s[e].loadError<=s[a].loadError)return e}return this._nextAutoLevel=a,this.nextAutoLevelKey=this.getAutoLevelKey(),a}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:n,hls:r}=this;if(r.levels.length<=1)return r.loadLevel;const{maxAutoLevel:i,config:a,minAutoLevel:s}=r,o=n?n.duration:e?e.duration:0,c=this.getBwEstimate(),u=this.getStarvationDelay();let d=a.abrBandWidthFactor,h=a.abrBandWidthUpFactor;if(u){const x=this.findBestLevel(c,s,i,u,0,d,h);if(x>=0)return this.rebufferNotice=-1,x}let p=o?Math.min(o,a.maxStarvationDelay):a.maxStarvationDelay;if(!u){const x=this.bitrateTestDelay;x&&(p=(o?Math.min(o,a.maxLoadingDelay):a.maxLoadingDelay)-x,this.info(`bitrate test took ${Math.round(1e3*x)}ms, set first fragment max fetchDuration to ${Math.round(1e3*p)} ms`),d=h=1)}const y=this.findBestLevel(c,s,i,u,p,d,h);if(this.rebufferNotice!==y&&(this.rebufferNotice=y,this.info(`${u?"rebuffering expected":"buffer is empty"}, optimal quality level ${y}`)),y>-1)return y;const v=r.levels[s],S=r.loadLevelObj;return S&&(v==null?void 0:v.bitrate)<S.bitrate?s:r.loadLevel}getStarvationDelay(){const e=this.hls,n=e.media;if(!n)return 1/0;const r=n&&n.playbackRate!==0?Math.abs(n.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,n,r,i,a,s,o){var c;const u=i+a,d=this.lastLoadedFragLevel,h=d===-1?this.hls.firstLevel:d,{fragCurrent:p,partCurrent:y}=this,{levels:v,allAudioTracks:S,loadLevel:x,config:T}=this.hls;if(v.length===1)return 0;const _=v[h],A=!!((c=this.hls.latestLevelDetails)!=null&&c.live),O=x===-1||d===-1;let R,C="SDR",L=(_==null?void 0:_.frameRate)||0;const{audioPreference:P,videoPreference:N}=T,k=this.audioTracksByGroup||(this.audioTracksByGroup=aG(S));let M=-1;if(O){if(this.firstSelection!==-1)return this.firstSelection;const $=this.codecTiers||(this.codecTiers=ove(v,k,n,r)),q=sve($,C,e,P,N),{codecSet:Z,videoRanges:F,minFramerate:V,minBitrate:H,minIndex:te,preferHDR:ce}=q;M=te,R=Z,C=ce?F[F.length-1]:F[0],L=V,e=Math.max(e,H),this.log(`picked start tier ${Tt(q)}`)}else R=_==null?void 0:_.codecSet,C=_==null?void 0:_.videoRange;const G=y?y.duration:p?p.duration:0,K=this.bwEstimator.getEstimateTTFB()/1e3,W=[];for(let $=r;$>=n;$--){var Y,j;const q=v[$],Z=$>h;if(!q)continue;if(T.useMediaCapabilities&&!q.supportedResult&&!q.supportedPromise){const ge=navigator.mediaCapabilities;typeof(ge==null?void 0:ge.decodingInfo)=="function"&&Xye(q,k,C,L,e,P)?(q.supportedPromise=rG(q,k,ge,this.supportedCache),q.supportedPromise.then(Me=>{if(!this.hls)return;q.supportedResult=Me;const Re=this.hls.levels,pe=Re.indexOf(q);Me.error?this.warn(`MediaCapabilities decodingInfo error: "${Me.error}" for level ${pe} ${Tt(Me)}`):Me.supported?Me.decodingInfoResults.some(Ae=>Ae.smooth===!1||Ae.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${pe} not smooth or powerEfficient: ${Tt(Me)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${pe} ${Tt(Me)}`),pe>-1&&Re.length>1&&(this.log(`Removing unsupported level ${pe}`),this.hls.removeLevel(pe),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))})):q.supportedResult=tG}if((R&&q.codecSet!==R||C&&q.videoRange!==C||Z&&L>q.frameRate||!Z&&L>0&&L<q.frameRate||(Y=q.supportedResult)!=null&&(j=Y.decodingInfoResults)!=null&&j.some(ge=>ge.smooth===!1))&&(!O||$!==M)){W.push($);continue}const F=q.details,V=(y?F==null?void 0:F.partTarget:F==null?void 0:F.averagetargetduration)||G;let H;Z?H=o*e:H=s*e;const te=G&&i>=G*2&&a===0?q.averageBitrate:q.maxBitrate,ce=this.getTimeToLoadFrag(K,H,te*V,F===void 0);if(H>=te&&($===d||q.loadError===0&&q.fragmentError===0)&&(ce<=K||!xe(ce)||A&&!this.bitrateTestDelay||ce<u)){const ge=this.forcedAutoLevel;return $!==x&&(ge===-1||ge!==x)&&(W.length&&this.trace(`Skipped level(s) ${W.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${v[W[0]].codecs}" ${v[W[0]].videoRange}; not compatible with "${R}" ${C}`),this.info(`switch candidate:${h}->${$} adjustedbw(${Math.round(H)})-bitrate=${Math.round(H-te)} ttfb:${K.toFixed(1)} avgDuration:${V.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${ce.toFixed(1)} firstSelection:${O} codecSet:${q.codecSet} videoRange:${q.videoRange} hls.loadLevel:${x}`)),O&&(this.firstSelection=$),$}}return-1}set nextAutoLevel(e){const n=this.deriveNextAutoLevel(e);this._nextAutoLevel!==n&&(this.nextAutoLevelKey="",this._nextAutoLevel=n)}deriveNextAutoLevel(e){const{maxAutoLevel:n,minAutoLevel:r}=this.hls;return Math.min(Math.max(e,r),n)}}const sG={search:function(t,e){let n=0,r=t.length-1,i=null,a=null;for(;n<=r;){i=(n+r)/2|0,a=t[i];const s=e(a);if(s>0)n=i+1;else if(s<0)r=i-1;else return a}return null}};function dve(t,e,n){if(e===null||!Array.isArray(t)||!t.length||!xe(e))return null;const r=t[0].programDateTime;if(e<(r||0))return null;const i=t[t.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let a=0;a<t.length;++a){const s=t[a];if(mve(e,n,s))return s}return null}function eo(t,e,n=0,r=0,i=.005){let a=null;if(t){a=e[1+t.sn-e[0].sn]||null;const o=t.endDTS-n;o>0&&o<15e-7&&(n+=15e-7),a&&t.level!==a.level&&a.end<=t.end&&(a=e[2+t.sn-e[0].sn]||null)}else n===0&&e[0].start===0&&(a=e[0]);if(a&&((!t||t.level===a.level)&&vU(n,r,a)===0||hve(a,t,Math.min(i,r))))return a;const s=sG.search(e,vU.bind(null,n,r));return s&&(s!==t||!a)?s:a}function hve(t,e,n){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const r=e.tagList.reduce((i,a)=>(a[0]==="INF"&&(i+=parseFloat(a[1])),i),n);return t.start<=r}return!1}function vU(t=0,e=0,n){if(n.start<=t&&n.start+n.duration>t)return 0;const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function mve(t,e,n){const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0))*1e3;return(n.endProgramDateTime||0)-r>t}function oG(t,e,n){if(t&&t.startCC<=e&&t.endCC>=e){let r=t.fragments;const{fragmentHint:i}=t;i&&(r=r.concat(i));let a;return sG.search(r,s=>s.cc<e?1:s.cc>e?-1:(a=s,s.end<=n?1:s.start>n?-1:0)),a||null}return null}function Pp(t){switch(t.details){case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_TIMEOUT:case re.LEVEL_LOAD_TIMEOUT:case re.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function xU(t,e){const n=Pp(e);return t.default[`${n?"timeout":"error"}Retry`]}function n_(t,e){const n=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(n*t.retryDelayMs,t.maxRetryDelayMs)}function bU(t){return ht(ht({},t),{errorRetry:null,timeoutRetry:null})}function Np(t,e,n,r){if(!t)return!1;const i=r==null?void 0:r.code,a=e<t.maxNumRetry&&(pve(i)||!!n);return t.shouldRetry?t.shouldRetry(t,e,n,r,a):a}function pve(t){return t===0&&navigator.onLine===!1||!!t&&(t<400||t>499)}var In={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},Yr={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class gve extends ii{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(D.ERROR,this.onError,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(D.ERROR,this.onError,this),e.off(D.ERROR,this.onErrorOut,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Se.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,n){var r;if(n.fatal)return;const i=this.hls,a=n.context;switch(n.details){case re.FRAG_LOAD_ERROR:case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_ERROR:case re.KEY_LOAD_TIMEOUT:n.errorAction=this.getFragRetryOrSwitchAction(n);return;case re.FRAG_PARSING_ERROR:if((r=n.frag)!=null&&r.gap){n.errorAction=Uf();return}case re.FRAG_GAP:case re.FRAG_DECRYPT_ERROR:{n.errorAction=this.getFragRetryOrSwitchAction(n),n.errorAction.action=In.SendAlternateToPenaltyBox;return}case re.LEVEL_EMPTY_ERROR:case re.LEVEL_PARSING_ERROR:{var s,o;const u=n.parent===Se.MAIN?n.level:i.loadLevel;n.details===re.LEVEL_EMPTY_ERROR&&((s=n.context)!=null&&(o=s.levelDetails)!=null&&o.live)?n.errorAction=this.getPlaylistRetryOrSwitchAction(n,u):(n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,u))}return;case re.LEVEL_LOAD_ERROR:case re.LEVEL_LOAD_TIMEOUT:typeof(a==null?void 0:a.level)=="number"&&(n.errorAction=this.getPlaylistRetryOrSwitchAction(n,a.level));return;case re.AUDIO_TRACK_LOAD_ERROR:case re.AUDIO_TRACK_LOAD_TIMEOUT:case re.SUBTITLE_LOAD_ERROR:case re.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const u=i.loadLevelObj;if(u&&(a.type===He.AUDIO_TRACK&&u.hasAudioGroup(a.groupId)||a.type===He.SUBTITLE_TRACK&&u.hasSubtitleGroup(a.groupId))){n.errorAction=this.getPlaylistRetryOrSwitchAction(n,i.loadLevel),n.errorAction.action=In.SendAlternateToPenaltyBox,n.errorAction.flags=Yr.MoveAllAlternatesMatchingHost;return}}return;case re.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const u=i.loadLevelObj,d=u==null?void 0:u.attrs["HDCP-LEVEL"];d?n.errorAction={action:In.SendAlternateToPenaltyBox,flags:Yr.MoveAllAlternatesMatchingHDCP,hdcpLevel:d}:this.keySystemError(n)}return;case re.BUFFER_ADD_CODEC_ERROR:case re.REMUX_ALLOC_ERROR:case re.BUFFER_APPEND_ERROR:if(!n.errorAction){var c;n.errorAction=this.getLevelSwitchAction(n,(c=n.level)!=null?c:i.loadLevel)}return;case re.INTERNAL_EXCEPTION:case re.BUFFER_APPENDING_ERROR:case re.BUFFER_FULL_ERROR:case re.LEVEL_SWITCH_ERROR:case re.BUFFER_STALLED_ERROR:case re.BUFFER_SEEK_OVER_HOLE:case re.BUFFER_NUDGE_ON_STALL:n.errorAction=Uf();return}n.type===Te.KEY_SYSTEM_ERROR&&this.keySystemError(n)}keySystemError(e){const n=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,n)}getPlaylistRetryOrSwitchAction(e,n){const r=this.hls,i=xU(r.config.playlistLoadPolicy,e),a=this.playlistError++;if(Np(i,a,Pp(e),e.response))return{action:In.RetryRequest,flags:Yr.None,retryConfig:i,retryCount:a};const o=this.getLevelSwitchAction(e,n);return i&&(o.retryConfig=i,o.retryCount=a),o}getFragRetryOrSwitchAction(e){const n=this.hls,r=this.getVariantLevelIndex(e.frag),i=n.levels[r],{fragLoadPolicy:a,keyLoadPolicy:s}=n.config,o=xU(e.details.startsWith("key")?s:a,e),c=n.levels.reduce((d,h)=>d+h.fragmentError,0);if(i&&(e.details!==re.FRAG_GAP&&i.fragmentError++,Np(o,c,Pp(e),e.response)))return{action:In.RetryRequest,flags:Yr.None,retryConfig:o,retryCount:c};const u=this.getLevelSwitchAction(e,r);return o&&(u.retryConfig=o,u.retryCount=c),u}getLevelSwitchAction(e,n){const r=this.hls;n==null&&(n=r.loadLevel);const i=this.hls.levels[n];if(i){var a,s;const u=e.details;i.loadError++,u===re.BUFFER_APPEND_ERROR&&i.fragmentError++;let d=-1;const{levels:h,loadLevel:p,minAutoLevel:y,maxAutoLevel:v}=r;!r.autoLevelEnabled&&!r.config.preserveManualLevelOnError&&(r.loadLevel=-1);const S=(a=e.frag)==null?void 0:a.type,T=(S===Se.AUDIO&&u===re.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(u===re.BUFFER_ADD_CODEC_ERROR||u===re.BUFFER_APPEND_ERROR))&&h.some(({audioCodec:C})=>i.audioCodec!==C),A=e.sourceBufferName==="video"&&(u===re.BUFFER_ADD_CODEC_ERROR||u===re.BUFFER_APPEND_ERROR)&&h.some(({codecSet:C,audioCodec:L})=>i.codecSet!==C&&i.audioCodec===L),{type:O,groupId:R}=(s=e.context)!=null?s:{};for(let C=h.length;C--;){const L=(C+p)%h.length;if(L!==p&&L>=y&&L<=v&&h[L].loadError===0){var o,c;const P=h[L];if(u===re.FRAG_GAP&&S===Se.MAIN&&e.frag){const N=h[L].details;if(N){const k=eo(e.frag,N.fragments,e.frag.start);if(k!=null&&k.gap)continue}}else{if(O===He.AUDIO_TRACK&&P.hasAudioGroup(R)||O===He.SUBTITLE_TRACK&&P.hasSubtitleGroup(R))continue;if(S===Se.AUDIO&&(o=i.audioGroups)!=null&&o.some(N=>P.hasAudioGroup(N))||S===Se.SUBTITLE&&(c=i.subtitleGroups)!=null&&c.some(N=>P.hasSubtitleGroup(N))||T&&i.audioCodec===P.audioCodec||!T&&i.audioCodec!==P.audioCodec||A&&i.codecSet===P.codecSet)continue}d=L;break}}if(d>-1&&r.loadLevel!==d)return e.levelRetry=!0,this.playlistError=0,{action:In.SendAlternateToPenaltyBox,flags:Yr.None,nextAutoLevel:d}}return{action:In.SendAlternateToPenaltyBox,flags:Yr.MoveAllAlternatesMatchingHost}}onErrorOut(e,n){var r;switch((r=n.errorAction)==null?void 0:r.action){case In.DoNothing:break;case In.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(n),!n.errorAction.resolved&&n.details!==re.FRAG_GAP?n.fatal=!0:/MediaSource readyState: ended/.test(n.error.message)&&(this.warn(`MediaSource ended after "${n.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(n.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const n=this.hls,r=e.errorAction;if(!r)return;const{flags:i,hdcpLevel:a,nextAutoLevel:s}=r;switch(i){case Yr.None:this.switchLevel(e,s);break;case Yr.MoveAllAlternatesMatchingHDCP:a&&(n.maxHdcpLevel=F1[F1.indexOf(a)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${n.maxHdcpLevel}" or lower`);break}r.resolved||this.switchLevel(e,s)}switchLevel(e,n){if(n!==void 0&&e.errorAction&&(this.warn(`switching to level ${n} after ${e.details}`),this.hls.nextAutoLevel=n,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===re.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const r=B1(e.mimeType),i=this.hls.levels;for(let a=i.length;a--;)i[a][`${e.sourceBufferName}Codec`]===r&&this.hls.removeLevel(a)}}}function Uf(t){const e={action:In.DoNothing,flags:Yr.None};return t&&(e.resolved=!0),e}var rn={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class yve{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.BUFFER_APPENDED,this.onBufferAppended,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.BUFFER_APPENDED,this.onBufferAppended,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,n){const r=this.activePartLists[n];if(r)for(let i=r.length;i--;){const a=r[i];if(!a)break;const s=a.end;if(a.start<=e&&s!==null&&e<=s)return a}return this.getBufferedFrag(e,n)}getBufferedFrag(e,n){return this.getFragAtPos(e,n,!0)}getFragAtPos(e,n,r){const{fragments:i}=this,a=Object.keys(i);for(let s=a.length;s--;){const o=i[a[s]];if((o==null?void 0:o.body.type)===n&&(!r||o.buffered)){const c=o.body;if(c.start<=e&&e<=c.end)return c}}return null}detectEvictedFragments(e,n,r,i,a){this.timeRanges&&(this.timeRanges[e]=n);const s=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const c=this.fragments[o];if(!c||s>=c.body.sn)return;if(!c.buffered&&(!c.loaded||a)){c.body.type===r&&this.removeFragment(c.body);return}const u=c.range[e];if(u){if(u.time.length===0){this.removeFragment(c.body);return}u.time.some(d=>{const h=!this.isTimeBuffered(d.startPTS,d.endPTS,n);return h&&this.removeFragment(c.body),h})}})}detectPartialFragments(e){const n=this.timeRanges;if(!n||e.frag.sn==="initSegment")return;const r=e.frag,i=Qo(r),a=this.fragments[i];if(!a||a.buffered&&r.gap)return;const s=!r.relurl;Object.keys(n).forEach(o=>{const c=r.elementaryStreams[o];if(!c)return;const u=n[o],d=s||c.partial===!0;a.range[o]=this.getBufferedTimes(r,e.part,d,u)}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,(a.body.endList=r.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),Hh(a)||this.removeParts(r.sn-1,r.type)):this.removeFragment(a.body)}removeParts(e,n){const r=this.activePartLists[n];r&&(this.activePartLists[n]=SU(r,i=>i.fragment.sn>=e))}fragBuffered(e,n){const r=Qo(e);let i=this.fragments[r];!i&&n&&(i=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,n,r,i){const a={time:[],partial:r},s=e.start,o=e.end,c=e.minEndPTS||o,u=e.maxStartPTS||s;for(let d=0;d<i.length;d++){const h=i.start(d)-this.bufferPadding,p=i.end(d)+this.bufferPadding;if(u>=h&&c<=p){a.time.push({startPTS:Math.max(s,i.start(d)),endPTS:Math.min(o,i.end(d))});break}else if(s<p&&o>h){const y=Math.max(s,i.start(d)),v=Math.min(o,i.end(d));v>y&&(a.partial=!0,a.time.push({startPTS:y,endPTS:v}))}else if(o<=h)break}return a}getPartialFragment(e){let n=null,r,i,a,s=0;const{bufferPadding:o,fragments:c}=this;return Object.keys(c).forEach(u=>{const d=c[u];d&&Hh(d)&&(i=d.body.start-o,a=d.body.end+o,e>=i&&e<=a&&(r=Math.min(e-i,a-e),s<=r&&(n=d.body,s=r)))}),n}isEndListAppended(e){const n=this.endListFragments[e];return n!==void 0&&(n.buffered||Hh(n))}getState(e){const n=Qo(e),r=this.fragments[n];return r?r.buffered?Hh(r)?rn.PARTIAL:rn.OK:rn.APPENDING:rn.NOT_LOADED}isTimeBuffered(e,n,r){let i,a;for(let s=0;s<r.length;s++){if(i=r.start(s)-this.bufferPadding,a=r.end(s)+this.bufferPadding,e>=i&&n<=a)return!0;if(n<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,n){if(n.frag.sn==="initSegment"||n.frag.bitrateTest)return;const r=n.frag,i=n.part?null:n,a=Qo(r);this.fragments[a]={body:r,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,n){const{frag:r,part:i,timeRanges:a,type:s}=n;if(r.sn==="initSegment")return;const o=r.type;if(i){let u=this.activePartLists[o];u||(this.activePartLists[o]=u=[]),u.push(i)}this.timeRanges=a;const c=a[s];this.detectEvictedFragments(s,c,o,i)}onFragBuffered(e,n){this.detectPartialFragments(n)}hasFragment(e){const n=Qo(e);return!!this.fragments[n]}hasFragments(e){const{fragments:n}=this,r=Object.keys(n);if(!e)return r.length>0;for(let i=r.length;i--;){const a=n[r[i]];if((a==null?void 0:a.body.type)===e)return!0}return!1}hasParts(e){var n;return!!((n=this.activePartLists[e])!=null&&n.length)}removeFragmentsInRange(e,n,r,i,a){i&&!this.hasGaps||Object.keys(this.fragments).forEach(s=>{const o=this.fragments[s];if(!o)return;const c=o.body;c.type!==r||i&&!c.gap||c.start<n&&c.end>e&&(o.buffered||a)&&this.removeFragment(c)})}removeFragment(e){const n=Qo(e);e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const i=e.sn;this.activePartLists[e.type]=SU(r,a=>a.fragment.sn!==i)}delete this.fragments[n],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e,n;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const r=(e=this.hls)==null||(n=e.latestLevelDetails)==null?void 0:n.partList;r&&r.forEach(i=>i.clearElementaryStreamInfo())}}function Hh(t){var e,n,r;return t.buffered&&(t.body.gap||((e=t.range.video)==null?void 0:e.partial)||((n=t.range.audio)==null?void 0:n.partial)||((r=t.range.audiovideo)==null?void 0:r.partial))}function Qo(t){return`${t.type}_${t.level}_${t.sn}`}function SU(t,e){return t.filter(n=>{const r=e(n);return r||n.clearElementaryStreamInfo(),r})}var Ja={cbc:0,ctr:1};class vve{constructor(e,n,r){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=n,this.aesMode=r}decrypt(e,n){switch(this.aesMode){case Ja.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,e);case Ja.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},n,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function xve(t){const e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?t.slice(0,e-n):t}class bve{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const n=new DataView(e),r=new Uint32Array(4);for(let i=0;i<4;i++)r[i]=n.getUint32(i*4);return r}initTable(){const e=this.sBox,n=this.invSBox,r=this.subMix,i=r[0],a=r[1],s=r[2],o=r[3],c=this.invSubMix,u=c[0],d=c[1],h=c[2],p=c[3],y=new Uint32Array(256);let v=0,S=0,x=0;for(x=0;x<256;x++)x<128?y[x]=x<<1:y[x]=x<<1^283;for(x=0;x<256;x++){let T=S^S<<1^S<<2^S<<3^S<<4;T=T>>>8^T&255^99,e[v]=T,n[T]=v;const _=y[v],A=y[_],O=y[A];let R=y[T]*257^T*16843008;i[v]=R<<24|R>>>8,a[v]=R<<16|R>>>16,s[v]=R<<8|R>>>24,o[v]=R,R=O*16843009^A*65537^_*257^v*16843008,u[T]=R<<24|R>>>8,d[T]=R<<16|R>>>16,h[T]=R<<8|R>>>24,p[T]=R,v?(v=_^y[y[y[O^_]]],S^=y[y[S]]):v=S=1}}expandKey(e){const n=this.uint8ArrayToUint32Array_(e);let r=!0,i=0;for(;i<n.length&&r;)r=n[i]===this.key[i],i++;if(r)return;this.key=n;const a=this.keySize=n.length;if(a!==4&&a!==6&&a!==8)throw new Error("Invalid aes key size="+a);const s=this.ksRows=(a+6+1)*4;let o,c;const u=this.keySchedule=new Uint32Array(s),d=this.invKeySchedule=new Uint32Array(s),h=this.sBox,p=this.rcon,y=this.invSubMix,v=y[0],S=y[1],x=y[2],T=y[3];let _,A;for(o=0;o<s;o++){if(o<a){_=u[o]=n[o];continue}A=_,o%a===0?(A=A<<8|A>>>24,A=h[A>>>24]<<24|h[A>>>16&255]<<16|h[A>>>8&255]<<8|h[A&255],A^=p[o/a|0]<<24):a>6&&o%a===4&&(A=h[A>>>24]<<24|h[A>>>16&255]<<16|h[A>>>8&255]<<8|h[A&255]),u[o]=_=(u[o-a]^A)>>>0}for(c=0;c<s;c++)o=s-c,c&3?A=u[o]:A=u[o-4],c<4||o<=4?d[c]=A:d[c]=v[h[A>>>24]]^S[h[A>>>16&255]]^x[h[A>>>8&255]]^T[h[A&255]],d[c]=d[c]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,n,r){const i=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,o=this.invSubMix,c=o[0],u=o[1],d=o[2],h=o[3],p=this.uint8ArrayToUint32Array_(r);let y=p[0],v=p[1],S=p[2],x=p[3];const T=new Int32Array(e),_=new Int32Array(T.length);let A,O,R,C,L,P,N,k,M,G,K,W,Y,j;const $=this.networkToHostOrderSwap;for(;n<T.length;){for(M=$(T[n]),G=$(T[n+1]),K=$(T[n+2]),W=$(T[n+3]),L=M^a[0],P=W^a[1],N=K^a[2],k=G^a[3],Y=4,j=1;j<i;j++)A=c[L>>>24]^u[P>>16&255]^d[N>>8&255]^h[k&255]^a[Y],O=c[P>>>24]^u[N>>16&255]^d[k>>8&255]^h[L&255]^a[Y+1],R=c[N>>>24]^u[k>>16&255]^d[L>>8&255]^h[P&255]^a[Y+2],C=c[k>>>24]^u[L>>16&255]^d[P>>8&255]^h[N&255]^a[Y+3],L=A,P=O,N=R,k=C,Y=Y+4;A=s[L>>>24]<<24^s[P>>16&255]<<16^s[N>>8&255]<<8^s[k&255]^a[Y],O=s[P>>>24]<<24^s[N>>16&255]<<16^s[k>>8&255]<<8^s[L&255]^a[Y+1],R=s[N>>>24]<<24^s[k>>16&255]<<16^s[L>>8&255]<<8^s[P&255]^a[Y+2],C=s[k>>>24]<<24^s[L>>16&255]<<16^s[P>>8&255]<<8^s[N&255]^a[Y+3],_[n]=$(A^y),_[n+1]=$(C^v),_[n+2]=$(R^S),_[n+3]=$(O^x),y=M,v=G,S=K,x=W,n=n+4}return _.buffer}}class Sve{constructor(e,n,r){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=n,this.aesMode=r}expandKey(){const e=Eve(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function Eve(t){switch(t){case Ja.cbc:return"AES-CBC";case Ja.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${t}`)}}const Tve=16;class r_{constructor(e,{removePKCS7Padding:n=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:n}=this;if(!e||n)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?xve(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,n,r,i){return this.useSoftware?new Promise((a,s)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,n,r,i);const c=this.flush();c?a(c.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),n,r,i)}softwareDecrypt(e,n,r,i){const{currentIV:a,currentResult:s,remainderData:o}=this;if(i!==Ja.cbc||n.byteLength!==16)return Je.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=jr(o,e),this.remainderData=null);const c=this.getValidChunk(e);if(!c.length)return null;a&&(r=a);let u=this.softwareDecrypter;u||(u=this.softwareDecrypter=new bve),u.expandKey(n);const d=s;return this.currentResult=u.decrypt(c.buffer,0,r),this.currentIV=c.slice(-16).buffer,d||null}webCryptoDecrypt(e,n,r,i){if(this.key!==n||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,n,r,i));this.key=n,this.fastAesKey=new Sve(this.subtle,n,i)}return this.fastAesKey.expandKey().then(a=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new vve(this.subtle,new Uint8Array(r),i).decrypt(e.buffer,a)):Promise.reject(new Error("web crypto not initialized"))).catch(a=>(Je.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${a.name}: ${a.message}`),this.onWebCryptoError(e,n,r,i)))}onWebCryptoError(e,n,r,i){const a=this.enableSoftwareAES;if(a){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,r,i);const s=this.flush();if(s)return s.buffer}throw new Error("WebCrypto"+(a?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let n=e;const r=e.length-e.length%Tve;return r!==e.length&&(n=e.slice(0,r),this.remainderData=e.slice(r)),n}logOnce(e){this.logEnabled&&(Je.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const EU=Math.pow(2,17);class Ave{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,n){const r=e.url;if(!r)return Promise.reject(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,a=i.fLoader,s=i.loader;return new Promise((o,c)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(v=>v[0]==="GAP")){c(AU(e));return}else e.gap=!1;const u=this.loader=a?new a(i):new s(i),d=TU(e);e.loader=u;const h=bU(i.fragLoadPolicy.default),p={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:EU};e.stats=u.stats;const y={onSuccess:(v,S,x,T)=>{this.resetLoader(e,u);let _=v.data;x.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(_.slice(0,16)),_=_.slice(16)),o({frag:e,part:null,payload:_,networkDetails:T})},onError:(v,S,x,T)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:ht({url:r,data:void 0},v),error:new Error(`HTTP Error ${v.code} ${v.text}`),networkDetails:x,stats:T}))},onAbort:(v,S,x)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:x,stats:v}))},onTimeout:(v,S,x)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:x,stats:v}))}};n&&(y.onProgress=(v,S,x,T)=>n({frag:e,part:null,payload:x,networkDetails:T})),u.load(d,p,y)})}loadPart(e,n,r){this.abort();const i=this.config,a=i.fLoader,s=i.loader;return new Promise((o,c)=>{if(this.loader&&this.loader.destroy(),e.gap||n.gap){c(AU(e,n));return}const u=this.loader=a?new a(i):new s(i),d=TU(e,n);e.loader=u;const h=bU(i.fragLoadPolicy.default),p={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:EU};n.stats=u.stats,u.load(d,p,{onSuccess:(y,v,S,x)=>{this.resetLoader(e,u),this.updateStatsFromPart(e,n);const T={frag:e,part:n,payload:y.data,networkDetails:x};r(T),o(T)},onError:(y,v,S,x)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:n,response:ht({url:d.url,data:void 0},y),error:new Error(`HTTP Error ${y.code} ${y.text}`),networkDetails:S,stats:x}))},onAbort:(y,v,S)=>{e.stats.aborted=n.stats.aborted,this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.INTERNAL_ABORTED,fatal:!1,frag:e,part:n,error:new Error("Aborted"),networkDetails:S,stats:y}))},onTimeout:(y,v,S)=>{this.resetLoader(e,u),c(new Ki({type:Te.NETWORK_ERROR,details:re.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:n,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:S,stats:y}))}})})}updateStatsFromPart(e,n){const r=e.stats,i=n.stats,a=i.total;if(r.loaded+=i.loaded,a){const c=Math.round(e.duration/n.duration),u=Math.min(Math.round(r.loaded/a),c),h=(c-u)*Math.round(r.loaded/u);r.total=r.loaded+h}else r.total=Math.max(r.loaded,r.total);const s=r.loading,o=i.loading;s.start?s.first+=o.first-o.start:(s.start=o.start,s.first=o.first),s.end=o.end}resetLoader(e,n){e.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()}}function TU(t,e=null){const n=e||t,r={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},i=n.byteRangeStartOffset,a=n.byteRangeEndOffset;if(xe(i)&&xe(a)){var s;let o=i,c=a;if(t.sn==="initSegment"&&wve((s=t.decryptdata)==null?void 0:s.method)){const u=a-i;u%16&&(c=a+(16-u%16)),i!==0&&(r.resetIV=!0,o=i-16)}r.rangeStart=o,r.rangeEnd=c}return r}function AU(t,e){const n=new Error(`GAP ${t.gap?"tag":"attribute"} found`),r={type:Te.MEDIA_ERROR,details:re.FRAG_GAP,fatal:!1,frag:t,error:n,networkDetails:null};return e&&(r.part=e),(e||t).stats.aborted=!0,new Ki(r)}function wve(t){return t==="AES-128"||t==="AES-256"}class Ki extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class lG extends ii{constructor(e,n){super(e,n),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class i_{constructor(e,n,r,i=0,a=-1,s=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=zh(),this.buffering={audio:zh(),video:zh(),audiovideo:zh()},this.level=e,this.sn=n,this.id=r,this.size=i,this.part=a,this.partial=s}}function zh(){return{start:0,executeStart:0,executeEnd:0,end:0}}const wU={length:0,start:()=>0,end:()=>0};class ke{static isBuffered(e,n){if(e){const r=ke.getBuffered(e);for(let i=r.length;i--;)if(n>=r.start(i)&&n<=r.end(i))return!0}return!1}static bufferedRanges(e){if(e){const n=ke.getBuffered(e);return ke.timeRangesToArray(n)}return[]}static timeRangesToArray(e){const n=[];for(let r=0;r<e.length;r++)n.push({start:e.start(r),end:e.end(r)});return n}static bufferInfo(e,n,r){if(e){const i=ke.bufferedRanges(e);if(i.length)return ke.bufferedInfo(i,n,r)}return{len:0,start:n,end:n,bufferedIndex:-1}}static bufferedInfo(e,n,r){n=Math.max(0,n),e.length>1&&e.sort((d,h)=>d.start-h.start||h.end-d.end);let i=-1,a=[];if(r)for(let d=0;d<e.length;d++){n>=e[d].start&&n<=e[d].end&&(i=d);const h=a.length;if(h){const p=a[h-1].end;e[d].start-p<r?e[d].end>p&&(a[h-1].end=e[d].end):a.push(e[d])}else a.push(e[d])}else a=e;let s=0,o,c=n,u=n;for(let d=0;d<a.length;d++){const h=a[d].start,p=a[d].end;if(i===-1&&n>=h&&n<=p&&(i=d),n+r>=h&&n<p)c=h,u=p,s=u-n;else if(n+r<h){o=h;break}}return{len:s,start:c||0,end:u||0,nextStart:o,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||wU}catch(n){return Je.log("failed to get media.buffered",n),wU}}}const uG=/\{\$([a-zA-Z0-9-_]+)\}/g;function _U(t){return uG.test(t)}function $1(t,e){if(t.variableList!==null||t.hasVariableRefs){const n=t.variableList;return e.replace(uG,r=>{const i=r.substring(2,r.length-1),a=n==null?void 0:n[i];return a===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),r):a})}return e}function RU(t,e,n){let r=t.variableList;r||(t.variableList=r={});let i,a;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const s=new self.URL(n).searchParams;if(s.has(i))a=s.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${n}"`)}catch(s){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${s.message}`))}}else i=e.NAME,a=e.VALUE;i in r?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):r[i]=a||""}function _ve(t,e,n){const r=e.IMPORT;if(n&&r in n){let i=t.variableList;i||(t.variableList=i={}),i[r]=n[r]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}const Rve=/^(\d+)x(\d+)$/,OU=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Ct{constructor(e,n){typeof e=="string"&&(e=Ct.parseAttrList(e,n)),ut(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const n=parseInt(this[e],10);return n>Number.MAX_SAFE_INTEGER?1/0:n}hexadecimalInteger(e){if(this[e]){let n=(this[e]||"0x").slice(2);n=(n.length&1?"0":"")+n;const r=new Uint8Array(n.length/2);for(let i=0;i<n.length/2;i++)r[i]=parseInt(n.slice(i*2,i*2+2),16);return r}return null}hexadecimalIntegerAsNumber(e){const n=parseInt(this[e],16);return n>Number.MAX_SAFE_INTEGER?1/0:n}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,n){const r=this[e];return r?parseFloat(r):n}enumeratedString(e){return this[e]}enumeratedStringList(e,n){const r=this[e];return(r?r.split(/[ ,]+/):[]).reduce((i,a)=>(i[a.toLowerCase()]=!0,i),n)}bool(e){return this[e]==="YES"}decimalResolution(e){const n=Rve.exec(this[e]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}}static parseAttrList(e,n){let r;const i={},a='"';for(OU.lastIndex=0;(r=OU.exec(e))!==null;){const s=r[1].trim();let o=r[2];const c=o.indexOf(a)===0&&o.lastIndexOf(a)===o.length-1;let u=!1;if(c)o=o.slice(1,-1);else switch(s){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":u=!0}if(n&&(c||u))o=$1(n,o);else if(!u&&!c)switch(s){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Je.warn(`${e}: attribute ${s} is missing quotes`)}i[s]=o}return i}}const Ove="com.apple.hls.interstitial";function Cve(t){return t!=="ID"&&t!=="CLASS"&&t!=="CUE"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function Lve(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"||t==="SCTE35-CMD"}class cG{constructor(e,n,r=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(n==null?void 0:n.tagAnchor)||null,this.tagOrder=(i=n==null?void 0:n.tagOrder)!=null?i:r,n){const a=n.attr;for(const s in a)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]!==a[s]){Je.warn(`DATERANGE tag attribute: "${s}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=s;break}e=ut(new Ct({}),a,e)}if(this.attr=e,n?(this._startDate=n._startDate,this._cue=n._cue,this._endDate=n._endDate,this._dateAtEnd=n._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const a=(n==null?void 0:n.endDate)||new Date(this.attr["END-DATE"]);xe(a.getTime())&&(this._endDate=a)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Je.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const n=this.duration;return n!==null?this._dateAtEnd=new Date(this._startDate.getTime()+n*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(xe(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Ove}get isValid(){return!!this.id&&!this._badValueForSameId&&xe(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const Dve=10;class Ive{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const n=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!n||!this.live,this.advanced=this.endSN>e.endSN||n>0||n===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}get hasProgramDateTime(){return this.fragments.length?xe(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Dve}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const n=this.lastPartIndex;if(n!==-1){for(let r=e.length;r--;)if(e[r].index>n)return e[r].index;return n}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function pl(t){return t==="AES-128"||t==="AES-256"||t==="AES-256-CTR"}function a_(t){switch(t){case"AES-128":case"AES-256":return Ja.cbc;case"AES-256-CTR":return Ja.ctr;default:throw new Error(`invalid full segment method ${t}`)}}function fG(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function G1(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}function Pve(t){const e=G1(t).subarray(0,16),n=new Uint8Array(16);return n.set(e,16-e.length),n}function Nve(t){const e=function(r,i,a){const s=r[i];r[i]=r[a],r[a]=s};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function Mve(t){const e=t.split(":");let n=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),i=r[r.length-1].split(",");if(i.length===2){const a=i[0]==="base64",s=i[1];a?(r.splice(-1,1),n=fG(s)):n=Pve(s)}}return n}const Mp=typeof self<"u"?self:void 0;var Ft={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Kn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function V1(t){switch(t){case Kn.FAIRPLAY:return Ft.FAIRPLAY;case Kn.PLAYREADY:return Ft.PLAYREADY;case Kn.WIDEVINE:return Ft.WIDEVINE;case Kn.CLEARKEY:return Ft.CLEARKEY}}function CU(t){switch(t){case Ft.FAIRPLAY:return Kn.FAIRPLAY;case Ft.PLAYREADY:return Kn.PLAYREADY;case Ft.WIDEVINE:return Kn.WIDEVINE;case Ft.CLEARKEY:return Kn.CLEARKEY}}function hm(t){const{drmSystems:e,widevineLicenseUrl:n}=t,r=e?[Ft.FAIRPLAY,Ft.WIDEVINE,Ft.PLAYREADY,Ft.CLEARKEY].filter(i=>!!e[i]):[];return!r[Ft.WIDEVINE]&&n&&r.push(Ft.WIDEVINE),r}const dG=function(t){return Mp!=null&&(t=Mp.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function kve(t,e,n,r){let i;switch(t){case Ft.FAIRPLAY:i=["cenc","sinf"];break;case Ft.WIDEVINE:case Ft.PLAYREADY:i=["cenc"];break;case Ft.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return jve(i,e,n,r)}function jve(t,e,n,r){return[{initDataTypes:t,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(a=>({contentType:`audio/mp4; codecs=${a}`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(a=>({contentType:`video/mp4; codecs=${a}`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function Uve(t){var e;return t.sessionType==="persistent-license"||!!((e=t.sessionTypes)!=null&&e.some(n=>n==="persistent-license"))}function Bve(t){const e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),n=String.fromCharCode.apply(null,Array.from(e)),r=n.substring(n.indexOf("<"),n.length),s=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(s){const o=s.childNodes[0]?s.childNodes[0].nodeValue:s.getAttribute("VALUE");if(o){const c=fG(o).subarray(0,16);return Nve(c),c}}return null}let Kh={};class Pg{static clearKeyUriToKeyIdMap(){Kh={}}constructor(e,n,r,i=[1],a=null,s){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=n,this.keyFormat=r,this.keyFormatVersions=i,this.iv=a,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!pl(e),s!=null&&s.startsWith("0x")&&(this.keyId=new Uint8Array(z8(s)))}matches(e){var n,r;return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&e.keyFormatVersions.join(",")===this.keyFormatVersions.join(",")&&((n=e.iv)==null?void 0:n.join(","))===((r=this.iv)==null?void 0:r.join(","))}isSupported(){if(this.method){if(pl(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Kn.FAIRPLAY:case Kn.WIDEVINE:case Kn.PLAYREADY:case Kn.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(pl(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(Je.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const r=Fve(e);return new Pg(this.method,this.uri,"identity",this.keyFormatVersions,r)}if(this.pssh&&this.keyId)return this;const n=Mve(this.uri);if(n)switch(this.keyFormat){case Kn.WIDEVINE:if(this.pssh=n,!this.keyId&&n.length>=22){const r=n.length-22;this.keyId=n.subarray(r,r+16)}break;case Kn.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=qye(r,null,n),this.keyId=Bve(n);break}default:{let r=n.subarray(0,16);if(r.length!==16){const i=new Uint8Array(16);i.set(r,16-r.length),r=i}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r=Kh[this.uri];if(!r){const i=Object.keys(Kh).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,i),Kh[this.uri]=r}this.keyId=r}return this}}function Fve(t){const e=new Uint8Array(16);for(let n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e}const LU=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,DU=/#EXT-X-MEDIA:(.*)/g,$ve=/^#EXT(?:INF|-X-TARGETDURATION):/m,_E=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),Gve=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class vi{static findGroup(e,n){for(let r=0;r<e.length;r++){const i=e[r];if(i.id===n)return i}}static resolve(e,n){return Qw.buildAbsoluteURL(n,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return $ve.test(e)}static parseMasterPlaylist(e,n){const r=_U(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},a=[];LU.lastIndex=0;let s;for(;(s=LU.exec(e))!=null;)if(s[1]){var o;const u=new Ct(s[1],i),d=$1(i,s[2]),h={attrs:u,bitrate:u.decimalInteger("BANDWIDTH")||u.decimalInteger("AVERAGE-BANDWIDTH"),name:u.NAME,url:vi.resolve(d,n)},p=u.decimalResolution("RESOLUTION");p&&(h.width=p.width,h.height=p.height),NU(u.CODECS,h);const y=u["SUPPLEMENTAL-CODECS"];y&&(h.supplemental={},NU(y,h.supplemental)),(o=h.unknownCodecs)!=null&&o.length||a.push(h),i.levels.push(h)}else if(s[3]){const u=s[3],d=s[4];switch(u){case"SESSION-DATA":{const h=new Ct(d,i),p=h["DATA-ID"];p&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[p]=h);break}case"SESSION-KEY":{const h=IU(d,n,i);h.encrypted&&h.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(h)):Je.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${d}"`);break}case"DEFINE":{{const h=new Ct(d,i);RU(i,h,n)}break}case"CONTENT-STEERING":{const h=new Ct(d,i);i.contentSteering={uri:vi.resolve(h["SERVER-URI"],n),pathwayId:h["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=PU(d);break}}}const c=a.length>0&&a.length<i.levels.length;return i.levels=c?a:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,n,r){let i;const a={},s=r.levels,o={AUDIO:s.map(u=>({id:u.attrs.AUDIO,audioCodec:u.audioCodec})),SUBTITLES:s.map(u=>({id:u.attrs.SUBTITLES,textCodec:u.textCodec})),"CLOSED-CAPTIONS":[]};let c=0;for(DU.lastIndex=0;(i=DU.exec(e))!==null;){const u=new Ct(i[1],r),d=u.TYPE;if(d){const h=o[d],p=a[d]||[];a[d]=p;const y=u.LANGUAGE,v=u["ASSOC-LANGUAGE"],S=u.CHANNELS,x=u.CHARACTERISTICS,T=u["INSTREAM-ID"],_={attrs:u,bitrate:0,id:c++,groupId:u["GROUP-ID"]||"",name:u.NAME||y||"",type:d,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:y,url:u.URI?vi.resolve(u.URI,n):""};if(v&&(_.assocLang=v),S&&(_.channels=S),x&&(_.characteristics=x),T&&(_.instreamId=T),h!=null&&h.length){const A=vi.findGroup(h,_.groupId)||h[0];MU(_,A,"audioCodec"),MU(_,A,"textCodec")}p.push(_)}}return a}static parseLevelPlaylist(e,n,r,i,a,s){var o;const c={url:n},u=new Ive(n),d=u.fragments,h=[];let p=null,y=0,v=0,S=0,x=0,T=0,_=null,A=new TE(i,c),O,R,C,L=-1,P=!1,N=null,k;if(_E.lastIndex=0,u.m3u8=e,u.hasVariableRefs=_U(e),((o=_E.exec(e))==null?void 0:o[0])!=="#EXTM3U")return u.playlistParsingError=new Error("Missing format identifier #EXTM3U"),u;for(;(O=_E.exec(e))!==null;){P&&(P=!1,A=new TE(i,c),A.playlistOffset=S,A.start=S,A.sn=y,A.cc=x,T&&(A.bitrate=T),A.level=r,p&&(A.initSegment=p,p.rawProgramDateTime&&(A.rawProgramDateTime=p.rawProgramDateTime,p.rawProgramDateTime=null),N&&(A.setByteRange(N),N=null)));const W=O[1];if(W){A.duration=parseFloat(W);const Y=(" "+O[2]).slice(1);A.title=Y||null,A.tagList.push(Y?["INF",W,Y]:["INF",W])}else if(O[3]){if(xe(A.duration)){A.playlistOffset=S,A.start=S,C&&jU(A,C,u),A.sn=y,A.level=r,A.cc=x,d.push(A);const Y=(" "+O[3]).slice(1);A.relurl=$1(u,Y),q1(A,_,h),_=A,S+=A.duration,y++,v=0,P=!0}}else{if(O=O[0].match(Gve),!O){Je.warn("No matches on slow regex match for level playlist!");continue}for(R=1;R<O.length&&O[R]===void 0;R++);const Y=(" "+O[R]).slice(1),j=(" "+O[R+1]).slice(1),$=O[R+2]?(" "+O[R+2]).slice(1):null;switch(Y){case"BYTERANGE":_?A.setByteRange(j,_):A.setByteRange(j);break;case"PROGRAM-DATE-TIME":A.rawProgramDateTime=j,A.tagList.push(["PROGRAM-DATE-TIME",j]),L===-1&&(L=d.length);break;case"PLAYLIST-TYPE":u.type&&Hi(u,Y,O),u.type=j.toUpperCase();break;case"MEDIA-SEQUENCE":u.startSN!==0?Hi(u,Y,O):d.length>0&&UU(u,Y,O),y=u.startSN=parseInt(j);break;case"SKIP":{u.skippedSegments&&Hi(u,Y,O);const q=new Ct(j,u),Z=q.decimalInteger("SKIPPED-SEGMENTS");if(xe(Z)){u.skippedSegments+=Z;for(let V=Z;V--;)d.push(null);y+=Z}const F=q.enumeratedString("RECENTLY-REMOVED-DATERANGES");F&&(u.recentlyRemovedDateranges=(u.recentlyRemovedDateranges||[]).concat(F.split("	")));break}case"TARGETDURATION":u.targetduration!==0&&Hi(u,Y,O),u.targetduration=Math.max(parseInt(j),1);break;case"VERSION":u.version!==null&&Hi(u,Y,O),u.version=parseInt(j);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":u.live||Hi(u,Y,O),u.live=!1;break;case"#":(j||$)&&A.tagList.push($?[j,$]:[j]);break;case"DISCONTINUITY":x++,A.tagList.push(["DIS"]);break;case"GAP":A.gap=!0,A.tagList.push([Y]);break;case"BITRATE":A.tagList.push([Y,j]),T=parseInt(j)*1e3,xe(T)?A.bitrate=T:T=0;break;case"DATERANGE":{const q=new Ct(j,u),Z=new cG(q,u.dateRanges[q.ID],u.dateRangeTagCount);u.dateRangeTagCount++,Z.isValid||u.skippedSegments?u.dateRanges[Z.id]=Z:Je.warn(`Ignoring invalid DATERANGE tag: "${j}"`),A.tagList.push(["EXT-X-DATERANGE",j]);break}case"DEFINE":{{const q=new Ct(j,u);"IMPORT"in q?_ve(u,q,s):RU(u,q,n)}break}case"DISCONTINUITY-SEQUENCE":u.startCC!==0?Hi(u,Y,O):d.length>0&&UU(u,Y,O),u.startCC=x=parseInt(j);break;case"KEY":{const q=IU(j,n,u);if(q.isSupported()){if(q.method==="NONE"){C=void 0;break}C||(C={});const Z=C[q.keyFormat];Z!=null&&Z.matches(q)||(Z&&(C=ut({},C)),C[q.keyFormat]=q)}else Je.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${j}"`);break}case"START":u.startTimeOffset=PU(j);break;case"MAP":{const q=new Ct(j,u);if(A.duration){const Z=new TE(i,c);kU(Z,q,r,C),p=Z,A.initSegment=p,p.rawProgramDateTime&&!A.rawProgramDateTime&&(A.rawProgramDateTime=p.rawProgramDateTime)}else{const Z=A.byteRangeEndOffset;if(Z){const F=A.byteRangeStartOffset;N=`${Z-F}@${F}`}else N=null;kU(A,q,r,C),p=A,P=!0}p.cc=x;break}case"SERVER-CONTROL":{k&&Hi(u,Y,O),k=new Ct(j),u.canBlockReload=k.bool("CAN-BLOCK-RELOAD"),u.canSkipUntil=k.optionalFloat("CAN-SKIP-UNTIL",0),u.canSkipDateRanges=u.canSkipUntil>0&&k.bool("CAN-SKIP-DATERANGES"),u.partHoldBack=k.optionalFloat("PART-HOLD-BACK",0),u.holdBack=k.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{u.partTarget&&Hi(u,Y,O);const q=new Ct(j);u.partTarget=q.decimalFloatingPoint("PART-TARGET");break}case"PART":{let q=u.partList;q||(q=u.partList=[]);const Z=v>0?q[q.length-1]:void 0,F=v++,V=new Ct(j,u),H=new Lye(V,A,c,F,Z);q.push(H),A.duration+=H.duration;break}case"PRELOAD-HINT":{const q=new Ct(j,u);u.preloadHint=q;break}case"RENDITION-REPORT":{const q=new Ct(j,u);u.renditionReports=u.renditionReports||[],u.renditionReports.push(q);break}default:Je.warn(`line parsed but not handled: ${O}`);break}}}_&&!_.relurl?(d.pop(),S-=_.duration,u.partList&&(u.fragmentHint=_)):u.partList&&(q1(A,_,h),A.cc=x,u.fragmentHint=A,C&&jU(A,C,u)),u.targetduration||(u.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const M=d.length,G=d[0],K=d[M-1];if(S+=u.skippedSegments*u.targetduration,S>0&&M&&K){u.averagetargetduration=S/M;const W=K.sn;u.endSN=W!=="initSegment"?W:0,u.live||(K.endList=!0),G&&u.startCC===void 0&&(u.startCC=G.cc),L>0&&(qve(d,L),G&&h.unshift(G))}else u.endSN=0,u.startCC=0;return u.fragmentHint&&(S+=u.fragmentHint.duration),u.totalduration=S,h.length&&u.dateRangeTagCount&&G&&hG(h,u),u.endCC=x,u}}function hG(t,e){const n=t.length;if(!n)return;const r=t[n-1],i=e.live?1/0:e.totalduration,a=Object.keys(e.dateRanges);for(let s=a.length;s--;){const o=e.dateRanges[a[s]],c=o.startDate.getTime();o.tagAnchor=r.ref;for(let u=n;u--;){const d=Vve(e,c,t,u,i);if(d!==-1){o.tagAnchor=e.fragments[d].ref;break}}}}function Vve(t,e,n,r,i){const a=n[r];if(a){const o=a.programDateTime;if(e>=o||r===0){var s;const c=(((s=n[r+1])==null?void 0:s.start)||i)-a.start;if(e<=o+c*1e3){const u=n[r].sn-t.startSN,d=t.fragments;if(d.length>n.length){const p=(n[r+1]||d[d.length-1]).sn-t.startSN;for(let y=p;y>u;y--){const v=d[y].programDateTime;if(e>=v&&e<v+d[y].duration*1e3)return y}}return u}}}return-1}function IU(t,e,n){var r,i;const a=new Ct(t,n),s=(r=a.METHOD)!=null?r:"",o=a.URI,c=a.hexadecimalInteger("IV"),u=a.KEYFORMATVERSIONS,d=(i=a.KEYFORMAT)!=null?i:"identity";o&&a.IV&&!c&&Je.error(`Invalid IV: ${a.IV}`);const h=o?vi.resolve(o,e):"",p=(u||"1").split("/").map(Number).filter(Number.isFinite);return new Pg(s,h,d,p,c,a.KEYID)}function PU(t){const n=new Ct(t).decimalFloatingPoint("TIME-OFFSET");return xe(n)?n:null}function NU(t,e){let n=(t||"").split(/[ ,]+/).filter(r=>r);["video","audio","text"].forEach(r=>{const i=n.filter(a=>e_(a,r));i.length&&(e[`${r}Codec`]=i.map(a=>a.split("/")[0]).join(","),n=n.filter(a=>i.indexOf(a)===-1))}),e.unknownCodecs=n}function MU(t,e,n){const r=e[n];r&&(t[n]=r)}function qve(t,e){let n=t[e];for(let r=e;r--;){const i=t[r];if(!i)return;i.programDateTime=n.programDateTime-i.duration*1e3,n=i}}function q1(t,e,n){t.rawProgramDateTime?n.push(t):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime)}function kU(t,e,n,r){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=n,t.sn="initSegment",r&&(t.levelkeys=r),t.initSegment=null}function jU(t,e,n){t.levelkeys=e;const{encryptedFragments:r}=n;(!r.length||r[r.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&r.push(t)}function Hi(t,e,n){t.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${n[0]})`)}function UU(t,e,n){t.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${n[0]})`)}function RE(t,e){const n=e.startPTS;if(xe(n)){let r=0,i;e.sn>t.sn?(r=n-t.start,i=t):(r=t.start-n,i=e),i.duration!==r&&i.setDuration(r)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.setStart(t.start+(t.minEndPTS-t.start)):e.setStart(t.start+t.duration):e.setStart(Math.max(t.start-e.duration,0))}function mG(t,e,n,r,i,a){r-n<=0&&(Je.warn("Fragment should have a positive duration",e),r=n+e.duration,a=i+e.duration);let o=n,c=r;const u=e.startPTS,d=e.endPTS;if(xe(u)){const x=Math.abs(u-n);xe(e.deltaPTS)?e.deltaPTS=Math.max(x,e.deltaPTS):e.deltaPTS=x,o=Math.max(n,u),n=Math.min(n,u),i=Math.min(i,e.startDTS),c=Math.min(r,d),r=Math.max(r,d),a=Math.max(a,e.endDTS)}const h=n-e.start;e.start!==0&&e.setStart(n),e.setDuration(r-e.start),e.startPTS=n,e.maxStartPTS=o,e.startDTS=i,e.endPTS=r,e.minEndPTS=c,e.endDTS=a;const p=e.sn;if(!t||p<t.startSN||p>t.endSN)return 0;let y;const v=p-t.startSN,S=t.fragments;for(S[v]=e,y=v;y>0;y--)RE(S[y],S[y-1]);for(y=v;y<S.length-1;y++)RE(S[y],S[y+1]);return t.fragmentHint&&RE(S[S.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,h}function Hve(t,e){if(t===e)return;let n=null;const r=t.fragments;for(let u=r.length-1;u>=0;u--){const d=r[u].initSegment;if(d){n=d;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let i;Yve(t,e,(u,d,h,p)=>{if((!e.startCC||e.skippedSegments)&&d.cc!==u.cc){const y=u.cc-d.cc;for(let v=h;v<p.length;v++)p[v].cc+=y;e.endCC=p[p.length-1].cc}xe(u.startPTS)&&xe(u.endPTS)&&(d.setStart(d.startPTS=u.startPTS),d.startDTS=u.startDTS,d.maxStartPTS=u.maxStartPTS,d.endPTS=u.endPTS,d.endDTS=u.endDTS,d.minEndPTS=u.minEndPTS,d.setDuration(u.endPTS-u.startPTS),d.duration&&(i=d),e.PTSKnown=e.alignedSliding=!0),u.hasStreams&&(d.elementaryStreams=u.elementaryStreams),d.loader=u.loader,u.hasStats&&(d.stats=u.stats),u.initSegment&&(d.initSegment=u.initSegment,n=u.initSegment)});const a=e.fragments,s=e.fragmentHint?a.concat(e.fragmentHint):a;if(n&&s.forEach(u=>{var d;u&&(!u.initSegment||u.initSegment.relurl===((d=n)==null?void 0:d.relurl))&&(u.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=a.some(u=>!u),e.deltaUpdateFailed){Je.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let u=e.skippedSegments;u--;)a.shift();e.startSN=a[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=zve(t.dateRanges,e));const u=t.fragments.filter(d=>d.rawProgramDateTime);if(t.hasProgramDateTime&&!e.hasProgramDateTime)for(let d=1;d<s.length;d++)s[d].programDateTime===null&&q1(s[d],s[d-1],u);hG(u,e)}e.endCC=a[a.length-1].cc}if(!e.startCC){var o;const u=yG(t,e.startSN-1);e.startCC=(o=u==null?void 0:u.cc)!=null?o:a[0].cc}Kve(t.partList,e.partList,(u,d)=>{d.elementaryStreams=u.elementaryStreams,d.stats=u.stats}),i?mG(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):pG(t,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const c=e.advancedDateTime;if(e.advanced&&c){const u=e.edge;e.driftStart||(e.driftStartTime=c,e.driftStart=u),e.driftEndTime=c,e.driftEnd=u}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=t.requestScheduled)}function zve(t,e){const{dateRanges:n,recentlyRemovedDateranges:r}=e,i=ut({},t);r&&r.forEach(o=>{delete i[o]});const s=Object.keys(i).length;return s&&Object.keys(n).forEach(o=>{const c=i[o],u=new cG(n[o].attr,c);u.isValid?(i[o]=u,c||(u.tagOrder+=s)):Je.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Tt(n[o].attr)}"`)}),i}function Kve(t,e,n){if(t&&e){let r=0;for(let i=0,a=t.length;i<=a;i++){const s=t[i],o=e[i+r];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?n(s,o):r--}}}function Yve(t,e,n){const r=e.skippedSegments,i=Math.max(t.startSN,e.startSN)-e.startSN,a=(t.fragmentHint?1:0)+(r?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,s=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,c=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let u=i;u<=a;u++){const d=c[s+u];let h=o[u];if(r&&!h&&d&&(h=e.fragments[u]=d),d&&h){if(n(d,h,u,o),d.url&&d.url!==h.url){e.playlistParsingError=BU(`media sequence mismatch ${h.sn}:`,t,e,d,h);return}else if(d.cc!==h.cc){e.playlistParsingError=BU(`discontinuity sequence mismatch (${d.cc}!=${h.cc})`,t,e,d,h);return}}}}function BU(t,e,n,r,i){return new Error(`${t} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${n.startSN}
${n.m3u8}`)}function pG(t,e,n=!0){const r=e.startSN+e.skippedSegments-t.startSN,i=t.fragments,a=r>=0;let s=0;if(a&&r<i.length)s=i[r].start;else if(a&&e.startSN===t.endSN+1)s=t.fragmentEnd;else if(a&&n)s=t.fragmentStart+r*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)s=t.fragmentStart;else return;H1(e,s)}function H1(t,e){if(e){const n=t.fragments;for(let r=t.skippedSegments;r<n.length;r++)n[r].addStart(e);t.fragmentHint&&t.fragmentHint.addStart(e)}}function gG(t,e=1/0){let n=1e3*t.targetduration;if(t.updated){const r=t.fragments;if(r.length&&n*4>e){const a=r[r.length-1].duration*1e3;a<n&&(n=a)}}else n/=2;return Math.round(n)}function yG(t,e,n){if(!t)return null;let r=t.fragments[e-t.startSN];return r||(r=t.fragmentHint,r&&r.sn===e)?r:e<t.startSN&&n&&n.sn===e?n:null}function FU(t,e,n){return t?vG(t.partList,e,n):null}function vG(t,e,n){if(t)for(let r=t.length;r--;){const i=t[r];if(i.index===n&&i.fragment.sn===e)return i}return null}function xG(t){t.forEach((e,n)=>{var r;(r=e.details)==null||r.fragments.forEach(i=>{i.level=n,i.initSegment&&(i.initSegment.level=n)})})}function $c(t,e){for(let r=0,i=t.length;r<i;r++){var n;if(((n=t[r])==null?void 0:n.cc)===e)return t[r]}return null}function Wve(t,e){return!!(t&&e.startCC<t.endCC&&e.endCC>t.startCC)}function $U(t,e){if(t){const n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function bG(t,e){const n=e.fragments;for(let r=0,i=n.length;r<i;r++)$U(n[r],t);e.fragmentHint&&$U(e.fragmentHint,t),e.alignedSliding=!0}function Xve(t,e){t&&(SG(e,t),!e.alignedSliding&&t&&kp(e,t),!e.alignedSliding&&t&&!e.skippedSegments&&pG(t,e,!1))}function SG(t,e){if(!Wve(e,t))return;const n=Math.min(e.endCC,t.endCC),r=$c(e.fragments,n),i=$c(t.fragments,n);if(!r||!i)return;Je.log(`Aligning playlist at start of dicontinuity sequence ${n}`);const a=r.start-i.start;bG(a,t)}function kp(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const n=t.fragments,r=e.fragments;if(!n.length||!r.length)return;let i,a;const s=Math.min(e.endCC,t.endCC);e.startCC<s&&t.startCC<s&&(i=$c(r,s),a=$c(n,s)),(!i||!a)&&(i=r[Math.floor(r.length/2)],a=$c(n,i.cc)||n[Math.floor(n.length/2)]);const o=i.programDateTime,c=a.programDateTime;if(!o||!c)return;const u=(c-o)/1e3-(a.start-i.start);bG(u,t)}const Qve={toString:function(t){let e="";const n=t.length;for(let r=0;r<n;r++)e+=`[${t.start(r).toFixed(3)}-${t.end(r).toFixed(3)}]`;return e}},fe={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class s_ extends lG{constructor(e,n,r,i,a){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=fe.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:s,fragCurrent:o,media:c,mediaBuffer:u,state:d}=this,h=c?c.currentTime:0,p=ke.bufferInfo(u||c,h,s.maxBufferHole),y=!p.len;if(this.log(`Media seeking to ${xe(h)?h.toFixed(3):h}, state: ${d}, ${y?"out of":"in"} buffer`),this.state===fe.ENDED)this.resetLoadingState();else if(o){const v=s.maxFragLookUpTolerance,S=o.start-v,x=o.start+o.duration+v;if(y||x<p.start||S>p.end){const T=h>x;(h<S||T)&&(T&&o.loader&&(this.log(`Cancelling fragment load for seek (sn: ${o.sn})`),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(c){this.fragmentTracker.removeFragmentsInRange(h,1/0,this.playlistType,!0);const v=this.lastCurrentTime;if(h>v&&(this.lastCurrentTime=h),!this.loadingParts){const S=Math.max(p.end,h),x=this.shouldLoadParts(this.getLevelDetails(),S);x&&(this.log(`LL-Part loading ON after seeking to ${h.toFixed(2)} with buffer @${S.toFixed(2)}`),this.loadingParts=x)}}this.hls.hasEnoughToStart||(this.log(`Setting ${y?"startPosition":"nextLoadPosition"} to ${h} for seek without enough to start`),this.nextLoadPosition=h,y&&(this.startPosition=h)),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=a,this.hls=e,this.fragmentLoader=new Ave(e.config),this.keyLoader=r,this.fragmentTracker=n,this.config=e.config,this.decrypter=new r_(e.config)}registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===fe.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=fe.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:n}=this;return n===-1&&e?e:n}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,n){if(n.live||!this.media)return!1;const r=e.end||0,i=this.config.timelineOffset||0;if(r<=i)return!1;const a=e.buffered;this.config.maxBufferHole&&a&&a.length>1&&(e=ke.bufferedInfo(a,e.start,0));const s=e.nextStart;if(s&&s>i&&s<n.edge||this.media.currentTime<e.start)return!1;const c=n.partList;if(c!=null&&c.length){const d=c[c.length-1];return ke.isBuffered(this.media,d.start+d.duration/2)}const u=n.fragments[n.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(u)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}get timelineOffset(){const e=this.config.timelineOffset;if(e){var n;return((n=this.getLevelDetails())==null?void 0:n.appliedTimelineOffset)||e}return 0}onMediaAttached(e,n){const r=this.media=this.mediaBuffer=n.media;r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),r.addEventListener("seeking",this.onMediaSeeking),r.addEventListener("ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===fe.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,n){const r=!!n.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),i.removeEventListener("seeking",this.onMediaSeeking),i.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!r&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,r){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,n){}onManifestLoaded(e,n){this.startTimeOffset=n.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=fe.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,n,r){this.startFragRequested=!0,this._loadFragForPlayback(e,n,r)}_loadFragForPlayback(e,n,r){const i=a=>{const s=a.frag;if(this.fragContextChanged(s)){this.warn(`${s.type} sn: ${s.sn}${a.part?" part: "+a.part.index:""} of ${this.fragInfo(s,!1,a.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(s);return}s.stats.chunkCount++,this._handleFragmentLoadProgress(a)};this._doFragLoad(e,n,r,i).then(a=>{if(!a)return;const s=this.state,o=a.frag;if(this.fragContextChanged(o)){(s===fe.FRAG_LOADING||!this.fragCurrent&&s===fe.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=fe.IDLE);return}"payload"in a&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger(D.FRAG_LOADED,a)),this._handleFragmentLoadComplete(a)}).catch(a=>{this.state===fe.STOPPED||this.state===fe.ERROR||(this.warn(`Frag error: ${(a==null?void 0:a.message)||a}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var n;const{fragmentTracker:r}=this;if(r.getState(e)===rn.APPENDING){const a=e.type,s=this.getFwdBufferInfo(this.mediaBuffer,a),o=Math.max(e.duration,s?s.len:this.config.maxBufferLength),c=this.backtrackFragment;((c?e.sn-c.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&r.removeFragment(e)}else((n=this.mediaBuffer)==null?void 0:n.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===rn.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const n=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const n=e.details;return(n==null?void 0:n.live)&&n.type!=="EVENT"&&(this.levelLastLoaded!==e||n.expired)}flushMainBuffer(e,n,r=null){if(!(e-n))return;const i={startOffset:e,endOffset:n,type:r};this.hls.trigger(D.BUFFER_FLUSHING,i)}_loadInitSegment(e,n){this._doFragLoad(e,n).then(r=>{const i=r==null?void 0:r.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:i}=this,{frag:a,payload:s}=r,o=a.decryptdata;if(s&&s.byteLength>0&&o!=null&&o.key&&o.iv&&pl(o.method)){const c=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),o.key.buffer,o.iv.buffer,a_(o.method)).catch(u=>{throw i.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:a}),u}).then(u=>{const d=self.performance.now();return i.trigger(D.FRAG_DECRYPTED,{frag:a,payload:u,stats:{tstart:c,tdecrypt:d}}),r.payload=u,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===fe.STOPPED||this.state===fe.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:n}=this;if(!n)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state!==fe.STOPPED&&(this.state=fe.IDLE),e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:n}=this;return!e||!n||e.sn!==n.sn||e.level!==n.level}fragBufferedComplete(e,n){const r=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.fragInfo(e,!1,n)} > buffer:${r?Qve.toString(ke.getBuffered(r)):"(detached)"})`),Wt(e)){var i;if(e.type!==Se.SUBTITLE){const s=e.elementaryStreams;if(!Object.keys(s).some(o=>!!s[o])){this.state=fe.IDLE;return}}const a=(i=this.levels)==null?void 0:i[e.level];a!=null&&a.fragmentError&&(this.log(`Resetting level fragment error count of ${a.fragmentError} on frag buffered`),a.fragmentError=0)}this.state=fe.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:n}=this;if(!n)return;const{frag:r,part:i,partsLoaded:a}=e,s=!a||a.length===0||a.some(c=>!c),o=new i_(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!s);n.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,n,r=null,i){var a;this.fragCurrent=e;const s=n==null?void 0:n.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let o=null;e.encrypted&&!((a=e.decryptdata)!=null&&a.key)?(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=fe.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(h=>{if(!this.fragContextChanged(h.frag))return this.hls.trigger(D.KEY_LOADED,h),this.state===fe.KEY_LOADING&&(this.state=fe.IDLE),h}),this.hls.trigger(D.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):e.encrypted||(o=this.keyLoader.loadClear(e,s.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));const c=this.fragPrevious;if(Wt(e)&&(!c||e.sn!==c.sn)){const h=this.shouldLoadParts(n.details,e.end);h!==this.loadingParts&&(this.log(`LL-Part loading ${h?"ON":"OFF"} loading sn ${c==null?void 0:c.sn}->${e.sn}`),this.loadingParts=h)}if(r=Math.max(e.start,r||0),this.loadingParts&&Wt(e)){const h=s.partList;if(h&&i){r>e.end&&s.fragmentHint&&(e=s.fragmentHint);const p=this.getNextPart(h,e,r);if(p>-1){const y=h[p];e=this.fragCurrent=y.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${y.index} (${p}/${h.length-1}) of ${this.fragInfo(e,!1,y)}) cc: ${e.cc} [${s.startSN}-${s.endSN}], target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=y.start+y.duration,this.state=fe.FRAG_LOADING;let v;return o?v=o.then(S=>!S||this.fragContextChanged(S.frag)?null:this.doFragPartsLoad(e,y,n,i)).catch(S=>this.handleFragLoadError(S)):v=this.doFragPartsLoad(e,y,n,i).catch(S=>this.handleFragLoadError(S)),this.hls.trigger(D.FRAG_LOADING,{frag:e,part:y,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):v}else if(!e.url||this.loadedEndOfParts(h,r))return Promise.resolve(null)}}if(Wt(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${r.toFixed(2)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${s?"["+s.startSN+"-"+s.endSN+"]":""}, target: ${parseFloat(r.toFixed(3))}`),xe(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=fe.FRAG_LOADING;const u=this.config.progressive;let d;return u&&o?d=o.then(h=>!h||this.fragContextChanged(h==null?void 0:h.frag)?null:this.fragmentLoader.load(e,i)).catch(h=>this.handleFragLoadError(h)):d=Promise.all([this.fragmentLoader.load(e,u?i:void 0),o]).then(([h])=>(!u&&h&&i&&i(h),h)).catch(h=>this.handleFragLoadError(h)),this.hls.trigger(D.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(e,n,r,i){return new Promise((a,s)=>{var o;const c=[],u=(o=r.details)==null?void 0:o.partList,d=h=>{this.fragmentLoader.loadPart(e,h,i).then(p=>{c[h.index]=p;const y=p.part;this.hls.trigger(D.FRAG_LOADED,p);const v=FU(r.details,e.sn,h.index+1)||vG(u,e.sn,h.index+1);if(v)d(v);else return a({frag:e,part:y,partsLoaded:c})}).catch(s)};d(n)})}handleFragLoadError(e){if("data"in e){const n=e.data;e.data&&n.details===re.INTERNAL_ABORTED?this.handleFragLoadAborted(n.frag,n.part):this.hls.trigger(D.ERROR,n)}else this.hls.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const n=this.getCurrentContext(e);if(!n||this.state!==fe.PARSING){!this.fragCurrent&&this.state!==fe.STOPPED&&this.state!==fe.ERROR&&(this.state=fe.IDLE);return}const{frag:r,part:i,level:a}=n,s=self.performance.now();r.stats.parsing.end=s,i&&(i.stats.parsing.end=s);const o=this.getLevelDetails(),u=o&&r.sn>o.endSN||this.shouldLoadParts(o,r.end);u!==this.loadingParts&&(this.log(`LL-Part loading ${u?"ON":"OFF"} after parsing segment ending @${r.end.toFixed(2)}`),this.loadingParts=u),this.updateLevelTiming(r,i,a,e.partial)}shouldLoadParts(e,n){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e!=null&&e.partList){var r;const a=e.partList[0],s=a.end+(((r=e.fragmentHint)==null?void 0:r.duration)||0);if(n>=s){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>a.start-a.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:n,fragCurrent:r}=this,{level:i,sn:a,part:s}=e;if(!(n!=null&&n[i]))return this.warn(`Levels object was unset while buffering fragment ${a} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const o=n[i],c=o.details,u=s>-1?FU(c,a,s):null,d=u?u.fragment:yG(c,a,r);return d?(r&&r!==d&&(d.stats=r.stats),{frag:d,part:u,level:o}):null}bufferFragmentData(e,n,r,i,a){var s;if(!e||this.state!==fe.PARSING)return;const{data1:o,data2:c}=e;let u=o;if(o&&c&&(u=jr(o,c)),!((s=u)!=null&&s.length))return;const d=this.initPTS[n.cc],h=d?-d.baseTime/d.timescale:void 0,p={type:e.type,frag:n,part:r,chunkMeta:i,offset:h,parent:n.type,data:u};if(this.hls.trigger(D.BUFFER_APPENDING,p),e.dropped&&e.independent&&!r){if(a)return;this.flushBufferGap(n)}}flushBufferGap(e){const n=this.media;if(!n)return;if(!ke.isBuffered(n,n.currentTime)){this.flushMainBuffer(0,e.start);return}const r=n.currentTime,i=ke.bufferInfo(n,r,0),a=e.duration,s=Math.min(this.config.maxFragLookUpTolerance*2,a*.25),o=Math.max(Math.min(e.start-s,i.end-s),r+s);e.start-o>s&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,n){var r;const i=this.getLoadPosition();if(!xe(i))return null;const s=this.lastCurrentTime>i||(r=this.media)!=null&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,n,s)}getFwdBufferInfoAtPos(e,n,r,i){const a=ke.bufferInfo(e,n,i);if(a.len===0&&a.nextStart!==void 0){const s=this.fragmentTracker.getBufferedFrag(n,r);if(s&&(a.nextStart<=s.end||s.gap)){const o=Math.max(Math.min(a.nextStart,s.end)-n,i);return ke.bufferInfo(e,n,o)}}return a}getMaxBufferLength(e){const{config:n}=this;let r;return e?r=Math.max(8*n.maxBufferSize/e,n.maxBufferLength):r=n.maxBufferLength,Math.min(r,n.maxMaxBufferLength)}reduceMaxBufferLength(e,n){const r=this.config,i=Math.max(Math.min(e-n,r.maxBufferLength),n),a=Math.max(e-n*3,r.maxMaxBufferLength/2,i);return a>=i?(r.maxMaxBufferLength=a,this.warn(`Reduce max buffer length to ${a}s`),!0):!1}getAppendedFrag(e,n=Se.MAIN){var r;const i=(r=this.fragmentTracker)==null?void 0:r.getAppendedFrag(e,n);return i&&"fragment"in i?i.fragment:i}getNextFragment(e,n){const r=n.fragments,i=r.length;if(!i)return null;const{config:a}=this,s=r[0].start,o=a.lowLatencyMode&&!!n.partList;let c=null;if(n.live){const h=a.initialLiveManifestSize;if(i<h)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${h})`),null;if(!n.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<s){var u;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),c=this.getInitialLiveFragment(n);const p=this.hls.startPosition,y=this.hls.liveSyncPosition,v=c?(p!==-1&&p>=s?p:y)||c.start:e;this.log(`Setting startPosition to ${v} to match start frag at live edge. mainStart: ${p} liveSyncPosition: ${y} frag.start: ${(u=c)==null?void 0:u.start}`),this.startPosition=this.nextLoadPosition=v}}else e<=s&&(c=r[0]);if(!c){const h=this.loadingParts?n.partEnd:n.fragmentEnd;c=this.getFragmentAtPosition(e,h,n)}let d=this.filterReplacedPrimary(c,n);if(!d&&c){const h=c.sn-n.startSN;d=this.filterReplacedPrimary(r[h+1]||null,n)}return this.mapToInitFragWhenRequired(d)}isLoopLoading(e,n){const r=this.fragmentTracker.getState(e);return(r===rn.OK||r===rn.PARTIAL&&!!e.gap)&&this.nextLoadPosition>n}getNextFragmentLoopLoading(e,n,r,i,a){let s=null;if(e.gap&&(s=this.getNextFragment(this.nextLoadPosition,n),s&&!s.gap&&r.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i,0);if(o!==null&&r.len+o.len>=a){const c=s.sn;return this.loopSn!==c&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${c}`),this.loopSn=c),null}}return this.loopSn=void 0,s}get primaryPrefetch(){if(GU(this.hls.config)){var e,n;if((e=this.hls.interstitialsManager)==null||(n=e.playingItem)==null?void 0:n.event)return!0}return!1}filterReplacedPrimary(e,n){if(!e)return e;if(GU(this.hls.config)&&e.type!==Se.SUBTITLE){const r=this.hls.interstitialsManager,i=r==null?void 0:r.bufferingItem;if(i){const s=i.event;if(s){if(s.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&(n==null?void 0:n.live)===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const a=r==null?void 0:r.playerQueue;if(a)for(let s=a.length;s--;){const o=a[s].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,n,r){let i=-1,a=!1,s=!0;for(let o=0,c=e.length;o<c;o++){const u=e[o];if(s=s&&!u.independent,i>-1&&r<u.start)break;const d=u.loaded;d?i=-1:(a||u.independent||s)&&u.fragment===n&&(i=o),a=d}return i}loadedEndOfParts(e,n){const r=e[e.length-1];return r&&n>r.start&&r.loaded}getInitialLiveFragment(e){const n=e.fragments,r=this.fragPrevious;let i=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),i=dve(n,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const a=r.sn+1;if(a>=e.startSN&&a<=e.endSN){const s=n[a-e.startSN];r.cc===s.cc&&(i=s,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=oG(e,r.cc,r.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const a=this.hls.liveSyncPosition;a!==null&&(i=this.getFragmentAtPosition(a,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,n,r){const{config:i}=this;let{fragPrevious:a}=this,{fragments:s,endSN:o}=r;const{fragmentHint:c}=r,{maxFragLookUpTolerance:u}=i,d=r.partList,h=!!(this.loadingParts&&d!=null&&d.length&&c);h&&c&&!this.bitrateTest&&d[d.length-1].fragment.sn===c.sn&&(s=s.concat(c),o=c.sn);let p;if(e<n){var y;const S=e<this.lastCurrentTime||e>n-u||(y=this.media)!=null&&y.paused||!this.startFragRequested?0:u;p=eo(a,s,e,S)}else p=s[s.length-1];if(p){const v=p.sn-r.startSN,S=this.fragmentTracker.getState(p);if((S===rn.OK||S===rn.PARTIAL&&p.gap)&&(a=p),a&&p.sn===a.sn&&(!h||d[0].fragment.sn>p.sn||!r.live&&!h)&&a&&p.level===a.level){const T=s[v+1];p.sn<o&&this.fragmentTracker.getState(T)!==rn.OK?p=T:p=null}}return p}alignPlaylists(e,n,r){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const a=e.fragmentStart,s=!n,o=e.alignedSliding&&xe(a);if(s||!o&&!a){Xve(r,e);const c=e.fragmentStart;return this.log(`Live playlist sliding: ${c.toFixed(2)} start-sn: ${n?n.startSN:"na"}->${e.startSN} fragments: ${i}`),c}return a}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,n){let r=this.startPosition;r<n&&(r=-1);const i=this.timelineOffset;if(r===-1){const a=this.startTimeOffset!==null,s=a?this.startTimeOffset:e.startTimeOffset;s!==null&&xe(s)?(r=n+s,s<0&&(r+=e.edge),r=Math.min(Math.max(n,r),n+e.totalduration),this.log(`Setting startPosition to ${r} for start time offset ${s} found in ${a?"multivariant":"media"} playlist`),this.startPosition=r):e.live?(r=this.hls.liveSyncPosition||n,this.log(`Setting startPosition to -1 to start at live edge ${r}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=r=0),this.lastCurrentTime=r+i}this.nextLoadPosition=r+i}getLoadPosition(){var e;const{media:n}=this;let r=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&n?r=n.currentTime:this.nextLoadPosition>=0&&(r=this.nextLoadPosition),r}handleFragLoadAborted(e,n){this.transmuxer&&e.type===this.playlistType&&Wt(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${n?" part "+n.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==fe.FRAG_LOADING_WAITING_RETRY)&&(this.state=fe.IDLE)}onFragmentOrKeyLoadError(e,n){if(n.chunkMeta&&!n.frag){const v=this.getCurrentContext(n.chunkMeta);v&&(n.frag=v.frag)}const r=n.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var i;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const a=n.details===re.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(r,!0);const s=n.errorAction,{action:o,flags:c,retryCount:u=0,retryConfig:d}=s||{},h=!!s&&!!d,p=h&&o===In.RetryRequest,y=h&&!s.resolved&&c===Yr.MoveAllAlternatesMatchingHost;if(!p&&y&&Wt(r)&&!r.endList)this.resetFragmentErrors(e),this.treatAsGap(r),s.resolved=!0;else if((p||y)&&u<d.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const v=n_(d,u);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${n.details}, retrying loading ${u+1}/${d.maxNumRetry} in ${v}ms`),s.resolved=!0,this.retryDate=self.performance.now()+v,this.state=fe.FRAG_LOADING_WAITING_RETRY}else if(d&&s)if(this.resetFragmentErrors(e),u<d.maxNumRetry)!a&&o!==In.RemoveAlternatePermanently&&(s.resolved=!0);else{this.warn(`${n.details} reached or exceeded max retry (${u})`);return}else o===In.SendAlternateToPenaltyBox?this.state=fe.WAITING_LEVEL:this.state=fe.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===fe.PARSING||this.state===fe.PARSED){const n=e.frag,r=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,r),a=i&&i.len>.5;a&&this.reduceMaxBufferLength(i.len,(n==null?void 0:n.duration)||10);const s=!a;return s&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${r} buffer`),n&&(this.fragmentTracker.removeFragment(n),this.nextLoadPosition=n.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===Se.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==fe.STOPPED&&(this.state=fe.IDLE)}afterBufferFlushed(e,n,r){if(!e)return;const i=ke.getBuffered(e);this.fragmentTracker.detectEvictedFragments(n,i,r),this.state===fe.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==fe.STOPPED&&(this.state=fe.IDLE)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const n=e?e.details:null;n!=null&&n.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(n,n.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,n,r,i){const a=r.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((c,u)=>{const d=e.elementaryStreams[u];if(d){const h=d.endPTS-d.startPTS;if(h<=0)return this.warn(`Could not parse fragment ${e.sn} ${u} duration reliably (${h})`),c||!1;const p=i?0:mG(a,e,d.startPTS,d.endPTS,d.startDTS,d.endDTS);return this.hls.trigger(D.LEVEL_PTS_UPDATED,{details:a,level:r,drift:p,type:u,frag:e,start:d.startPTS,end:d.endPTS}),!0}return c},!1)){var o;if(r.fragmentError===0&&this.treatAsGap(e,r),((o=this.transmuxer)==null?void 0:o.error)===null){const c=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(c.message),this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!1,error:c,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=fe.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.fragInfo(e,!1,n)})`),this.hls.trigger(D.FRAG_PARSED,{frag:e,part:n})}playlistLabel(){return this.playlistType===Se.MAIN?"level":"track"}fragInfo(e,n=!0,r){var i,a;return`${this.playlistLabel()} ${e.level} (${r?"part":"frag"}:[${((i=n&&!r?e.startPTS:(r||e).start)!=null?i:NaN).toFixed(3)}-${((a=n&&!r?e.endPTS:(r||e).end)!=null?a:NaN).toFixed(3)}]${r&&e.type==="main"?"INDEPENDENT="+(r.independent?"YES":"NO"):""}`}treatAsGap(e,n){n&&n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const n=this._state;n!==e&&(this._state=e,this.log(`${n}->${e}`))}get state(){return this._state}}function GU(t){return!!t.interstitialsController&&t.enableInterstitialPlayback!==!1}class EG{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:n}=this;let r;if(e.length)e.length===1?r=e[0]:r=Zve(e,n);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function Zve(t,e){const n=new Uint8Array(e);let r=0;for(let i=0;i<t.length;i++){const a=t[i];n.set(a,r),r+=a.length}return n}var OE={exports:{}},VU;function Jve(){return VU||(VU=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,h||c,p),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],y]:c._events[v].push(y):(c._events[v]=y,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,y=h.length,v=new Array(y);p<y;p++)v[p]=h[p].fn;return v},o.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,p,y,v){var S=n?n+u:u;if(!this._events[S])return!1;var x=this._events[S],T=arguments.length,_,A;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),T){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,h),!0;case 4:return x.fn.call(x.context,d,h,p),!0;case 5:return x.fn.call(x.context,d,h,p,y),!0;case 6:return x.fn.call(x.context,d,h,p,y,v),!0}for(A=1,_=new Array(T-1);A<T;A++)_[A-1]=arguments[A];x.fn.apply(x.context,_)}else{var O=x.length,R;for(A=0;A<O;A++)switch(x[A].once&&this.removeListener(u,x[A].fn,void 0,!0),T){case 1:x[A].fn.call(x[A].context);break;case 2:x[A].fn.call(x[A].context,d);break;case 3:x[A].fn.call(x[A].context,d,h);break;case 4:x[A].fn.call(x[A].context,d,h,p);break;default:if(!_)for(R=1,_=new Array(T-1);R<T;R++)_[R-1]=arguments[R];x[A].fn.apply(x[A].context,_)}}return!0},o.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,p){var y=n?n+u:u;if(!this._events[y])return this;if(!d)return s(this,y),this;var v=this._events[y];if(v.fn)v.fn===d&&(!p||v.once)&&(!h||v.context===h)&&s(this,y);else{for(var S=0,x=[],T=v.length;S<T;S++)(v[S].fn!==d||p&&!v[S].once||h&&v[S].context!==h)&&x.push(v[S]);x.length?this._events[y]=x.length===1?x[0]:x:s(this,y)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o}(OE)),OE.exports}var exe=Jve(),o_=Oye(exe);const Bf="1.6.7",ql={};function txe(){return typeof __HLS_WORKER_BUNDLE__=="function"}function nxe(){const t=ql[Bf];if(t)return t.clientCount++,t;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),n=self.URL.createObjectURL(e),i={worker:new self.Worker(n),objectURL:n,clientCount:1};return ql[Bf]=i,i}function rxe(t){const e=ql[t];if(e)return e.clientCount++,e;const n=new self.URL(t,self.location.href).href,i={worker:new self.Worker(n),scriptURL:n,clientCount:1};return ql[t]=i,i}function ixe(t){const e=ql[t||Bf];if(e&&e.clientCount--===1){const{worker:r,objectURL:i}=e;delete ql[t||Bf],i&&self.URL.revokeObjectURL(i),r.terminate()}}function TG(t,e){return e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function l_(t,e){return e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function Ng(t,e){let n=0;return n=(t[e]&127)<<21,n|=(t[e+1]&127)<<14,n|=(t[e+2]&127)<<7,n|=t[e+3]&127,n}function Ff(t,e){const n=e;let r=0;for(;l_(t,e);){r+=10;const i=Ng(t,e+6);r+=i,TG(t,e+10)&&(r+=10),e+=r}if(r>0)return t.subarray(n,n+r)}function axe(t,e,n,r){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=e[n+2],s=a>>2&15;if(s>12){const y=new Error(`invalid ADTS sampling index:${s}`);t.emit(D.ERROR,D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!0,error:y,reason:y.message});return}const o=(a>>6&3)+1,c=e[n+3]>>6&3|(a&1)<<2,u="mp4a.40."+o,d=i[s];let h=s;(o===5||o===29)&&(h-=3);const p=[o<<3|(h&14)>>1,(h&1)<<7|c<<3];return Je.log(`manifest codec:${r}, parsed codec:${u}, channels:${c}, rate:${d} (ADTS object type:${o} sampling index:${s})`),{config:p,samplerate:d,channelCount:c,codec:u,parsedCodec:u,manifestCodec:r}}function AG(t,e){return t[e]===255&&(t[e+1]&246)===240}function wG(t,e){return t[e+1]&1?7:9}function u_(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function sxe(t,e){return e+5<t.length}function jp(t,e){return e+1<t.length&&AG(t,e)}function oxe(t,e){return sxe(t,e)&&AG(t,e)&&u_(t,e)<=t.length-e}function lxe(t,e){if(jp(t,e)){const n=wG(t,e);if(e+n>=t.length)return!1;const r=u_(t,e);if(r<=n)return!1;const i=e+r;return i===t.length||jp(t,i)}return!1}function _G(t,e,n,r,i){if(!t.samplerate){const a=axe(e,n,r,i);if(!a)return;ut(t,a)}}function RG(t){return 1024*9e4/t}function uxe(t,e){const n=wG(t,e);if(e+n<=t.length){const r=u_(t,e)-n;if(r>0)return{headerLength:n,frameLength:r}}}function OG(t,e,n,r,i){const a=RG(t.samplerate),s=r+i*a,o=uxe(e,n);let c;if(o){const{frameLength:h,headerLength:p}=o,y=p+h,v=Math.max(0,n+y-e.length);v?(c=new Uint8Array(y-p),c.set(e.subarray(n+p,e.length),0)):c=e.subarray(n+p,n+y);const S={unit:c,pts:s};return v||t.samples.push(S),{sample:S,length:y,missing:v}}const u=e.length-n;return c=new Uint8Array(u),c.set(e.subarray(n,e.length),0),{sample:{unit:c,pts:s},length:u,missing:-1}}function cxe(t,e){return l_(t,e)&&Ng(t,e+6)+10<=t.length-e}function fxe(t){return t instanceof ArrayBuffer?t:t.byteOffset==0&&t.byteLength==t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer}function CE(t,e=0,n=1/0){return dxe(t,e,n,Uint8Array)}function dxe(t,e,n,r){const i=hxe(t);let a=1;"BYTES_PER_ELEMENT"in r&&(a=r.BYTES_PER_ELEMENT);const s=mxe(t)?t.byteOffset:0,o=(s+t.byteLength)/a,c=(s+e)/a,u=Math.floor(Math.max(0,Math.min(c,o))),d=Math.floor(Math.min(u+Math.max(n,0),o));return new r(i,u,d-u)}function hxe(t){return t instanceof ArrayBuffer?t:t.buffer}function mxe(t){return t&&t.buffer instanceof ArrayBuffer&&t.byteLength!==void 0&&t.byteOffset!==void 0}function pxe(t){const e={key:t.type,description:"",data:"",mimeType:null,pictureType:null},n=3;if(t.size<2)return;if(t.data[0]!==n){console.log("Ignore frame with unrecognized character encoding");return}const r=t.data.subarray(1).indexOf(0);if(r===-1)return;const i=fr(CE(t.data,1,r)),a=t.data[2+r],s=t.data.subarray(3+r).indexOf(0);if(s===-1)return;const o=fr(CE(t.data,3+r,s));let c;return i==="-->"?c=fr(CE(t.data,4+r+s)):c=fxe(t.data.subarray(4+r+s)),e.mimeType=i,e.pictureType=a,e.description=o,e.data=c,e}function gxe(t){if(t.size<2)return;const e=fr(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}}function yxe(t){if(t.size<2)return;if(t.type==="TXXX"){let n=1;const r=fr(t.data.subarray(n),!0);n+=r.length+1;const i=fr(t.data.subarray(n));return{key:t.type,info:r,data:i}}const e=fr(t.data.subarray(1));return{key:t.type,info:"",data:e}}function vxe(t){if(t.type==="WXXX"){if(t.size<2)return;let n=1;const r=fr(t.data.subarray(n),!0);n+=r.length+1;const i=fr(t.data.subarray(n));return{key:t.type,info:r,data:i}}const e=fr(t.data);return{key:t.type,info:"",data:e}}function xxe(t){return t.type==="PRIV"?gxe(t):t.type[0]==="W"?vxe(t):t.type==="APIC"?pxe(t):yxe(t)}function bxe(t){const e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=Ng(t,4),r=10;return{type:e,size:n,data:t.subarray(r,r+n)}}const Yh=10,Sxe=10;function CG(t){let e=0;const n=[];for(;l_(t,e);){const r=Ng(t,e+6);t[e+5]>>6&1&&(e+=Yh),e+=Yh;const i=e+r;for(;e+Sxe<i;){const a=bxe(t.subarray(e)),s=xxe(a);s&&n.push(s),e+=a.size+Yh}TG(t,e)&&(e+=Yh)}return n}function LG(t){return t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp"}function Exe(t){if(t.data.byteLength===8){const e=new Uint8Array(t.data),n=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=4772185884e-2),Math.round(r)}}function c_(t){const e=CG(t);for(let n=0;n<e.length;n++){const r=e[n];if(LG(r))return Exe(r)}}let ur=function(t){return t.audioId3="org.id3",t.dateRange="com.apple.quicktime.HLS",t.emsg="https://aomedia.org/emsg/ID3",t.misbklv="urn:misb:KLV:bin:1910.1",t}({});function pi(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class f_{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,n,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,n){return!1}appendFrame(e,n,r){}demux(e,n){this.cachedData&&(e=jr(this.cachedData,e),this.cachedData=null);let r=Ff(e,0),i=r?r.length:0,a;const s=this._audioTrack,o=this._id3Track,c=r?c_(r):void 0,u=e.length;for((this.basePTS===null||this.frameIndex===0&&xe(c))&&(this.basePTS=Txe(c,n,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:ur.audioId3,duration:Number.POSITIVE_INFINITY});i<u;){if(this.canParse(e,i)){const d=this.appendFrame(s,e,i);d?(this.frameIndex++,this.lastPTS=d.sample.pts,i+=d.length,a=i):i=u}else cxe(e,i)?(r=Ff(e,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:ur.audioId3,duration:Number.POSITIVE_INFINITY}),i+=r.length,a=i):i++;if(i===u&&a!==u){const d=e.slice(a);this.cachedData?this.cachedData=jr(this.cachedData,d):this.cachedData=d}}return{audioTrack:s,videoTrack:pi(),id3Track:o,textTrack:pi()}}demuxSampleAes(e,n,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const n=this.cachedData;return n&&(this.cachedData=null,this.demux(n,0)),{audioTrack:this._audioTrack,videoTrack:pi(),id3Track:this._id3Track,textTrack:pi()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Txe=(t,e,n)=>{if(xe(t))return t*90;const r=n?n.baseTime*9e4/n.timescale:0;return e*9e4+r};let Wh=null;const Axe=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],wxe=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],_xe=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Rxe=[0,1,1,4];function DG(t,e,n,r,i){if(n+24>e.length)return;const a=IG(e,n);if(a&&n+a.frameLength<=e.length){const s=a.samplesPerFrame*9e4/a.sampleRate,o=r+i*s,c={unit:e.subarray(n,n+a.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(c),{sample:c,length:a.frameLength,missing:0}}}function IG(t,e){const n=t[e+1]>>3&3,r=t[e+1]>>1&3,i=t[e+2]>>4&15,a=t[e+2]>>2&3;if(n!==1&&i!==0&&i!==15&&a!==3){const s=t[e+2]>>1&1,o=t[e+3]>>6,c=n===3?3-r:r===3?3:4,u=Axe[c*14+i-1]*1e3,h=wxe[(n===3?0:n===2?1:2)*3+a],p=o===3?1:2,y=_xe[n][r],v=Rxe[r],S=y*8*v,x=Math.floor(y*u/h+s)*v;if(Wh===null){const A=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Wh=A?parseInt(A[1]):0}return!!Wh&&Wh<=87&&r===2&&u>=224e3&&o===0&&(t[e+3]=t[e+3]|128),{sampleRate:h,channelCount:p,frameLength:x,samplesPerFrame:S}}}function d_(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function PG(t,e){return e+1<t.length&&d_(t,e)}function Oxe(t,e){return d_(t,e)&&4<=t.length-e}function NG(t,e){if(e+1<t.length&&d_(t,e)){const r=IG(t,e);let i=4;r!=null&&r.frameLength&&(i=r.frameLength);const a=e+i;return a===t.length||PG(t,a)}return!1}class Cxe extends f_{constructor(e,n){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=n}resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,n){if(!e)return!1;const r=Ff(e,0);let i=(r==null?void 0:r.length)||0;if(NG(e,i))return!1;for(let a=e.length;i<a;i++)if(lxe(e,i))return n.log("ADTS sync word found !"),!0;return!1}canParse(e,n){return oxe(e,n)}appendFrame(e,n,r){_G(e,this.observer,n,r,e.manifestCodec);const i=OG(e,n,r,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const MG=(t,e)=>{let n=0,r=5;e+=r;const i=new Uint32Array(1),a=new Uint32Array(1),s=new Uint8Array(1);for(;r>0;){s[0]=t[e];const o=Math.min(r,8),c=8-o;a[0]=4278190080>>>24+c<<c,i[0]=(s[0]&a[0])>>c,n=n?n<<o|i[0]:i[0],e+=1,r-=o}return n};class Lxe extends f_{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,n){return n+64<e.length}appendFrame(e,n,r){const i=kG(e,n,r,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const n=Ff(e,0);if(!n)return!1;const r=n.length;return e[r]===11&&e[r+1]===119&&c_(n)!==void 0&&MG(e,r)<16}}function kG(t,e,n,r,i){if(n+8>e.length||e[n]!==11||e[n+1]!==119)return-1;const a=e[n+4]>>6;if(a>=3)return-1;const o=[48e3,44100,32e3][a],c=e[n+4]&63,d=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][c*3+a]*2;if(n+d>e.length)return-1;const h=e[n+6]>>5;let p=0;h===2?p+=2:(h&1&&h!==1&&(p+=2),h&4&&(p+=2));const y=(e[n+6]<<8|e[n+7])>>12-p&1,S=[2,1,2,3,3,4,4,5][h]+y,x=e[n+5]>>3,T=e[n+5]&7,_=new Uint8Array([a<<6|x<<1|T>>2,(T&3)<<6|h<<3|y<<2|c>>4,c<<4&224]),A=1536/o*9e4,O=r+i*A,R=e.subarray(n,n+d);return t.config=_,t.channelCount=S,t.samplerate=o,t.samples.push({unit:R,pts:O}),d}class Dxe extends f_{resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=Ff(e,0);let r=(n==null?void 0:n.length)||0;if(n&&e[r]===11&&e[r+1]===119&&c_(n)!==void 0&&MG(e,r)<=16)return!1;for(let i=e.length;r<i;r++)if(NG(e,r))return Je.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,n){return Oxe(e,n)}appendFrame(e,n,r){if(this.basePTS!==null)return DG(e,n,r,this.basePTS,this.frameIndex)}}const Ixe=/\/emsg[-/]ID3/i;class Pxe{constructor(e,n){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=n}resetTimeStamp(){}resetInitSegment(e,n,r,i){const a=this.videoTrack=pi("video",1),s=this.audioTrack=pi("audio",1),o=this.txtTrack=pi("text",1);if(this.id3Track=pi("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const c=Z8(e);if(c.video){const{id:u,timescale:d,codec:h,supplemental:p}=c.video;a.id=u,a.timescale=o.timescale=d,a.codec=h,a.supplemental=p}if(c.audio){const{id:u,timescale:d,codec:h}=c.audio;s.id=u,s.timescale=d,s.codec=h}o.id=W8.text,a.sampleDuration=0,a.duration=s.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return Pye(e)}demux(e,n){this.timeOffset=n;let r=e;const i=this.videoTrack,a=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=jr(this.remainderData,e));const o=Fye(r);this.remainderData=o.remainder,i.samples=o.valid||new Uint8Array}else i.samples=r;const s=this.extractID3Track(i,n);return a.samples=uU(n,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,n=this.videoTrack,r=this.txtTrack;n.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(n,this.timeOffset);return r.samples=uU(e,n),{videoTrack:n,audioTrack:pi(),id3Track:i,textTrack:pi()}}extractID3Track(e,n){const r=this.id3Track;if(e.samples.length){const i=Ve(e.samples,["emsg"]);i&&i.forEach(a=>{const s=Gye(a);if(Ixe.test(s.schemeIdUri)){const o=qU(s,n);let c=s.eventDuration===4294967295?Number.POSITIVE_INFINITY:s.eventDuration/s.timeScale;c<=.001&&(c=Number.POSITIVE_INFINITY);const u=s.payload;r.samples.push({data:u,len:u.byteLength,dts:o,pts:o,type:ur.emsg,duration:c})}else if(this.config.enableEmsgKLVMetadata&&s.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=qU(s,n);r.samples.push({data:s.payload,len:s.payload.byteLength,dts:o,pts:o,type:ur.misbklv,duration:Number.POSITIVE_INFINITY})}})}return r}demuxSampleAes(e,n,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function qU(t,e){return xe(t.presentationTime)?t.presentationTime/t.timeScale:e+t.presentationTimeDelta/t.timeScale}class Nxe{constructor(e,n,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new r_(n,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Ja.cbc)}decryptAacSample(e,n,r){const i=e[n].unit;if(i.length<=16)return;const a=i.subarray(16,i.length-i.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(s).then(o=>{const c=new Uint8Array(o);i.set(c,16),this.decrypter.isSync()||this.decryptAacSamples(e,n+1,r)})}decryptAacSamples(e,n,r){for(;;n++){if(n>=e.length){r();return}if(!(e[n].unit.length<32)&&(this.decryptAacSample(e,n,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const n=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(n);let i=0;for(let a=32;a<e.length-16;a+=160,i+=16)r.set(e.subarray(a,a+16),i);return r}getAvcDecryptedUnit(e,n){const r=new Uint8Array(n);let i=0;for(let a=32;a<e.length-16;a+=160,i+=16)e.set(r.subarray(i,i+16),a);return e}decryptAvcSample(e,n,r,i,a){const s=J8(a.data),o=this.getAvcEncryptedData(s);this.decryptBuffer(o.buffer).then(c=>{a.data=this.getAvcDecryptedUnit(s,c),this.decrypter.isSync()||this.decryptAvcSamples(e,n,r+1,i)})}decryptAvcSamples(e,n,r,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;n++,r=0){if(n>=e.length){i();return}const a=e[n].units;for(;!(r>=a.length);r++){const s=a[r];if(!(s.data.length<=48||s.type!==1&&s.type!==5)&&(this.decryptAvcSample(e,n,r,i,s),!this.decrypter.isSync()))return}}}}class jG{constructor(){this.VideoSample=null}createVideoSample(e,n,r){return{key:e,frame:!1,pts:n,dts:r,units:[],length:0}}getLastNalUnit(e){var n;let r=this.VideoSample,i;if((!r||r.units.length===0)&&(r=e[e.length-1]),(n=r)!=null&&n.units){const a=r.units;i=a[a.length-1]}return i}pushAccessUnit(e,n){if(e.units.length&&e.frame){if(e.pts===void 0){const r=n.samples,i=r.length;if(i){const a=r[i-1];e.pts=a.pts,e.dts=a.dts}else{n.dropped++;return}}n.samples.push(e)}}parseNALu(e,n,r){const i=n.byteLength;let a=e.naluState||0;const s=a,o=[];let c=0,u,d,h,p=-1,y=0;for(a===-1&&(p=0,y=this.getNALuType(n,0),a=0,c=1);c<i;){if(u=n[c++],!a){a=u?0:1;continue}if(a===1){a=u?0:2;continue}if(!u)a=3;else if(u===1){if(d=c-a-1,p>=0){const v={data:n.subarray(p,d),type:y};o.push(v)}else{const v=this.getLastNalUnit(e.samples);v&&(s&&c<=4-s&&v.state&&(v.data=v.data.subarray(0,v.data.byteLength-s)),d>0&&(v.data=jr(v.data,n.subarray(0,d)),v.state=0))}c<i?(h=this.getNALuType(n,c),p=c,y=h,a=0):a=-1}else a=0}if(p>=0&&a>=0){const v={data:n.subarray(p,i),type:y,state:a};o.push(v)}if(o.length===0){const v=this.getLastNalUnit(e.samples);v&&(v.data=jr(v.data,n))}return e.naluState=a,o}}class Gc{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,n=this.bytesAvailable,r=e.byteLength-n,i=new Uint8Array(4),a=Math.min(4,n);if(a===0)throw new Error("no bytes available");i.set(e.subarray(r,r+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=a*8,this.bytesAvailable-=a}skipBits(e){let n;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,n=e>>3,e-=n<<3,this.bytesAvailable-=n,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let n=Math.min(this.bitsAvailable,e);const r=this.word>>>32-n;if(e>32&&Je.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0)this.word<<=n;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return n=e-n,n>0&&this.bitsAvailable?r<<n|this.readBits(n):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class HU extends jG{parsePES(e,n,r,i){const a=this.parseNALu(e,r.data,i);let s=this.VideoSample,o,c=!1;r.data=null,s&&a.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),a.forEach(u=>{var d,h;switch(u.type){case 1:{let S=!1;o=!0;const x=u.data;if(c&&x.length>4){const T=this.readSliceType(x);(T===2||T===4||T===7||T===9)&&(S=!0)}if(S){var p;(p=s)!=null&&p.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null)}s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.frame=!0,s.key=S;break}case 5:o=!0,(d=s)!=null&&d.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 6:{o=!0,Jw(u.data,1,r.pts,n.samples);break}case 7:{var y,v;o=!0,c=!0;const S=u.data,x=this.readSPS(S);if(!e.sps||e.width!==x.width||e.height!==x.height||((y=e.pixelRatio)==null?void 0:y[0])!==x.pixelRatio[0]||((v=e.pixelRatio)==null?void 0:v[1])!==x.pixelRatio[1]){e.width=x.width,e.height=x.height,e.pixelRatio=x.pixelRatio,e.sps=[S];const T=S.subarray(1,4);let _="avc1.";for(let A=0;A<3;A++){let O=T[A].toString(16);O.length<2&&(O="0"+O),_+=O}e.codec=_}break}case 8:o=!0,e.pps=[u.data];break;case 9:o=!0,e.audFound=!0,(h=s)!=null&&h.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;case 12:o=!0;break;default:o=!1;break}s&&o&&s.units.push(u)}),i&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}getNALuType(e,n){return e[n]&31}readSliceType(e){const n=new Gc(e);return n.readUByte(),n.readUEG(),n.readUEG()}skipScalingList(e,n){let r=8,i=8,a;for(let s=0;s<e;s++)i!==0&&(a=n.readEG(),i=(r+a+256)%256),r=i===0?r:i}readSPS(e){const n=new Gc(e);let r=0,i=0,a=0,s=0,o,c,u;const d=n.readUByte.bind(n),h=n.readBits.bind(n),p=n.readUEG.bind(n),y=n.readBoolean.bind(n),v=n.skipBits.bind(n),S=n.skipEG.bind(n),x=n.skipUEG.bind(n),T=this.skipScalingList.bind(this);d();const _=d();if(h(5),v(3),d(),x(),_===100||_===110||_===122||_===244||_===44||_===83||_===86||_===118||_===128){const P=p();if(P===3&&v(1),x(),x(),v(1),y())for(c=P!==3?8:12,u=0;u<c;u++)y()&&(u<6?T(16,n):T(64,n))}x();const A=p();if(A===0)p();else if(A===1)for(v(1),S(),S(),o=p(),u=0;u<o;u++)S();x(),v(1);const O=p(),R=p(),C=h(1);C===0&&v(1),v(1),y()&&(r=p(),i=p(),a=p(),s=p());let L=[1,1];if(y()&&y())switch(d()){case 1:L=[1,1];break;case 2:L=[12,11];break;case 3:L=[10,11];break;case 4:L=[16,11];break;case 5:L=[40,33];break;case 6:L=[24,11];break;case 7:L=[20,11];break;case 8:L=[32,11];break;case 9:L=[80,33];break;case 10:L=[18,11];break;case 11:L=[15,11];break;case 12:L=[64,33];break;case 13:L=[160,99];break;case 14:L=[4,3];break;case 15:L=[3,2];break;case 16:L=[2,1];break;case 255:{L=[d()<<8|d(),d()<<8|d()];break}}return{width:Math.ceil((O+1)*16-r*2-i*2),height:(2-C)*(R+1)*16-(C?2:4)*(a+s),pixelRatio:L}}}class zU extends jG{constructor(...e){super(...e),this.initVPS=null}parsePES(e,n,r,i){const a=this.parseNALu(e,r.data,i);let s=this.VideoSample,o,c=!1;r.data=null,s&&a.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),a.forEach(u=>{var d,h;switch(u.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),s.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,c){var p;(p=s)!=null&&p.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null)}s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 19:case 20:o=!0,(d=s)!=null&&d.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 39:o=!0,Jw(u.data,2,r.pts,n.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=ut(e.params,this.readVPS(u.data)),this.initVPS=u.data),e.vps=[u.data];break;case 33:if(o=!0,c=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],u.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const y=this.readSPS(u.data);e.width=y.width,e.height=y.height,e.pixelRatio=y.pixelRatio,e.codec=y.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const v in y.params)e.params[v]=y.params[v]}this.pushParameterSet(e.sps,u.data,e.vps),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const y=this.readPPS(u.data);for(const v in y)e.params[v]=y[v]}this.pushParameterSet(e.pps,u.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(h=s)!=null&&h.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;default:o=!1;break}s&&o&&s.units.push(u)}),i&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}pushParameterSet(e,n,r){(r&&r[0]===this.initVPS||!r&&!e.length)&&e.push(n)}getNALuType(e,n){return(e[n]&126)>>>1}ebsp2rbsp(e){const n=new Uint8Array(e.byteLength);let r=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(n[r]=e[i],r++);return new Uint8Array(n.buffer,0,r)}pushAccessUnit(e,n){super.pushAccessUnit(e,n),this.initVPS&&(this.initVPS=null)}readVPS(e){const n=new Gc(e);n.readUByte(),n.readUByte(),n.readBits(4),n.skipBits(2),n.readBits(6);const r=n.readBits(3),i=n.readBoolean();return{numTemporalLayers:r+1,temporalIdNested:i}}readSPS(e){const n=new Gc(this.ebsp2rbsp(e));n.readUByte(),n.readUByte(),n.readBits(4);const r=n.readBits(3);n.readBoolean();const i=n.readBits(2),a=n.readBoolean(),s=n.readBits(5),o=n.readUByte(),c=n.readUByte(),u=n.readUByte(),d=n.readUByte(),h=n.readUByte(),p=n.readUByte(),y=n.readUByte(),v=n.readUByte(),S=n.readUByte(),x=n.readUByte(),T=n.readUByte(),_=[],A=[];for(let _e=0;_e<r;_e++)_.push(n.readBoolean()),A.push(n.readBoolean());if(r>0)for(let _e=r;_e<8;_e++)n.readBits(2);for(let _e=0;_e<r;_e++)_[_e]&&(n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte()),A[_e]&&n.readUByte();n.readUEG();const O=n.readUEG();O==3&&n.skipBits(1);const R=n.readUEG(),C=n.readUEG(),L=n.readBoolean();let P=0,N=0,k=0,M=0;L&&(P+=n.readUEG(),N+=n.readUEG(),k+=n.readUEG(),M+=n.readUEG());const G=n.readUEG(),K=n.readUEG(),W=n.readUEG(),Y=n.readBoolean();for(let _e=Y?0:r;_e<=r;_e++)n.skipUEG(),n.skipUEG(),n.skipUEG();if(n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.readBoolean()&&n.readBoolean())for(let je=0;je<4;je++)for(let Rt=0;Rt<(je===3?2:6);Rt++)if(!n.readBoolean())n.readUEG();else{const Zt=Math.min(64,1<<4+(je<<1));je>1&&n.readEG();for(let Jt=0;Jt<Zt;Jt++)n.readEG()}n.readBoolean(),n.readBoolean(),n.readBoolean()&&(n.readUByte(),n.skipUEG(),n.skipUEG(),n.readBoolean());const q=n.readUEG();let Z=0;for(let _e=0;_e<q;_e++){let je=!1;if(_e!==0&&(je=n.readBoolean()),je){_e===q&&n.readUEG(),n.readBoolean(),n.readUEG();let Rt=0;for(let yn=0;yn<=Z;yn++){const Zt=n.readBoolean();let Jt=!1;Zt||(Jt=n.readBoolean()),(Zt||Jt)&&Rt++}Z=Rt}else{const Rt=n.readUEG(),yn=n.readUEG();Z=Rt+yn;for(let Zt=0;Zt<Rt;Zt++)n.readUEG(),n.readBoolean();for(let Zt=0;Zt<yn;Zt++)n.readUEG(),n.readBoolean()}}if(n.readBoolean()){const _e=n.readUEG();for(let je=0;je<_e;je++){for(let Rt=0;Rt<W+4;Rt++)n.readBits(1);n.readBits(1)}}let V=0,H=1,te=1,ce=!0,ye=1,ge=0;n.readBoolean(),n.readBoolean();let Me=!1;if(n.readBoolean()){if(n.readBoolean()){const vn=n.readUByte(),Ri=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Oi=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];vn>0&&vn<16?(H=Ri[vn-1],te=Oi[vn-1]):vn===255&&(H=n.readBits(16),te=n.readBits(16))}if(n.readBoolean()&&n.readBoolean(),n.readBoolean()&&(n.readBits(3),n.readBoolean(),n.readBoolean()&&(n.readUByte(),n.readUByte(),n.readUByte())),n.readBoolean()&&(n.readUEG(),n.readUEG()),n.readBoolean(),n.readBoolean(),n.readBoolean(),Me=n.readBoolean(),Me&&(P+=n.readUEG(),N+=n.readUEG(),k+=n.readUEG(),M+=n.readUEG()),n.readBoolean()&&(ye=n.readBits(32),ge=n.readBits(32),n.readBoolean()&&n.readUEG(),n.readBoolean())){const Oi=n.readBoolean(),ss=n.readBoolean();let Fr=!1;(Oi||ss)&&(Fr=n.readBoolean(),Fr&&(n.readUByte(),n.readBits(5),n.readBoolean(),n.readBits(5)),n.readBits(4),n.readBits(4),Fr&&n.readBits(4),n.readBits(5),n.readBits(5),n.readBits(5));for(let _n=0;_n<=r;_n++){ce=n.readBoolean();const ai=ce||n.readBoolean();let Rn=!1;ai?n.readEG():Rn=n.readBoolean();const ud=Rn?1:n.readUEG()+1;if(Oi)for(let os=0;os<ud;os++)n.readUEG(),n.readUEG(),Fr&&(n.readUEG(),n.readUEG()),n.skipBits(1);if(ss)for(let os=0;os<ud;os++)n.readUEG(),n.readUEG(),Fr&&(n.readUEG(),n.readUEG()),n.skipBits(1)}}n.readBoolean()&&(n.readBoolean(),n.readBoolean(),n.readBoolean(),V=n.readUEG())}let pe=R,Ae=C;if(L||Me){let _e=1,je=1;O===1?_e=je=2:O==2&&(_e=2),pe=R-_e*N-_e*P,Ae=C-je*M-je*k}const Oe=i?["A","B","C"][i]:"",me=o<<24|c<<16|u<<8|d;let rt=0;for(let _e=0;_e<32;_e++)rt=(rt|(me>>_e&1)<<31-_e)>>>0;let Be=rt.toString(16);return s===1&&Be==="2"&&(Be="6"),{codecString:`hvc1.${Oe}${s}.${Be}.${a?"H":"L"}${T}.B0`,params:{general_tier_flag:a,general_profile_idc:s,general_profile_space:i,general_profile_compatibility_flags:[o,c,u,d],general_constraint_indicator_flags:[h,p,y,v,S,x],general_level_idc:T,bit_depth:G+8,bit_depth_luma_minus8:G,bit_depth_chroma_minus8:K,min_spatial_segmentation_idc:V,chroma_format_idc:O,frame_rate:{fixed:ce,fps:ge/ye}},width:pe,height:Ae,pixelRatio:[H,te]}}readPPS(e){const n=new Gc(this.ebsp2rbsp(e));n.readUByte(),n.readUByte(),n.skipUEG(),n.skipUEG(),n.skipBits(2),n.skipBits(3),n.skipBits(2),n.skipUEG(),n.skipUEG(),n.skipEG(),n.skipBits(2),n.readBoolean()&&n.skipUEG(),n.skipEG(),n.skipEG(),n.skipBits(4);const i=n.readBoolean(),a=n.readBoolean();let s=1;return a&&i?s=0:a?s=3:i&&(s=2),{parallelismType:s}}matchSPS(e,n){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,n).substr(3)}}const dn=188;class qa{constructor(e,n,r,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.logger=i,this.videoParser=null}static probe(e,n){const r=qa.syncOffset(e);return r>0&&n.warn(`MPEG2-TS detected but first sync word found @ offset ${r}`),r!==-1}static syncOffset(e){const n=e.length;let r=Math.min(dn*5,n-dn)+1,i=0;for(;i<r;){let a=!1,s=-1,o=0;for(let c=i;c<n;c+=dn)if(e[c]===71&&(n-c===dn||e[c+dn]===71)){if(o++,s===-1&&(s=c,s!==0&&(r=Math.min(s+dn*99,e.length-dn)+1)),a||(a=z1(e,c)===0),a&&o>1&&(s===0&&o>2||c+dn>r))return s}else{if(o)return-1;break}i++}return-1}static createTrack(e,n){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:W8[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?n:void 0}}resetInitSegment(e,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=qa.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=qa.createTrack("audio",i),this._id3Track=qa.createTrack("id3"),this._txtTrack=qa.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:n,_id3Track:r}=this;e&&(e.pesData=null),n&&(n.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,n,r=!1,i=!1){r||(this.sampleAes=null);let a;const s=this._videoTrack,o=this._audioTrack,c=this._id3Track,u=this._txtTrack;let d=s.pid,h=s.pesData,p=o.pid,y=c.pid,v=o.pesData,S=c.pesData,x=null,T=this.pmtParsed,_=this._pmtId,A=e.length;if(this.remainderData&&(e=jr(this.remainderData,e),A=e.length,this.remainderData=null),A<dn&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:s,id3Track:c,textTrack:u};const O=Math.max(0,qa.syncOffset(e));A-=(A-O)%dn,A<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,A,e.buffer.byteLength-A));let R=0;for(let L=O;L<A;L+=dn)if(e[L]===71){const P=!!(e[L+1]&64),N=z1(e,L),k=(e[L+3]&48)>>4;let M;if(k>1){if(M=L+5+e[L+4],M===L+dn)continue}else M=L+4;switch(N){case d:if(P){if(h&&(a=Zo(h,this.logger))){if(this.videoParser===null)switch(s.segmentCodec){case"avc":this.videoParser=new HU;break;case"hevc":this.videoParser=new zU;break}this.videoParser!==null&&this.videoParser.parsePES(s,u,a,!1)}h={data:[],size:0}}h&&(h.data.push(e.subarray(M,L+dn)),h.size+=L+dn-M);break;case p:if(P){if(v&&(a=Zo(v,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,a);break;case"mp3":this.parseMPEGPES(o,a);break;case"ac3":this.parseAC3PES(o,a);break}v={data:[],size:0}}v&&(v.data.push(e.subarray(M,L+dn)),v.size+=L+dn-M);break;case y:P&&(S&&(a=Zo(S,this.logger))&&this.parseID3PES(c,a),S={data:[],size:0}),S&&(S.data.push(e.subarray(M,L+dn)),S.size+=L+dn-M);break;case 0:P&&(M+=e[M]+1),_=this._pmtId=Mxe(e,M);break;case _:{P&&(M+=e[M]+1);const G=kxe(e,M,this.typeSupported,r,this.observer,this.logger);d=G.videoPid,d>0&&(s.pid=d,s.segmentCodec=G.segmentVideoCodec),p=G.audioPid,p>0&&(o.pid=p,o.segmentCodec=G.segmentAudioCodec),y=G.id3Pid,y>0&&(c.pid=y),x!==null&&!T&&(this.logger.warn(`MPEG-TS PMT found at ${L} after unknown PID '${x}'. Backtracking to sync byte @${O} to parse all TS packets.`),x=null,L=O-188),T=this.pmtParsed=!0;break}case 17:case 8191:break;default:x=N;break}}else R++;R>0&&K1(this.observer,new Error(`Found ${R} TS packet/s that do not start with 0x47`),void 0,this.logger),s.pesData=h,o.pesData=v,c.pesData=S;const C={audioTrack:o,videoTrack:s,id3Track:c,textTrack:u};return i&&this.extractRemainingSamples(C),C}flush(){const{remainderData:e}=this;this.remainderData=null;let n;return e?n=this.demux(e,-1,!1,!0):n={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(n),this.sampleAes?this.decrypt(n,this.sampleAes):n}extractRemainingSamples(e){const{audioTrack:n,videoTrack:r,id3Track:i,textTrack:a}=e,s=r.pesData,o=n.pesData,c=i.pesData;let u;if(s&&(u=Zo(s,this.logger))){if(this.videoParser===null)switch(r.segmentCodec){case"avc":this.videoParser=new HU;break;case"hevc":this.videoParser=new zU;break}this.videoParser!==null&&(this.videoParser.parsePES(r,a,u,!0),r.pesData=null)}else r.pesData=s;if(o&&(u=Zo(o,this.logger))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,u);break;case"mp3":this.parseMPEGPES(n,u);break;case"ac3":this.parseAC3PES(n,u);break}n.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=o;c&&(u=Zo(c,this.logger))?(this.parseID3PES(i,u),i.pesData=null):i.pesData=c}demuxSampleAes(e,n,r){const i=this.demux(e,r,!0,!this.config.progressive),a=this.sampleAes=new Nxe(this.observer,this.config,n);return this.decrypt(i,a)}decrypt(e,n){return new Promise(r=>{const{audioTrack:i,videoTrack:a}=e;i.samples&&i.segmentCodec==="aac"?n.decryptAacSamples(i.samples,0,()=>{a.samples?n.decryptAvcSamples(a.samples,0,0,()=>{r(e)}):r(e)}):a.samples&&n.decryptAvcSamples(a.samples,0,0,()=>{r(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,n){let r=0;const i=this.aacOverFlow;let a=n.data;if(i){this.aacOverFlow=null;const h=i.missing,p=i.sample.unit.byteLength;if(h===-1)a=jr(i.sample.unit,a);else{const y=p-h;i.sample.unit.set(a.subarray(0,h),y),e.samples.push(i.sample),r=i.missing}}let s,o;for(s=r,o=a.length;s<o-1&&!jp(a,s);s++);if(s!==r){let h;const p=s<o-1;if(p?h=`AAC PES did not start with ADTS header,offset:${s}`:h="No ADTS header found in AAC PES",K1(this.observer,new Error(h),p,this.logger),!p)return}_G(e,this.observer,a,s,this.audioCodec);let c;if(n.pts!==void 0)c=n.pts;else if(i){const h=RG(e.samplerate);c=i.sample.pts+h}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let u=0,d;for(;s<o;)if(d=OG(e,a,s,c,u),s+=d.length,d.missing){this.aacOverFlow=d;break}else for(u++;s<o-1&&!jp(a,s);s++);}parseMPEGPES(e,n){const r=n.data,i=r.length;let a=0,s=0;const o=n.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;s<i;)if(PG(r,s)){const c=DG(e,r,s,o,a);if(c)s+=c.length,a++;else break}else s++}parseAC3PES(e,n){{const r=n.data,i=n.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const a=r.length;let s=0,o=0,c;for(;o<a&&(c=kG(e,r,o,i,s++))>0;)o+=c}}parseID3PES(e,n){if(n.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=ut({},n,{type:this._videoTrack?ur.emsg:ur.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function z1(t,e){return((t[e+1]&31)<<8)+t[e+2]}function Mxe(t,e){return(t[e+10]&31)<<8|t[e+11]}function kxe(t,e,n,r,i,a){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(t[e+1]&15)<<8|t[e+2],c=e+3+o-4,u=(t[e+10]&15)<<8|t[e+11];for(e+=12+u;e<c;){const d=z1(t,e),h=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!r){LE("ADTS AAC",a);break}case 15:s.audioPid===-1&&(s.audioPid=d);break;case 21:s.id3Pid===-1&&(s.id3Pid=d);break;case 219:if(!r){LE("H.264",a);break}case 27:s.videoPid===-1&&(s.videoPid=d);break;case 3:case 4:!n.mpeg&&!n.mp3?a.log("MPEG audio found, not supported in this browser"):s.audioPid===-1&&(s.audioPid=d,s.segmentAudioCodec="mp3");break;case 193:if(!r){LE("AC-3",a);break}case 129:n.ac3?s.audioPid===-1&&(s.audioPid=d,s.segmentAudioCodec="ac3"):a.log("AC-3 audio found, not supported in this browser");break;case 6:if(s.audioPid===-1&&h>0){let p=e+5,y=h;for(;y>2;){switch(t[p]){case 106:n.ac3!==!0?a.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=d,s.segmentAudioCodec="ac3");break}const S=t[p+1]+2;p+=S,y-=S}}break;case 194:case 135:return K1(i,new Error("Unsupported EC-3 in M2TS found"),void 0,a),s;case 36:s.videoPid===-1&&(s.videoPid=d,s.segmentVideoCodec="hevc",a.log("HEVC in M2TS found"));break}e+=h+5}return s}function K1(t,e,n,r){r.warn(`parsing error: ${e.message}`),t.emit(D.ERROR,D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:e,reason:e.message})}function LE(t,e){e.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function Zo(t,e){let n=0,r,i,a,s,o;const c=t.data;if(!t||t.size===0)return null;for(;c[0].length<19&&c.length>1;)c[0]=jr(c[0],c[1]),c.splice(1,1);if(r=c[0],(r[0]<<16)+(r[1]<<8)+r[2]===1){if(i=(r[4]<<8)+r[5],i&&i>t.size-6)return null;const d=r[7];d&192&&(s=(r[9]&14)*536870912+(r[10]&255)*4194304+(r[11]&254)*16384+(r[12]&255)*128+(r[13]&254)/2,d&64?(o=(r[14]&14)*536870912+(r[15]&255)*4194304+(r[16]&254)*16384+(r[17]&255)*128+(r[18]&254)/2,s-o>60*9e4&&(e.warn(`${Math.round((s-o)/9e4)}s delta between PTS and DTS, align them`),s=o)):o=s),a=r[8];let h=a+9;if(t.size<=h)return null;t.size-=h;const p=new Uint8Array(t.size);for(let y=0,v=c.length;y<v;y++){r=c[y];let S=r.byteLength;if(h)if(h>S){h-=S;continue}else r=r.subarray(h),S-=h,h=0;p.set(r,n),n+=S}return i&&(i-=a+3),{data:p,pts:s,dts:o,len:i}}return null}class jxe{static getSilentFrame(e,n){switch(e){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Ba=Math.pow(2,32)-1;class ee{static init(){ee.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in ee.types)ee.types.hasOwnProperty(e)&&(ee.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);ee.HDLR_TYPES={video:n,audio:r};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);ee.STTS=ee.STSC=ee.STCO=a,ee.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ee.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ee.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ee.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),c=new Uint8Array([0,0,0,1]);ee.FTYP=ee.box(ee.types.ftyp,s,c,s,o),ee.DINF=ee.box(ee.types.dinf,ee.box(ee.types.dref,i))}static box(e,...n){let r=8,i=n.length;const a=i;for(;i--;)r+=n[i].byteLength;const s=new Uint8Array(r);for(s[0]=r>>24&255,s[1]=r>>16&255,s[2]=r>>8&255,s[3]=r&255,s.set(e,4),i=0,r=8;i<a;i++)s.set(n[i],r),r+=n[i].byteLength;return s}static hdlr(e){return ee.box(ee.types.hdlr,ee.HDLR_TYPES[e])}static mdat(e){return ee.box(ee.types.mdat,e)}static mdhd(e,n){n*=e;const r=Math.floor(n/(Ba+1)),i=Math.floor(n%(Ba+1));return ee.box(ee.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return ee.box(ee.types.mdia,ee.mdhd(e.timescale||0,e.duration||0),ee.hdlr(e.type),ee.minf(e))}static mfhd(e){return ee.box(ee.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?ee.box(ee.types.minf,ee.box(ee.types.smhd,ee.SMHD),ee.DINF,ee.stbl(e)):ee.box(ee.types.minf,ee.box(ee.types.vmhd,ee.VMHD),ee.DINF,ee.stbl(e))}static moof(e,n,r){return ee.box(ee.types.moof,ee.mfhd(e),ee.traf(r,n))}static moov(e){let n=e.length;const r=[];for(;n--;)r[n]=ee.trak(e[n]);return ee.box.apply(null,[ee.types.moov,ee.mvhd(e[0].timescale||0,e[0].duration||0)].concat(r).concat(ee.mvex(e)))}static mvex(e){let n=e.length;const r=[];for(;n--;)r[n]=ee.trex(e[n]);return ee.box.apply(null,[ee.types.mvex,...r])}static mvhd(e,n){n*=e;const r=Math.floor(n/(Ba+1)),i=Math.floor(n%(Ba+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ee.box(ee.types.mvhd,a)}static sdtp(e){const n=e.samples||[],r=new Uint8Array(4+n.length);let i,a;for(i=0;i<n.length;i++)a=n[i].flags,r[i+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return ee.box(ee.types.sdtp,r)}static stbl(e){return ee.box(ee.types.stbl,ee.stsd(e),ee.box(ee.types.stts,ee.STTS),ee.box(ee.types.stsc,ee.STSC),ee.box(ee.types.stsz,ee.STSZ),ee.box(ee.types.stco,ee.STCO))}static avc1(e){let n=[],r=[],i,a,s;for(i=0;i<e.sps.length;i++)a=e.sps[i],s=a.byteLength,n.push(s>>>8&255),n.push(s&255),n=n.concat(Array.prototype.slice.call(a));for(i=0;i<e.pps.length;i++)a=e.pps[i],s=a.byteLength,r.push(s>>>8&255),r.push(s&255),r=r.concat(Array.prototype.slice.call(a));const o=ee.box(ee.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(r))),c=e.width,u=e.height,d=e.pixelRatio[0],h=e.pixelRatio[1];return ee.box(ee.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,ee.box(ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ee.box(ee.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,d&255,h>>24,h>>16&255,h>>8&255,h&255])))}static esds(e){const n=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...n,6,1,2])}static audioStsd(e){const n=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,n>>8&255,n&255,0,0])}static mp4a(e){return ee.box(ee.types.mp4a,ee.audioStsd(e),ee.box(ee.types.esds,ee.esds(e)))}static mp3(e){return ee.box(ee.types[".mp3"],ee.audioStsd(e))}static ac3(e){return ee.box(ee.types["ac-3"],ee.audioStsd(e),ee.box(ee.types.dac3,e.config))}static stsd(e){const{segmentCodec:n}=e;if(e.type==="audio"){if(n==="aac")return ee.box(ee.types.stsd,ee.STSD,ee.mp4a(e));if(n==="ac3"&&e.config)return ee.box(ee.types.stsd,ee.STSD,ee.ac3(e));if(n==="mp3"&&e.codec==="mp3")return ee.box(ee.types.stsd,ee.STSD,ee.mp3(e))}else if(e.pps&&e.sps){if(n==="avc")return ee.box(ee.types.stsd,ee.STSD,ee.avc1(e));if(n==="hevc"&&e.vps)return ee.box(ee.types.stsd,ee.STSD,ee.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${n}/${e.codec})`)}static tkhd(e){const n=e.id,r=(e.duration||0)*(e.timescale||0),i=e.width||0,a=e.height||0,s=Math.floor(r/(Ba+1)),o=Math.floor(r%(Ba+1));return ee.box(ee.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,a>>8&255,a&255,0,0]))}static traf(e,n){const r=ee.sdtp(e),i=e.id,a=Math.floor(n/(Ba+1)),s=Math.floor(n%(Ba+1));return ee.box(ee.types.traf,ee.box(ee.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),ee.box(ee.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,s>>24,s>>16&255,s>>8&255,s&255])),ee.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,ee.box(ee.types.trak,ee.tkhd(e),ee.mdia(e))}static trex(e){const n=e.id;return ee.box(ee.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,n){const r=e.samples||[],i=r.length,a=12+16*i,s=new Uint8Array(a);let o,c,u,d,h,p;for(n+=8+a,s.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),o=0;o<i;o++)c=r[o],u=c.duration,d=c.size,h=c.flags,p=c.cts,s.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,h.isLeading<<2|h.dependsOn,h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|h.isNonSync,h.degradPrio&61440,h.degradPrio&15,p>>>24&255,p>>>16&255,p>>>8&255,p&255],12+16*o);return ee.box(ee.types.trun,s)}static initSegment(e){ee.types||ee.init();const n=ee.moov(e);return jr(ee.FTYP,n)}static hvc1(e){const n=e.params,r=[e.vps,e.sps,e.pps],i=4,a=new Uint8Array([1,n.general_profile_space<<6|(n.general_tier_flag?32:0)|n.general_profile_idc,n.general_profile_compatibility_flags[0],n.general_profile_compatibility_flags[1],n.general_profile_compatibility_flags[2],n.general_profile_compatibility_flags[3],n.general_constraint_indicator_flags[0],n.general_constraint_indicator_flags[1],n.general_constraint_indicator_flags[2],n.general_constraint_indicator_flags[3],n.general_constraint_indicator_flags[4],n.general_constraint_indicator_flags[5],n.general_level_idc,240|n.min_spatial_segmentation_idc>>8,255&n.min_spatial_segmentation_idc,252|n.parallelismType,252|n.chroma_format_idc,248|n.bit_depth_luma_minus8,248|n.bit_depth_chroma_minus8,0,parseInt(n.frame_rate.fps),i-1|n.temporal_id_nested<<2|n.num_temporal_layers<<3|(n.frame_rate.fixed?64:0),r.length]);let s=a.length;for(let v=0;v<r.length;v+=1){s+=3;for(let S=0;S<r[v].length;S+=1)s+=2+r[v][S].length}const o=new Uint8Array(s);o.set(a,0),s=a.length;const c=r.length-1;for(let v=0;v<r.length;v+=1){o.set(new Uint8Array([32+v|(v===c?128:0),0,r[v].length]),s),s+=3;for(let S=0;S<r[v].length;S+=1)o.set(new Uint8Array([r[v][S].length>>8,r[v][S].length&255]),s),s+=2,o.set(r[v][S],s),s+=r[v][S].length}const u=ee.box(ee.types.hvcC,o),d=e.width,h=e.height,p=e.pixelRatio[0],y=e.pixelRatio[1];return ee.box(ee.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>8&255,d&255,h>>8&255,h&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u,ee.box(ee.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ee.box(ee.types.pasp,new Uint8Array([p>>24,p>>16&255,p>>8&255,p&255,y>>24,y>>16&255,y>>8&255,y&255])))}}ee.types=void 0;ee.HDLR_TYPES=void 0;ee.STTS=void 0;ee.STSC=void 0;ee.STCO=void 0;ee.STSZ=void 0;ee.VMHD=void 0;ee.SMHD=void 0;ee.STSD=void 0;ee.FTYP=void 0;ee.DINF=void 0;const UG=9e4;function h_(t,e,n=1,r=!1){const i=t*e*n;return r?Math.round(i):i}function Uxe(t,e,n=1,r=!1){return h_(t,e,1/n,r)}function Tc(t,e=!1){return h_(t,1e3,1/UG,e)}function Bxe(t,e=1){return h_(t,UG,1/e)}const Fxe=10*1e3,$xe=1024,Gxe=1152,Vxe=1536;let Jo=null,DE=null;function KU(t,e,n,r){return{duration:e,size:n,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:t?2:1,isNonSync:t?0:1}}}class mm extends ii{constructor(e,n,r,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.ISGenerated=!1,Jo===null){const s=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Jo=s?parseInt(s[1]):0}if(DE===null){const a=navigator.userAgent.match(/Safari\/(\d+)/i);DE=a?parseInt(a[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let n=!1;const r=e[0].pts,i=e.reduce((a,s)=>{let o=s.pts,c=o-a;return c<-4294967296&&(n=!0,o=Or(o,r),c=o-a),c>0?a:o},r);return n&&this.debug("PTS rollover detected"),i}remux(e,n,r,i,a,s,o,c){let u,d,h,p,y,v,S=a,x=a;const T=e.pid>-1,_=n.pid>-1,A=n.samples.length,O=e.samples.length>0,R=o&&A>0||A>1;if((!T||O)&&(!_||R)||this.ISGenerated||o){if(this.ISGenerated){var L,P,N,k;const W=this.videoTrackConfig;(W&&(n.width!==W.width||n.height!==W.height||((L=n.pixelRatio)==null?void 0:L[0])!==((P=W.pixelRatio)==null?void 0:P[0])||((N=n.pixelRatio)==null?void 0:N[1])!==((k=W.pixelRatio)==null?void 0:k[1]))||!W&&R||this.nextAudioTs===null&&O)&&this.resetInitSegment()}this.ISGenerated||(h=this.generateIS(e,n,a,s));const M=this.isVideoContiguous;let G=-1,K;if(R&&(G=qxe(n.samples),!M&&this.config.forceKeyFrameOnDiscontinuity))if(v=!0,G>0){this.warn(`Dropped ${G} out of ${A} video samples due to a missing keyframe`);const W=this.getVideoStartPts(n.samples);n.samples=n.samples.slice(G),n.dropped+=G,x+=(n.samples[0].pts-W)/n.inputTimeScale,K=x}else G===-1&&(this.warn(`No keyframe found out of ${A} video samples`),v=!1);if(this.ISGenerated){if(O&&R){const W=this.getVideoStartPts(n.samples),j=(Or(e.samples[0].pts,W)-W)/n.inputTimeScale;S+=Math.max(0,j),x+=Math.max(0,-j)}if(O){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),h=this.generateIS(e,n,a,s)),d=this.remuxAudio(e,S,this.isAudioContiguous,s,_||R||c===Se.AUDIO?x:void 0),R){const W=d?d.endPTS-d.startPTS:0;n.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),h=this.generateIS(e,n,a,s)),u=this.remuxVideo(n,x,M,W)}}else R&&(u=this.remuxVideo(n,x,M,0));u&&(u.firstKeyFrame=G,u.independent=G!==-1,u.firstKeyFramePTS=K)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(y=BG(r,a,this._initPTS,this._initDTS)),i.samples.length&&(p=FG(i,a,this._initPTS))),{audio:d,video:u,initSegment:h,independent:v,text:p,id3:y}}generateIS(e,n,r,i){const a=e.samples,s=n.samples,o=this.typeSupported,c={},u=this._initPTS;let d=!u||i,h="audio/mp4",p,y,v,S;if(d&&(p=y=1/0),e.config&&a.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(h="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}c.audio={id:"audio",container:h,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):ee.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(S=e.id,v=e.inputTimeScale,!u||v!==u.timescale?p=y=a[0].pts-Math.round(v*r):d=!1)}if(n.sps&&n.pps&&s.length){if(n.timescale=n.inputTimeScale,c.video={id:"main",container:"video/mp4",codec:n.codec,initSegment:ee.initSegment([n]),metadata:{width:n.width,height:n.height}},d)if(S=n.id,v=n.inputTimeScale,!u||v!==u.timescale){const x=this.getVideoStartPts(s),T=Math.round(v*r);y=Math.min(y,Or(s[0].dts,x)-T),p=Math.min(p,x-T)}else d=!1;this.videoTrackConfig={width:n.width,height:n.height,pixelRatio:n.pixelRatio}}if(Object.keys(c).length)return this.ISGenerated=!0,d?(this._initPTS={baseTime:p,timescale:v},this._initDTS={baseTime:y,timescale:v}):p=v=void 0,{tracks:c,initPTS:p,timescale:v,trackId:S}}remuxVideo(e,n,r,i){const a=e.inputTimeScale,s=e.samples,o=[],c=s.length,u=this._initPTS,d=u.baseTime*a/u.timescale;let h=this.nextVideoTs,p=8,y=this.videoSampleDuration,v,S,x=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY,_=!1;if(!r||h===null){const V=d+n*a,H=s[0].pts-Or(s[0].dts,s[0].pts);Jo&&h!==null&&Math.abs(V-H-(h+d))<15e3?r=!0:h=V-H-d}const A=h+d;for(let V=0;V<c;V++){const H=s[V];H.pts=Or(H.pts,A),H.dts=Or(H.dts,A),H.dts<s[V>0?V-1:V].dts&&(_=!0)}_&&s.sort(function(V,H){const te=V.dts-H.dts,ce=V.pts-H.pts;return te||ce}),v=s[0].dts,S=s[s.length-1].dts;const O=S-v,R=O?Math.round(O/(c-1)):y||e.inputTimeScale/30;if(r){const V=v-A,H=V>R,te=V<-1;if((H||te)&&(H?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Tc(V,!0)} ms (${V}dts) hole between fragments detected at ${n.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Tc(-V,!0)} ms (${V}dts) overlapping between fragments detected at ${n.toFixed(3)}`),!te||A>=s[0].pts||Jo)){v=A;const ce=s[0].pts-V;if(H)s[0].dts=v,s[0].pts=ce;else{let ye=!0;for(let ge=0;ge<s.length&&!(s[ge].dts>ce&&ye);ge++){const Me=s[ge].pts;if(s[ge].dts-=V,s[ge].pts-=V,ge<s.length-1){const Re=s[ge+1].pts,pe=s[ge].pts,Ae=Re<=pe,Oe=Re<=Me;ye=Ae==Oe}}}this.log(`Video: Initial PTS/DTS adjusted: ${Tc(ce,!0)}/${Tc(v,!0)}, delta: ${Tc(V,!0)} ms`)}}v=Math.max(0,v);let C=0,L=0,P=v;for(let V=0;V<c;V++){const H=s[V],te=H.units,ce=te.length;let ye=0;for(let ge=0;ge<ce;ge++)ye+=te[ge].data.length;L+=ye,C+=ce,H.length=ye,H.dts<P?(H.dts=P,P+=R/4|0||1):P=H.dts,x=Math.min(H.pts,x),T=Math.max(H.pts,T)}S=s[c-1].dts;const N=L+4*C+8;let k;try{k=new Uint8Array(N)}catch(V){this.observer.emit(D.ERROR,D.ERROR,{type:Te.MUX_ERROR,details:re.REMUX_ALLOC_ERROR,fatal:!1,error:V,bytes:N,reason:`fail allocating video mdat ${N}`});return}const M=new DataView(k.buffer);M.setUint32(0,N),k.set(ee.types.mdat,4);let G=!1,K=Number.POSITIVE_INFINITY,W=Number.POSITIVE_INFINITY,Y=Number.NEGATIVE_INFINITY,j=Number.NEGATIVE_INFINITY;for(let V=0;V<c;V++){const H=s[V],te=H.units;let ce=0;for(let Me=0,Re=te.length;Me<Re;Me++){const pe=te[Me],Ae=pe.data,Oe=pe.data.byteLength;M.setUint32(p,Oe),p+=4,k.set(Ae,p),p+=Oe,ce+=4+Oe}let ye;if(V<c-1)y=s[V+1].dts-H.dts,ye=s[V+1].pts-H.pts;else{const Me=this.config,Re=V>0?H.dts-s[V-1].dts:R;if(ye=V>0?H.pts-s[V-1].pts:R,Me.stretchShortVideoTrack&&this.nextAudioTs!==null){const pe=Math.floor(Me.maxBufferHole*a),Ae=(i?x+i*a:this.nextAudioTs+d)-H.pts;Ae>pe?(y=Ae-Re,y<0?y=Re:G=!0,this.log(`It is approximately ${Ae/90} ms to the next segment; using duration ${y/90} ms for the last video frame.`)):y=Re}else y=Re}const ge=Math.round(H.pts-H.dts);K=Math.min(K,y),Y=Math.max(Y,y),W=Math.min(W,ye),j=Math.max(j,ye),o.push(KU(H.key,y,ce,ge))}if(o.length){if(Jo){if(Jo<70){const V=o[0].flags;V.dependsOn=2,V.isNonSync=0}}else if(DE&&j-W<Y-K&&R/Y<.025&&o[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let V=v;for(let H=0,te=o.length;H<te;H++){const ce=V+o[H].duration,ye=V+o[H].cts;if(H<te-1){const ge=ce+o[H+1].cts;o[H].duration=ge-ye}else o[H].duration=H?o[H-1].duration:R;o[H].cts=0,V=ce}}}y=G||!y?R:y;const $=S+y;this.nextVideoTs=h=$-d,this.videoSampleDuration=y,this.isVideoContiguous=!0;const F={data1:ee.moof(e.sequenceNumber++,v,ut(e,{samples:o})),data2:k,startPTS:(x-d)/a,endPTS:(T+y-d)/a,startDTS:(v-d)/a,endDTS:h/a,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,F}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return Gxe;case"ac3":return Vxe;default:return $xe}}remuxAudio(e,n,r,i,a){const s=e.inputTimeScale,o=e.samplerate?e.samplerate:s,c=s/o,u=this.getSamplesPerFrame(e),d=u*c,h=this._initPTS,p=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,y=[],v=a!==void 0;let S=e.samples,x=p?0:8,T=this.nextAudioTs||-1;const _=h.baseTime*s/h.timescale,A=_+n*s;if(this.isAudioContiguous=r=r||S.length&&T>0&&(i&&Math.abs(A-(T+_))<9e3||Math.abs(Or(S[0].pts,A)-(T+_))<20*d),S.forEach(function(j){j.pts=Or(j.pts,A)}),!r||T<0){if(S=S.filter(j=>j.pts>=0),!S.length)return;a===0?T=0:i&&!v?T=Math.max(0,A-_):T=S[0].pts-_}if(e.segmentCodec==="aac"){const j=this.config.maxAudioFramesDrift;for(let $=0,q=T+_;$<S.length;$++){const Z=S[$],F=Z.pts,V=F-q,H=Math.abs(1e3*V/s);if(V<=-j*d&&v)$===0&&(this.warn(`Audio frame @ ${(F/s).toFixed(3)}s overlaps marker by ${Math.round(1e3*V/s)} ms.`),this.nextAudioTs=T=F-_,q=F);else if(V>=j*d&&H<Fxe&&v){let te=Math.round(V/d);for(q=F-te*d;q<0&&te&&d;)te--,q+=d;$===0&&(this.nextAudioTs=T=q-_),this.warn(`Injecting ${te} audio frames @ ${((q-_)/s).toFixed(3)}s due to ${Math.round(1e3*V/s)} ms gap.`);for(let ce=0;ce<te;ce++){let ye=jxe.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);ye||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),ye=Z.unit.subarray()),S.splice($,0,{unit:ye,pts:q}),q+=d,$++}}Z.pts=q,q+=d}}let O=null,R=null,C,L=0,P=S.length;for(;P--;)L+=S[P].unit.byteLength;for(let j=0,$=S.length;j<$;j++){const q=S[j],Z=q.unit;let F=q.pts;if(R!==null){const H=y[j-1];H.duration=Math.round((F-R)/c)}else if(r&&e.segmentCodec==="aac"&&(F=T+_),O=F,L>0){L+=x;try{C=new Uint8Array(L)}catch(H){this.observer.emit(D.ERROR,D.ERROR,{type:Te.MUX_ERROR,details:re.REMUX_ALLOC_ERROR,fatal:!1,error:H,bytes:L,reason:`fail allocating audio mdat ${L}`});return}p||(new DataView(C.buffer).setUint32(0,L),C.set(ee.types.mdat,4))}else return;C.set(Z,x);const V=Z.byteLength;x+=V,y.push(KU(!0,u,V,0)),R=F}const N=y.length;if(!N)return;const k=y[y.length-1];T=R-_,this.nextAudioTs=T+c*k.duration;const M=p?new Uint8Array(0):ee.moof(e.sequenceNumber++,O/c,ut({},e,{samples:y}));e.samples=[];const G=(O-_)/s,K=T/s,Y={data1:M,data2:C,startPTS:G,endPTS:K,startDTS:G,endDTS:K,type:"audio",hasAudio:!0,hasVideo:!1,nb:N};return this.isAudioContiguous=!0,Y}}function Or(t,e){let n;if(e===null)return t;for(e<t?n=-8589934592:n=8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}function qxe(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function BG(t,e,n,r){const i=t.samples.length;if(!i)return;const a=t.inputTimeScale;for(let o=0;o<i;o++){const c=t.samples[o];c.pts=Or(c.pts-n.baseTime*a/n.timescale,e*a)/a,c.dts=Or(c.dts-r.baseTime*a/r.timescale,e*a)/a}const s=t.samples;return t.samples=[],{samples:s}}function FG(t,e,n){const r=t.samples.length;if(!r)return;const i=t.inputTimeScale;for(let s=0;s<r;s++){const o=t.samples[s];o.pts=Or(o.pts-n.baseTime*i/n.timescale,e*i)/i}t.samples.sort((s,o)=>s.pts-o.pts);const a=t.samples;return t.samples=[],{samples:a}}class Hxe extends ii{constructor(e,n,r,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const n=this.initPTS;n&&e&&n.baseTime===e.baseTime&&n.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,n,r,i){this.audioCodec=n,this.videoCodec=r,this.generateInitSegment(jye(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:n,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=Z8(e);i.audio&&(n=YU(i.audio,yt.AUDIO,this)),i.video&&(r=YU(i.video,yt.VIDEO,this));const a={};i.audio&&i.video?a.audiovideo={container:"video/mp4",codec:n+","+r,supplemental:i.video.supplemental,initSegment:e,id:"main"}:i.audio?a.audio={container:"audio/mp4",codec:n,initSegment:e,id:"audio"}:i.video?a.video={container:"video/mp4",codec:r,supplemental:i.video.supplemental,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=a}remux(e,n,r,i,a,s){var o,c;let{initPTS:u,lastEndTime:d}=this;const h={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};xe(d)||(d=this.lastEndTime=a||0);const p=n.samples;if(!(p!=null&&p.length))return h;const y={initPTS:void 0,timescale:void 0,trackId:void 0};let v=this.initData;if((o=v)!=null&&o.length||(this.generateInitSegment(p),v=this.initData),!((c=v)!=null&&c.length))return this.warn("Failed to generate initSegment."),h;this.emitInitSegment&&(y.tracks=this.initTracks,this.emitInitSegment=!1);const S=Bye(p,v,this),x=v.audio?S[v.audio.id]:null,T=v.video?S[v.video.id]:null,_=Xh(T,1/0),A=Xh(x,1/0),O=Xh(T,0,!0),R=Xh(x,0,!0);let C,L=a,P=0;if(x&&(!T||!u&&A<_||u&&u.trackId===v.audio.id)?(y.trackId=v.audio.id,C=x,P=R-A):T&&(y.trackId=v.video.id,C=T,P=O-_),C){const j=C.timescale;L=C.start/j,y.initPTS=C.start-a*j,y.timescale=j,u||(this.initPTS=u={baseTime:y.initPTS,timescale:j,trackId:y.trackId})}(s||!u)&&(zxe(u,L,a,P)||y.timescale!==u.timescale)&&(y.initPTS=L-a,y.timescale=1,u&&u.timescale===1&&this.warn(`Adjusting initPTS @${a} from ${u.baseTime/u.timescale} to ${y.initPTS}`),this.initPTS=u={baseTime:y.initPTS,timescale:1});const N=e?L-u.baseTime/u.timescale:d,k=N+P;P>0?this.lastEndTime=k:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const M=!!v.audio,G=!!v.video;let K="";M&&(K+="audio"),G&&(K+="video");const W={data1:p,startPTS:N,startDTS:N,endPTS:k,endDTS:k,type:K,hasAudio:M,hasVideo:G,nb:1,dropped:0};h.audio=M&&!G?W:void 0,h.video=G?W:void 0;const Y=T==null?void 0:T.sampleCount;if(Y){const j=T.keyFrameIndex,$=j!==-1;W.nb=Y,W.dropped=j===0||this.isVideoContiguous?0:$?j:Y,W.independent=$,W.firstKeyFrame=j,$&&T.keyFrameStart&&(W.firstKeyFramePTS=(T.keyFrameStart-u.baseTime)/u.timescale),this.isVideoContiguous||(h.independent=$),this.isVideoContiguous||(this.isVideoContiguous=$),W.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${j}/${Y} dropped: ${W.dropped} start: ${W.firstKeyFramePTS||"NA"}`)}return h.initSegment=y,h.id3=BG(r,a,u,u),i.samples.length&&(h.text=FG(i,a,u)),h}}function Xh(t,e,n=!1){return(t==null?void 0:t.start)!==void 0?(t.start+(n?t.duration:0))/t.timescale:e}function zxe(t,e,n,r){if(t===null)return!0;const i=Math.max(r,1),a=e-t.baseTime/t.timescale;return Math.abs(a-n)>i}function YU(t,e,n){const r=t==null?void 0:t.codec;return r&&r.length>4?r:e===yt.AUDIO?r==="ec-3"||r==="ac-3"||r==="alac"?r:r==="fLaC"||r==="Opus"?Lp(r,!1):(n.warn(`Unhandled audio codec "${r}" in mp4 MAP`),r||"mp4a"):(n.warn(`Unhandled video codec "${r}" in mp4 MAP`),r||"avc1")}let Yi;try{Yi=self.performance.now.bind(self.performance)}catch{Yi=Date.now}const pm=[{demux:Pxe,remux:Hxe},{demux:qa,remux:mm},{demux:Cxe,remux:mm},{demux:Dxe,remux:mm}];pm.splice(2,0,{demux:Lxe,remux:mm});class WU{constructor(e,n,r,i,a,s){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=n,this.config=r,this.id=a,this.logger=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,n,r,i){const a=r.transmuxing;a.executeStart=Yi();let s=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:c}=this;i&&(this.currentTransmuxState=i);const{contiguous:u,discontinuity:d,trackSwitch:h,accurateTimeOffset:p,timeOffset:y,initSegmentChange:v}=i||o,{audioCodec:S,videoCodec:x,defaultInitPts:T,duration:_,initSegmentData:A}=c,O=Kxe(s,n);if(O&&pl(O.method)){const P=this.getDecrypter(),N=a_(O.method);if(P.isSync()){let k=P.softwareDecrypt(s,O.key.buffer,O.iv.buffer,N);if(r.part>-1){const G=P.flush();k=G&&G.buffer}if(!k)return a.executeEnd=Yi(),IE(r);s=new Uint8Array(k)}else return this.asyncResult=!0,this.decryptionPromise=P.webCryptoDecrypt(s,O.key.buffer,O.iv.buffer,N).then(k=>{const M=this.push(k,null,r);return this.decryptionPromise=null,M}),this.decryptionPromise}const R=this.needsProbing(d,h);if(R){const P=this.configureTransmuxer(s);if(P)return this.logger.warn(`[transmuxer] ${P.message}`),this.observer.emit(D.ERROR,D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!1,error:P,reason:P.message}),a.executeEnd=Yi(),IE(r)}(d||h||v||R)&&this.resetInitSegment(A,S,x,_,n),(d||v||R)&&this.resetInitialTimestamp(T),u||this.resetContiguity();const C=this.transmux(s,O,y,p,r);this.asyncResult=$f(C);const L=this.currentTransmuxState;return L.contiguous=!0,L.discontinuity=!1,L.trackSwitch=!1,a.executeEnd=Yi(),C}flush(e){const n=e.transmuxing;n.executeStart=Yi();const{decrypter:r,currentTransmuxState:i,decryptionPromise:a}=this;if(a)return this.asyncResult=!0,a.then(()=>this.flush(e));const s=[],{timeOffset:o}=i;if(r){const h=r.flush();h&&s.push(this.push(h.buffer,null,e))}const{demuxer:c,remuxer:u}=this;if(!c||!u){n.executeEnd=Yi();const h=[IE(e)];return this.asyncResult?Promise.resolve(h):h}const d=c.flush(o);return $f(d)?(this.asyncResult=!0,d.then(h=>(this.flushRemux(s,h,e),s))):(this.flushRemux(s,d,e),this.asyncResult?Promise.resolve(s):s)}flushRemux(e,n,r){const{audioTrack:i,videoTrack:a,id3Track:s,textTrack:o}=n,{accurateTimeOffset:c,timeOffset:u}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${r.sn}${r.part>-1?" part: "+r.part:""} of ${this.id===Se.MAIN?"level":"track"} ${r.level}`);const d=this.remuxer.remux(i,a,s,o,u,c,!0,this.id);e.push({remuxResult:d,chunkMeta:r}),r.transmuxing.executeEnd=Yi()}resetInitialTimestamp(e){const{demuxer:n,remuxer:r}=this;!n||!r||(n.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:n}=this;!e||!n||(e.resetContiguity(),n.resetNextTimestamp())}resetInitSegment(e,n,r,i,a){const{demuxer:s,remuxer:o}=this;!s||!o||(s.resetInitSegment(e,n,r,i),o.resetInitSegment(e,n,r,a))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,n,r,i,a){let s;return n&&n.method==="SAMPLE-AES"?s=this.transmuxSampleAes(e,n,r,i,a):s=this.transmuxUnencrypted(e,r,i,a),s}transmuxUnencrypted(e,n,r,i){const{audioTrack:a,videoTrack:s,id3Track:o,textTrack:c}=this.demuxer.demux(e,n,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(a,s,o,c,n,r,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,n,r,i,a){return this.demuxer.demuxSampleAes(e,n,r).then(s=>({remuxResult:this.remuxer.remux(s.audioTrack,s.videoTrack,s.id3Track,s.textTrack,r,i,!1,this.id),chunkMeta:a}))}configureTransmuxer(e){const{config:n,observer:r,typeSupported:i}=this;let a;for(let h=0,p=pm.length;h<p;h++){var s;if((s=pm[h].demux)!=null&&s.probe(e,this.logger)){a=pm[h];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,c=this.remuxer,u=a.remux,d=a.demux;(!c||!(c instanceof u))&&(this.remuxer=new u(r,n,i,this.logger)),(!o||!(o instanceof d))&&(this.demuxer=new d(r,n,i,this.logger),this.probe=d.probe)}needsProbing(e,n){return!this.demuxer||!this.remuxer||e||n}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new r_(this.config)),e}}function Kxe(t,e){let n=null;return t.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(n=e),n}const IE=t=>({remuxResult:{},chunkMeta:t});function $f(t){return"then"in t&&t.then instanceof Function}class Yxe{constructor(e,n,r,i,a){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=n,this.initSegmentData=r,this.duration=i,this.defaultInitPts=a||null}}class Wxe{constructor(e,n,r,i,a,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=n,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=a,this.initSegmentChange=s}}let XU=0;class $G{constructor(e,n,r,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=XU++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=c=>{const u=c.data,d=this.hls;if(!(!d||!(u!=null&&u.event)||u.instanceNo!==this.instanceNo))switch(u.event){case"init":{var h;const p=(h=this.workerContext)==null?void 0:h.objectURL;p&&self.URL.revokeObjectURL(p);break}case"transmuxComplete":{this.handleTransmuxComplete(u.data);break}case"flush":{this.onFlush(u.data);break}case"workerLog":{d.logger[u.data.logType]&&d.logger[u.data.logType](u.data.message);break}default:{u.data=u.data||{},u.data.frag=this.frag,u.data.part=this.part,u.data.id=this.id,d.trigger(u.event,u.data);break}}},this.onWorkerError=c=>{if(!this.hls)return;const u=new Error(`${c.message}  (${c.filename}:${c.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:u})};const a=e.config;this.hls=e,this.id=n,this.useWorker=!!a.enableWorker,this.onTransmuxComplete=r,this.onFlush=i;const s=(c,u)=>{u=u||{},u.frag=this.frag||void 0,c===D.ERROR&&(u=u,u.parent=this.id,u.part=this.part,this.error=u.error),this.hls.trigger(c,u)};this.observer=new o_,this.observer.on(D.FRAG_DECRYPTED,s),this.observer.on(D.ERROR,s);const o=dU(a.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const c=this.hls.logger;if(a.workerPath||txe()){try{a.workerPath?(c.log(`loading Web Worker ${a.workerPath} for "${n}"`),this.workerContext=rxe(a.workerPath)):(c.log(`injecting Web Worker for "${n}"`),this.workerContext=nxe());const{worker:d}=this.workerContext;d.addEventListener("message",this.onWorkerMessage),d.addEventListener("error",this.onWorkerError),d.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:n,config:Tt(a)})}catch(d){c.warn(`Error setting up "${n}" Web Worker, fallback to inline`,d),this.terminateWorker(),this.error=null,this.transmuxer=new WU(this.observer,o,a,"",n,e.logger)}return}}this.transmuxer=new WU(this.observer,o,a,"",n,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=XU++;const n=this.hls.config,r=dU(n.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:r,id:this.id,config:Tt(n)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),ixe(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const n=this.transmuxer;n&&(n.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,n,r,i,a,s,o,c,u,d){var h,p;u.transmuxing.start=self.performance.now();const{instanceNo:y,transmuxer:v}=this,S=s?s.start:a.start,x=a.decryptdata,T=this.frag,_=!(T&&a.cc===T.cc),A=!(T&&u.level===T.level),O=T?u.sn-T.sn:-1,R=this.part?u.part-this.part.index:-1,C=O===0&&u.id>1&&u.id===(T==null?void 0:T.stats.chunkCount),L=!A&&(O===1||O===0&&(R===1||C&&R<=0)),P=self.performance.now();(A||O||a.stats.parsing.start===0)&&(a.stats.parsing.start=P),s&&(R||!L)&&(s.stats.parsing.start=P);const N=!(T&&((h=a.initSegment)==null?void 0:h.url)===((p=T.initSegment)==null?void 0:p.url)),k=new Wxe(_,L,c,A,S,N);if(!L||_||N){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${a.type} sn: ${u.sn}${u.part>-1?" part: "+u.part:""} ${this.id===Se.MAIN?"level":"track"}: ${u.level} id: ${u.id}
        discontinuity: ${_}
        trackSwitch: ${A}
        contiguous: ${L}
        accurateTimeOffset: ${c}
        timeOffset: ${S}
        initSegmentChange: ${N}`);const M=new Yxe(r,i,n,o,d);this.configureTransmuxer(M)}if(this.frag=a,this.part=s,this.workerContext)this.workerContext.worker.postMessage({instanceNo:y,cmd:"demux",data:e,decryptdata:x,chunkMeta:u,state:k},e instanceof ArrayBuffer?[e]:[]);else if(v){const M=v.push(e,x,u,k);$f(M)?M.then(G=>{this.handleTransmuxComplete(G)}).catch(G=>{this.transmuxerError(G,u,"transmuxer-interface push error")}):this.handleTransmuxComplete(M)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:n,transmuxer:r}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:n,cmd:"flush",chunkMeta:e});else if(r){const i=r.flush(e);$f(i)?i.then(a=>{this.handleFlushResult(a,e)}).catch(a=>{this.transmuxerError(a,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,n,r){this.hls&&(this.error=e,this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,chunkMeta:n,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,n){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(n)}configureTransmuxer(e){const{instanceNo:n,transmuxer:r}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:n,cmd:"configure",config:e}):r&&r.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const QU=100;class Xxe extends s_{constructor(e,n,r){super(e,n,r,"audio-stream-controller",Se.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(D.BUFFER_RESET,this.onBufferReset,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(D.FRAG_LOADING,this.onFragLoading,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(D.BUFFER_RESET,this.onBufferReset,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(D.FRAG_LOADING,this.onFragLoading,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:n,id:r,initPTS:i,timescale:a}){if(r===Se.MAIN){const s=n.cc,o=this.fragCurrent;if(this.initPTS[s]={baseTime:i,timescale:a},this.log(`InitPTS for cc: ${s} found from main: ${i}/${a}`),this.mainAnchor=n,this.state===fe.WAITING_INIT_PTS){const c=this.waitingData;(!c&&!this.loadingParts||c&&c.frag.cc!==s)&&this.syncWithAnchor(n,c==null?void 0:c.frag)}else!this.hls.hasEnoughToStart&&o&&o.cc!==s?(o.abortRequests(),this.syncWithAnchor(n,o)):this.state===fe.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,n){var r;const i=((r=this.mainFragLoading)==null?void 0:r.frag)||null;if(n&&(i==null?void 0:i.cc)===n.cc)return;const a=(i||e).cc,s=this.getLevelDetails(),o=this.getLoadPosition(),c=oG(s,a,o);c&&(this.log(`Syncing with main frag at ${c.start} cc ${c.cc}`),this.startFragRequested=!1,this.nextLoadPosition=c.start,this.resetLoadingState(),this.state===fe.IDLE&&this.doTickIdle())}startLoad(e,n){if(!this.levels){this.startPosition=e,this.state=fe.STOPPED;return}const r=this.lastCurrentTime;this.stopLoad(),this.setInterval(QU),r>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r,this.state=fe.IDLE):this.state=fe.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}doTick(){switch(this.state){case fe.IDLE:this.doTickIdle();break;case fe.WAITING_TRACK:{const{levels:n,trackId:r}=this,i=n==null?void 0:n[r],a=i==null?void 0:i.details;if(a&&!this.waitForLive(i)){if(this.waitForCdnTuneIn(a))break;this.state=fe.WAITING_INIT_PTS}break}case fe.FRAG_LOADING_WAITING_RETRY:{var e;const n=performance.now(),r=this.retryDate;if(!r||n>=r||(e=this.media)!=null&&e.seeking){const{levels:i,trackId:a}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((i==null?void 0:i[a])||null),this.state=fe.IDLE}break}case fe.WAITING_INIT_PTS:{const n=this.waitingData;if(n){const{frag:r,part:i,cache:a,complete:s}=n,o=this.mainAnchor;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.state=fe.FRAG_LOADING;const c=a.flush().buffer,u={frag:r,part:i,payload:c,networkDetails:null};this._handleFragmentLoadProgress(u),s&&super._handleFragmentLoadComplete(u)}else o&&o.cc!==n.frag.cc&&this.syncWithAnchor(o,n.frag)}else this.state=fe.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:n,levels:r,media:i,trackId:a}=this,s=n.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!s.startFragPrefetch)||!(r!=null&&r[a]))return;const o=r[a],c=o.details;if(!c||this.waitForLive(o)||this.waitForCdnTuneIn(c)){this.state=fe.WAITING_TRACK,this.startFragRequested=!1;return}const u=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&u&&(this.bufferFlushed=!1,this.afterBufferFlushed(u,yt.AUDIO,Se.AUDIO));const d=this.getFwdBufferInfo(u,Se.AUDIO);if(d===null)return;if(!this.switchingTrack&&this._streamEnded(d,c)){n.trigger(D.BUFFER_EOS,{type:"audio"}),this.state=fe.ENDED;return}const h=d.len,p=n.maxBufferLength,y=c.fragments,v=y[0].start,S=this.getLoadPosition(),x=this.flushing?S:d.end;if(this.switchingTrack&&i){const A=S;c.PTSKnown&&A<v&&(d.end>v||d.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=v+.05)}if(h>=p&&!this.switchingTrack&&x<y[y.length-1].start)return;let T=this.getNextFragment(x,c);if(T&&this.isLoopLoading(T,x)&&(T=this.getNextFragmentLoopLoading(T,c,d,Se.MAIN,p)),!T){this.bufferFlushed=!0;return}let _=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&_&&Wt(T)&&!T.endList&&(!c.live||!this.loadingParts&&x<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(_)===rn.OK&&(this.mainFragLoading=_=null),_&&Wt(_))){if(T.start>_.end){const O=this.fragmentTracker.getFragAtPos(x,Se.MAIN);O&&O.end>_.end&&(_=O,this.mainFragLoading={frag:O,targetBufferTime:null})}if(T.start>_.end)return}this.loadFragment(T,o,x)}onMediaDetaching(e,n){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,n)}onAudioTracksUpdated(e,{audioTracks:n}){this.resetTransmuxer(),this.levels=n.map(r=>new jf(r))}onAudioTrackSwitching(e,n){const r=!!n.url;this.trackId=n.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?(this.switchingTrack=n,this.flushAudioIfNeeded(n),this.state!==fe.STOPPED&&(this.setInterval(QU),this.state=fe.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=n,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,n){this.mainDetails=n.details;const r=this.cachedTrackLoadedData;r&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(D.AUDIO_TRACK_LOADED,r))}onAudioTrackLoaded(e,n){var r;const{levels:i}=this,{details:a,id:s,groupId:o,track:c}=n;if(!i){this.warn(`Audio tracks reset while loading track ${s} "${c.name}" of "${o}"`);return}const u=this.mainDetails;if(!u||a.endCC>u.endCC||u.expired){this.cachedTrackLoadedData=n,this.state!==fe.STOPPED&&(this.state=fe.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${s} "${c.name}" of "${o}" loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`);const d=i[s];let h=0;if(a.live||(r=d.details)!=null&&r.live){if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;if(d.details){var p;h=this.alignPlaylists(a,d.details,(p=this.levelLastLoaded)==null?void 0:p.details)}a.alignedSliding||(SG(a,u),a.alignedSliding||kp(a,u),h=a.fragmentStart)}d.details=a,this.levelLastLoaded=d,this.startFragRequested||this.setStartPosition(u,h),this.hls.trigger(D.AUDIO_TRACK_UPDATED,{details:a,id:s,groupId:n.groupId}),this.state===fe.WAITING_TRACK&&!this.waitForCdnTuneIn(a)&&(this.state=fe.IDLE),this.tick()}_handleFragmentLoadProgress(e){var n;const r=e.frag,{part:i,payload:a}=e,{config:s,trackId:o,levels:c}=this;if(!c){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const u=c[o];if(!u){this.warn("Audio track is undefined on fragment load progress");return}const d=u.details;if(!d){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const h=s.defaultAudioCodec||u.audioCodec||"mp4a.40.2";let p=this.transmuxer;p||(p=this.transmuxer=new $G(this.hls,Se.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const y=this.initPTS[r.cc],v=(n=r.initSegment)==null?void 0:n.data;if(y!==void 0){const x=i?i.index:-1,T=x!==-1,_=new i_(r.level,r.sn,r.stats.chunkCount,a.byteLength,x,T);p.push(a,v,h,"",r,i,d.totalduration,!1,_,y)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${d.startSN} ,${d.endSN}],track ${o}`);const{cache:S}=this.waitingData=this.waitingData||{frag:r,part:i,cache:new EG,complete:!1};S.push(new Uint8Array(a)),this.state!==fe.STOPPED&&(this.state=fe.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,n){this.bufferFlushed=this.flushing=!1;const r=n.tracks.audio;r&&(this.mediaBuffer=r.buffer||null)}onFragLoading(e,n){!this.audioOnly&&n.frag.type===Se.MAIN&&Wt(n.frag)&&(this.mainFragLoading=n,this.state===fe.IDLE&&this.tick())}onFragBuffered(e,n){const{frag:r,part:i}=n;if(r.type!==Se.AUDIO){!this.audioOnly&&r.type===Se.MAIN&&!r.elementaryStreams.video&&!r.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Wt(r)){this.fragPrevious=r;const a=this.switchingTrack;a&&(this.bufferedTrack=a,this.switchingTrack=null,this.hls.trigger(D.AUDIO_TRACK_SWITCHED,ht({},a)))}this.fragBufferedComplete(r,i),this.media&&this.tick()}onError(e,n){var r;if(n.fatal){this.state=fe.ERROR;return}switch(n.details){case re.FRAG_GAP:case re.FRAG_PARSING_ERROR:case re.FRAG_DECRYPT_ERROR:case re.FRAG_LOAD_ERROR:case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_ERROR:case re.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Se.AUDIO,n);break;case re.AUDIO_TRACK_LOAD_ERROR:case re.AUDIO_TRACK_LOAD_TIMEOUT:case re.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===fe.WAITING_TRACK&&((r=n.context)==null?void 0:r.type)===He.AUDIO_TRACK&&(this.state=fe.IDLE);break;case re.BUFFER_ADD_CODEC_ERROR:case re.BUFFER_APPEND_ERROR:if(n.parent!=="audio")return;this.reduceLengthAndFlushBuffer(n)||this.resetLoadingState();break;case re.BUFFER_FULL_ERROR:if(n.parent!=="audio")return;this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case re.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onBufferFlushing(e,{type:n}){n!==yt.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:n}){if(n!==yt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===fe.ENDED&&(this.state=fe.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,n,Se.AUDIO),this.tick())}}_handleTransmuxComplete(e){var n;const r="audio",{hls:i}=this,{remuxResult:a,chunkMeta:s}=e,o=this.getCurrentContext(s);if(!o){this.resetWhenMissingContext(s);return}const{frag:c,part:u,level:d}=o,{details:h}=d,{audio:p,text:y,id3:v,initSegment:S}=a;if(this.fragContextChanged(c)||!h){this.fragmentTracker.removeFragment(c);return}if(this.state=fe.PARSING,this.switchingTrack&&p&&this.completeAudioSwitch(this.switchingTrack),S!=null&&S.tracks){const x=c.initSegment||c;this._bufferInitSegment(d,S.tracks,x,s),i.trigger(D.FRAG_PARSING_INIT_SEGMENT,{frag:x,id:r,tracks:S.tracks})}if(p){const{startPTS:x,endPTS:T,startDTS:_,endDTS:A}=p;u&&(u.elementaryStreams[yt.AUDIO]={startPTS:x,endPTS:T,startDTS:_,endDTS:A}),c.setElementaryStreamInfo(yt.AUDIO,x,T,_,A),this.bufferFragmentData(p,c,u,s)}if(v!=null&&(n=v.samples)!=null&&n.length){const x=ut({id:r,frag:c,details:h},v);i.trigger(D.FRAG_PARSING_METADATA,x)}if(y){const x=ut({id:r,frag:c,details:h},y);i.trigger(D.FRAG_PARSING_USERDATA,x)}}_bufferInitSegment(e,n,r,i){if(this.state!==fe.PARSING||(n.video&&delete n.video,n.audiovideo&&delete n.audiovideo,!n.audio))return;const a=n.audio;a.id=Se.AUDIO;const s=e.audioCodec;this.log(`Init audio buffer, container:${a.container}, codecs[level/parsed]=[${s}/${a.codec}]`),s&&s.split(",").length===1&&(a.levelCodec=s),this.hls.trigger(D.BUFFER_CODECS,n);const o=a.initSegment;if(o!=null&&o.byteLength){const c={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:o};this.hls.trigger(D.BUFFER_APPENDING,c)}this.tickImmediate()}loadFragment(e,n,r){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===rn.NOT_LOADED||i===rn.PARTIAL){var a;if(!Wt(e))this._loadInitSegment(e,n);else if((a=n.details)!=null&&a.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=fe.WAITING_INIT_PTS;const s=this.mainDetails;s&&s.fragmentStart!==n.details.fragmentStart&&kp(n.details,s)}else super.loadFragment(e,n,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:n,lang:r,assocLang:i,characteristics:a,audioCodec:s,channels:o}=this.bufferedTrack;Ks({name:n,lang:r,assocLang:i,characteristics:a,audioCodec:s,channels:o},e,Ps)||(Ip(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:n}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,n.trigger(D.AUDIO_TRACK_SWITCHED,ht({},e))}}class m_ extends ii{constructor(e,n){super(n,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,n,r){const i=n==null?void 0:n.renditionReports;if(i){let a=-1;for(let s=0;s<i.length;s++){const o=i[s];let c;try{c=new self.URL(o.URI,n.url).href}catch(u){this.warn(`Could not construct new URL for Rendition Report: ${u}`),c=o.URI||""}if(c===e){a=s;break}else c===e.substring(0,c.length)&&(a=s)}if(a!==-1){const s=i[a],o=parseInt(s["LAST-MSN"])||(n==null?void 0:n.lastPartSn);let c=parseInt(s["LAST-PART"])||(n==null?void 0:n.lastPartIndex);if(this.hls.config.lowLatencyMode){const d=Math.min(n.age-n.partTarget,n.targetduration);c>=0&&d>n.partTarget&&(c+=1)}const u=r&&hU(r);return new mU(o,c>=0?c:void 0,u)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,n){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,n){if(n)try{return n.addDirectives(e)}catch(r){this.warn(`Could not construct new URL with HLS Delivery Directives: ${r}`)}return e}playlistLoaded(e,n,r){const{details:i,stats:a}=n,s=self.performance.now(),o=a.loading.first?Math.max(0,s-a.loading.first):0;i.advancedDateTime=Date.now()-o;const c=this.hls.config.timelineOffset;if(c!==i.appliedTimelineOffset){const d=Math.max(c||0,0);i.appliedTimelineOffset=d,i.fragments.forEach(h=>{h.start=h.playlistOffset+d})}if(i.live||r!=null&&r.live){const d="levelInfo"in n?n.levelInfo:n.track;if(i.reloaded(r),r&&i.fragments.length>0){Hve(r,i);const _=i.playlistParsingError;if(_){this.warn(_);const A=this.hls;if(!A.config.ignorePlaylistParsingErrors){var u;const{networkDetails:O}=n;A.trigger(D.ERROR,{type:Te.NETWORK_ERROR,details:re.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:_,reason:_.message,level:n.level||void 0,parent:(u=i.fragments[0])==null?void 0:u.type,networkDetails:O,stats:a});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=a.loading.start);const h=this.hls.mainForwardBufferInfo,p=h?h.end-h.len:0,y=(i.edge-p)*1e3,v=gG(i,y);if(i.requestScheduled+v<s?i.requestScheduled=s:i.requestScheduled+=v,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let S,x,T;if(i.canBlockReload&&i.endSN&&i.advanced){const _=this.hls.config.lowLatencyMode,A=i.lastPartSn,O=i.endSN,R=i.lastPartIndex,C=R!==-1,L=A===O;C?L?(x=O+1,T=_?0:R):(x=A,T=_?R+1:i.maxPartIndex):x=O+1;const P=i.age,N=P+i.ageHeader;let k=Math.min(N-i.partTarget,i.targetduration*1.5);if(k>0){if(N>i.targetduration*3)this.log(`Playlist last advanced ${P.toFixed(2)}s ago. Omitting segment and part directives.`),x=void 0,T=void 0;else if(r!=null&&r.tuneInGoal&&N-i.partTarget>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${k} with playlist age: ${i.age}`),k=0;else{const M=Math.floor(k/i.targetduration);if(x+=M,T!==void 0){const G=Math.round(k%i.targetduration/i.partTarget);T+=G}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${P.toFixed(2)}s goal: ${k} skip sn ${M} to part ${T}`)}i.tuneInGoal=k}if(S=this.getDeliveryDirectives(i,n.deliveryDirectives,x,T),_||!L){i.requestScheduled=s,this.loadingPlaylist(d,S);return}}else(i.canBlockReload||i.canSkipUntil)&&(S=this.getDeliveryDirectives(i,n.deliveryDirectives,x,T));S&&x!==void 0&&i.canBlockReload&&(i.requestScheduled=a.loading.first+Math.max(v-o*2,v/2)),this.scheduleLoading(d,S,i)}else this.clearTimer()}scheduleLoading(e,n,r){const i=r||e.details;if(!i){this.loadingPlaylist(e,n);return}const a=self.performance.now(),s=i.requestScheduled;if(a>=s){this.loadingPlaylist(e,n);return}const o=s-a;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,n),o)}getDeliveryDirectives(e,n,r,i){let a=hU(e);return n!=null&&n.skip&&e.deltaUpdateFailed&&(r=n.msn,i=n.part,a=dm.No),new mU(r,i,a)}checkRetry(e){const n=e.details,r=Pp(e),i=e.errorAction,{action:a,retryCount:s=0,retryConfig:o}=i||{},c=!!i&&!!o&&(a===In.RetryRequest||!i.resolved&&a===In.SendAlternateToPenaltyBox);if(c){var u;if(s>=o.maxNumRetry)return!1;if(r&&(u=e.context)!=null&&u.deliveryDirectives)this.warn(`Retrying playlist loading ${s+1}/${o.maxNumRetry} after "${n}" without delivery-directives`),this.loadPlaylist();else{const d=n_(o,s);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),d),this.warn(`Retrying playlist loading ${s+1}/${o.maxNumRetry} after "${n}" in ${d}ms`)}e.levelRetry=!0,i.resolved=!0}return c}}function GG(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Gf(t[n].attrs,e[n].attrs))return!1;return!0}function Gf(t,e,n){const r=t["STABLE-RENDITION-ID"];return r&&!n?r===e["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>t[i]!==e[i])}function Y1(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class Qxe extends m_{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(D.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.audioTracks||[]}onAudioTrackLoaded(e,n){const{id:r,groupId:i,details:a}=n,s=this.tracksInGroup[r];if(!s||s.groupId!==i){this.warn(`Audio track with id:${r} and group:${i} not found in active group ${s==null?void 0:s.groupId}`);return}const o=s.details;s.details=n.details,this.log(`Audio track ${r} "${s.name}" lang:${s.lang} group:${i} loaded [${a.startSN}-${a.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,o)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.audioGroups||null,i=this.groupIds;let a=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(o=>(i==null?void 0:i.indexOf(o))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(p=>!r||r.indexOf(p.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(p=>p.default)&&(this.selectDefaultTrack=!1),o.forEach((p,y)=>{p.id=y});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const c=this.hls.config.audioPreference;if(!a&&c){const p=yi(c,o,Ps);if(p>-1)a=o[p];else{const y=yi(c,this.tracks);a=this.tracks[y]}}let u=this.findTrackId(a);u===-1&&a&&(u=this.findTrackId(null));const d={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${r==null?void 0:r.join(",")}`),this.hls.trigger(D.AUDIO_TRACKS_UPDATED,d);const h=this.trackId;if(u!==-1&&h===-1)this.setAudioTrack(u);else if(o.length&&h===-1){var s;const p=new Error(`No audio track selected for current audio group-ID(s): ${(s=this.groupIds)==null?void 0:s.join(",")} track count: ${o.length}`);this.warn(p.message),this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:p})}}}onError(e,n){n.fatal||!n.context||n.context.type===He.AUDIO_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const n=this.hls;if(n.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const i=this.currentTrack;if(i&&Ks(e,i,Ps))return i;const a=yi(e,this.tracksInGroup,Ps);if(a>-1){const s=this.tracksInGroup[a];return this.setAudioTrack(a),s}else if(i){let s=n.loadLevel;s===-1&&(s=n.firstAutoLevel);const o=cve(e,n.levels,r,s,Ps);if(o===-1)return null;n.nextLoadLevel=o}if(e.channels||e.audioCodec){const s=yi(e,r);if(s>-1)return r[s]}}}return null}setAudioTrack(e){const n=this.tracksInGroup;if(e<0||e>=n.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,i=n[e],a=i.details&&!i.details.live;if(e===this.trackId&&i===r&&a||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(D.AUDIO_TRACK_SWITCHING,ht({},i)),a))return;const s=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(s)}findTrackId(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const i=n[r];if(!(this.selectDefaultTrack&&!i.default)&&(!e||Ks(e,i,Ps)))return r}if(e){const{name:r,lang:i,assocLang:a,characteristics:s,audioCodec:o,channels:c}=e;for(let u=0;u<n.length;u++){const d=n[u];if(Ks({name:r,lang:i,assocLang:a,characteristics:s,audioCodec:o,channels:c},d,Ps))return u}for(let u=0;u<n.length;u++){const d=n[u];if(Gf(e.attrs,d.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return u}for(let u=0;u<n.length;u++){const d=n[u];if(Gf(e.attrs,d.attrs,["LANGUAGE"]))return u}}return-1}loadPlaylist(e){super.loadPlaylist();const n=this.currentTrack;this.shouldLoadPlaylist(n)&&Ip(n.url,this.hls)&&this.scheduleLoading(n,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=e.id,i=e.groupId,a=this.getUrlWithDirectives(e.url,n),s=e.details,o=s==null?void 0:s.age;this.log(`Loading audio-track ${r} "${e.name}" lang:${e.lang} group:${i}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${a}`),this.hls.trigger(D.AUDIO_TRACK_LOADING,{url:a,id:r,groupId:i,deliveryDirectives:n||null,track:e})}}class Zxe{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,n,r){if(this.queues===null||this.tracks===null)return;const i=this.queues[n];i.push(e),i.length===1&&!r&&this.executeNext(n)}appendBlocker(e){return new Promise(n=>{const r={label:"async-blocker",execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(r,e)})}prependBlocker(e){return new Promise(n=>{if(this.queues){const r={label:"async-blocker-prepend",execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(r)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var n;const r=(n=e[0])==null?void 0:n.label;(r==="async-blocker"||r==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const n=this.queues[e];if(n.length){const i=n[0];try{i.execute()}catch(a){var r;if(i.onError(a),this.queues===null||this.tracks===null)return;const s=(r=this.tracks[e])==null?void 0:r.buffer;s!=null&&s.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var n;return((n=this.queues)==null?void 0:n[e][0])||null}toString(){const{queues:e,tracks:n}=this;return e===null||n===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var n,r;return(n=this.queues)!=null&&n[e]||(r=this.tracks)!=null&&r[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var n;const r=(n=this.tracks)==null?void 0:n[e],i=r==null?void 0:r.buffer;return i?`SourceBuffer${i.updating?" updating":""}${r.ended?" ended":""}${r.ending?" ending":""}`:"none"}listOps(e){var n;return((n=this.queues)==null?void 0:n[e].map(r=>r.label).join(", "))||""}}const ZU=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,VG="HlsJsTrackRemovedError";class Jxe extends Error{constructor(e){super(e),this.name=VG}}class ebe extends ii{constructor(e,n){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=r=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=r=>{const{media:i,mediaSource:a}=this;r&&this.log("Media source opened"),!(!i||!a)&&(a.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(D.MEDIA_ATTACHED,{media:i,mediaSource:a}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:i}=this;r!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${r})`)},this.hls=e,this.fragmentTracker=n,this.appendSource=Rye(Za(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.BUFFER_RESET,this.onBufferReset,this),e.on(D.BUFFER_APPENDING,this.onBufferAppending,this),e.on(D.BUFFER_CODECS,this.onBufferCodecs,this),e.on(D.BUFFER_EOS,this.onBufferEos,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.FRAG_PARSED,this.onFragParsed,this),e.on(D.FRAG_CHANGED,this.onFragChanged,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.BUFFER_RESET,this.onBufferReset,this),e.off(D.BUFFER_APPENDING,this.onBufferAppending,this),e.off(D.BUFFER_CODECS,this.onBufferCodecs,this),e.off(D.BUFFER_EOS,this.onBufferEos,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.FRAG_PARSED,this.onFragParsed,this),e.off(D.FRAG_CHANGED,this.onFragChanged,this),e.off(D.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:n}=this;if(!e)return null;const r={};if(this.operationQueue){const a=this.isUpdating();a||this.operationQueue.removeBlockers();const s=this.isQueued();(a||s)&&this.warn(`Transfering MediaSource with${s?" operations in queue":""}${a?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===n?ut(r,i.tracks):this.sourceBuffers.forEach(a=>{const[s]=a;s&&(r[s]=ut({},this.tracks[s]),this.removeBuffer(s)),a[0]=a[1]=null}),{media:e,mediaSource:n,tracks:r}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,n){var r;let i=2;(n.audio&&!n.video||!n.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(r=this.transferData)!=null&&r.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,n){const r=this.media=n.media,i=Za(this.appendSource);if(this.transferData=this.overrides=void 0,r&&i){const a=!!n.mediaSource;(a||n.overrides)&&(this.transferData=n,this.overrides=n.overrides);const s=this.mediaSource=n.mediaSource||new i;if(this.assignMediaSource(s),a)this._objectUrl=r.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(s);if(this.appendSource)try{r.removeAttribute("src");const c=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||c&&s instanceof c,JU(r),tbe(r,o),r.load()}catch{r.src=o}else r.src=o}r.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var n,r;this.log(`${((n=this.transferData)==null?void 0:n.mediaSource)===e?"transferred":"created"} media source: ${(r=e.constructor)==null?void 0:r.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,n=this.transferData;if(!n||!e)return;const r=this.tracks,i=n.tracks,a=i?Object.keys(i):null,s=a?a.length:0,o=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(i&&a&&s){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Tt(r,(c,u)=>c==="initSegment"?void 0:u)};
transfer tracks: ${Tt(i,(c,u)=>c==="initSegment"?void 0:u)}}`),!H8(i,r)){n.mediaSource=null,n.tracks=void 0;const c=e.currentTime,u=this.details,d=Math.max(c,(u==null?void 0:u.fragments[0].start)||0);if(d-c>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${c} -> ${d}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(r)}") start time: ${d} currentTime: ${c}`),this.onMediaDetaching(D.MEDIA_DETACHING,{}),this.onMediaAttaching(D.MEDIA_ATTACHING,n),e.currentTime=d;return}this.transferData=void 0,a.forEach(c=>{const u=c,d=i[u];if(d){const h=d.buffer;if(h){const p=this.fragmentTracker,y=d.id;if(p.hasFragments(y)||p.hasParts(y)){const x=ke.getBuffered(h);p.detectEvictedFragments(u,x,y,null,!0)}const v=PE(u),S=[u,h];this.sourceBuffers[v]=S,h.updating&&this.operationQueue&&this.operationQueue.prependBlocker(u),this.trackSourceBuffer(u,d)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const n=(e=this.mediaSource)==null?void 0:e.readyState;return n==="open"||n==="ended"}onMediaDetaching(e,n){const r=!!n.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:a,_objectUrl:s}=this;if(a){if(this.log(`media source ${r?"transferring":"detaching"}`),r)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=a.readyState==="open";try{const c=a.sourceBuffers;for(let u=c.length;u--;)o&&c[u].abort(),a.removeSourceBuffer(c[u]);o&&a.endOfStream()}catch(c){this.warn(`onMediaDetaching: ${c.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}a.removeEventListener("sourceopen",this._onMediaSourceOpen),a.removeEventListener("sourceended",this._onMediaSourceEnded),a.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.removeEventListener("startstreaming",this._onStartStreaming),a.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),r||(s&&self.URL.revokeObjectURL(s),this.mediaSrc===s?(i.removeAttribute("src"),this.appendSource&&JU(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(D.MEDIA_DETACHED,n)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var n;const r=(n=this.tracks[e])==null?void 0:n.buffer;if(this.removeBuffer(e),r)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(r)}catch(a){this.warn(`onBufferReset ${e}`,a)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[PE(e)]=[null,null];const n=this.tracks[e];n&&(n.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new Zxe(this.tracks)}onBufferCodecs(e,n){const r=this.tracks,i=Object.keys(n);this.log(`BUFFER_CODECS: "${i}" (current SB count ${this.sourceBufferCount})`);const a="audiovideo"in n&&(r.audio||r.video)||r.audiovideo&&("audio"in n||"video"in n),s=!a&&this.sourceBufferCount&&this.media&&i.some(o=>!r[o]);if(a||s){this.warn(`Unsupported transition between "${Object.keys(r)}" and "${i}" SourceBuffers`);return}i.forEach(o=>{var c,u,d;const h=n[o],{id:p,codec:y,levelCodec:v,container:S,metadata:x,supplemental:T}=h;let _=r[o];const A=(c=this.transferData)==null||(u=c.tracks)==null?void 0:u[o],O=A!=null&&A.buffer?A:_,R=(O==null?void 0:O.pendingCodec)||(O==null?void 0:O.codec),C=O==null?void 0:O.levelCodec;_||(_=r[o]={buffer:void 0,listeners:[],codec:y,supplemental:T,container:S,levelCodec:v,metadata:x,id:p});const L=fm(R,C),P=L==null?void 0:L.replace(ZU,"$1");let N=fm(y,v);const k=(d=N)==null?void 0:d.replace(ZU,"$1");N&&L&&P!==k&&(o.slice(0,5)==="audio"&&(N=Lp(N,this.appendSource)),this.log(`switching codec ${R} to ${N}`),N!==(_.pendingCodec||_.codec)&&(_.pendingCodec=N),_.container=S,this.appendChangeType(o,S,N))}),(this.tracksReady||this.sourceBufferCount)&&(n.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,n)=>{const r=this.tracks[n];return e[n]={id:r.id,container:r.container,codec:r.codec,levelCodec:r.levelCodec},e},{})}appendChangeType(e,n,r){const i=`${n};codecs=${r}`,a={label:`change-type=${i}`,execute:()=>{const s=this.tracks[e];if(s){const o=s.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),o.changeType(i),s.codec=r,s.container=n)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{this.warn(`Failed to change ${e} SourceBuffer type`,s)}};this.append(a,e,this.isPending(this.tracks[e]))}blockAudio(e){var n;const r=e.start,i=r+e.duration*.05;if(((n=this.fragmentTracker.getAppendedFrag(r,Se.MAIN))==null?void 0:n.gap)===!0)return;const s={label:"block-audio",execute:()=>{var o;const c=this.tracks.video;(this.lastVideoAppendEnd>i||c!=null&&c.buffer&&ke.isBuffered(c.buffer,i)||((o=this.fragmentTracker.getAppendedFrag(i,Se.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:s,frag:e},this.append(s,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:n}=this;e&&n&&(this.blockedAudioAppend=null,n.unblockAudio(e.op))}onBufferAppending(e,n){const{tracks:r}=this,{data:i,type:a,parent:s,frag:o,part:c,chunkMeta:u,offset:d}=n,h=u.buffering[a],{sn:p,cc:y}=o,v=self.performance.now();h.start=v;const S=o.stats.buffering,x=c?c.stats.buffering:null;S.start===0&&(S.start=v),x&&x.start===0&&(x.start=v);const T=r.audio;let _=!1;a==="audio"&&(T==null?void 0:T.container)==="audio/mpeg"&&(_=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const A=r.video,O=A==null?void 0:A.buffer;if(O&&p!=="initSegment"){const L=c||o,P=this.blockedAudioAppend;if(a==="audio"&&s!=="main"&&!this.blockedAudioAppend){const k=L.start+L.duration*.05,M=O.buffered,G=this.currentOp("video");!M.length&&!G?this.blockAudio(L):!G&&!ke.isBuffered(O,k)&&this.lastVideoAppendEnd<k&&this.blockAudio(L)}else if(a==="video"){const N=L.end;if(P){const k=P.frag.start;(N>k||N<this.lastVideoAppendEnd||ke.isBuffered(O,k))&&this.unblockAudio()}this.lastVideoAppendEnd=N}}const R=(c||o).start,C={label:`append-${a}`,execute:()=>{var L;h.executeStart=self.performance.now();const P=(L=this.tracks[a])==null?void 0:L.buffer;P&&(_?this.updateTimestampOffset(P,R,.1,a,p,y):d!==void 0&&xe(d)&&this.updateTimestampOffset(P,d,1e-6,a,p,y)),this.appendExecutor(i,a)},onStart:()=>{},onComplete:()=>{const L=self.performance.now();h.executeEnd=h.end=L,S.first===0&&(S.first=L),x&&x.first===0&&(x.first=L);const P={};this.sourceBuffers.forEach(([N,k])=>{N&&(P[N]=ke.getBuffered(k))}),this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(D.BUFFER_APPENDED,{type:a,frag:o,part:c,chunkMeta:u,parent:o.type,timeRanges:P})},onError:L=>{var P;const N={type:Te.MEDIA_ERROR,parent:o.type,details:re.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:o,part:c,chunkMeta:u,error:L,err:L,fatal:!1},k=(P=this.media)==null?void 0:P.error;if(L.code===DOMException.QUOTA_EXCEEDED_ERR||L.name=="QuotaExceededError"||"quota"in L)N.details=re.BUFFER_FULL_ERROR;else if(L.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!k)N.errorAction=Uf(!0);else if(L.name===VG&&this.sourceBufferCount===0)N.errorAction=Uf(!0);else{const M=++this.appendErrors[a];this.warn(`Failed ${M}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer (${k||"no media error"})`),(M>=this.hls.config.appendErrorMaxRetry||k)&&(N.fatal=!0)}this.hls.trigger(D.ERROR,N)}};this.append(C,a,this.isPending(this.tracks[a]))}getFlushOp(e,n,r){return this.log(`queuing "${e}" remove ${n}-${r}`),{label:"remove",execute:()=>{this.removeExecutor(e,n,r)},onStart:()=>{},onComplete:()=>{this.hls.trigger(D.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${n}-${r} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,n){const{type:r,startOffset:i,endOffset:a}=n;r?this.append(this.getFlushOp(r,i,a),r):this.sourceBuffers.forEach(([s])=>{s&&this.append(this.getFlushOp(s,i,a),s)})}onFragParsed(e,n){const{frag:r,part:i}=n,a=[],s=i?i.elementaryStreams:r.elementaryStreams;s[yt.AUDIOVIDEO]?a.push("audiovideo"):(s[yt.AUDIO]&&a.push("audio"),s[yt.VIDEO]&&a.push("video"));const o=()=>{const c=self.performance.now();r.stats.buffering.end=c,i&&(i.stats.buffering.end=c);const u=i?i.stats:r.stats;this.hls.trigger(D.FRAG_BUFFERED,{frag:r,part:i,stats:u,id:r.type})};a.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(o,a).catch(c=>{this.warn(`Fragment buffered callback ${c}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,n){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var n,r;return e&&(!((n=this.tracks[e])!=null&&n.ended)||((r=this.tracks[e])==null?void 0:r.ending))})}onBufferEos(e,n){var r;this.sourceBuffers.forEach(([s])=>{if(s){const o=this.tracks[s];(!n.type||n.type===s)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${s} buffer reached EOS`)))}});const i=((r=this.overrides)==null?void 0:r.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([s])=>{var o;return s&&!((o=this.tracks[s])!=null&&o.ended)})&&(i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:s}=this;if(!s||s.readyState!=="open"){s&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${s.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),s.endOfStream(),this.hls.trigger(D.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(D.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const n=this.tracks[e];n&&(n.ending=!1)}})}onLevelUpdated(e,{details:n}){n.fragments.length&&(this.details=n,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,n){if(n.details===re.BUFFER_APPEND_ERROR&&n.frag){var r;const i=(r=n.errorAction)==null?void 0:r.nextAutoLevel;xe(i)&&i!==n.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:n,media:r}=this;if(!r||n===null||!this.sourceBufferCount)return;const i=e.config,a=r.currentTime,s=n.levelTargetDuration,o=n.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(xe(o)&&o>=0){const c=Math.max(o,s),u=Math.floor(a/s)*s-c;this.flushBackBuffer(a,s,u)}if(xe(i.frontBufferFlushThreshold)&&i.frontBufferFlushThreshold>0){const c=Math.max(i.maxBufferLength,i.frontBufferFlushThreshold),u=Math.max(c,s),d=Math.floor(a/s)*s+u;this.flushFrontBuffer(a,s,d)}}flushBackBuffer(e,n,r){this.sourceBuffers.forEach(([i,a])=>{if(a){const o=ke.getBuffered(a);if(o.length>0&&r>o.start(0)){var s;this.hls.trigger(D.BACK_BUFFER_REACHED,{bufferEnd:r});const c=this.tracks[i];if((s=this.details)!=null&&s.live)this.hls.trigger(D.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(c!=null&&c.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(D.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:i})}}})}flushFrontBuffer(e,n,r){this.sourceBuffers.forEach(([i,a])=>{if(a){const s=ke.getBuffered(a),o=s.length;if(o<2)return;const c=s.start(o-1),u=s.end(o-1);if(r>c||e>=c&&e<=u)return;this.hls.trigger(D.BUFFER_FLUSHING,{startOffset:c,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:n,mediaSource:r}=this;if(!n||!this.media||(r==null?void 0:r.readyState)!=="open")return null;const i=n.edge;if(n.live&&this.hls.config.liveDurationInfinity){if(n.fragments.length&&n.live&&r.setLiveSeekableRange){const u=Math.max(0,n.fragmentStart),d=Math.max(u,i);return{duration:1/0,start:u,end:d}}return{duration:1/0}}const a=(e=this.overrides)==null?void 0:e.duration;if(a)return xe(a)?{duration:a}:null;const s=this.media.duration,o=xe(r.duration)?r.duration:0;return i>o&&i>s||!xe(s)?{duration:i}:null}updateMediaSource({duration:e,start:n,end:r}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(xe(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),n!==void 0&&r!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${n}-${r}.`),i.setLiveSeekableRange(n,r)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:n,tracks:r}=this;if(this.log(`checkPendingTracks (pending: ${n} codec events expected: ${e}) ${Tt(r)}`),this.tracksReady){var i;const a=(i=this.transferData)==null?void 0:i.tracks;a&&Object.keys(a).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([n,r])=>{if(n){const i=this.tracks[n];e[n]={buffer:r,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(D.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([n])=>{this.executeNext(n)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:n,mediaSource:r}=this;if(!r)throw new Error("createSourceBuffers called when mediaSource was null");for(const a in e){const s=a,o=e[s];if(this.isPending(o)){const c=this.getTrackCodec(o,s),u=`${o.container};codecs=${c}`;o.codec=c,this.log(`creating sourceBuffer(${u})${this.currentOp(s)?" Queued":""} ${Tt(o)}`);try{const d=r.addSourceBuffer(u),h=PE(s),p=[s,d];n[h]=p,o.buffer=d}catch(d){var i;this.error(`error while trying to add sourceBuffer: ${d.message}`),this.shiftAndExecuteNext(s),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[s],this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:d,sourceBufferName:s,mimeType:u,parent:o.id});return}this.trackSourceBuffer(s,o)}}this.bufferCreated()}getTrackCodec(e,n){const r=e.supplemental;let i=e.codec;r&&(n==="video"||n==="audiovideo")&&U1(r,"video")&&(i=Kye(i,r));const a=fm(i,e.levelCodec);return a?n.slice(0,5)==="audio"?Lp(a,this.appendSource):a:""}trackSourceBuffer(e,n){const r=n.buffer;if(!r)return;const i=this.getTrackCodec(n,e);this.tracks[e]={buffer:r,codec:i,container:n.container,levelCodec:n.levelCodec,supplemental:n.supplemental,metadata:n.metadata,id:n.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(a,s)=>{const o=s.removedRanges;o!=null&&o.length&&this.hls.trigger(D.BUFFER_FLUSHED,{type:a})})}get mediaSrc(){var e,n;const r=((e=this.media)==null||(n=e.querySelector)==null?void 0:n.call(e,"source"))||this.media;return r==null?void 0:r.src}onSBUpdateStart(e){const n=this.currentOp(e);n&&n.onStart()}onSBUpdateEnd(e){var n;if(((n=this.mediaSource)==null?void 0:n.readyState)==="closed"){this.resetBuffer(e);return}const r=this.currentOp(e);r&&(r.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,n){var r;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${i}`,n),this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const a=this.currentOp(e);a&&a.onError(i)}updateTimestampOffset(e,n,r,i,a,s){const o=n-e.timestampOffset;Math.abs(o)>=r&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${n} (sn: ${a} cc: ${s})`),e.timestampOffset=n)}removeExecutor(e,n,r){const{media:i,mediaSource:a}=this,s=this.tracks[e],o=s==null?void 0:s.buffer;if(!i||!a||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const c=xe(i.duration)?i.duration:1/0,u=xe(a.duration)?a.duration:1/0,d=Math.max(0,n),h=Math.min(r,c,u);h>d&&(!s.ending||s.ended)?(s.ended=!1,this.log(`Removing [${d},${h}] from the ${e} SourceBuffer`),o.remove(d,h)):this.shiftAndExecuteNext(e)}appendExecutor(e,n){const r=this.tracks[n],i=r==null?void 0:r.buffer;if(!i)throw new Jxe(`Attempting to append to the ${n} SourceBuffer, but it does not exist`);r.ending=!1,r.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(n=>{this.warn(`SourceBuffer blocked callback ${n}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(n){this.warn(`Callback run without blocking ${this.operationQueue} ${n}`)}}isUpdating(){return this.sourceBuffers.some(([e,n])=>e&&n.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,n=this.sourceBufferTypes){if(!n.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:r}=this,i=n.map(s=>this.appendBlocker(s));return n.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(s=>{r===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(n=>{var r;const i=(r=this.tracks[n])==null?void 0:r.buffer;!i||i.updating||this.shiftAndExecuteNext(n)})}append(e,n,r){this.operationQueue&&this.operationQueue.append(e,n,r)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,n)=>e+(this.isPending(this.tracks[n])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[n])=>e+(n?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,n,r){const i=this.tracks[e];if(!i)return;const a=i.buffer;if(!a)return;const s=r.bind(this,e);i.listeners.push({event:n,listener:s}),a.addEventListener(n,s)}removeBufferListeners(e){const n=this.tracks[e];if(!n)return;const r=n.buffer;r&&(n.listeners.forEach(i=>{r.removeEventListener(i.event,i.listener)}),n.listeners.length=0)}}function JU(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(n=>{t.removeChild(n)})}function tbe(t,e){const n=self.document.createElement("source");n.type="video/mp4",n.src=e,t.appendChild(n)}function PE(t){return t==="audio"?1:0}class p_{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(D.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.BUFFER_CODECS,this.onBufferCodecs,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(D.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.BUFFER_CODECS,this.onBufferCodecs,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,n){const r=this.hls.levels[n.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,n){this.media=n.media instanceof HTMLVideoElement?n.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,n){const r=this.hls;this.restrictedLevels=[],this.firstLevel=n.firstLevel,r.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onLevelsUpdated(e,n){this.timer&&xe(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,n){this.hls.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const n=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&n.logger.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),n.autoLevelCapping=r,n.autoLevelEnabled&&n.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}}getMaxLevel(e){const n=this.hls.levels;if(!n.length)return-1;const r=n.filter((i,a)=>this.isLevelAllowed(i)&&a<=e);return this.clientRect=null,p_.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,n={width:0,height:0};if(e){const r=e.getBoundingClientRect();n.width=r.width,n.height=r.height,!n.width&&!n.height&&(n.width=r.right-r.left||e.width||0,n.height=r.bottom-r.top||e.height||0)}return this.clientRect=n,n}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(r=>e.bitrate===r.bitrate&&e.width===r.width&&e.height===r.height)}static getMaxLevelByMediaSize(e,n,r){if(!(e!=null&&e.length))return-1;const i=(o,c)=>c?o.width!==c.width||o.height!==c.height:!0;let a=e.length-1;const s=Math.max(n,r);for(let o=0;o<e.length;o+=1){const c=e[o];if((c.width>=s||c.height>=s)&&i(c,e[o+1])){a=o;break}}return a}}const nbe={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},zn=nbe,rbe={HLS:"h"},ibe=rbe,abe="CMCD-Object",sbe="CMCD-Request",obe="CMCD-Session",lbe="CMCD-Status",Cc={OBJECT:abe,REQUEST:sbe,SESSION:obe,STATUS:lbe},ube={[Cc.OBJECT]:["br","ab","d","ot","tb","tpb","lb","tab","lab","url"],[Cc.REQUEST]:["pb","bl","tbl","dl","ltc","mtp","nor","nrr","rc","sn","sta","su","ttfb","ttfbb","ttlb","cmsdd","cmsds","smrt","df","cs"],[Cc.SESSION]:["cid","pr","sf","sid","st","v","msd"],[Cc.STATUS]:["bs","bsd","cdn","rtp","bg","pt","ec","e"]};class Hl{constructor(e,n){Array.isArray(e)&&(e=e.map(r=>r instanceof Hl?r:new Hl(r))),this.value=e,this.params=n}}const cbe="Dict";function fbe(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function dbe(t,e,n,r){return new Error(`failed to ${t} "${fbe(e)}" as ${n}`,{cause:r})}function wi(t,e,n){return dbe("serialize",t,e,n)}class qG{constructor(e){this.description=e}}const eB="Bare Item",hbe="Boolean";function mbe(t){if(typeof t!="boolean")throw wi(t,hbe);return t?"?1":"?0"}function pbe(t){return btoa(String.fromCharCode(...t))}const gbe="Byte Sequence";function ybe(t){if(ArrayBuffer.isView(t)===!1)throw wi(t,gbe);return`:${pbe(t)}:`}const vbe="Integer";function xbe(t){return t<-999999999999999||999999999999999<t}function HG(t){if(xbe(t))throw wi(t,vbe);return t.toString()}function bbe(t){return`@${HG(t.getTime()/1e3)}`}function zG(t,e){if(t<0)return-zG(-t,e);const n=Math.pow(10,e);if(Math.abs(t*n%1-.5)<Number.EPSILON){const i=Math.floor(t*n);return(i%2===0?i:i+1)/n}else return Math.round(t*n)/n}const Sbe="Decimal";function Ebe(t){const e=zG(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw wi(t,Sbe);const n=e.toString();return n.includes(".")?n:`${n}.0`}const Tbe="String",Abe=/[\x00-\x1f\x7f]+/;function wbe(t){if(Abe.test(t))throw wi(t,Tbe);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function _be(t){return t.description||t.toString().slice(7,-1)}const Rbe="Token";function tB(t){const e=_be(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw wi(e,Rbe);return e}function W1(t){switch(typeof t){case"number":if(!xe(t))throw wi(t,eB);return Number.isInteger(t)?HG(t):Ebe(t);case"string":return wbe(t);case"symbol":return tB(t);case"boolean":return mbe(t);case"object":if(t instanceof Date)return bbe(t);if(t instanceof Uint8Array)return ybe(t);if(t instanceof qG)return tB(t);default:throw wi(t,eB)}}const Obe="Key";function X1(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw wi(t,Obe);return t}function g_(t){return t==null?"":Object.entries(t).map(([e,n])=>n===!0?`;${X1(e)}`:`;${X1(e)}=${W1(n)}`).join("")}function KG(t){return t instanceof Hl?`${W1(t.value)}${g_(t.params)}`:W1(t)}function Cbe(t){return`(${t.value.map(KG).join(" ")})${g_(t.params)}`}function Lbe(t,e={whitespace:!0}){if(typeof t!="object")throw wi(t,cbe);const n=t instanceof Map?t.entries():Object.entries(t),r=e!=null&&e.whitespace?" ":"";return Array.from(n).map(([i,a])=>{a instanceof Hl||(a=new Hl(a));let s=X1(i);return a.value===!0?s+=g_(a.params):(s+="=",Array.isArray(a.value)?s+=Cbe(a):s+=KG(a)),s}).join(`,${r}`)}function Dbe(t,e){return Lbe(t,e)}function Ibe(t){return["ot","sf","st","e","sta"].includes(t)}function Pbe(t){return typeof t=="number"?xe(t):t!=null&&t!==""&&t!==!1}function Nbe(t,e){const n=new URL(t),r=new URL(e);if(n.origin!==r.origin)return t;const i=n.pathname.split("/").slice(1),a=r.pathname.split("/").slice(1,-1);for(;i[0]===a[0];)i.shift(),a.shift();for(;a.length;)a.shift(),i.unshift("..");return i.join("/")}const gm=t=>Math.round(t),Mbe=(t,e)=>(e!=null&&e.baseUrl&&(t=Nbe(t,e.baseUrl)),encodeURIComponent(t)),Qh=t=>gm(t/100)*100,kbe={br:gm,d:gm,bl:Qh,dl:Qh,mtp:Qh,nor:Mbe,rtp:Qh,tb:gm};function jbe(t,e){const n={};if(t==null||typeof t!="object")return n;const r=Object.keys(t).sort(),i=ut({},kbe,e==null?void 0:e.formatters),a=e==null?void 0:e.filter;return r.forEach(s=>{if((a==null?void 0:a(s))===!1)return;let o=t[s];const c=i[s];c&&(o=c(o,e)),!(s==="v"&&o===1)&&(s=="pr"&&o===1||Pbe(o)&&(Ibe(s)&&typeof o=="string"&&(o=new qG(o)),n[s]=o))}),n}function YG(t,e={}){return t?Dbe(jbe(t,e),ut({whitespace:!1},e)):""}function Ube(t,e={}){const n={};if(!t)return n;const r=Object.entries(t),i=Object.entries(ube).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),a=r.reduce((s,o)=>{var c,u;const[d,h]=o,p=((c=i.find(y=>y[1].includes(d)))===null||c===void 0?void 0:c[0])||Cc.REQUEST;return(u=s[p])!==null&&u!==void 0||(s[p]={}),s[p][d]=h,s},{});return Object.entries(a).reduce((s,[o,c])=>(s[o]=YG(c,e),s),n)}function Bbe(t,e,n){return ut(t,Ube(e,n))}const Fbe="CMCD";function $be(t,e={}){if(!t)return"";const n=YG(t,e);return`${Fbe}=${encodeURIComponent(n)}`}const nB=/CMCD=[^&#]+/;function Gbe(t,e,n){const r=$be(e,n);if(!r)return t;if(nB.test(t))return t.replace(nB,r);const i=t.includes("?")?"&":"?";return`${t}${i}${r}`}class Vbe{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:zn.MANIFEST,su:!this.initialized})}catch(a){this.hls.logger.warn("Could not generate manifest CMCD data.",a)}},this.applyFragmentData=i=>{try{const{frag:a,part:s}=i,o=this.hls.levels[a.level],c=this.getObjectType(a),u={d:(s||a).duration*1e3,ot:c};(c===zn.VIDEO||c===zn.AUDIO||c==zn.MUXED)&&(u.br=o.bitrate/1e3,u.tb=this.getTopBandwidth(c)/1e3,u.bl=this.getBufferLength(c));const d=s?this.getNextPart(s):this.getNextFrag(a);d!=null&&d.url&&d.url!==a.url&&(u.nor=d.url),this.apply(i,u)}catch(a){this.hls.logger.warn("Could not generate segment CMCD data.",a)}},this.hls=e;const n=this.config=e.config,{cmcd:r}=n;r!=null&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||e.sessionId,this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHED,this.onMediaDetached,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHED,this.onMediaDetached,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,n){var r,i;this.audioBuffer=(r=n.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(i=n.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:ibe.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,n={}){ut(n,this.createData());const r=n.ot===zn.INIT||n.ot===zn.VIDEO||n.ot===zn.MUXED;this.starved&&r&&(n.bs=!0,n.su=!0,this.starved=!1),n.su==null&&(n.su=this.buffering);const{includeKeys:i}=this;i&&(n=Object.keys(n).reduce((s,o)=>(i.includes(o)&&(s[o]=n[o]),s),{}));const a={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),Bbe(e.headers,n,a)):e.url=Gbe(e.url,n,a)}getNextFrag(e){var n;const r=(n=this.hls.levels[e.level])==null?void 0:n.details;if(r){const i=e.sn-r.startSN;return r.fragments[i+1]}}getNextPart(e){var n,r;const{index:i,fragment:a}=e,s=(n=this.hls.levels[a.level])==null||(r=n.details)==null?void 0:r.partList;if(s){const{sn:o}=a;for(let c=s.length-1;c>=0;c--){const u=s[c];if(u.index===i&&u.fragment.sn===o)return s[c+1]}}}getObjectType(e){const{type:n}=e;if(n==="subtitle")return zn.TIMED_TEXT;if(e.sn==="initSegment")return zn.INIT;if(n==="audio")return zn.AUDIO;if(n==="main")return this.hls.audioTracks.length?zn.VIDEO:zn.MUXED}getTopBandwidth(e){let n=0,r;const i=this.hls;if(e===zn.AUDIO)r=i.audioTracks;else{const a=i.maxAutoLevel,s=a>-1?a+1:i.levels.length;r=i.levels.slice(0,s)}return r.forEach(a=>{a.bitrate>n&&(n=a.bitrate)}),n>0?n:NaN}getBufferLength(e){const n=this.media,r=e===zn.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!n?NaN:ke.bufferInfo(r,n.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,n=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new r(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,s,o){n(a),this.loader.load(a,s,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,n=this.applyFragmentData,r=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new r(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,s,o){n(a),this.loader.load(a,s,o)}}}}const qbe=3e5;class Hbe extends ii{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,n)=>(e.indexOf(n.pathwayId)===-1&&e.push(n.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const n=this.levels;n&&(this.levels=n.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,n){const{contentSteering:r}=n;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,n){this.audioTracks=n.audioTracks,this.subtitleTracks=n.subtitleTracks}onError(e,n){const{errorAction:r}=n;if((r==null?void 0:r.action)===In.SendAlternateToPenaltyBox&&r.flags===Yr.MoveAllAlternatesMatchingHost){const i=this.levels;let a=this._pathwayPriority,s=this.pathwayId;if(n.context){const{groupId:o,pathwayId:c,type:u}=n.context;o&&i?s=this.getPathwayForGroupId(o,u,s):c&&(s=c)}s in this.penalizedPathways||(this.penalizedPathways[s]=performance.now()),!a&&i&&(a=this.pathways()),a&&a.length>1&&(this.updatePathwayPriority(a),r.resolved=this.pathwayId!==s),n.details===re.BUFFER_APPEND_ERROR&&!n.fatal?r.resolved=!0:r.resolved||this.warn(`Could not resolve ${n.details} ("${n.error.message}") with content-steering for Pathway: ${s} levels: ${i&&i.length} priorities: ${Tt(a)} penalized: ${Tt(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let n=this.getLevelsForPathway(this.pathwayId);if(n.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),n=this.getLevelsForPathway(r),this.pathwayId=r}return n.length!==e.length&&this.log(`Found ${n.length}/${e.length} levels in Pathway "${this.pathwayId}"`),n}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(n=>e===n.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let n;const r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach(a=>{i-r[a]>qbe&&delete r[a]});for(let a=0;a<e.length;a++){const s=e[a];if(s in r)continue;if(s===this.pathwayId)return;const o=this.hls.nextLoadLevel,c=this.hls.levels[o];if(n=this.getLevelsForPathway(s),n.length>0){this.log(`Setting Pathway to "${s}"`),this.pathwayId=s,xG(n),this.hls.trigger(D.LEVELS_UPDATED,{levels:n});const u=this.hls.levels[o];c&&u&&this.levels&&(u.attrs["STABLE-VARIANT-ID"]!==c.attrs["STABLE-VARIANT-ID"]&&u.bitrate!==c.bitrate&&this.log(`Unstable Pathways change from bitrate ${c.bitrate} to ${u.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,n,r){const i=this.getLevelsForPathway(r).concat(this.levels||[]);for(let a=0;a<i.length;a++)if(n===He.AUDIO_TRACK&&i[a].hasAudioGroup(e)||n===He.SUBTITLE_TRACK&&i[a].hasSubtitleGroup(e))return i[a].pathwayId;return r}clonePathways(e){const n=this.levels;if(!n)return;const r={},i={};e.forEach(a=>{const{ID:s,"BASE-ID":o,"URI-REPLACEMENT":c}=a;if(n.some(d=>d.pathwayId===s))return;const u=this.getLevelsForPathway(o).map(d=>{const h=new Ct(d.attrs);h["PATHWAY-ID"]=s;const p=h.AUDIO&&`${h.AUDIO}_clone_${s}`,y=h.SUBTITLES&&`${h.SUBTITLES}_clone_${s}`;p&&(r[h.AUDIO]=p,h.AUDIO=p),y&&(i[h.SUBTITLES]=y,h.SUBTITLES=y);const v=WG(d.uri,h["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",c),S=new jf({attrs:h,audioCodec:d.audioCodec,bitrate:d.bitrate,height:d.height,name:d.name,url:v,videoCodec:d.videoCodec,width:d.width});if(d.audioGroups)for(let x=1;x<d.audioGroups.length;x++)S.addGroupId("audio",`${d.audioGroups[x]}_clone_${s}`);if(d.subtitleGroups)for(let x=1;x<d.subtitleGroups.length;x++)S.addGroupId("text",`${d.subtitleGroups[x]}_clone_${s}`);return S});n.push(...u),rB(this.audioTracks,r,c,s),rB(this.subtitleTracks,i,c,s)})}loadSteeringManifest(e){const n=this.hls.config,r=n.loader;this.loader&&this.loader.destroy(),this.loader=new r(n);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const d=(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+d)}const a={responseType:"json",url:i.href},s=n.steeringManifestLoadPolicy.default,o=s.errorRetry||s.timeoutRetry||{},c={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},u={onSuccess:(d,h,p,y)=>{this.log(`Loaded steering manifest: "${i}"`);const v=d.data;if((v==null?void 0:v.VERSION)!==1){this.log(`Steering VERSION ${v.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=v.TTL;const{"RELOAD-URI":S,"PATHWAY-CLONES":x,"PATHWAY-PRIORITY":T}=v;if(S)try{this.uri=new self.URL(S,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${S}`);return}this.scheduleRefresh(this.uri||p.url),x&&this.clonePathways(x);const _={steeringManifest:v,url:i.toString()};this.hls.trigger(D.STEERING_MANIFEST_LOADED,_),T&&this.updatePathwayPriority(T)},onError:(d,h,p,y)=>{if(this.log(`Error loading steering manifest: ${d.code} ${d.text} (${h.url})`),this.stopLoad(),d.code===410){this.enabled=!1,this.log(`Steering manifest ${h.url} no longer available`);return}let v=this.timeToLoad*1e3;if(d.code===429){const S=this.loader;if(typeof(S==null?void 0:S.getResponseHeader)=="function"){const x=S.getResponseHeader("Retry-After");x&&(v=parseFloat(x)*1e3)}this.log(`Steering manifest ${h.url} rate limited`);return}this.scheduleRefresh(this.uri||h.url,v)},onTimeout:(d,h,p)=>{this.log(`Timeout loading steering manifest (${h.url})`),this.scheduleRefresh(this.uri||h.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(a,c,u)}scheduleRefresh(e,n=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const i=(r=this.hls)==null?void 0:r.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},n)}}function rB(t,e,n,r){t&&Object.keys(e).forEach(i=>{const a=t.filter(s=>s.groupId===i).map(s=>{const o=ut({},s);return o.details=void 0,o.attrs=new Ct(o.attrs),o.url=o.attrs.URI=WG(s.url,s.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),o.groupId=o.attrs["GROUP-ID"]=e[i],o.attrs["PATHWAY-ID"]=r,o});t.push(...a)})}function WG(t,e,n,r){const{HOST:i,PARAMS:a,[n]:s}=r;let o;e&&(o=s==null?void 0:s[e],o&&(t=o));const c=new self.URL(t);return i&&!o&&(c.host=i),a&&Object.keys(a).sort().forEach(u=>{u&&c.searchParams.set(u,a[u])}),c.href}function Lr(t,e,n){ei(t,e,n),t.addEventListener(e,n)}function ei(t,e,n){t.removeEventListener(e,n)}class gl extends ii{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=gl.CDMCleanupPromise?[gl.CDMCleanupPromise]:[],this.onWaitingForKey=n=>{this.log(`"${n.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onWaitingForKey=null}registerListeners(){this.hls.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(D.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(D.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(D.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(D.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(D.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(D.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:n,widevineLicenseUrl:r}=this.config,i=n[e];if(i)return i.licenseUrl;if(e===Ft.WIDEVINE&&r)return r}getLicenseServerUrlOrThrow(e){const n=this.getLicenseServerUrl(e);if(n===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return n}getServerCertificateUrl(e){const{drmSystems:n}=this.config,r=n[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const n=this.hls.levels,r=(s,o,c)=>!!s&&c.indexOf(s)===o,i=n.map(s=>s.audioCodec).filter(r),a=n.map(s=>s.videoCodec).filter(r);return i.length+a.length===0&&a.push("avc1.42e01e"),new Promise((s,o)=>{const c=u=>{const d=u.shift();this.getMediaKeysPromise(d,i,a).then(h=>s({keySystem:d,mediaKeys:h})).catch(h=>{u.length?c(u):h instanceof _r?o(h):o(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_ACCESS,error:h,fatal:!0},h.message))})};c(e)})}requestMediaKeySystemAccess(e,n){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${r}`;return dG===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return r(e,n)}getMediaKeysPromise(e,n,r){const i=kve(e,n,r,this.config.drmSystemOptions),a=this.keySystemAccessPromises[e];let s=a==null?void 0:a.keySystemAccess;if(!s){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Tt(i)}`),s=this.requestMediaKeySystemAccess(e,i);const o=this.keySystemAccessPromises[e]={keySystemAccess:s};return s.catch(c=>{this.log(`Failed to obtain access to key-system "${e}": ${c}`)}),s.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);const u=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),o.mediaKeys=c.createMediaKeys().then(d=>(this.log(`Media-keys created for "${e}"`),o.hasMediaKeys=!0,u.then(h=>h?this.setMediaKeysServerCertificate(d,e,h):d))),o.mediaKeys.catch(d=>{this.error(`Failed to create media-keys for "${e}"}: ${d}`)}),o.mediaKeys})}return s.then(()=>a.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:n,mediaKeys:r}){this.log(`Creating key-system session "${n}" keyId: ${Ns.hexDump(e.keyId||[])}`);const i=r.createSession(),a={decryptdata:e,keySystem:n,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a}renewKeySession(e){const n=e.decryptdata;if(n.pssh){const r=this.createMediaKeySessionContext(e),i=this.getKeyIdString(n),a="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,a,n.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Ns.hexDump(e.keyId)}updateKeySession(e,n){var r;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${Ns.hexDump(((r=e.decryptdata)==null?void 0:r.keyId)||[])}
      } (data length: ${n&&n.byteLength})`),i.update(n)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>CU(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:n,mediaKeys:r})=>this.attemptSetMediaKeys(n,r))}selectKeySystem(e){return new Promise((n,r)=>this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const a=CU(i);a?n(a):r(new Error(`Unable to find format for key-system "${i}"`))}).catch(r))}selectKeySystemFormat(e){const n=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)),this.keyFormatPromise}getKeyFormatPromise(e){const n=hm(this.config),r=e.map(V1).filter(i=>!!i&&n.indexOf(i)!==-1);return this.selectKeySystem(r)}loadKey(e){const n=e.keyInfo.decryptdata,r=this.getKeyIdString(n),i=`(keyId: ${r} format: "${n.keyFormat}" method: ${n.method} uri: ${n.uri})`;this.log(`Starting session for key ${i}`);let a=this.keyIdToKeySessionPromise[r];return a||(a=this.getKeySystemForKeyPromise(n).then(({keySystem:o,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(o,c).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:o,mediaKeys:c,decryptdata:n}))))),(this.keyIdToKeySessionPromise[r]=a.then(o=>{const c="cenc",u=n.pssh?n.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(o,c,u,"playlist-key")})).catch(o=>this.handleError(o))),a}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof _r?this.hls.trigger(D.ERROR,e.data):this.hls.trigger(D.ERROR,{type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const n=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[n];if(!r){const i=V1(e.keyFormat),a=i?[i]:hm(this.config);return this.attemptKeySystemAccess(a)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=hm(this.config)),e.length===0)throw new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Tt({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,n){if(this.mediaKeys===n)return Promise.resolve();const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(r).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(n)});return this.mediaKeys=n,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(a=>r.indexOf(a)===-1)})}generateRequestWithPreferredKeySession(e,n,r,i){var a,s;const o=(a=this.config.drmSystems)==null||(s=a[e.keySystem])==null?void 0:s.generateRequest;if(o)try{const v=o.call(this.hls,n,r,e);if(!v)throw new Error("Invalid response from configured generateRequest filter");n=v.initDataType,r=v.initData?v.initData:null,e.decryptdata.pssh=r?new Uint8Array(r):null}catch(v){var c;if(this.warn(v.message),(c=this.hls)!=null&&c.config.debug)throw v}if(r===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const u=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${u} (init data type: ${n} length: ${r?r.byteLength:null})`);const d=new o_,h=e._onmessage=v=>{const S=e.mediaKeysSession;if(!S){d.emit("error",new Error("invalid state"));return}const{messageType:x,message:T}=v;this.log(`"${x}" message event for session "${S.sessionId}" message size: ${T.byteLength}`),x==="license-request"||x==="license-renewal"?this.renewLicense(e,T).catch(_=>{d.eventNames().length?d.emit("error",_):this.handleError(_)}):x==="license-release"?e.keySystem===Ft.FAIRPLAY&&(this.updateKeySession(e,G1("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${x}"`)},p=e._onkeystatuseschange=v=>{if(!e.mediaKeysSession){d.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const x=e.keyStatus;d.emit("keyStatus",x),x==="expired"&&(this.warn(`${e.keySystem} expired for key ${u}`),this.renewKeySession(e))};Lr(e.mediaKeysSession,"message",h),Lr(e.mediaKeysSession,"keystatuseschange",p);const y=new Promise((v,S)=>{d.on("error",S),d.on("keyStatus",x=>{x.startsWith("usable")?v():x==="output-restricted"?S(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):x==="internal-error"?S(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${x}"`)):x==="expired"?S(new Error("key expired while generating request")):this.warn(`unhandled key status change "${x}"`)})});return e.mediaKeysSession.generateRequest(n,r).then(()=>{var v;this.log(`Request generated for key-session "${(v=e.mediaKeysSession)==null?void 0:v.sessionId}" keyId: ${u}`)}).catch(v=>{throw new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_SESSION,error:v,fatal:!1},`Error generating key-session request: ${v}`)}).then(()=>y).catch(v=>{throw d.removeAllListeners(),this.removeSession(e),v}).then(()=>(d.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((n,r)=>{if(typeof r=="string"&&typeof n=="object"){const i=r;r=n,n=i}this.log(`key status change "${n}" for keyStatuses keyId: ${Ns.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${Ns.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=n})}fetchServerCertificate(e){const n=this.config,r=n.loader,i=new r(n),a=this.getServerCertificateUrl(e);return a?(this.log(`Fetching server certificate for "${e}"`),new Promise((s,o)=>{const c={responseType:"arraybuffer",url:a},u=n.certLoadPolicy.default,d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,y,v,S)=>{s(p.data)},onError:(p,y,v,S)=>{o(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:ht({url:c.url,data:void 0},p)},`"${e}" certificate request failed (${a}). Status: ${p.code} (${p.text})`))},onTimeout:(p,y,v)=>{o(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:{url:c.url,data:void 0}},`"${e}" certificate request timed out (${a})`))},onAbort:(p,y,v)=>{o(new Error("aborted"))}};i.load(c,d,h)})):Promise.resolve()}setMediaKeysServerCertificate(e,n,r){return new Promise((i,a)=>{e.setServerCertificate(r).then(s=>{this.log(`setServerCertificate ${s?"success":"not supported by CDM"} (${r==null?void 0:r.byteLength}) on "${n}"`),i(e)}).catch(s=>{a(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:s,fatal:!0},s.message))})})}renewLicense(e,n){return this.requestLicense(e,new Uint8Array(n)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(i=>{throw new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}unpackPlayReadyKeyMessage(e,n){const r=String.fromCharCode.apply(null,new Uint16Array(n.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),n;const i=new DOMParser().parseFromString(r,"application/xml"),a=i.querySelectorAll("HttpHeader");if(a.length>0){let d;for(let h=0,p=a.length;h<p;h++){var s,o;d=a[h];const y=(s=d.querySelector("name"))==null?void 0:s.textContent,v=(o=d.querySelector("value"))==null?void 0:o.textContent;y&&v&&e.setRequestHeader(y,v)}}const c=i.querySelector("Challenge"),u=c==null?void 0:c.textContent;if(!u)throw new Error("Cannot find <Challenge> in key message");return G1(atob(u))}setupLicenseXHR(e,n,r,i){const a=this.config.licenseXhrSetup;return a?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return a.call(this.hls,e,n,r,i)}).catch(s=>{if(!r.decryptdata)throw s;return e.open("POST",n,!0),a.call(this.hls,e,n,r,i)}).then(s=>(e.readyState||e.open("POST",n,!0),{xhr:e,licenseChallenge:s||i})):(e.open("POST",n,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,n){const r=this.config.keyLoadPolicy.default;return new Promise((i,a)=>{const s=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${s}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let c=o.response;this.log(`License received ${c instanceof ArrayBuffer?c.byteLength:c}`);const u=this.config.licenseResponseCallback;if(u)try{c=u.call(this.hls,o,s,e)}catch(d){this.error(d)}i(c)}else{const c=r.errorRetry,u=c?c.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>u||o.status>=400&&o.status<500)a(new _r({type:Te.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:s,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${s}). Status: ${o.status} (${o.statusText})`));else{const d=u-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${d} attempts left`),this.requestLicense(e,n).then(i,a)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,s,e,n).then(({xhr:c,licenseChallenge:u})=>{e.keySystem==Ft.PLAYREADY&&(u=this.unpackPlayReadyKeyMessage(c,u)),c.send(u)})})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,n){if(!this.config.emeEnabled)return;const r=n.media;this.media=r,Lr(r,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(ei(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,r=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Pg.clearKeyUriToKeyIdMap();const i=r.length;gl.CDMCleanupPromise=Promise.all(r.map(a=>this.removeSession(a)).concat(n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(a=>{var s;this.log(`Could not clear media keys: ${a}`),(s=this.hls)==null||s.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${a}`)})}))).catch(a=>{var s;this.log(`Could not close sessions and clear media keys: ${a}`),(s=this.hls)==null||s.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${a}`)})}).then(()=>{i&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:n}){if(!(!n||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=n.reduce((i,a)=>(i.indexOf(a.keyFormat)===-1&&i.push(a.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:n,licenseXhr:r}=e;if(n){this.log(`Remove licenses and keys and close session ${n.sessionId}`),e._onmessage&&(n.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(n.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);i>-1&&this.mediaKeySessions.splice(i,1);const{drmSystemOptions:a}=this.config;return(Uve(a)?new Promise((o,c)=>{self.setTimeout(()=>c(new Error("MediaKeySession.remove() timeout")),8e3),n.remove().then(o)}):Promise.resolve()).catch(o=>{var c;this.log(`Could not remove session: ${o}`),(c=this.hls)==null||c.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${o}`)})}).then(()=>n.close()).catch(o=>{var c;this.log(`Could not close session: ${o}`),(c=this.hls)==null||c.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${o}`)})})}}}gl.CDMCleanupPromise=void 0;class _r extends Error{constructor(e,n){super(n),this.data=void 0,e.error||(e.error=new Error(n)),this.data=e,e.err=e.error}}class zbe{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(D.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(D.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,n){const r=this.hls.config;if(r.capLevelOnFPSDrop){const i=n.media instanceof self.HTMLVideoElement?n.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,n,r){const i=performance.now();if(n){if(this.lastTime){const a=i-this.lastTime,s=r-this.lastDroppedFrames,o=n-this.lastDecodedFrames,c=1e3*s/a,u=this.hls;if(u.trigger(D.FPS_DROP,{currentDropped:s,currentDecoded:o,totalDroppedFrames:r}),c>0&&s>u.config.fpsDroppedMonitoringThreshold*o){let d=u.currentLevel;u.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=d)&&(d=d-1,u.trigger(D.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:u.currentLevel}),u.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=n}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const n=e.getVideoPlaybackQuality();this.checkFPS(e,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function XG(t,e){let n;try{n=new Event("addtrack")}catch{n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function QG(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){Je.debug(`[texttrack-utils]: ${r}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}catch(i){Je.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}n==="disabled"&&(t.mode=n)}function cl(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues)for(let r=t.cues.length;r--;)e&&t.cues[r].removeEventListener("enter",e),t.removeCue(t.cues[r]);n==="disabled"&&(t.mode=n)}function Q1(t,e,n,r){const i=t.mode;if(i==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const a=Ybe(t.cues,e,n);for(let s=0;s<a.length;s++)(!r||r(a[s]))&&t.removeCue(a[s])}i==="disabled"&&(t.mode=i)}function Kbe(t,e){if(e<=t[0].startTime)return 0;const n=t.length-1;if(e>t[n].endTime)return-1;let r=0,i=n,a;for(;r<=i;)if(a=Math.floor((i+r)/2),e<t[a].startTime)i=a-1;else if(e>t[a].startTime&&r<n)r=a+1;else return a;return t[r].startTime-e<e-t[i].startTime?r:i}function Ybe(t,e,n){const r=[],i=Kbe(t,e);if(i>-1)for(let a=i,s=t.length;a<s;a++){const o=t[a];if(o.startTime>=e&&o.endTime<=n)r.push(o);else if(o.startTime>n)return r}return r}function ym(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(t[n])}return e}class Wbe extends m_{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=null;const r=ym(this.media.textTracks);for(let a=0;a<r.length;a++)if(r[a].mode==="hidden")n=r[a];else if(r[a].mode==="showing"){n=r[a];break}const i=this.findTrackForTextTrack(n);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(D.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,n){const r=this.media;if(!r)return;const i=!!n.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||r.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;ym(r.textTracks).forEach(s=>{cl(s)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.subtitleTracks}onSubtitleTrackLoaded(e,n){const{id:r,groupId:i,details:a}=n,s=this.tracksInGroup[r];if(!s||s.groupId!==i){this.warn(`Subtitle track with id:${r} and group:${i} not found in active group ${s==null?void 0:s.groupId}`);return}const o=s.details;s.details=n.details,this.log(`Subtitle track ${r} "${s.name}" lang:${s.lang} group:${i} loaded [${a.startSN}-${a.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,o)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.subtitleGroups||null,i=this.groupIds;let a=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(s=>(i==null?void 0:i.indexOf(s))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const s=this.tracks.filter(d=>!r||r.indexOf(d.groupId)!==-1);if(s.length)this.selectDefaultTrack&&!s.some(d=>d.default)&&(this.selectDefaultTrack=!1),s.forEach((d,h)=>{d.id=h});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=s;const o=this.hls.config.subtitlePreference;if(!a&&o){this.selectDefaultTrack=!1;const d=yi(o,s);if(d>-1)a=s[d];else{const h=yi(o,this.tracks);a=this.tracks[h]}}let c=this.findTrackId(a);c===-1&&a&&(c=this.findTrackId(null));const u={subtitleTracks:s};this.log(`Updating subtitle tracks, ${s.length} track(s) found in "${r==null?void 0:r.join(",")}" group-id`),this.hls.trigger(D.SUBTITLE_TRACKS_UPDATED,u),c!==-1&&this.trackId===-1&&this.setSubtitleTrack(c)}}findTrackId(e){const n=this.tracksInGroup,r=this.selectDefaultTrack;for(let i=0;i<n.length;i++){const a=n[i];if(!(r&&!a.default||!r&&!e)&&(!e||Ks(a,e)))return i}if(e){for(let i=0;i<n.length;i++){const a=n[i];if(Gf(e.attrs,a.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<n.length;i++){const a=n[i];if(Gf(e.attrs,a.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const i=n[r];if(Y1(i,e))return r}}return-1}onError(e,n){n.fatal||!n.context||n.context.type===He.SUBTITLE_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const n=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&Ks(e,r))return r;const i=yi(e,this.tracksInGroup);if(i>-1){const a=this.tracksInGroup[i];return this.setSubtitleTrack(i),a}else{if(r)return null;{const a=yi(e,n);if(a>-1)return n[a]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=e.id,i=e.groupId,a=this.getUrlWithDirectives(e.url,n),s=e.details,o=s==null?void 0:s.age;this.log(`Loading subtitle ${r} "${e.name}" lang:${e.lang} group:${i}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${a}`),this.hls.trigger(D.SUBTITLE_TRACK_LOADING,{url:a,id:r,groupId:i,deliveryDirectives:n||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const n=ym(e.textTracks),r=this.currentTrack;let i;if(r&&(i=n.filter(a=>Y1(r,a))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(n).forEach(a=>{a.mode!=="disabled"&&a!==i&&(a.mode="disabled")}),i){const a=this.subtitleDisplay?"showing":"hidden";i.mode!==a&&(i.mode=a)}}setSubtitleTrack(e){const n=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=n.length||!xe(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,i=n[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(D.SUBTITLE_TRACK_SWITCH,{id:e});return}const a=!!i.details&&!i.details.live;if(e===this.trackId&&i===r&&a)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:s,groupId:o="",name:c,type:u,url:d}=i;this.hls.trigger(D.SUBTITLE_TRACK_SWITCH,{id:s,groupId:o,name:c,type:u,url:d});const h=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(h)}}function Xbe(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.slice(n.lastIndexOf("/")+1)}catch{let n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const a=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(i=="x"?a:a&3|8).toString(16)})}}}function Vc(t){let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return(e>>>0).toString()}const yl=.025;let Up=function(t){return t[t.Point=0]="Point",t[t.Range=1]="Range",t}({});function Qbe(t,e,n){return`${t.identifier}-${n+1}-${Vc(e)}`}class Zbe{constructor(e,n){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=n,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var n;if(e>0&&e>=this.assetList.length)return!0;const r=this.playoutLimit;return e<=0||isNaN(r)?!1:r===0?!0:(((n=this.assetList[e])==null?void 0:n.startOffset)||0)>r}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const n=this.dateRange.tagAnchor;if(n)return NE(e,n)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const n=this.dateRange.startTime,r=NE(n,e);return n-r<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,n=xe(e)?e:this.duration;return this.cumulativeDuration+n}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const n=this.resumeAnchor;if(n)return NE(e,n)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<yl))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let n;return this._duration!==null?n=this._duration:this.dateRange.duration?n=this.dateRange.duration:n=this.dateRange.plannedDuration||0,!isNaN(e)&&e<n&&(n=e),n}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Up.Range:Up.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return Jbe(this)}}function NE(t,e){return t-e.start<e.duration/2&&!(Math.abs(t-(e.start+e.duration))<yl)?e.start:e.start+e.duration}function ZG(t,e,n){const r=new self.URL(t,n);return r.protocol!=="data:"&&r.searchParams.set("_HLS_primary_id",e),r}function ME(t,e){for(;(n=t.assetList[++e])!=null&&n.error;)var n;return e}function Jbe(t){return`["${t.identifier}" ${t.cue.pre?"<pre>":t.cue.post?"<post>":""}${t.timelineStart.toFixed(2)}-${t.resumeTime.toFixed(2)}]`}function el(t){const e=t.timelineStart,n=t.duration||0;return`["${t.identifier}" ${e.toFixed(2)}-${(e+n).toFixed(2)}]`}class eSe{constructor(e,n,r,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls.trigger(D.PLAYOUT_LIMIT_REACHED,{})};const a=this.hls=new e(n);this.interstitial=r,this.assetItem=i;let s=i.uri;try{s=ZG(s,n.primarySessionId).href}catch{}a.loadSource(s);const o=()=>{this.hasDetails=!0};a.once(D.LEVEL_LOADED,o),a.once(D.AUDIO_TRACK_LOADED,o),a.once(D.SUBTITLE_TRACK_LOADED,o),a.on(D.MEDIA_ATTACHING,(c,{media:u})=>{this.removeMediaListeners(),this.mediaAttached=u,this.interstitial.playoutLimit&&(u.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&a.on(D.BUFFER_APPENDED,()=>{const h=this.bufferedEnd;this.reachedPlayout(h)&&(this._bufferedEosTime=h,a.trigger(D.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){var e;return((e=this.interstitial)==null?void 0:e.appendInPlace)||!1}bufferedInPlaceToEnd(e){var n;if(!this.appendInPlace)return!1;if((n=this.hls)!=null&&n.bufferedToEnd)return!0;if(!e||!this._bufferedEosTime)return!1;const r=this.timelineOffset,i=ke.bufferInfo(e,r,0);return this.getAssetTime(i.end)>=this._bufferedEosTime-.02}reachedPlayout(e){const r=this.interstitial.playoutLimit;return this.startOffset+e>=r}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const n=ke.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(n.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;return e||0}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const n=this.timelineOffset;if(e!==n){const r=e-n;if(Math.abs(r)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const n=this.timelineOffset,r=this.duration;return Math.min(Math.max(0,e-n),r)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){this.hls.attachMedia(e)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}resetDetails(){const e=this.hls;if(this.hasDetails){e.stopLoad();const n=r=>delete r.details;e.levels.forEach(n),e.allAudioTracks.forEach(n),e.allSubtitleTracks.forEach(n),this.hasDetails=!1}}on(e,n,r){this.hls.on(e,n)}once(e,n,r){this.hls.once(e,n)}off(e,n,r){this.hls.off(e,n)}toString(){var e;return`HlsAssetPlayer: ${el(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const iB=.033;class tSe extends ii{constructor(e,n){super("interstitials-sched",n),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,n){return this.events?this.events.reduce((r,i)=>e<=i.startOffset&&n>i.startOffset?(delete i.error,r+1):r,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,n){if(e.event)return this.findEventIndex(e.event.identifier);let r=-1;e.nextEvent?r=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(r=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[r]||(n===void 0&&(n=e.start),r=this.findItemIndexAtTime(n));r>=0&&(a=i[r])!=null&&a.event;){var a;r--}return r}findItemIndexAtTime(e,n){const r=this.items;if(r)for(let i=0;i<r.length;i++){let a=r[i];if(n&&n!=="primary"&&(a=a[n]),e===a.start||e>a.start&&e<a.end)return i}return-1}findJumpRestrictedIndex(e,n){const r=this.items;if(r)for(let i=e;i<=n&&r[i];i++){const a=r[i].event;if(a!=null&&a.restrictions.jump&&!a.appendInPlace)return i}return-1}findEventIndex(e){const n=this.items;if(n)for(let i=n.length;i--;){var r;if(((r=n[i].event)==null?void 0:r.identifier)===e)return i}return-1}findAssetIndex(e,n){const r=e.assetList,i=r.length;if(i>1)for(let a=0;a<i;a++){const s=r[a];if(!s.error){const o=s.timelineStart;if(n===o||n>o&&n<o+(s.duration||0))return a}}return 0}get assetIdAtEnd(){var e,n;const r=(e=this.items)==null||(n=e[this.length-1])==null?void 0:n.event;if(r){const i=r.assetList,a=i[i.length-1];if(a)return a.identifier}return null}parseInterstitialDateRanges(e,n){const r=e.main.details,{dateRanges:i}=r,a=this.events,s=this.parseDateRanges(i,{url:r.url},n),o=Object.keys(i),c=a?a.filter(u=>!o.includes(u.identifier)):[];s.length&&s.sort((u,d)=>{const h=u.cue.pre,p=u.cue.post,y=d.cue.pre,v=d.cue.post;if(h&&!y)return-1;if(y&&!h||p&&!v)return 1;if(v&&!p)return-1;if(!h&&!y&&!p&&!v){const S=u.startTime,x=d.startTime;if(S!==x)return S-x}return u.dateRange.tagOrder-d.dateRange.tagOrder}),this.events=s,c.forEach(u=>{this.removeEvent(u)}),this.updateSchedule(e,c)}updateSchedule(e,n=[]){const r=this.events||[];if(r.length||n.length||this.length<2){const i=this.items,a=this.parseSchedule(r,e);(n.length||(i==null?void 0:i.length)!==a.length||a.some((o,c)=>Math.abs(o.playout.start-i[c].playout.start)>.005||Math.abs(o.playout.end-i[c].playout.end)>.005))&&(this.items=a,this.onScheduleUpdate(n,i))}}parseDateRanges(e,n,r){const i=[],a=Object.keys(e);for(let s=0;s<a.length;s++){const o=a[s],c=e[o];if(c.isInterstitial){let u=this.eventMap[o];u?u.setDateRange(c):(u=new Zbe(c,n),this.eventMap[o]=u,r===!1&&(u.appendInPlace=r)),i.push(u)}}return i}parseSchedule(e,n){const r=[],i=n.main.details,a=i.live?1/0:i.edge;let s=0;if(e=e.filter(c=>!c.error&&!(c.cue.once&&c.hasPlayed)),e.length){this.resolveOffsets(e,n);let c=0,u=0;if(e.forEach((d,h)=>{const p=d.cue.pre,y=d.cue.post,v=e[h-1]||null,S=d.appendInPlace,x=y?a:d.startOffset,T=d.duration,_=d.timelineOccupancy===Up.Range?T:0,A=d.resumptionOffset,O=(v==null?void 0:v.startTime)===x,R=x+d.cumulativeDuration;let C=S?R+T:x+A;if(p||!y&&x<=0){const P=u;u+=_,d.timelineStart=R;const N=s;s+=T,r.push({event:d,start:R,end:C,playout:{start:N,end:s},integrated:{start:P,end:u}})}else if(x<=a){if(!O){const k=x-c;if(k>iB){const M=c,G=u;u+=k;const K=s;s+=k;const W={previousEvent:e[h-1]||null,nextEvent:d,start:M,end:M+k,playout:{start:K,end:s},integrated:{start:G,end:u}};r.push(W)}else k>0&&v&&(v.cumulativeDuration+=k,r[r.length-1].end=x)}y&&(C=R),d.timelineStart=R;const P=u;u+=_;const N=s;s+=T,r.push({event:d,start:R,end:C,playout:{start:N,end:s},integrated:{start:P,end:u}})}else return;const L=d.resumeTime;y||L>a?c=a:c=L}),c<a){var o;const d=c,h=u,p=a-c;u+=p;const y=s;s+=p,r.push({previousEvent:((o=r[r.length-1])==null?void 0:o.event)||null,nextEvent:null,start:c,end:d+p,playout:{start:y,end:s},integrated:{start:h,end:u}})}this.setDurations(a,s,u)}else r.push({previousEvent:null,nextEvent:null,start:0,end:a,playout:{start:0,end:a},integrated:{start:0,end:a}}),this.setDurations(a,a,a);return r}setDurations(e,n,r){this.durations={primary:e,playout:n,integrated:r}}resolveOffsets(e,n){const r=n.main.details,i=r.live?1/0:r.edge;let a=0,s=-1;e.forEach((o,c)=>{const u=o.cue.pre,d=o.cue.post,h=u?0:d?i:o.startTime;this.updateAssetDurations(o),s===h?o.cumulativeDuration=a:(a=0,s=h),!d&&o.snapOptions.in&&(o.resumeAnchor=eo(null,r.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,n)||(o.appendInPlace=!1)),!o.appendInPlace&&c+1<e.length&&e[c+1].startTime-e[c].resumeTime<iB&&(e[c+1].appendInPlace=!1,e[c+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const y=xe(o.resumeOffset)?o.resumeOffset:o.duration;a+=y})}primaryCanResumeInPlaceAt(e,n){const r=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(r-i)>yl?(this.log(`"${e.identifier}" resumption ${r} not aligned with estimated timeline end ${i}`),!1):n?!Object.keys(n).some(s=>{const o=n[s].details,c=o.edge;if(r>=c)return this.log(`"${e.identifier}" resumption ${r} past ${s} playlist end ${c}`),!1;const u=eo(null,o.fragments,r);if(!u)return this.log(`"${e.identifier}" resumption ${r} does not align with any fragments in ${s} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const d=s==="audio"?.175:0;return Math.abs(u.start-r)<yl+d||Math.abs(u.end-r)<yl+d?!1:(this.log(`"${e.identifier}" resumption ${r} not aligned with ${s} fragment bounds (${u.start}-${u.end} sn: ${u.sn} cc: ${u.cc})`),!0)}):(this.log(`"${e.identifier}" resumption ${r} can not be aligned with media (none selected)`),!1)}updateAssetDurations(e){if(!e.assetListLoaded)return;const n=e.timelineStart;let r=0,i=!1,a=!1;e.assetList.forEach((s,o)=>{const c=n+r;s.startOffset=r,s.timelineStart=c,i||(i=s.duration===null),a||(a=!!s.error);const u=s.error?0:s.duration||0;r+=u}),i&&!a?e.duration=Math.max(r,e.duration):e.duration=r}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Fa(t){return`[${t.event?'"'+t.event.identifier+'"':"primary"}: ${t.start.toFixed(2)}-${t.end.toFixed(2)}]`}class nSe{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,n){const r=e.assetListUrl;let i;try{i=ZG(r,this.hls.sessionId,e.baseUrl)}catch(p){const y=this.assignAssetListError(e,re.ASSET_LIST_LOAD_ERROR,p,r);this.hls.trigger(D.ERROR,y);return}n&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+n);const a=this.hls.config,s=a.loader,o=new s(a),c={responseType:"json",url:i.href},u=a.interstitialAssetListLoadPolicy.default,d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,y,v,S)=>{const x=p.data,T=x==null?void 0:x.ASSETS;if(!Array.isArray(T)){const _=this.assignAssetListError(e,re.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),v.url,y,S);this.hls.trigger(D.ERROR,_);return}e.assetListResponse=x,this.hls.trigger(D.ASSET_LIST_LOADED,{event:e,assetListResponse:x,networkDetails:S})},onError:(p,y,v,S)=>{const x=this.assignAssetListError(e,re.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${p.code} ${p.text} (${y.url})`),y.url,S,v);this.hls.trigger(D.ERROR,x)},onTimeout:(p,y,v)=>{const S=this.assignAssetListError(e,re.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${y.url})`),y.url,p,v);this.hls.trigger(D.ERROR,S)}};return o.load(c,d,h),this.hls.trigger(D.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,n,r,i,a,s){return e.error=r,{type:Te.NETWORK_ERROR,details:n,fatal:!1,interstitial:e,url:i,error:r,networkDetails:s,stats:a}}}function aB(t){t==null||t.play().catch(()=>{})}class rSe extends ii{constructor(e,n){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;const i=r-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const s=i<=-.01;this.timelinePos=r,this.bufferedPos=r;const o=this.playingItem;if(!o){this.checkBuffer();return}if(s&&this.schedule.resetErrorsInRange(r,r-i)&&this.updateSchedule(),this.checkBuffer(),s&&r<o.start||r>=o.end){var c;const p=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(o)&&(c=this.media)!=null&&c.paused&&(this.shouldPlay=!1),!s){const y=this.findItemIndex(o);if(p>y){const v=this.schedule.findJumpRestrictedIndex(y+1,p);if(v>y){this.setSchedulePosition(v);return}}}this.setSchedulePosition(p);return}const u=this.playingAsset;if(!u){if(this.playingLastItem&&this.isInterstitial(o)){const p=o.event.assetList[0];p&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(r,p))}return}const d=u.timelineStart,h=u.duration||0;(s&&r<d||r>=d+h)&&this.setScheduleToAssetAtTime(r,u)},this.onTimeupdate=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;if(r>this.timelinePos)this.timelinePos=r,r>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(r>=i.end){this.timelinePos=i.end;const o=this.findItemIndex(i);this.setSchedulePosition(o+1)}const a=this.playingAsset;if(!a)return;const s=a.timelineStart+(a.duration||0);r>=s&&this.setScheduleToAssetAtTime(r,a)},this.onScheduleUpdate=(r,i)=>{const a=this.schedule,s=this.playingItem,o=a.events||[],c=a.items||[],u=a.durations,d=r.map(v=>v.identifier),h=!!(o.length||d.length);(h||i)&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${c.map(v=>Fa(v))} pos: ${this.timelinePos}`),d.length&&this.log(`Removed events ${d}`),this.playerQueue.forEach(v=>{if(v.interstitial.appendInPlace){const S=v.assetItem.timelineStart,x=v.timelineOffset-S;if(x)try{v.timelineOffset=S}catch(T){Math.abs(x)>yl&&this.warn(`${T} ("${v.assetId}" ${v.timelineOffset}->${S})`)}}});let p=null;if(s){const v=this.updateItem(s,this.timelinePos);this.itemsMatch(s,v)&&(this.playingItem=v,this.waitingItem=this.endedItem=null,p=()=>this.trimInPlace(v,s))}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const y=this.bufferingItem;if(y){const v=this.updateItem(y,this.bufferedPos);this.itemsMatch(y,v)?(this.bufferingItem=v,p||(p=()=>this.trimInPlace(v,y))):y.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(y.event,null))}if(r.forEach(v=>{v.assetList.forEach(S=>{this.clearAssetPlayer(S.identifier,null)})}),h||i){if(this.hls.trigger(D.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:c.slice(0),durations:u,removedIds:d}),this.isInterstitial(s)&&d.includes(s.event.identifier)){this.warn(`Interstitial "${s.event.identifier}" removed while playing`),this.primaryFallback(s.event);return}p&&p(),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=n,this.assetListLoader=new nSe(e),this.schedule=new tSe(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(D.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(D.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(D.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(D.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(D.BUFFER_APPENDED,this.onBufferAppended,this),e.on(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(D.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(D.MEDIA_ENDED,this.onMediaEnded,this),e.on(D.ERROR,this.onError,this),e.on(D.DESTROYING,this.onDestroying,this)}unregisterListeners(){const e=this.hls;e&&(e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(D.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(D.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(D.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(D.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(D.BUFFER_CODECS,this.onBufferCodecs,this),e.off(D.BUFFER_APPENDED,this.onBufferAppended,this),e.off(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(D.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(D.MEDIA_ENDED,this.onMediaEnded,this),e.off(D.ERROR,this.onError,this),e.off(D.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){ei(e,"play",this.onPlay),ei(e,"pause",this.onPause),ei(e,"seeking",this.onSeeking),ei(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,n){const r=this.media=n.media;Lr(r,"seeking",this.onSeeking),Lr(r,"timeupdate",this.onTimeupdate),Lr(r,"play",this.onPlay),Lr(r,"pause",this.onPause)}onMediaAttached(e,n){const r=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,r===null)this.checkStart();else if(!i){this.clearScheduleState();const a=this.findItemIndex(r);this.setSchedulePosition(a)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,n){const r=!!n.transferMedia,i=this.media;if(this.media=null,!r&&(i&&this.removeMediaListeners(i),this.detachedData)){const a=this.getBufferingPlayer();a&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,a.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const e=this,n=()=>e.bufferingItem||e.waitingItem,r=h=>h&&e.getAssetPlayer(h.identifier),i=(h,p,y,v,S)=>{if(h){let x=h[p].start;const T=h.event;if(T){if(p==="playout"||T.timelineOccupancy!==Up.Point){const _=r(y);(_==null?void 0:_.interstitial)===T&&(x+=_.assetItem.startOffset+_[S])}}else{const _=v==="bufferedPos"?s():e[v];x+=_-h.start}return x}return 0},a=(h,p)=>{if(h!==0&&p!=="primary"&&e.schedule.length){var y;const v=e.schedule.findItemIndexAtTime(h),S=(y=e.schedule.items)==null?void 0:y[v];if(S){const x=S[p].start-S.start;return h+x}}return h},s=()=>{const h=e.bufferedPos;return h===Number.MAX_VALUE?o("primary"):Math.max(h,0)},o=h=>{var p;return(p=e.primaryDetails)!=null&&p.live?e.primaryDetails.edge:e.schedule.durations[h]},c=(h,p)=>{var y,v;const S=e.effectivePlayingItem;if(S!=null&&(y=S.event)!=null&&y.restrictions.skip)return;e.log(`seek to ${h} "${p}"`);const x=e.effectivePlayingItem,T=e.schedule.findItemIndexAtTime(h,p),_=(v=e.schedule.items)==null?void 0:v[T],A=e.getBufferingPlayer(),O=A==null?void 0:A.interstitial,R=O==null?void 0:O.appendInPlace,C=x&&e.itemsMatch(x,_);if(x&&(R||C)){const P=r(e.playingAsset),N=(P==null?void 0:P.media)||e.primaryMedia;if(N){const k=p==="primary"?N.currentTime:i(x,p,e.playingAsset,"timelinePos","currentTime"),M=h-k,G=(R?k:N.currentTime)+M;if(G>=0&&(!P||R||G<=P.duration)){N.currentTime=G;return}}}if(_){let P=h;if(p!=="primary"){const k=_[p].start,M=h-k;P=_.start+M}const N=!e.isInterstitial(_);if((!e.isInterstitial(x)||x.event.appendInPlace)&&(N||_.event.appendInPlace)){const k=e.media||(R?A==null?void 0:A.media:null);k&&(k.currentTime=P)}else if(x){const k=e.findItemIndex(x);if(T>k){const G=e.schedule.findJumpRestrictedIndex(k+1,T);if(G>k){e.setSchedulePosition(G);return}}let M=0;if(N)e.timelinePos=P,e.checkBuffer();else{var L;const G=_==null||(L=_.event)==null?void 0:L.assetList;if(G){const K=h-(_[p]||_).start;for(let W=G.length;W--;){const Y=G[W];if(Y.duration&&K>=Y.startOffset&&K<Y.startOffset+Y.duration){M=W;break}}}}e.setSchedulePosition(T,M)}}},u=()=>{const h=e.effectivePlayingItem;if(e.isInterstitial(h))return h;const p=n();return e.isInterstitial(p)?p:null},d={get currentTime(){const h=u(),p=e.effectivePlayingItem;return p&&p===h?i(p,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-p.playout.start:0},set currentTime(h){const p=u(),y=e.effectivePlayingItem;y&&y===p&&c(h+y.playout.start,"playout")},get duration(){const h=u();return h?h.playout.end-h.playout.start:0},get assetPlayers(){var h;const p=(h=u())==null?void 0:h.event.assetList;return p?p.map(y=>e.getAssetPlayer(y.identifier)):[]},get playingIndex(){var h;const p=(h=u())==null?void 0:h.event;return p&&e.effectivePlayingAsset?p.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return u()}};this.manager={get events(){var h,p;return((h=e.schedule)==null||(p=h.events)==null?void 0:p.slice(0))||[]},get schedule(){var h,p;return((h=e.schedule)==null||(p=h.items)==null?void 0:p.slice(0))||[]},get interstitialPlayer(){return u()?d:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return n()},get bufferingIndex(){const h=n();return e.findItemIndex(h)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const h=e.effectivePlayingItem;return e.findItemIndex(h)},primary:{get bufferedEnd(){return s()},get currentTime(){const h=e.timelinePos;return h>0?h:0},set currentTime(h){c(h,"primary")},get duration(){return o("primary")},get seekableStart(){var h;return((h=e.primaryDetails)==null?void 0:h.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(n(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(h){c(h,"integrated")},get duration(){return o("integrated")},get seekableStart(){var h;return a(((h=e.primaryDetails)==null?void 0:h.fragmentStart)||0,"integrated")}},skip:()=>{const h=e.effectivePlayingItem,p=h==null?void 0:h.event;if(p&&!p.restrictions.skip){const y=e.findItemIndex(h);if(p.appendInPlace){const v=h.playout.start+h.event.duration;c(v+.001,"playout")}else e.advanceAfterAssetEnded(p,y,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const n=this.playingItem,r=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!n||!r?!1:this.findItemIndex(n)===r.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,n,r;if(this.mediaSelection===null)return;const i=this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&!i.event.appendInPlace)return;let a=this.media;!a&&(e=this.bufferingItem)!=null&&(n=e.event)!=null&&n.appendInPlace&&(a=this.primaryMedia);const s=(r=a)==null?void 0:r.currentTime;if(!(s===void 0||!xe(s)))return s}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,n){const r=this.getAssetPlayer(e);r&&this.transferMediaFromPlayer(r,n)}transferMediaFromPlayer(e,n){const r=e.interstitial.appendInPlace,i=e.media;if(r&&i===this.primaryMedia){if(this.bufferingAsset=null,(!n||this.isInterstitial(n)&&!n.event.appendInPlace)&&n&&i){this.detachedData={media:i};return}const a=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Tt(a)}`),this.detachedData=a}else n&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,n){var r,i;if(e.media===n)return;let a=null;const s=this.hls,o=e!==s,c=o&&e.interstitial.appendInPlace,u=(r=this.detachedData)==null?void 0:r.mediaSource;let d;if(s.media)c&&(a=s.transferMedia(),this.detachedData=a),d="Primary";else if(u){const y=this.getBufferingPlayer();y?(a=y.transferMedia(),d=`${y}`):d="detached MediaSource"}else d="detached media";if(!a){if(u)a=this.detachedData,this.log(`using detachedData: MediaSource ${Tt(a)}`);else if(!this.detachedData||s.media===n){const y=this.playerQueue;y.length>1&&y.forEach(v=>{if(o&&v.interstitial.appendInPlace!==c){const S=v.interstitial;this.clearInterstitial(v.interstitial,null),S.appendInPlace=!1,S.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${S}`)}}),this.hls.detachMedia(),this.detachedData={media:n}}}const h=a&&"mediaSource"in a&&((i=a.mediaSource)==null?void 0:i.readyState)!=="closed",p=h&&a?a:n;if(this.log(`${h?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${d}`),p===a){const y=o&&e.assetId===this.schedule.assetIdAtEnd;p.overrides={duration:this.schedule.duration,endOfStream:!o||y,cueRemoval:!o}}e.attachMedia(p)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,n=e.events;if(!n||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const r=this.timelinePos,i=this.effectivePlayingItem;if(r===-1){const a=this.hls.startPosition;if(this.timelinePos=a,n.length&&n[0].cue.pre){const s=e.findEventIndex(n[0].identifier);this.setSchedulePosition(s)}else if(a>=0||!this.primaryLive){const s=this.timelinePos=a>0?a:0,o=e.findItemIndexAtTime(s);this.setSchedulePosition(o)}}else if(i&&!this.playingItem){const a=e.findItemIndex(i);this.setSchedulePosition(a)}}advanceAfterAssetEnded(e,n,r){const i=ME(e,r);if(!e.isAssetPastPlayoutLimit(i))this.setSchedulePosition(n,i);else{const a=this.schedule.items;if(a){const s=n+1,o=a.length;if(s>=o){this.setSchedulePosition(-1);return}const c=e.resumeTime;this.timelinePos<c&&(this.timelinePos=c,this.checkBuffer()),this.setSchedulePosition(s)}}}setScheduleToAssetAtTime(e,n){const r=this.schedule,i=n.parentIdentifier,a=r.getEvent(i);if(a){const s=r.findEventIndex(i),o=r.findAssetIndex(a,e);this.advanceAfterAssetEnded(a,s,o-1)}}setSchedulePosition(e,n){const r=this.schedule.items;if(!r||this.playbackDisabled)return;this.log(`setSchedulePosition ${e}, ${n}`);const i=e>=0?r[e]:null,a=this.playingItem,s=this.playingLastItem;if(this.isInterstitial(a)){var o;const u=a.event,d=this.playingAsset,h=d==null?void 0:d.identifier,p=h?this.getAssetPlayer(h):null;if(p&&h&&(!this.eventItemsMatch(a,i)||n!==void 0&&h!==((o=u.assetList)==null?void 0:o[n].identifier))){var c;const y=u.findAssetIndex(d);if(this.log(`INTERSTITIAL_ASSET_ENDED ${y+1}/${u.assetList.length} ${el(d)}`),this.endedAsset=d,this.playingAsset=null,this.hls.trigger(D.INTERSTITIAL_ASSET_ENDED,{asset:d,assetListIndex:y,event:u,schedule:r.slice(0),scheduleIndex:e,player:p}),a!==this.playingItem){this.itemsMatch(a,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(u,this.findItemIndex(this.playingItem),y);return}this.retreiveMediaSource(h,i),p.media&&!((c=this.detachedData)!=null&&c.mediaSource)&&p.detachMedia()}if(!this.eventItemsMatch(a,i)&&(this.endedItem=a,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${u} ${Fa(a)}`),u.hasPlayed=!0,this.hls.trigger(D.INTERSTITIAL_ENDED,{event:u,schedule:r.slice(0),scheduleIndex:e}),u.cue.once)){this.updateSchedule();const y=this.schedule.items;if(i&&y){const v=this.findItemIndex(i);this.advanceSchedule(v,y,n,a,s)}return}}this.advanceSchedule(e,r,n,a,s)}advanceSchedule(e,n,r,i,a){const s=e>=0?n[e]:null,o=this.primaryMedia,c=this.playerQueue;if(c.length&&c.forEach(u=>{const d=u.interstitial,h=this.schedule.findEventIndex(d.identifier);(h<e||h>e+1)&&this.clearInterstitial(d,s)}),this.isInterstitial(s)){this.timelinePos=Math.min(Math.max(this.timelinePos,s.start),s.end);const u=s.event;if(r===void 0){r=this.schedule.findAssetIndex(u,this.timelinePos);const y=ME(u,r-1);if(u.isAssetPastPlayoutLimit(y)){this.advanceAfterAssetEnded(u,e,r);return}r=y}const d=this.waitingItem;this.assetsBuffered(s,o)||this.setBufferingItem(s);let h=this.preloadAssets(u,r);if(this.eventItemsMatch(s,d||i)||(this.waitingItem=s,this.log(`INTERSTITIAL_STARTED ${Fa(s)} ${u.appendInPlace?"append in place":""}`),this.hls.trigger(D.INTERSTITIAL_STARTED,{event:u,schedule:n.slice(0),scheduleIndex:e})),!u.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${u}`);return}if(u.assetListLoader&&(u.assetListLoader.destroy(),u.assetListLoader=void 0),!o){this.log(`Waiting for attachMedia to start Interstitial ${u}`);return}this.waitingItem=this.endedItem=null,this.playingItem=s;const p=u.assetList[r];if(!p){const y=n[e+1],v=this.media;y&&v&&!this.isInterstitial(y)&&v.currentTime<y.start&&(v.currentTime=this.timelinePos=y.start),this.advanceAfterAssetEnded(u,e,r||0);return}if(h||(h=this.getAssetPlayer(p.identifier)),h===null||h.destroyed){const y=u.assetList.length;this.warn(`asset ${r+1}/${y} player destroyed ${u}`),h=this.createAssetPlayer(u,p,r)}if(!this.eventItemsMatch(s,this.bufferingItem)&&u.appendInPlace&&this.isAssetBuffered(p))return;this.startAssetPlayer(h,r,n,e,o),this.shouldPlay&&aB(h.media)}else s!==null?(this.resumePrimary(s,e,i),this.shouldPlay&&aB(this.hls.media)):a&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e,n;return(e=this.mediaSelection)==null||(n=e.main)==null?void 0:n.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,n,r){var i;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Fa(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let s=this.timelinePos;(s<e.start||s>=e.end)&&(s=this.getPrimaryResumption(e,n),this.timelinePos=s),this.attachPrimary(s,e)}if(!r)return;const a=this.schedule.items;a&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Fa(e)}`),this.hls.trigger(D.INTERSTITIALS_PRIMARY_RESUMED,{schedule:a.slice(0),scheduleIndex:n}),this.checkBuffer())}getPrimaryResumption(e,n){const r=e.start;if(this.primaryLive){const i=this.primaryDetails;if(n===0)return this.hls.startPosition;if(i&&(r<i.fragmentStart||r>i.edge))return this.hls.liveSyncPosition||-1}return r}isAssetBuffered(e){const n=this.getAssetPlayer(e.identifier);return n!=null&&n.hls?n.hls.bufferedToEnd:ke.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,n,r){n?this.setBufferingItem(n):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const a=this.hls;a.media?this.checkBuffer():(this.transferMediaTo(a,i),r&&this.startLoadingPrimaryAt(e,r)),r||(this.timelinePos=e,this.startLoadingPrimaryAt(e,r))}startLoadingPrimaryAt(e,n){var r;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((r=i.mainForwardBufferInfo)==null?void 0:r.start)||i.media.currentTime)-e)>.5?i.startLoad(e,n):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(D.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(D.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,n){if(n.level===-1)return;const r=this.hls.levels[n.level],i=ht(ht({},this.mediaSelection||this.altSelection),{},{main:r});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,n){const r=this.hls.audioTracks[n.id],i=this.mediaSelection;if(!i){this.altSelection=ht(ht({},this.altSelection),{},{audio:r});return}const a=ht(ht({},i),{},{audio:r});this.mediaSelection=a}onSubtitleTrackUpdated(e,n){const r=this.hls.subtitleTracks[n.id],i=this.mediaSelection;if(!i){this.altSelection=ht(ht({},this.altSelection),{},{subtitles:r});return}const a=ht(ht({},i),{},{subtitles:r});this.mediaSelection=a}onAudioTrackSwitching(e,n){const r=gU(n);this.playerQueue.forEach(i=>i.hls.setAudioOption(n)||i.hls.setAudioOption(r))}onSubtitleTrackSwitch(e,n){const r=gU(n);this.playerQueue.forEach(i=>i.hls.setSubtitleOption(n)||n.id!==-1&&i.hls.setSubtitleOption(r))}onBufferCodecs(e,n){const r=n.tracks;r&&(this.requiredTracks=r)}onBufferAppended(e,n){this.checkBuffer()}onBufferFlushed(e,n){const r=this.playingItem;if(r&&!this.itemsMatch(r,this.bufferingItem)&&!this.isInterstitial(r)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){const n=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&n){for(let i=0;i<n.length;i++){const a=n[i];if(a.cue.post){var r;const s=this.schedule.findEventIndex(a.identifier),o=(r=this.schedule.items)==null?void 0:r[s];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const n=this.playingItem;if(!this.playingLastItem&&n){const r=this.findItemIndex(n);this.setSchedulePosition(r+1)}else this.shouldPlay=!1}updateItem(e,n){const r=this.schedule.items;if(e&&r){const i=this.findItemIndex(e,n);return r[i]||null}return null}trimInPlace(e,n){if(this.isInterstitial(e)&&e.event.appendInPlace&&n.end-e.end>.25){e.event.assetList.forEach((a,s)=>{e.event.isAssetPastPlayoutLimit(s)&&this.clearAssetPlayer(a.identifier,null)});const r=e.end+.25,i=ke.bufferInfo(this.primaryMedia,r,0);(i.end>r||(i.nextStart||0)>r)&&(this.attachPrimary(r,null),this.flushFrontBuffer(r))}}itemsMatch(e,n){return!!n&&(e===n||e.event&&n.event&&this.eventItemsMatch(e,n)||!e.event&&!n.event&&this.findItemIndex(e)===this.findItemIndex(n))}eventItemsMatch(e,n){var r;return!!n&&(e===n||e.event.identifier===((r=n.event)==null?void 0:r.identifier))}findItemIndex(e,n){return e?this.schedule.findItemIndex(e,n):-1}updateSchedule(){const e=this.mediaSelection;e&&this.schedule.updateSchedule(e,[])}checkBuffer(e){const n=this.schedule.items;if(!n)return;const r=ke.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=r.len<1),this.updateBufferedPos(r.end,n,e)}updateBufferedPos(e,n,r){const i=this.schedule,a=this.bufferingItem;if(this.bufferedPos>e)return;if(n.length===1&&this.itemsMatch(n[0],a)){this.bufferedPos=e;return}const s=this.playingItem,o=this.findItemIndex(s);let c=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var u,d;const h=this.findItemIndex(a),p=Math.min(h+1,n.length-1),y=n[p];if((c===-1&&a&&e>=a.end||(u=y.event)!=null&&u.appendInPlace&&e+.01>=y.start)&&(c=p),p-o>1&&(a==null||(d=a.event)==null?void 0:d.appendInPlace)===!1)return;if(this.bufferedPos=e,c>h&&c>o)this.bufferedToItem(y);else{const v=this.primaryDetails;this.primaryLive&&v&&e>v.edge-v.targetduration&&y.start<v.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(y)&&this.preloadAssets(y.event,0)}}else r&&s&&!this.itemsMatch(s,a)&&(c===o?this.bufferedToItem(s):c===o+1&&this.bufferedToItem(n[c]))}assetsBuffered(e,n){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const a=this.getAssetPlayer(i.identifier);return!(a!=null&&a.bufferedInPlaceToEnd(n))})}setBufferingItem(e){const n=this.bufferingItem,r=this.schedule;if(this.itemsMatch(e,n))this.bufferingItem!==e&&(this.bufferingItem=e);else{const{items:i,events:a}=r;if(!i||!a)return n;const s=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const c=o?o.remaining:n?n.end-this.timelinePos:0;this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Fa(e)}`+(n?` (${c.toFixed(2)} remaining)`:"")),this.playbackDisabled||(s?e.event.assetList.forEach(u=>{const d=this.getAssetPlayer(u.identifier);d&&d.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(u=>u.pauseBuffering()))),this.hls.trigger(D.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:a.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}return n}bufferedToItem(e,n=0){const r=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,n);else if(r!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const n=this.findItemIndex(e),r=this.getPrimaryResumption(e,n);this.startLoadingPrimaryAt(r)}bufferedToEvent(e,n){const r=e.event,i=r.assetList.length===0&&!r.assetListLoader,a=r.cue.once;if(i||!a){const s=this.preloadAssets(r,n);if(s!=null&&s.interstitial.appendInPlace){const o=r.assetList[n],c=this.primaryMedia;o&&c&&this.bufferAssetPlayer(s,c)}}}preloadAssets(e,n){const r=e.assetUrl,i=e.assetList.length,a=i===0&&!e.assetListLoader,s=e.cue.once;if(a){const c=e.timelineStart;if(e.appendInPlace){var o;const p=this.playingItem;!this.isInterstitial(p)&&(p==null||(o=p.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(c+.25)}let u,d=0;if(!this.playingItem&&this.primaryLive&&(d=this.hls.startPosition,d===-1&&(d=this.hls.liveSyncPosition||0)),d&&!(e.cue.pre||e.cue.post)){const p=d-c;p>0&&(u=Math.round(p*1e3)/1e3)}if(this.log(`Load interstitial asset ${n+1}/${r?1:i} ${e}${u?` live-start: ${d} start-offset: ${u}`:""}`),r)return this.createAsset(e,0,0,c,e.duration,r);const h=this.assetListLoader.loadAssetList(e,u);h&&(e.assetListLoader=h)}else if(!s&&i){for(let c=n;c<i;c++){const u=e.assetList[c],d=this.getAssetPlayerQueueIndex(u.identifier);(d===-1||this.playerQueue[d].destroyed)&&!u.error&&this.createAssetPlayer(e,u,c)}return this.getAssetPlayer(e.assetList[n].identifier)}return null}flushFrontBuffer(e){const n=this.requiredTracks;if(!n)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(n).forEach(i=>{this.hls.trigger(D.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const n=this.playerQueue;for(let r=0;r<n.length;r++)if(e===n[r].assetId)return r;return-1}getAssetPlayer(e){const n=this.getAssetPlayerQueueIndex(e);return this.playerQueue[n]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:n}=this;if(n){for(let r=0;r<e.length;r++)if(e[r].media===n)return e[r]}return null}createAsset(e,n,r,i,a,s){const o={parentIdentifier:e.identifier,identifier:Qbe(e,s,n),duration:a,startOffset:r,timelineStart:i,uri:s};return this.createAssetPlayer(e,o,n)}createAssetPlayer(e,n,r){const i=this.hls,a=i.userConfig;let s=a.videoPreference;const o=i.loadLevelObj||i.levels[i.currentLevel];(s||o)&&(s=ut({},s),o.videoCodec&&(s.videoCodec=o.videoCodec),o.videoRange&&(s.allowedVideoRanges=[o.videoRange]));const c=i.audioTracks[i.audioTrack],u=i.subtitleTracks[i.subtitleTrack];let d=0;if(this.primaryLive||e.appendInPlace){const A=this.timelinePos-n.timelineStart;if(A>1){const O=n.duration;O&&A<O&&(d=A)}}const h=n.identifier,p=ht(ht({},a),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:h,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:d,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:s,audioPreference:c||a.audioPreference,subtitlePreference:u||a.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,n.timelineStart&&(p.timelineOffset=n.timelineStart));const y=p.cmcd;y!=null&&y.sessionId&&y.contentId&&(p.cmcd=ut({},y,{contentId:Vc(n.uri)})),this.getAssetPlayer(h)&&this.warn(`Duplicate date range identifier ${e} and asset ${h}`);const v=new eSe(this.HlsPlayerClass,p,e,n);this.playerQueue.push(v),e.assetList[r]=n;const S=A=>{if(A.live){const C=new Error(`Interstitials MUST be VOD assets ${e}`),L={fatal:!0,type:Te.OTHER_ERROR,details:re.INTERSTITIAL_ASSET_ITEM_ERROR,error:C};this.handleAssetItemError(L,e,this.schedule.findEventIndex(e.identifier),r,C.message);return}const O=A.edge-A.fragmentStart,R=n.duration;(R===null||O>R)&&(this.log(`Interstitial asset "${h}" duration change ${R} > ${O}`),n.duration=O,this.updateSchedule())};v.on(D.LEVEL_UPDATED,(A,{details:O})=>S(O)),v.on(D.LEVEL_PTS_UPDATED,(A,{details:O})=>S(O));const x=(A,O)=>{const R=this.getAssetPlayer(h);if(R&&O.tracks){R.off(D.BUFFER_CODECS,x),R.tracks=O.tracks;const C=this.primaryMedia;this.bufferingAsset===R.assetItem&&C&&!R.media&&this.bufferAssetPlayer(R,C)}};v.on(D.BUFFER_CODECS,x);const T=()=>{var A;const O=this.getAssetPlayer(h);if(this.log(`buffered to end of asset ${O}`),!O)return;const R=this.schedule.findEventIndex(e.identifier),C=(A=this.schedule.items)==null?void 0:A[R];if(this.isInterstitial(C)){const P=e.findAssetIndex(n),N=ME(e,P);if(!e.isAssetPastPlayoutLimit(N))this.bufferedToItem(C,N);else{var L;const k=(L=this.schedule.items)==null?void 0:L[R+1];k&&this.bufferedToItem(k)}}};v.on(D.BUFFERED_TO_END,T);const _=A=>()=>{if(!this.getAssetPlayer(h))return;this.shouldPlay=!0;const R=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,R,A)};return v.once(D.MEDIA_ENDED,_(r)),v.once(D.PLAYOUT_LIMIT_REACHED,_(1/0)),v.on(D.ERROR,(A,O)=>{const R=this.getAssetPlayer(h);if(O.details===re.BUFFER_STALLED_ERROR){if(R!=null&&R.media){const C=R.currentTime,L=R.duration-C;C&&e.appendInPlace&&L/R.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${h} ${e} at ${R.media.currentTime}`),T()):(this.warn(`Stalled at ${C} of ${C+L} in asset ${h} ${e}`),this.onTimeupdate(),this.checkBuffer(!0))}return}this.handleAssetItemError(O,e,this.schedule.findEventIndex(e.identifier),r,`Asset player error ${O.error} ${e}`)}),v.on(D.DESTROYING,()=>{if(!this.getAssetPlayer(h))return;const O=new Error(`Asset player destroyed unexpectedly ${h}`),R={fatal:!0,type:Te.OTHER_ERROR,details:re.INTERSTITIAL_ASSET_ITEM_ERROR,error:O};this.handleAssetItemError(R,e,this.schedule.findEventIndex(e.identifier),r,O.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${el(n)}`),this.hls.trigger(D.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:n,assetListIndex:r,event:e,player:v}),v}clearInterstitial(e,n){e.assetList.forEach(r=>{this.clearAssetPlayer(r.identifier,n)}),e.reset()}resetAssetPlayer(e){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){this.log(`reset asset player "${e}" after error`);const r=this.playerQueue[n];this.transferMediaFromPlayer(r,null),r.resetDetails()}}clearAssetPlayer(e,n){const r=this.getAssetPlayerQueueIndex(e);if(r!==-1){this.log(`clear asset player "${e}" toSegment: ${n&&Fa(n)}`);const i=this.playerQueue[r];this.transferMediaFromPlayer(i,n),this.playerQueue.splice(r,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,n,r,i,a){const{interstitial:s,assetItem:o,assetId:c}=e,u=s.assetList.length,d=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!d||d.identifier!==c)&&(d&&(this.clearAssetPlayer(d.identifier,r[i]),delete d.error),this.log(`INTERSTITIAL_ASSET_STARTED ${n+1}/${u} ${el(o)}`),this.hls.trigger(D.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:n,event:s,schedule:r.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,a)}bufferAssetPlayer(e,n){var r,i;const{interstitial:a,assetItem:s}=e,o=this.schedule.findEventIndex(a.identifier),c=(r=this.schedule.items)==null?void 0:r[o];if(!c)return;this.setBufferingItem(c),this.bufferingAsset=s;const u=this.getBufferingPlayer();if(u===e)return;const d=a.appendInPlace;if(d&&(u==null?void 0:u.interstitial.appendInPlace)===!1)return;const h=(u==null?void 0:u.tracks)||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(d&&s!==this.playingAsset){if(!e.tracks)return;if(h&&!H8(h,e.tracks)){const p=new Error(`Asset ${el(s)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(h)}')`),y={fatal:!0,type:Te.OTHER_ERROR,details:re.INTERSTITIAL_ASSET_ITEM_ERROR,error:p},v=a.findAssetIndex(s);this.handleAssetItemError(y,a,o,v,p.message);return}}this.transferMediaTo(e,n)}handleAssetItemError(e,n,r,i,a){if(e.details===re.BUFFER_STALLED_ERROR)return;const s=n.assetList[i];this.warn(`INTERSTITIAL_ASSET_ERROR ${s&&el(s)} ${e.error}`);const o=s==null?void 0:s.identifier,c=this.getAssetPlayerQueueIndex(o),u=this.playerQueue[c]||null,d=this.schedule.items,h=ut({},e,{fatal:!1,errorAction:Uf(!0),asset:s,assetListIndex:i,event:n,schedule:d,scheduleIndex:r,player:u});if(this.hls.trigger(D.INTERSTITIAL_ASSET_ERROR,h),!e.fatal)return;const p=this.playingAsset,y=new Error(a);if(s&&(this.clearAssetPlayer(o,null),s.error=y),!n.assetList.some(v=>!v.error))n.error=y;else{for(let v=i;v<n.assetList.length;v++)this.resetAssetPlayer(n.assetList[v].identifier);this.updateSchedule()}n.error?this.primaryFallback(n):p&&p.identifier===o&&this.advanceAfterAssetEnded(n,r,i)}primaryFallback(e){const n=e.timelineStart,r=this.effectivePlayingItem;if(this.updateSchedule(),r){this.log(`Fallback to primary from event "${e.identifier}" start: ${n} pos: ${this.timelinePos} playing: ${r?Fa(r):"<none>"} error: ${e.error}`);let i=this.timelinePos;i===-1&&(i=this.hls.startPosition);const a=this.updateItem(r,i);this.itemsMatch(r,a)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(n,null),this.flushFrontBuffer(n));const s=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(s)}else this.checkStart()}onAssetListLoaded(e,n){var r;const i=n.event,a=i.identifier,s=n.assetListResponse.ASSETS;if(!this.schedule.hasEvent(a))return;const o=i.timelineStart,c=i.duration;let u=0;s.forEach((v,S)=>{const x=parseFloat(v.DURATION);this.createAsset(i,S,u,o+u,x,v.URI),u+=x}),i.duration=u,this.log(`Loaded asset-list with duration: ${u} (was: ${c}) ${i}`);const d=this.waitingItem,h=(d==null?void 0:d.event.identifier)===a;this.updateSchedule();const p=(r=this.bufferingItem)==null?void 0:r.event;if(h){var y;const v=this.schedule.findEventIndex(a),S=(y=this.schedule.items)==null?void 0:y[v];if(S){if(!this.playingItem&&this.timelinePos>S.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==v){i.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${i}`),this.primaryFallback(i);return}this.setBufferingItem(S)}this.setSchedulePosition(v)}else if((p==null?void 0:p.identifier)===a&&p.appendInPlace){const v=i.assetList[0],S=this.getAssetPlayer(v.identifier),x=this.primaryMedia;v&&S&&x&&this.bufferAssetPlayer(S,x)}}onError(e,n){switch(n.details){case re.ASSET_LIST_PARSING_ERROR:case re.ASSET_LIST_LOAD_ERROR:case re.ASSET_LIST_LOAD_TIMEOUT:{const r=n.interstitial;r&&this.primaryFallback(r);break}case re.BUFFER_STALLED_ERROR:{this.onTimeupdate(),this.checkBuffer(!0);break}}}}const sB=500;class iSe extends s_{constructor(e,n,r){super(e,n,r,"subtitle-stream-controller",Se.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(D.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(D.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,n){this.stopLoad(),this.state=fe.IDLE,this.setInterval(sB),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,n){this.tracksBuffered=[],super.onMediaDetaching(e,n)}onLevelLoaded(e,n){this.mainDetails=n.details}onSubtitleFragProcessed(e,n){const{frag:r,success:i}=n;if(this.fragContextChanged(r)||(Wt(r)&&(this.fragPrevious=r),this.state=fe.IDLE),!i)return;const a=this.tracksBuffered[this.currentTrackId];if(!a)return;let s;const o=r.start;for(let u=0;u<a.length;u++)if(o>=a[u].start&&o<=a[u].end){s=a[u];break}const c=r.start+r.duration;s?s.end=c:(s={start:o,end:c},a.push(s)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null),this.media&&this.tick()}onBufferFlushing(e,n){const{startOffset:r,endOffset:i}=n;if(r===0&&i!==Number.POSITIVE_INFINITY){const a=i-1;if(a<=0)return;n.endOffsetSubtitles=Math.max(0,a),this.tracksBuffered.forEach(s=>{for(let o=0;o<s.length;){if(s[o].end<=a){s.shift();continue}else if(s[o].start<a)s[o].start=a;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(r,a,Se.SUBTITLE)}}onError(e,n){const r=n.frag;(r==null?void 0:r.type)===Se.SUBTITLE&&(n.details===re.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==fe.STOPPED&&(this.state=fe.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:n}){if(this.levels&&GG(this.levels,n)){this.levels=n.map(r=>new jf(r));return}this.tracksBuffered=[],this.levels=n.map(r=>{const i=new jf(r);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Se.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,n){var r;if(this.currentTrackId=n.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==fe.STOPPED&&this.setInterval(sB)}onSubtitleTrackLoaded(e,n){var r;const{currentTrackId:i,levels:a}=this,{details:s,id:o}=n;if(!a){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const c=a[o];if(o>=a.length||!c)return;this.log(`Subtitle track ${o} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let u=0;if(s.live||(r=c.details)!=null&&r.live){if(s.deltaUpdateFailed)return;const h=this.mainDetails;if(!h){this.startFragRequested=!1;return}const p=h.fragments[0];if(!c.details)s.hasProgramDateTime&&h.hasProgramDateTime?(kp(s,h),u=s.fragmentStart):p&&(u=p.start,H1(s,u));else{var d;u=this.alignPlaylists(s,c.details,(d=this.levelLastLoaded)==null?void 0:d.details),u===0&&p&&(u=p.start,H1(s,u))}h&&!this.startFragRequested&&this.setStartPosition(h,u)}c.details=s,this.levelLastLoaded=c,o===i&&(this.hls.trigger(D.SUBTITLE_TRACK_UPDATED,{details:s,id:o,groupId:n.groupId}),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===fe.IDLE&&(eo(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),c.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:n,payload:r}=e,i=n.decryptdata,a=this.hls;if(!this.fragContextChanged(n)&&r&&r.byteLength>0&&i!=null&&i.key&&i.iv&&pl(i.method)){const s=performance.now();this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer,a_(i.method)).catch(o=>{throw a.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:n}),o}).then(o=>{const c=performance.now();a.trigger(D.FRAG_DECRYPTED,{frag:n,payload:o,stats:{tstart:s,tdecrypt:c}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=fe.IDLE})}}doTick(){if(!this.media){this.state=fe.IDLE;return}if(this.state===fe.IDLE){const{currentTrackId:e,levels:n}=this,r=n==null?void 0:n[e];if(!r||!n.length||!r.details||this.waitForLive(r))return;const{config:i}=this,a=this.getLoadPosition(),s=ke.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],a,i.maxBufferHole),{end:o,len:c}=s,u=r.details,d=this.hls.maxBufferLength+u.levelTargetDuration;if(c>d)return;const h=u.fragments,p=h.length,y=u.edge;let v=null;const S=this.fragPrevious;if(o<y){const _=i.maxFragLookUpTolerance,A=o>y-_?0:_;v=eo(S,h,Math.max(h[0].start,o),A),!v&&S&&S.start<h[0].start&&(v=h[0])}else v=h[p-1];if(v=this.filterReplacedPrimary(v,r.details),!v)return;const x=v.sn-u.startSN,T=h[x-1];if(T&&T.cc===v.cc&&this.fragmentTracker.getState(T)===rn.NOT_LOADED&&(v=T),this.fragmentTracker.getState(v)===rn.NOT_LOADED){const _=this.mapToInitFragWhenRequired(v);_&&this.loadFragment(_,r,o)}}}loadFragment(e,n,r){Wt(e)?super.loadFragment(e,n,r):this._loadInitSegment(e,n)}get mediaBufferTimeRanges(){return new aSe(this.tracksBuffered[this.currentTrackId]||[])}}class aSe{constructor(e){this.buffered=void 0;const n=(r,i,a)=>{if(i=i>>>0,i>a-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${a})`);return e[i][r]};this.buffered={get length(){return e.length},end(r){return n("end",r,e.length)},start(r){return n("start",r,e.length)}}}}const sSe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},JG=t=>String.fromCharCode(sSe[t]||t),zr=15,zi=100,oSe={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},lSe={17:2,18:4,21:6,22:8,23:10,19:13,20:15},uSe={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},cSe={25:2,26:4,29:6,30:8,31:10,27:13,28:15},fSe=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class dSe{constructor(){this.time=null,this.verboseLevel=0}log(e,n){if(this.verboseLevel>=e){const r=typeof n=="function"?n():n;Je.log(`${this.time} [${e}] ${r}`)}}}const Os=function(e){const n=[];for(let r=0;r<e.length;r++)n.push(e[r].toString(16));return n};class eV{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const n=["foreground","underline","italics","background","flash"];for(let r=0;r<n.length;r++){const i=n[r];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class hSe{constructor(){this.uchar=" ",this.penState=new eV}reset(){this.uchar=" ",this.penState.reset()}setChar(e,n){this.uchar=e,this.penState.copy(n)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class mSe{constructor(e){this.chars=[],this.pos=0,this.currPenState=new eV,this.cueStartTime=null,this.logger=void 0;for(let n=0;n<zi;n++)this.chars.push(new hSe);this.logger=e}equals(e){for(let n=0;n<zi;n++)if(!this.chars[n].equals(e.chars[n]))return!1;return!0}copy(e){for(let n=0;n<zi;n++)this.chars[n].copy(e.chars[n])}isEmpty(){let e=!0;for(let n=0;n<zi;n++)if(!this.chars[n].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>zi&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=zi)}moveCursor(e){const n=this.pos+e;if(e>1)for(let r=this.pos+1;r<n+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(n)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const n=JG(e);if(this.pos>=zi){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)}clearFromPos(e){let n;for(n=e;n<zi;n++)this.chars[n].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let n=!0;for(let r=0;r<zi;r++){const i=this.chars[r].uchar;i!==" "&&(n=!1),e.push(i)}return n?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class kE{constructor(e){this.rows=[],this.currRow=zr-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let n=0;n<zr;n++)this.rows.push(new mSe(e));this.logger=e}reset(){for(let e=0;e<zr;e++)this.rows[e].clear();this.currRow=zr-1}equals(e){let n=!0;for(let r=0;r<zr;r++)if(!this.rows[r].equals(e.rows[r])){n=!1;break}return n}copy(e){for(let n=0;n<zr;n++)this.rows[n].copy(e.rows[n])}isEmpty(){let e=!0;for(let n=0;n<zr;n++)if(!this.rows[n].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Tt(e));let n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(let o=0;o<zr;o++)this.rows[o].clear();const a=this.currRow+1-this.nrRollUpRows,s=this.lastOutputScreen;if(s){const o=s.rows[a].cueStartTime,c=this.logger.time;if(o!==null&&c!==null&&o<c)for(let u=0;u<this.nrRollUpRows;u++)this.rows[n-this.nrRollUpRows+u+1].copy(s.rows[a+u])}}this.currRow=n;const r=this.rows[this.currRow];if(e.indent!==null){const a=e.indent,s=Math.max(a-1,0);r.setCursor(e.indent),e.color=r.chars[s].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Tt(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(e,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const n=[];let r="",i=-1;for(let a=0;a<zr;a++){const s=this.rows[a].getTextString();s&&(i=a+1,e?n.push("Row "+i+": '"+s+"'"):n.push(s.trim()))}return n.length>0&&(e?r="["+n.join(" | ")+"]":r=n.join(`
`)),r}getTextAndFormat(){return this.rows}}class oB{constructor(e,n,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new kE(r),this.nonDisplayedMemory=new kE(r),this.lastOutputScreen=new kE(r),this.currRollUpRow=this.displayedMemory.rows[zr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[zr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>n+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const n={flash:!1};if(n.underline=e%2===1,n.italics=e>=46,n.italics)n.foreground="white";else{const r=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=i[r]}this.logger.log(2,"MIDROW: "+Tt(n)),this.writeScreen.setPen(n)}outputDataUpdate(e=!1){const n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class lB{constructor(e,n,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=gSe(),this.logger=void 0;const i=this.logger=new dSe;this.channels=[null,new oB(e,n,i),new oB(e+1,r,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,n){this.channels[e].setHandler(n)}addData(e,n){this.logger.time=e;for(let r=0;r<n.length;r+=2){const i=n[r]&127,a=n[r+1]&127;let s=!1,o=null;if(i===0&&a===0)continue;this.logger.log(3,()=>"["+Os([n[r],n[r+1]])+"] -> ("+Os([i,a])+")");const c=this.cmdHistory;if(i>=16&&i<=31){if(pSe(i,a,c)){Zh(null,null,c),this.logger.log(3,()=>"Repeated command ("+Os([i,a])+") is dropped");continue}Zh(i,a,this.cmdHistory),s=this.parseCmd(i,a),s||(s=this.parseMidrow(i,a)),s||(s=this.parsePAC(i,a)),s||(s=this.parseBackgroundAttributes(i,a))}else Zh(null,null,c);if(!s&&(o=this.parseChars(i,a),o)){const d=this.currentChannel;d&&d>0?this.channels[d].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!s&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Os([i,a])+" orig: "+Os([n[r],n[r+1]]))}}parseCmd(e,n){const r=(e===20||e===28||e===21||e===29)&&n>=32&&n<=47,i=(e===23||e===31)&&n>=33&&n<=35;if(!(r||i))return!1;const a=e===20||e===21||e===23?1:2,s=this.channels[a];return e===20||e===21||e===28||e===29?n===32?s.ccRCL():n===33?s.ccBS():n===34?s.ccAOF():n===35?s.ccAON():n===36?s.ccDER():n===37?s.ccRU(2):n===38?s.ccRU(3):n===39?s.ccRU(4):n===40?s.ccFON():n===41?s.ccRDC():n===42?s.ccTR():n===43?s.ccRTD():n===44?s.ccEDM():n===45?s.ccCR():n===46?s.ccENM():n===47&&s.ccEOC():s.ccTO(n-32),this.currentChannel=a,!0}parseMidrow(e,n){let r=0;if((e===17||e===25)&&n>=32&&n<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[r];return i?(i.ccMIDROW(n),this.logger.log(3,()=>"MIDROW ("+Os([e,n])+")"),!0):!1}return!1}parsePAC(e,n){let r;const i=(e>=17&&e<=23||e>=25&&e<=31)&&n>=64&&n<=127,a=(e===16||e===24)&&n>=64&&n<=95;if(!(i||a))return!1;const s=e<=23?1:2;n>=64&&n<=95?r=s===1?oSe[e]:uSe[e]:r=s===1?lSe[e]:cSe[e];const o=this.channels[s];return o?(o.setPAC(this.interpretPAC(r,n)),this.currentChannel=s,!0):!1}interpretPAC(e,n){let r;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return n>95?r=n-96:r=n-64,i.underline=(r&1)===1,r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((r-16)/2)*4,i}parseChars(e,n){let r,i=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),a>=17&&a<=19){let s;a===17?s=n+80:a===18?s=n+112:s=n+144,this.logger.log(2,()=>"Special char '"+JG(s)+"' in channel "+r),i=[s]}else e>=32&&e<=127&&(i=n===0?[e]:[e,n]);return i&&this.logger.log(3,()=>"Char codes =  "+Os(i).join(",")),i}parseBackgroundAttributes(e,n){const r=(e===16||e===24)&&n>=32&&n<=47,i=(e===23||e===31)&&n>=45&&n<=47;if(!(r||i))return!1;let a;const s={};e===16||e===24?(a=Math.floor((n-32)/2),s.background=fSe[a],n%2===1&&(s.background=s.background+"_semi")):n===45?s.background="transparent":(s.foreground="black",n===47&&(s.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(s),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const n=this.channels[e];n&&n.reset()}Zh(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let n=0;n<this.channels.length;n++){const r=this.channels[n];r&&r.cueSplitAtTime(e)}}}function Zh(t,e,n){n.a=t,n.b=e}function pSe(t,e,n){return n.a===t&&n.b===e}function gSe(){return{a:null,b:null}}var y_=function(){if(Mp!=null&&Mp.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function n(o,c){if(typeof c!="string"||!Array.isArray(o))return!1;const u=c.toLowerCase();return~o.indexOf(u)?u:!1}function r(o){return n(t,o)}function i(o){return n(e,o)}function a(o,...c){let u=1;for(;u<arguments.length;u++){const d=arguments[u];for(const h in d)o[h]=d[h]}return o}function s(o,c,u){const d=this,h={enumerable:!0};d.hasBeenReset=!1;let p="",y=!1,v=o,S=c,x=u,T=null,_="",A=!0,O="auto",R="start",C=50,L="middle",P=50,N="middle";Object.defineProperty(d,"id",a({},h,{get:function(){return p},set:function(k){p=""+k}})),Object.defineProperty(d,"pauseOnExit",a({},h,{get:function(){return y},set:function(k){y=!!k}})),Object.defineProperty(d,"startTime",a({},h,{get:function(){return v},set:function(k){if(typeof k!="number")throw new TypeError("Start time must be set to a number.");v=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"endTime",a({},h,{get:function(){return S},set:function(k){if(typeof k!="number")throw new TypeError("End time must be set to a number.");S=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"text",a({},h,{get:function(){return x},set:function(k){x=""+k,this.hasBeenReset=!0}})),Object.defineProperty(d,"region",a({},h,{get:function(){return T},set:function(k){T=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"vertical",a({},h,{get:function(){return _},set:function(k){const M=r(k);if(M===!1)throw new SyntaxError("An invalid or illegal string was specified.");_=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"snapToLines",a({},h,{get:function(){return A},set:function(k){A=!!k,this.hasBeenReset=!0}})),Object.defineProperty(d,"line",a({},h,{get:function(){return O},set:function(k){if(typeof k!="number"&&k!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");O=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"lineAlign",a({},h,{get:function(){return R},set:function(k){const M=i(k);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");R=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"position",a({},h,{get:function(){return C},set:function(k){if(k<0||k>100)throw new Error("Position must be between 0 and 100.");C=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"positionAlign",a({},h,{get:function(){return L},set:function(k){const M=i(k);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");L=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"size",a({},h,{get:function(){return P},set:function(k){if(k<0||k>100)throw new Error("Size must be between 0 and 100.");P=k,this.hasBeenReset=!0}})),Object.defineProperty(d,"align",a({},h,{get:function(){return N},set:function(k){const M=i(k);if(!M)throw new SyntaxError("An invalid or illegal string was specified.");N=M,this.hasBeenReset=!0}})),d.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s}();class ySe{decode(e,n){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function tV(t){function e(r,i,a,s){return(r|0)*3600+(i|0)*60+(a|0)+parseFloat(s||0)}const n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}class vSe{constructor(){this.values=Object.create(null)}set(e,n){!this.get(e)&&n!==""&&(this.values[e]=n)}get(e,n,r){return r?this.has(e)?this.values[e]:n[r]:this.has(e)?this.values[e]:n}has(e){return e in this.values}alt(e,n,r){for(let i=0;i<r.length;++i)if(n===r[i]){this.set(e,n);break}}integer(e,n){/^-?\d+$/.test(n)&&this.set(e,parseInt(n,10))}percent(e,n){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(n)){const r=parseFloat(n);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function nV(t,e,n,r){const i=r?t.split(r):[t];for(const a in i){if(typeof i[a]!="string")continue;const s=i[a].split(n);if(s.length!==2)continue;const o=s[0],c=s[1];e(o,c)}}const Z1=new y_(0,0,""),Jh=Z1.align==="middle"?"middle":"center";function xSe(t,e,n){const r=t;function i(){const o=tV(t);if(o===null)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,c){const u=new vSe;nV(o,function(p,y){let v;switch(p){case"region":for(let S=n.length-1;S>=0;S--)if(n[S].id===y){u.set(p,n[S].region);break}break;case"vertical":u.alt(p,y,["rl","lr"]);break;case"line":v=y.split(","),u.integer(p,v[0]),u.percent(p,v[0])&&u.set("snapToLines",!1),u.alt(p,v[0],["auto"]),v.length===2&&u.alt("lineAlign",v[1],["start",Jh,"end"]);break;case"position":v=y.split(","),u.percent(p,v[0]),v.length===2&&u.alt("positionAlign",v[1],["start",Jh,"end","line-left","line-right","auto"]);break;case"size":u.percent(p,y);break;case"align":u.alt(p,y,["start",Jh,"end","left","right"]);break}},/:/,/\s/),c.region=u.get("region",null),c.vertical=u.get("vertical","");let d=u.get("line","auto");d==="auto"&&Z1.line===-1&&(d=-1),c.line=d,c.lineAlign=u.get("lineAlign","start"),c.snapToLines=u.get("snapToLines",!0),c.size=u.get("size",100),c.align=u.get("align",Jh);let h=u.get("position","auto");h==="auto"&&Z1.position===50&&(h=c.align==="start"||c.align==="left"?0:c.align==="end"||c.align==="right"?100:50),c.position=h}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=i(),s(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);t=t.slice(3),s(),e.endTime=i(),s(),a(t,e)}function rV(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class bSe{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new ySe,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));function r(){let a=n.buffer,s=0;for(a=rV(a);s<a.length&&a[s]!=="\r"&&a[s]!==`
`;)++s;const o=a.slice(0,s);return a[s]==="\r"&&++s,a[s]===`
`&&++s,n.buffer=a.slice(s),o}function i(a){nV(a,function(s,o){},/:/)}try{let a="";if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;a=r();const o=a.match(/^()?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");n.state="HEADER"}let s=!1;for(;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(s?s=!1:a=r(),n.state){case"HEADER":/:/.test(a)?i(a):a||(n.state="ID");continue;case"NOTE":a||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){n.state="NOTE";break}if(!a)continue;if(n.cue=new y_(0,0,""),n.state="CUE",a.indexOf("-->")===-1){n.cue.id=a;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{xSe(a,n.cue,n.regionList)}catch{n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":{const o=a.indexOf("-->")!==-1;if(!a||o&&(s=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(n.cue===null)continue;n.cue.text&&(n.cue.text+=`
`),n.cue.text+=a}continue;case"BADCUE":a||(n.state="ID")}}}catch{n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(n){e.onparsingerror&&e.onparsingerror(n)}return e.onflush&&e.onflush(),this}}const SSe=/\r\n|\n\r|\n|\r/g,jE=function(e,n,r=0){return e.slice(r,r+n.length)===n},ESe=function(e){let n=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),a=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!xe(n)||!xe(r)||!xe(i)||!xe(a))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return n+=1e3*r,n+=60*1e3*i,n+=60*60*1e3*a,n};function v_(t,e,n){return Vc(t.toString())+Vc(e.toString())+Vc(n)}const TSe=function(e,n,r){let i=e[n],a=e[i.prevCC];if(!a||!a.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(s=a)!=null&&s.new;){var s;e.ccOffset+=i.start-a.start,i.new=!1,i=a,a=e[i.prevCC]}e.presentationOffset=r};function ASe(t,e,n,r,i,a,s){const o=new bSe,c=fr(new Uint8Array(t)).trim().replace(SSe,`
`).split(`
`),u=[],d=e?Bxe(e.baseTime,e.timescale):0;let h="00:00.000",p=0,y=0,v,S=!0;o.oncue=function(x){const T=n[r];let _=n.ccOffset;const A=(p-d)/9e4;if(T!=null&&T.new&&(y!==void 0?_=n.ccOffset=T.start:TSe(n,r,A)),A){if(!e){v=new Error("Missing initPTS for VTT MPEGTS");return}_=A-n.presentationOffset}const O=x.endTime-x.startTime,R=Or((x.startTime+_-y)*9e4,i*9e4)/9e4;x.startTime=Math.max(R,0),x.endTime=Math.max(R+O,0);const C=x.text.trim();x.text=decodeURIComponent(encodeURIComponent(C)),x.id||(x.id=v_(x.startTime,x.endTime,C)),x.endTime>0&&u.push(x)},o.onparsingerror=function(x){v=x},o.onflush=function(){if(v){s(v);return}a(u)},c.forEach(x=>{if(S)if(jE(x,"X-TIMESTAMP-MAP=")){S=!1,x.slice(16).split(",").forEach(T=>{jE(T,"LOCAL:")?h=T.slice(6):jE(T,"MPEGTS:")&&(p=parseInt(T.slice(7)))});try{y=ESe(h)/1e3}catch(T){v=T}return}else x===""&&(S=!1);o.parse(x+`
`)}),o.flush()}const UE="stpp.ttml.im1t",iV=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,aV=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,wSe={left:"start",center:"center",right:"end",start:"start",end:"end"};function uB(t,e,n,r){const i=Ve(new Uint8Array(t),["mdat"]);if(i.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const a=i.map(o=>fr(o)),s=Uxe(e.baseTime,1,e.timescale);try{a.forEach(o=>n(_Se(o,s)))}catch(o){r(o)}}function _Se(t,e){const i=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(a).reduce((h,p)=>(h[p]=i.getAttribute(`ttp:${p}`)||a[p],h),{}),o=i.getAttribute("xml:space")!=="preserve",c=cB(BE(i,"styling","style")),u=cB(BE(i,"layout","region")),d=BE(i,"body","[begin]");return[].map.call(d,h=>{const p=sV(h,o);if(!p||!h.hasAttribute("begin"))return null;const y=$E(h.getAttribute("begin"),s),v=$E(h.getAttribute("dur"),s);let S=$E(h.getAttribute("end"),s);if(y===null)throw fB(h);if(S===null){if(v===null)throw fB(h);S=y+v}const x=new y_(y-e,S-e,p);x.id=v_(x.startTime,x.endTime,x.text);const T=u[h.getAttribute("region")],_=c[h.getAttribute("style")],A=RSe(T,_,c),{textAlign:O}=A;if(O){const R=wSe[O];R&&(x.lineAlign=R),x.align=O}return ut(x,A),x}).filter(h=>h!==null)}function BE(t,e,n){const r=t.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function cB(t){return t.reduce((e,n)=>{const r=n.getAttribute("xml:id");return r&&(e[r]=n),e},{})}function sV(t,e){return[].slice.call(t.childNodes).reduce((n,r,i)=>{var a;return r.nodeName==="br"&&i?n+`
`:(a=r.childNodes)!=null&&a.length?sV(r,e):e?n+r.textContent.trim().replace(/\s+/g," "):n+r.textContent},"")}function RSe(t,e,n){const r="http://www.w3.org/ns/ttml#styling";let i=null;const a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],s=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return s&&n.hasOwnProperty(s)&&(i=n[s]),a.reduce((o,c)=>{const u=FE(e,r,c)||FE(t,r,c)||FE(i,r,c);return u&&(o[c]=u),o},{})}function FE(t,e,n){return t&&t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function fB(t){return new Error(`Could not parse ttml timestamp ${t}`)}function $E(t,e){if(!t)return null;let n=tV(t);return n===null&&(iV.test(t)?n=OSe(t,e):aV.test(t)&&(n=CSe(t,e))),n}function OSe(t,e){const n=iV.exec(t),r=(n[4]|0)+(n[5]|0)/e.subFrameRate;return(n[1]|0)*3600+(n[2]|0)*60+(n[3]|0)+r/e.frameRate}function CSe(t,e){const n=aV.exec(t),r=Number(n[1]);switch(n[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class em{constructor(e,n){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=n}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,n,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=n,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class LSe{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=hB(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(D.FRAG_LOADING,this.onFragLoading,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this),e.on(D.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(D.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(D.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(D.FRAG_LOADING,this.onFragLoading,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this),e.off(D.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(D.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(D.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new em(this,"textTrack1"),n=new em(this,"textTrack2"),r=new em(this,"textTrack3"),i=new em(this,"textTrack4");this.cea608Parser1=new lB(1,e,n),this.cea608Parser2=new lB(3,r,i)}addCues(e,n,r,i,a){let s=!1;for(let o=a.length;o--;){const c=a[o],u=DSe(c[0],c[1],n,r);if(u>=0&&(c[0]=Math.min(c[0],n),c[1]=Math.max(c[1],r),s=!0,u/(r-n)>.5))return}if(s||a.push([n,r]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,n,r,i)}else{const o=this.Cues.newCue(null,n,r,i);this.hls.trigger(D.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:n,id:r,initPTS:i,timescale:a}){const{unparsedVttFrags:s}=this;r===Se.MAIN&&(this.initPTS[n.cc]={baseTime:i,timescale:a}),s.length&&(this.unparsedVttFrags=[],s.forEach(o=>{this.initPTS[o.frag.cc]?this.onFragLoaded(D.FRAG_LOADED,o):this.hls.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,n){const{media:r}=this;if(r)for(let i=0;i<r.textTracks.length;i++){const a=r.textTracks[i];if(dB(a,{name:e,lang:n,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return a}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:n,captionsTracks:r,media:i}=this,{label:a,languageCode:s}=n[e],o=this.getExistingTrack(a,s);if(o)r[e]=o,cl(r[e]),XG(r[e],i);else{const c=this.createTextTrack("captions",a,s);c&&(c[e]=!0,r[e]=c)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const n=this.captionsProperties[e];if(!n)return;const r=n.label,i={_id:e,label:r,kind:"captions",default:n.media?!!n.media.default:!1,closedCaptions:n.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(D.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,n,r){const i=this.media;if(i)return i.addTextTrack(e,n,r)}onMediaAttaching(e,n){this.media=n.media,n.mediaSource||this._cleanTracks()}onMediaDetaching(e,n){const r=!!n.transferMedia;if(this.media=null,r)return;const{captionsTracks:i}=this;Object.keys(i).forEach(a=>{cl(i[a]),delete i[a]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=hB(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const n=e.textTracks;if(n)for(let r=0;r<n.length;r++)cl(n[r])}onSubtitleTracksUpdated(e,n){const r=n.subtitleTracks||[],i=r.some(a=>a.textCodec===UE);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(GG(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const s=this.media,o=s?ym(s.textTracks):null;if(this.tracks.forEach((c,u)=>{let d;if(o){let h=null;for(let p=0;p<o.length;p++)if(o[p]&&dB(o[p],c)){h=o[p],o[p]=null;break}h&&(d=h)}if(d)cl(d);else{const h=oV(c);d=this.createTextTrack(h,c.name,c.lang),d&&(d.mode="disabled")}d&&this.textTracks.push(d)}),o!=null&&o.length){const c=o.filter(u=>u!==null).map(u=>u.label);c.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${c.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const s=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(D.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:s})}}}onManifestLoaded(e,n){this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(r=>{const i=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!i)return;const a=`textTrack${i[1]}`,s=this.captionsProperties[a];s&&(s.label=r.name,r.lang&&(s.languageCode=r.lang),s.media=r)})}closedCaptionsForLevel(e){const n=this.hls.levels[e.level];return n==null?void 0:n.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,n){if(this.enabled&&n.frag.type===Se.MAIN){var r,i;const{cea608Parser1:a,cea608Parser2:s,lastSn:o}=this,{cc:c,sn:u}=n.frag,d=(r=(i=n.part)==null?void 0:i.index)!=null?r:-1;a&&s&&(u!==o+1||u===o&&d!==this.lastPartIndex+1||c!==this.lastCc)&&(a.reset(),s.reset()),this.lastCc=c,this.lastSn=u,this.lastPartIndex=d}}onFragLoaded(e,n){const{frag:r,payload:i}=n;if(r.type===Se.SUBTITLE)if(i.byteLength){const a=r.decryptdata,s="stats"in n;if(a==null||!a.encrypted||s){const o=this.tracks[r.level],c=this.vttCCs;c[r.cc]||(c[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),o&&o.textCodec===UE?this._parseIMSC1(r,i):this._parseVTTs(n)}}else this.hls.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,n){const r=this.hls;uB(n,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),r.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{r.logger.log(`Failed to parse IMSC1: ${i}`),r.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var n;const{frag:r,payload:i}=e,{initPTS:a,unparsedVttFrags:s}=this,o=a.length-1;if(!a[r.cc]&&o===-1){s.push(e);return}const c=this.hls,u=(n=r.initSegment)!=null&&n.data?jr(r.initSegment.data,new Uint8Array(i)).buffer:i;ASe(u,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,d=>{this._appendCues(d,r.level),c.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},d=>{const h=d.message==="Missing initPTS for VTT MPEGTS";h?s.push(e):this._fallbackToIMSC1(r,i),c.logger.log(`Failed to parse VTT cue: ${d}`),!(h&&o>r.cc)&&c.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:d})})}_fallbackToIMSC1(e,n){const r=this.tracks[e.level];r.textCodec||uB(n,this.initPTS[e.cc],()=>{r.textCodec=UE,this._parseIMSC1(e,n)},()=>{r.textCodec="wvtt"})}_appendCues(e,n){const r=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[n];if(!i||i.mode==="disabled")return;e.forEach(a=>QG(i,a))}else{const i=this.tracks[n];if(!i)return;const a=i.default?"default":"subtitles"+n;r.trigger(D.CUES_PARSED,{type:"subtitles",cues:e,track:a})}}onFragDecrypted(e,n){const{frag:r}=n;r.type===Se.SUBTITLE&&this.onFragLoaded(D.FRAG_LOADED,n)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,n){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:r,samples:i}=n;if(!(r.type===Se.MAIN&&this.closedCaptionsForLevel(r)==="NONE"))for(let a=0;a<i.length;a++){const s=i[a].bytes;if(s){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(s);this.cea608Parser1.addData(i[a].pts,o[0]),this.cea608Parser2.addData(i[a].pts,o[1])}}}onBufferFlushing(e,{startOffset:n,endOffset:r,endOffsetSubtitles:i,type:a}){const{media:s}=this;if(!(!s||s.currentTime<r)){if(!a||a==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(c=>Q1(o[c],n,r))}if(this.config.renderTextTracksNatively&&n===0&&i!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(c=>Q1(o[c],n,i))}}}extractCea608Data(e){const n=[[],[]],r=e[0]&31;let i=2;for(let a=0;a<r;a++){const s=e[i++],o=127&e[i++],c=127&e[i++];if(o===0&&c===0)continue;if((4&s)!==0){const d=3&s;(d===0||d===1)&&(n[d].push(o),n[d].push(c))}}return n}}function oV(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function dB(t,e){return!!t&&t.kind===oV(e)&&Y1(e,t)}function DSe(t,e,n,r){return Math.min(e,r)-Math.max(t,n)}function hB(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const ISe=/\s/,PSe={newCue(t,e,n,r){const i=[];let a,s,o,c,u;const d=self.VTTCue||self.TextTrackCue;for(let p=0;p<r.rows.length;p++)if(a=r.rows[p],o=!0,c=0,u="",!a.isEmpty()){var h;for(let S=0;S<a.chars.length;S++)ISe.test(a.chars[S].uchar)&&o?c++:(u+=a.chars[S].uchar,o=!1);a.cueStartTime=e,e===n&&(n+=1e-4),c>=16?c--:c++;const y=rV(u.trim()),v=v_(e,n,y);t!=null&&(h=t.cues)!=null&&h.getCueById(v)||(s=new d(e,n,y),s.id=v,s.line=p+1,s.align="left",s.position=10+Math.min(80,Math.floor(c*8/32)*10),i.push(s))}return t&&i.length&&(i.sort((p,y)=>p.line==="auto"||y.line==="auto"?0:p.line>8&&y.line>8?y.line-p.line:p.line-y.line),i.forEach(p=>QG(t,p))),i}};function NSe(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const MSe=/(\d+)-(\d+)\/(\d+)/;class mB{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||BSe,this.controller=new self.AbortController,this.stats=new Zw}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,n,r){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const a=kSe(e,this.controller.signal),s=e.responseType==="arraybuffer",o=s?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:u}=n.loadPolicy;this.context=e,this.config=n,this.callbacks=r,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),n.timeout=c&&xe(c)?c:u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},n.timeout),($f(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(h=>{var p;this.response=this.loader=h;const y=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),n.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},u-(y-i.loading.start)),!h.ok){const{status:S,statusText:x}=h;throw new FSe(x||"fetch, bad network response",S,h)}i.loading.first=y,i.total=USe(h.headers)||i.total;const v=(p=this.callbacks)==null?void 0:p.onProgress;return v&&xe(n.highWaterMark)?this.loadProgressively(h,i,e,n.highWaterMark,v):s?h.arrayBuffer():e.responseType==="json"?h.json():h.text()}).then(h=>{var p,y;const v=this.response;if(!v)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const S=h[o];S&&(i.loaded=i.total=S);const x={url:v.url,data:h,code:v.status},T=(p=this.callbacks)==null?void 0:p.onProgress;T&&!xe(n.highWaterMark)&&T(i,e,h,v),(y=this.callbacks)==null||y.onSuccess(x,i,e,v)}).catch(h=>{var p;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const y=h&&h.code||0,v=h?h.message:null;(p=this.callbacks)==null||p.onError({code:y,text:v},e,h?h.details:null,i)})}getCacheAge(){let e=null;if(this.response){const n=this.response.headers.get("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,n,r,i=0,a){const s=new EG,o=e.body.getReader(),c=()=>o.read().then(u=>{if(u.done)return s.dataLength&&a(n,r,s.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const d=u.value,h=d.length;return n.loaded+=h,h<i||s.dataLength?(s.push(d),s.dataLength>=i&&a(n,r,s.flush().buffer,e)):a(n,r,d.buffer,e),c()}).catch(()=>Promise.reject());return c()}}function kSe(t,e){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(ut({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}function jSe(t){const e=MSe.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function USe(t){const e=t.get("Content-Range");if(e){const r=jSe(e);if(xe(r))return r}const n=t.get("Content-Length");if(n)return parseInt(n)}function BSe(t,e){return new self.Request(t.url,e)}class FSe extends Error{constructor(e,n,r){super(e),this.code=void 0,this.details=void 0,this.code=n,this.details=r}}const $Se=/^age:\s*[\d.]+\s*$/im;class lV{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Zw,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,n,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=n,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:n}=this;if(!e||!n)return;const r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const a=this.xhrSetup;a?Promise.resolve().then(()=>{if(!(this.loader!==r||this.stats.aborted))return a(r,n.url)}).catch(s=>{if(!(this.loader!==r||this.stats.aborted))return r.open("GET",n.url,!0),a(r,n.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,n,e)}).catch(s=>{var o;(o=this.callbacks)==null||o.onError({code:r.status,text:s.message},n,r,i)}):this.openAndSendXhr(r,n,e)}openAndSendXhr(e,n,r){e.readyState||e.open("GET",n.url,!0);const i=n.headers,{maxTimeToFirstByteMs:a,maxLoadTimeMs:s}=r.loadPolicy;if(i)for(const o in i)e.setRequestHeader(o,i[o]);n.rangeEnd&&e.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=n.responseType,self.clearTimeout(this.requestTimeout),r.timeout=a&&xe(a)?a:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:n,stats:r}=this;if(!e||!n)return;const i=n.readyState,a=this.config;if(!r.aborted&&i>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),a.timeout!==a.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),a.timeout=a.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),n.onreadystatechange=null,n.onprogress=null;const u=n.status,d=n.responseType==="text"?n.responseText:null;if(u>=200&&u<300){const v=d??n.response;if(v!=null){var s,o;r.loading.end=Math.max(self.performance.now(),r.loading.first);const S=n.responseType==="arraybuffer"?v.byteLength:v.length;r.loaded=r.total=S,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first);const x=(s=this.callbacks)==null?void 0:s.onProgress;x&&x(r,e,v,n);const T={url:n.responseURL,data:v,code:u};(o=this.callbacks)==null||o.onSuccess(T,r,e,n);return}}const h=a.loadPolicy.errorRetry,p=r.retry,y={url:e.url,data:void 0,code:u};if(Np(h,p,!1,y))this.retry(h);else{var c;Je.error(`${u} while loading ${e.url}`),(c=this.callbacks)==null||c.onError({code:u,text:n.statusText},e,n,r)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,n=this.stats.retry;if(Np(e,n,!0))this.retry(e);else{var r;Je.warn(`timeout while loading ${(r=this.context)==null?void 0:r.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:n,stats:r}=this;this.retryDelay=n_(e,r.retry),r.retry++,Je.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${n==null?void 0:n.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total)}getCacheAge(){let e=null;if(this.loader&&$Se.test(this.loader.getAllResponseHeaders())){const n=this.loader.getResponseHeader("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const GSe={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},VSe=ht(ht({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:lV,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:fve,bufferController:ebe,capLevelController:p_,errorController:gve,fpsController:zbe,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:dG,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:GSe},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},qSe()),{},{subtitleStreamController:iSe,subtitleTrackController:Wbe,timelineController:LSe,audioStreamController:Xxe,audioTrackController:Qxe,emeController:gl,cmcdController:Vbe,contentSteeringController:Hbe,interstitialsController:rSe});function qSe(){return{cueHandler:PSe,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function HSe(t,e,n){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=J1(t),i=["manifest","level","frag"],a=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(s=>{const o=`${s==="level"?"playlist":s}LoadPolicy`,c=e[o]===void 0,u=[];a.forEach(d=>{const h=`${s}Loading${d}`,p=e[h];if(p!==void 0&&c){u.push(h);const y=r[o].default;switch(e[o]={default:y},d){case"TimeOut":y.maxLoadTimeMs=p,y.maxTimeToFirstByteMs=p;break;case"MaxRetry":y.errorRetry.maxNumRetry=p,y.timeoutRetry.maxNumRetry=p;break;case"RetryDelay":y.errorRetry.retryDelayMs=p,y.timeoutRetry.retryDelayMs=p;break;case"MaxRetryTimeout":y.errorRetry.maxRetryDelayMs=p,y.timeoutRetry.maxRetryDelayMs=p;break}}}),u.length&&n.warn(`hls.js config: "${u.join('", "')}" setting(s) are deprecated, use "${o}": ${Tt(e[o])}`)}),ht(ht({},r),e)}function J1(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(J1):Object.keys(t).reduce((e,n)=>(e[n]=J1(t[n]),e),{}):t}function zSe(t,e){const n=t.loader;n!==mB&&n!==lV?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):NSe()&&(t.loader=mB,t.progressive=!0,t.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const vm=2,KSe=.1,YSe=.05,WSe=100;class XSe extends lG{constructor(e,n){super("gap-controller",e.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var r;(r=this.media)!=null&&r.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var r;this.ended=((r=this.media)==null?void 0:r.currentTime)||1,this.hls.trigger(D.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=n,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,n){this.setInterval(WSe),this.mediaSource=n.mediaSource;const r=this.media=n.media;Lr(r,"playing",this.onMediaPlaying),Lr(r,"waiting",this.onMediaWaiting),Lr(r,"ended",this.onMediaEnded)}onMediaDetaching(e,n){this.clearInterval();const{media:r}=this;r&&(ei(r,"playing",this.onMediaPlaying),ei(r,"waiting",this.onMediaWaiting),ei(r,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,n){this.buffered=n.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const n=this.media.currentTime;this.poll(n,this.lastCurrentTime),this.lastCurrentTime=n}poll(e,n){var r,i;const a=(r=this.hls)==null?void 0:r.config;if(!a)return;const s=this.media;if(!s)return;const{seeking:o}=s,c=this.seeking&&!o,u=!this.seeking&&o,d=s.paused&&!o||s.ended||s.playbackRate===0;if(this.seeking=o,e!==n){n&&(this.ended=0),this.moved=!0,o||(this.nudgeRetry=0,a.nudgeOnVideoHole&&!d&&e>n&&this.nudgeOnVideoHole(e,n)),this.waiting===0&&this.stallResolved(e);return}if(u||c){c&&this.stallResolved(e);return}if(d){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&s.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(D.MEDIA_ENDED,{stalled:!1}));return}if(!ke.getBuffered(s).length){this.nudgeRetry=0;return}const h=ke.bufferInfo(s,e,0),p=h.nextStart||0,y=this.fragmentTracker;if(o&&y&&this.hls){const C=pB(this.hls.inFlightFragments,e),L=h.len>vm,P=!p||C||p-e>vm&&!y.getPartialFragment(e);if(L||P)return;this.moved=!1}const v=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&y){if(!(h.len>0)&&!p)return;const L=Math.max(p,h.start||0)-e,N=!!(v!=null&&v.live)?v.targetduration*2:vm,k=y.getPartialFragment(e);if(L>0&&(L<=N||k)){s.paused||this._trySkipBufferHole(k);return}}const S=a.detectStallWithCurrentTimeMs,x=self.performance.now(),T=this.waiting;let _=this.stalled;if(_===null)if(T>0&&x-T<S)_=this.stalled=T;else{this.stalled=x;return}const A=x-_;if(!o&&(A>=S||T)&&this.hls){var O;if(((O=this.mediaSource)==null?void 0:O.readyState)==="ended"&&!(v!=null&&v.live)&&Math.abs(e-((v==null?void 0:v.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(D.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(h),!this.media||!this.hls)return}const R=ke.bufferInfo(s,e,a.maxBufferHole);this._tryFixBufferStall(R,A,e)}stallResolved(e){const n=this.stalled;if(n&&this.hls&&(this.stalled=null,this.stallReported)){const r=self.performance.now()-n;this.log(`playback not stuck anymore @${e}, after ${Math.round(r)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(D.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,n){var r;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(r=this.buffered.audio)!=null&&r.length&&i&&i.length>1&&e>i.end(0)){const a=ke.bufferedInfo(ke.timeRangesToArray(this.buffered.audio),e,0);if(a.len>1&&n>=a.start){const s=ke.timeRangesToArray(i),o=ke.bufferedInfo(s,n,0).bufferedIndex;if(o>-1&&o<s.length-1){const c=ke.bufferedInfo(s,e,0).bufferedIndex,u=s[o].end,d=s[o+1].start;if((c===-1||c>o)&&d-u<1&&e-u<2){const h=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${u} -> ${d} buffered index: ${c}`);this.warn(h.message),this.media.currentTime+=1e-6;const p=this.fragmentTracker.getPartialFragment(e)||void 0,y=ke.bufferInfo(this.media,e,0);this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,frag:p,buffer:y.len,bufferInfo:y})}}}}}_tryFixBufferStall(e,n,r){var i,a;const{fragmentTracker:s,media:o}=this,c=(i=this.hls)==null?void 0:i.config;if(!o||!s||!c)return;const u=(a=this.hls)==null?void 0:a.latestLevelDetails,d=s.getPartialFragment(r);if((d||u!=null&&u.live&&r<u.fragmentStart)&&(this._trySkipBufferHole(d)||!this.media))return;const h=e.buffered,p=this.adjacentTraversal(e,r);(h&&h.length>1&&e.len>c.maxBufferHole||e.nextStart&&(e.nextStart-r<c.maxBufferHole||p))&&(n>c.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,n){const r=this.fragmentTracker,i=e.nextStart;if(r&&i){const a=r.getFragAtPos(n,Se.MAIN),s=r.getFragAtPos(i,Se.MAIN);if(a&&s)return s.sn-a.sn<2}return!1}_reportStall(e){const{hls:n,media:r,stallReported:i,stalled:a}=this;if(!i&&a!==null&&r&&n){this.stallReported=!0;const s=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${Tt(e)})`);this.warn(s.message),n.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len,bufferInfo:e,stalled:{start:a}})}}_trySkipBufferHole(e){var n;const{fragmentTracker:r,media:i}=this,a=(n=this.hls)==null?void 0:n.config;if(!i||!r||!a)return 0;const s=i.currentTime,o=ke.bufferInfo(i,s,0),c=s<o.start?o.start:o.nextStart;if(c&&this.hls){const d=o.len<=a.maxBufferHole,h=o.len>0&&o.len<1&&i.readyState<3,p=c-s;if(p>0&&(d||h)){if(p>a.maxBufferHole){let v=!1;if(s===0){const S=r.getAppendedFrag(0,Se.MAIN);S&&c<S.end&&(v=!0)}if(!v){const S=e||r.getAppendedFrag(s,Se.MAIN);if(S){var u;if(!((u=this.hls.loadLevelObj)!=null&&u.details)||pB(this.hls.inFlightFragments,c))return 0;let T=!1,_=S.end;for(;_<c;){const A=r.getAppendedFrag(_,Se.MAIN)||r.getPartialFragment(_);if(A)_+=A.duration;else{T=!0;break}}if(T)return 0}}}const y=Math.max(c+YSe,s+KSe);if(this.warn(`skipping hole, adjusting currentTime from ${s} to ${y}`),this.moved=!0,i.currentTime=y,!(e!=null&&e.gap)){const v=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${y}`);this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:v,reason:v.message,frag:e||void 0,buffer:o.len,bufferInfo:o})}return y}}return 0}_tryNudgeBuffer(e){const{hls:n,media:r,nudgeRetry:i}=this,a=n==null?void 0:n.config;if(!r||!a)return 0;const s=r.currentTime;if(this.nudgeRetry++,i<a.nudgeMaxRetry){const o=s+(i+1)*a.nudgeOffset,c=new Error(`Nudging 'currentTime' from ${s} to ${o}`);this.warn(c.message),r.currentTime=o,n.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_NUDGE_ON_STALL,error:c,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${s} after ${a.nudgeMaxRetry} nudges`);this.error(o.message),n.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function pB(t,e){const n=gB(t.main);if(n&&n.start<=e)return n;const r=gB(t.audio);return r&&r.start<=e?r:null}function gB(t){if(!t)return null;switch(t.state){case fe.IDLE:case fe.STOPPED:case fe.ENDED:case fe.ERROR:return null}return t.frag}const QSe=.25;function eA(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function yB(t,e,n,r,i){let a=new t(e,n,"");try{a.value=r,i&&(a.type=i)}catch{a=new t(e,n,Tt(i?ht({type:i},r):r))}return a}const tm=(()=>{const t=eA();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class ZSe{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(D.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(e,n){var r;this.media=n.media,((r=n.overrides)==null?void 0:r.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){const e=this.hls.latestLevelDetails;e&&this.updateDateRangeCues(e)}onMediaDetaching(e,n){this.media=null,!n.transferMedia&&(this.id3Track&&(this.removeCues&&cl(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const n=this.getID3Track(e.textTracks);return n.mode="hidden",n}getID3Track(e){if(this.media){for(let n=0;n<e.length;n++){const r=e[n];if(r.kind==="metadata"&&r.label==="id3")return XG(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,n){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:i}}}=this;if(!r&&!i)return;const{samples:a}=n;this.id3Track||(this.id3Track=this.createTrack(this.media));const s=eA();if(s)for(let o=0;o<a.length;o++){const c=a[o].type;if(c===ur.emsg&&!r||!i)continue;const u=CG(a[o].data);if(u){const d=a[o].pts;let h=d+a[o].duration;h>tm&&(h=tm),h-d<=0&&(h=d+QSe);for(let y=0;y<u.length;y++){const v=u[y];if(!LG(v)){this.updateId3CueEnds(d,c);const S=yB(s,d,h,v,c);S&&this.id3Track.addCue(S)}}}}}updateId3CueEnds(e,n){var r;const i=(r=this.id3Track)==null?void 0:r.cues;if(i)for(let a=i.length;a--;){const s=i[a];s.type===n&&s.startTime<e&&s.endTime===tm&&(s.endTime=e)}}onBufferFlushing(e,{startOffset:n,endOffset:r,type:i}){const{id3Track:a,hls:s}=this;if(!s)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:c}}=s;if(a&&(o||c)){let u;i==="audio"?u=d=>d.type===ur.audioId3&&c:i==="video"?u=d=>d.type===ur.emsg&&o:u=d=>d.type===ur.audioId3&&c||d.type===ur.emsg&&o,Q1(a,n,r,u)}}onLevelUpdated(e,{details:n}){this.updateDateRangeCues(n,!0)}onLevelPtsUpdated(e,n){Math.abs(n.drift)>.01&&this.updateDateRangeCues(n.details)}updateDateRangeCues(e,n){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:r}=this,{dateRanges:i}=e,a=Object.keys(i);let s=this.dateRangeCuesAppended;if(r&&n){var o;if((o=r.cues)!=null&&o.length){const d=Object.keys(s).filter(h=>!a.includes(h));for(let h=d.length;h--;){const p=d[h],y=s[p].cues;delete s[p],Object.keys(y).forEach(v=>{try{const S=y[v];S.removeEventListener("enter",this.onEventCueEnter),r.removeCue(S)}catch{}})}}else s=this.dateRangeCuesAppended={}}const c=e.fragments[e.fragments.length-1];if(a.length===0||!xe(c==null?void 0:c.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const u=eA();for(let d=0;d<a.length;d++){const h=a[d],p=i[h],y=p.startTime,v=s[h],S=(v==null?void 0:v.cues)||{};let x=(v==null?void 0:v.durationKnown)||!1,T=tm;const{duration:_,endDate:A}=p;if(A&&_!==null)T=y+_,x=!0;else if(p.endOnNext&&!x){const R=a.reduce((C,L)=>{if(L!==p.id){const P=i[L];if(P.class===p.class&&P.startDate>p.startDate&&(!C||p.startDate<C.startDate))return P}return C},null);R&&(T=R.startTime,x=!0)}const O=Object.keys(p.attr);for(let R=0;R<O.length;R++){const C=O[R];if(!Cve(C))continue;const L=S[C];if(L)x&&!v.durationKnown?L.endTime=T:Math.abs(L.startTime-y)>.01&&(L.startTime=y,L.endTime=T);else if(u){let P=p.attr[C];Lve(C)&&(P=z8(P));const k=yB(u,y,T,{key:C,data:P},ur.dateRange);k&&(k.id=h,this.id3Track.addCue(k),S[C]=k,this.hls.config.interstitialsController&&(C==="X-ASSET-LIST"||C==="X-ASSET-URL")&&k.addEventListener("enter",this.onEventCueEnter))}}s[h]={cues:S,dateRange:p,durationKnown:x}}}}class JSe{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:n}=this,r=this.levelDetails;if(!n||!r)return;this.currentTime=n.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:a,maxLiveSyncPlaybackRate:s}=this.config;if(!a||s===1||!r.live)return;const o=this.targetLatency;if(o===null)return;const c=i-o,u=Math.min(this.maxLatency,o+r.targetduration);if(c<u&&c>.05&&this.forwardBufferLength>1){const h=Math.min(2,Math.max(1,s)),p=Math.round(2/(1+Math.exp(-.75*c-this.edgeStalled))*20)/20,y=Math.min(h,Math.max(1,p));this.changeMediaPlaybackRate(n,y)}else n.playbackRate!==1&&n.playbackRate!==0&&this.changeMediaPlaybackRate(n,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const n=this.levelDetails;return n?e.liveMaxLatencyDurationCount*n.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:n,partHoldBack:r,targetduration:i}=e,{liveSyncDuration:a,liveSyncDurationCount:s,lowLatencyMode:o}=this.config,c=this.hls.userConfig;let u=o&&r||n;(this._targetLatencyUpdated||c.liveSyncDuration||c.liveSyncDurationCount||u===0)&&(u=a!==void 0?a:s*i);const d=i;return u+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,d)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),n=this.targetLatency;if(e===null||n===null)return null;const r=this.levelDetails;if(r===null)return null;const i=r.edge,a=e-n-this.edgeStalled,s=i-r.totalduration,o=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(s,a),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const n=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-n,0)}get forwardBufferLength(){const{media:e}=this,n=this.levelDetails;if(!e||!n)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):n.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.ERROR,this.onError,this))}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:n}){n.advanced&&this.onTimeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,n){var r;n.details===re.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(r=this.levelDetails)!=null&&r.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,n){var r,i;e.playbackRate!==n&&((r=this.hls)==null||r.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${n}`),e.playbackRate=n)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class eEe extends m_{constructor(e,n){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=n,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this),e.on(D.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this),e.off(D.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(n=>{n.loadError=0,n.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,n){this.resetLevels()}onManifestLoaded(e,n){const r=this.hls.config.preferManagedMediaSource,i=[],a={},s={};let o=!1,c=!1,u=!1;n.levels.forEach(d=>{const h=d.attrs;let{audioCodec:p,videoCodec:y}=d;p&&(d.audioCodec=p=Lp(p,r)||void 0),y&&(y=d.videoCodec=Yye(y));const{width:v,height:S,unknownCodecs:x}=d;let T=x?x.length:0;if(x)for(let k=T;k--;){const M=x[k];this.isAudioSupported(M)?(d.audioCodec=p=p?`${p},${M}`:M,T--,Vl.audio[p.substring(0,4)]=2):this.isVideoSupported(M)&&(d.videoCodec=y=y?`${y},${M}`:M,T--,Vl.video[y.substring(0,4)]=2)}if(o||(o=!!(v&&S)),c||(c=!!y),u||(u=!!p),T||p&&!this.isAudioSupported(p)||y&&!this.isVideoSupported(y)){this.log(`Some or all CODECS not supported "${h.CODECS}"`);return}const{CODECS:_,"FRAME-RATE":A,"HDCP-LEVEL":O,"PATHWAY-ID":R,RESOLUTION:C,"VIDEO-RANGE":L}=h,N=`${`${R||"."}-`}${d.bitrate}-${C}-${A}-${_}-${L}-${O}`;if(a[N])if(a[N].uri!==d.url&&!d.attrs["PATHWAY-ID"]){const k=s[N]+=1;d.attrs["PATHWAY-ID"]=new Array(k+1).join(".");const M=this.createLevel(d);a[N]=M,i.push(M)}else a[N].addGroupId("audio",h.AUDIO),a[N].addGroupId("text",h.SUBTITLES);else{const k=this.createLevel(d);a[N]=k,s[N]=1,i.push(k)}}),this.filterAndSortMediaOptions(i,n,o,c,u)}createLevel(e){const n=new jf(e),r=e.supplemental;if(r!=null&&r.videoCodec&&!this.isVideoSupported(r.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${r.videoCodec}"`);this.log(i.message),n.supportedResult=nG(i,[])}return n}isAudioSupported(e){return U1(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return U1(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,n,r,i,a){let s=[],o=[],c=e;if((r||i)&&a&&(c=c.filter(({videoCodec:x,videoRange:T,width:_,height:A})=>(!!x||!!(_&&A))&&nve(T))),c.length===0){Promise.resolve().then(()=>{if(this.hls){let x="no level with compatible codecs found in manifest",T=x;n.levels.length&&(T=`one or more CODECS in variant not supported: ${Tt(n.levels.map(A=>A.attrs.CODECS).filter((A,O,R)=>R.indexOf(A)===O))}`,this.warn(T),x+=` (${T})`);const _=new Error(x);this.hls.trigger(D.ERROR,{type:Te.MEDIA_ERROR,details:re.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:n.url,error:_,reason:T})}});return}n.audioTracks&&(s=n.audioTracks.filter(x=>!x.audioCodec||this.isAudioSupported(x.audioCodec)),vB(s)),n.subtitles&&(o=n.subtitles,vB(o));const u=c.slice(0);c.sort((x,T)=>{if(x.attrs["HDCP-LEVEL"]!==T.attrs["HDCP-LEVEL"])return(x.attrs["HDCP-LEVEL"]||"")>(T.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&x.height!==T.height)return x.height-T.height;if(x.frameRate!==T.frameRate)return x.frameRate-T.frameRate;if(x.videoRange!==T.videoRange)return Dp.indexOf(x.videoRange)-Dp.indexOf(T.videoRange);if(x.videoCodec!==T.videoCodec){const _=cU(x.videoCodec),A=cU(T.videoCodec);if(_!==A)return A-_}if(x.uri===T.uri&&x.codecSet!==T.codecSet){const _=Cp(x.codecSet),A=Cp(T.codecSet);if(_!==A)return A-_}return x.averageBitrate!==T.averageBitrate?x.averageBitrate-T.averageBitrate:0});let d=u[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==u.length)){for(let x=0;x<u.length;x++)if(u[x].pathwayId===c[0].pathwayId){d=u[x];break}}this._levels=c;for(let x=0;x<c.length;x++)if(c[x]===d){var h;this._firstLevel=x;const T=d.bitrate,_=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${T}`),((h=this.hls.userConfig)==null?void 0:h.abrEwmaDefaultEstimate)===void 0){const A=Math.min(T,this.hls.config.abrEwmaDefaultEstimateMax);A>_&&_===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=A)}break}const p=a&&!i,y=this.hls.config,v=!!(y.audioStreamController&&y.audioTrackController),S={levels:c,audioTracks:s,subtitleTracks:o,sessionData:n.sessionData,sessionKeys:n.sessionKeys,firstLevel:this._firstLevel,stats:n.stats,audio:a,video:i,altAudio:v&&!p&&s.some(x=>!!x.url)};this.hls.trigger(D.MANIFEST_PARSED,S)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const n=this._levels;if(n.length===0)return;if(e<0||e>=n.length){const d=new Error("invalid level idx"),h=e<0;if(this.hls.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.LEVEL_SWITCH_ERROR,level:e,fatal:h,error:d,reason:d.message}),h)return;e=Math.min(e,n.length-1)}const r=this.currentLevelIndex,i=this.currentLevel,a=i?i.attrs["PATHWAY-ID"]:void 0,s=n[e],o=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,r===e&&i&&a===o)return;this.log(`Switching to level ${e} (${s.height?s.height+"p ":""}${s.videoRange?s.videoRange+" ":""}${s.codecSet?s.codecSet+" ":""}@${s.bitrate})${o?" with Pathway "+o:""} from level ${r}${a?" with Pathway "+a:""}`);const c={level:e,attrs:s.attrs,details:s.details,bitrate:s.bitrate,averageBitrate:s.averageBitrate,maxBitrate:s.maxBitrate,realBitrate:s.realBitrate,width:s.width,height:s.height,codecSet:s.codecSet,audioCodec:s.audioCodec,videoCodec:s.videoCodec,audioGroups:s.audioGroups,subtitleGroups:s.subtitleGroups,loaded:s.loaded,loadError:s.loadError,fragmentError:s.fragmentError,name:s.name,id:s.id,uri:s.uri,url:s.url,urlId:0,audioGroupIds:s.audioGroupIds,textGroupIds:s.textGroupIds};this.hls.trigger(D.LEVEL_SWITCHING,c);const u=s.details;if(!u||u.live){const d=this.switchParams(s.uri,i==null?void 0:i.details,u);this.loadPlaylist(d)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const n=this.steering.pathways(),r=e.filter(i=>n.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${n}`);return}this.steering.pathwayPriority=r}}onError(e,n){n.fatal||!n.context||n.context.type===He.LEVEL&&n.context.level===this.level&&this.checkRetry(n)}onFragBuffered(e,{frag:n}){if(n!==void 0&&n.type===Se.MAIN){const r=n.elementaryStreams;if(!Object.keys(r).some(a=>!!r[a]))return;const i=this._levels[n.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,n){var r;const{level:i,details:a}=n,s=n.levelInfo;if(!s){var o;this.warn(`Invalid level index ${i}`),(o=n.deliveryDirectives)!=null&&o.skip&&(a.deltaUpdateFailed=!0);return}if(s===this.currentLevel||n.withoutMultiVariant){s.fragmentError===0&&(s.loadError=0);let c=s.details;c===n.details&&c.advanced&&(c=void 0),this.playlistLoaded(i,n,c)}else(r=n.deliveryDirectives)!=null&&r.skip&&(a.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=this.getUrlWithDirectives(e.uri,n),i=this.currentLevelIndex,a=e.attrs["PATHWAY-ID"],s=e.details,o=s==null?void 0:s.age;this.log(`Loading level index ${i}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${a?" Pathway "+a:""}${o&&s.live?" age "+o.toFixed(1)+(s.type&&" "+s.type||""):""} ${r}`),this.hls.trigger(D.LEVEL_LOADING,{url:r,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:n||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var n;if(this._levels.length===1)return;const r=this._levels.filter((a,s)=>s!==e?!0:(this.steering&&this.steering.removeLevel(a),a===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,a.details&&a.details.fragments.forEach(o=>o.level=-1)),!1));xG(r),this._levels=r,this.currentLevelIndex>-1&&(n=this.currentLevel)!=null&&n.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=r.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(D.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:n}){this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:n,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==n&&(this._maxAutoLevel=n,this.hls.trigger(D.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:n,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function vB(t){const e={};t.forEach(n=>{const r=n.groupId||"";n.id=e[r]=e[r]||0,e[r]++})}function uV(){return self.SourceBuffer||self.WebKitSourceBuffer}function cV(){if(!Za())return!1;const e=uV();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function tEe(){if(!cV())return!1;const t=Za();return typeof(t==null?void 0:t.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(kf(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(kf(e,"audio"))))}function nEe(){var t;const e=uV();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const rEe=100;class iEe extends s_{constructor(e,n,r){super(e,n,r,"stream-controller",Se.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,a=i?i.currentTime:null;if(a===null||!xe(a)||(this.log(`Media seeked to ${a.toFixed(3)}`),!this.getBufferedFrag(a)))return;const s=this.getFwdBufferInfoAtPos(i,a,Se.MAIN,0);if(s===null||s.len===0){this.warn(`Main forward buffer length at ${a} on "seeked" event ${s?s.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(D.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this),e.on(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(D.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this),e.off(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,n){if(this.levels){const{lastCurrentTime:r,hls:i}=this;if(this.stopLoad(),this.setInterval(rEe),this.level=-1,!this.startFragRequested){let a=i.startLevel;a===-1&&(i.config.testBandwidth&&this.levels.length>1?(a=0,this.bitrateTest=!0):a=i.firstAutoLevel),i.nextLoadLevel=a,this.level=i.loadLevel,this._hasEnoughToStart=!!n}r>0&&e===-1&&!n&&(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r),this.state=fe.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=fe.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case fe.WAITING_LEVEL:{const{levels:n,level:r}=this,i=n==null?void 0:n[r],a=i==null?void 0:i.details;if(a&&(!a.live||this.levelLastLoaded===i&&!this.waitForLive(i))){if(this.waitForCdnTuneIn(a))break;this.state=fe.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=fe.IDLE;break}break}case fe.FRAG_LOADING_WAITING_RETRY:{var e;const n=self.performance.now(),r=this.retryDate;if(!r||n>=r||(e=this.media)!=null&&e.seeking){const{levels:i,level:a}=this,s=i==null?void 0:i[a];this.resetStartWhenNotLoaded(s||null),this.state=fe.IDLE}}break}this.state===fe.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:n,levels:r,media:i}=this;if(n===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const a=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(r!=null&&r[a]))return;const s=r[a],o=this.getMainFwdBufferInfo();if(o===null)return;const c=this.getLevelDetails();if(c&&this._streamEnded(o,c)){const S={};this.altAudio===2&&(S.type="video"),this.hls.trigger(D.BUFFER_EOS,S),this.state=fe.ENDED;return}if(!this.buffering)return;e.loadLevel!==a&&e.manualLevel===-1&&this.log(`Adapting to level ${a} from level ${this.level}`),this.level=e.nextLoadLevel=a;const u=s.details;if(!u||this.state===fe.WAITING_LEVEL||this.waitForLive(s)){this.level=a,this.state=fe.WAITING_LEVEL,this.startFragRequested=!1;return}const d=o.len,h=this.getMaxBufferLength(s.maxBitrate);if(d>=h)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const p=this.backtrackFragment?this.backtrackFragment.start:o.end;let y=this.getNextFragment(p,u);if(this.couldBacktrack&&!this.fragPrevious&&y&&Wt(y)&&this.fragmentTracker.getState(y)!==rn.OK){var v;const x=((v=this.backtrackFragment)!=null?v:y).sn-u.startSN,T=u.fragments[x-1];T&&y.cc===T.cc&&(y=T,this.fragmentTracker.removeFragment(T))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(y&&this.isLoopLoading(y,p)){if(!y.gap){const x=this.audioOnly&&!this.altAudio?yt.AUDIO:yt.VIDEO,T=(x===yt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;T&&this.afterBufferFlushed(T,x,Se.MAIN)}y=this.getNextFragmentLoopLoading(y,u,o,Se.MAIN,h)}y&&(y.initSegment&&!y.initSegment.data&&!this.bitrateTest&&(y=y.initSegment),this.loadFragment(y,s,p))}loadFragment(e,n,r){const i=this.fragmentTracker.getState(e);i===rn.NOT_LOADED||i===rn.PARTIAL?Wt(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,n)):super.loadFragment(e,n,r):this._loadInitSegment(e,n):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Se.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:n}=this;if(n!=null&&n.readyState){let r;const i=this.getAppendedFrag(n.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const a=this.getLevelDetails();if(a!=null&&a.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<a.targetduration*2)return}if(!n.paused&&e){const o=this.hls.nextLoadLevel,c=e[o],u=this.fragLastKbps;u&&this.fragCurrent?r=this.fragCurrent.duration*c.maxBitrate/(1e3*u)+1:r=0}else r=0;const s=this.getBufferedFrag(n.currentTime+r);if(s){const o=this.followingBufferedFrag(s);if(o){this.abortCurrentFrag();const c=o.maxStartPTS?o.maxStartPTS:o.start,u=o.duration,d=Math.max(s.end,c+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,u*(this.couldBacktrack?.5:.125)),u*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(d,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case fe.KEY_LOADING:case fe.FRAG_LOADING:case fe.FRAG_LOADING_WAITING_RETRY:case fe.PARSING:case fe.PARSED:this.state=fe.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,n){super.flushMainBuffer(e,n,this.altAudio===2?"video":null)}onMediaAttached(e,n){super.onMediaAttached(e,n);const r=n.media;Lr(r,"playing",this.onMediaPlaying),Lr(r,"seeked",this.onMediaSeeked)}onMediaDetaching(e,n){const{media:r}=this;r&&(ei(r,"playing",this.onMediaPlaying),ei(r,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,n),!n.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(D.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,n){let r=!1,i=!1;n.levels.forEach(a=>{const s=a.audioCodec;s&&(r=r||s.indexOf("mp4a.40.2")!==-1,i=i||s.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=r&&i&&!nEe(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=n.levels,this.startFragRequested=!1}onLevelLoading(e,n){const{levels:r}=this;if(!r||this.state!==fe.IDLE)return;const i=n.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=fe.WAITING_LEVEL)}onLevelLoaded(e,n){var r;const{levels:i,startFragRequested:a}=this,s=n.level,o=n.details,c=o.totalduration;if(!i){this.warn(`Levels were reset while loading level ${s}`);return}this.log(`Level ${s} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${c}`);const u=n.levelInfo,d=this.fragCurrent;d&&(this.state===fe.FRAG_LOADING||this.state===fe.FRAG_LOADING_WAITING_RETRY)&&d.level!==n.level&&d.loader&&this.abortCurrentFrag();let h=0;if(o.live||(r=u.details)!=null&&r.live){var p;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;h=this.alignPlaylists(o,u.details,(p=this.levelLastLoaded)==null?void 0:p.details)}if(u.details=o,this.levelLastLoaded=u,a||this.setStartPosition(o,h),this.hls.trigger(D.LEVEL_UPDATED,{details:o,level:s}),this.state===fe.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=fe.IDLE}a&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:n,media:r}=this;if(!r)return;const i=this.hls.liveSyncPosition,a=this.getLoadPosition(),s=e.fragmentStart,o=e.edge,c=a>=s-n.maxFragLookUpTolerance&&a<=o;if(i!==null&&r.duration>i&&(a<i||!c)){const d=n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:n.liveMaxLatencyDurationCount*e.targetduration;if((!c&&r.readyState<4||a<o-d)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),r.readyState))if(this.warn(`Playback: ${a.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var u;const h=ke.bufferInfo(r,i,0);if(!(h!=null&&(u=h.buffered)!=null&&u.length)){r.currentTime=i;return}if(h.start<=a){r.currentTime=i;return}const{nextStart:y}=ke.bufferedInfo(h.buffered,a,0);y&&(r.currentTime=y)}else r.currentTime=i}}_handleFragmentLoadProgress(e){var n;const r=e.frag,{part:i,payload:a}=e,{levels:s}=this;if(!s){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const o=s[r.level];if(!o){this.warn(`Level ${r.level} not found on progress`);return}const c=o.details;if(!c){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const u=o.videoCodec,d=c.PTSKnown||!c.live,h=(n=r.initSegment)==null?void 0:n.data,p=this._getAudioCodec(o),y=this.transmuxer=this.transmuxer||new $G(this.hls,Se.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),v=i?i.index:-1,S=v!==-1,x=new i_(r.level,r.sn,r.stats.chunkCount,a.byteLength,v,S),T=this.initPTS[r.cc];y.push(a,h,p,u,r,i,c.totalduration,d,x,T)}onAudioTrackSwitching(e,n){const r=this.hls,i=this.altAudio===2;if(Ip(n.url,r))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const s=this.fragCurrent;s&&(this.log("Switching to main audio track, cancel main fragment load"),s.abortRequests(),this.fragmentTracker.removeFragment(s)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.fragmentTracker.removeAllFragments(),r.once(D.BUFFER_FLUSHED,()=>{var s;(s=this.hls)==null||s.trigger(D.AUDIO_TRACK_SWITCHED,n)}),r.trigger(D.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}r.trigger(D.AUDIO_TRACK_SWITCHED,n)}}onAudioTrackSwitched(e,n){const r=Ip(n.url,this.hls);if(r){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r?2:0,this.tick()}onBufferCreated(e,n){const r=n.tracks;let i,a,s=!1;for(const o in r){const c=r[o];if(c.id==="main"){if(a=o,i=c,o==="video"){const u=r[o];u&&(this.videoBuffer=u.buffer)}}else s=!0}s&&i?(this.log(`Alternate track found, use ${a}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,n){const{frag:r,part:i}=n,a=r.type===Se.MAIN;if(a){if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===fe.PARSED&&(this.state=fe.IDLE);return}const o=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),Wt(r)&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}const s=this.media;s&&(!this._hasEnoughToStart&&ke.getBuffered(s).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),a&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,n){var r;if(n.fatal){this.state=fe.ERROR;return}switch(n.details){case re.FRAG_GAP:case re.FRAG_PARSING_ERROR:case re.FRAG_DECRYPT_ERROR:case re.FRAG_LOAD_ERROR:case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_ERROR:case re.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Se.MAIN,n);break;case re.LEVEL_LOAD_ERROR:case re.LEVEL_LOAD_TIMEOUT:case re.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===fe.WAITING_LEVEL&&((r=n.context)==null?void 0:r.type)===He.LEVEL&&(this.state=fe.IDLE);break;case re.BUFFER_ADD_CODEC_ERROR:case re.BUFFER_APPEND_ERROR:if(n.parent!=="main")return;this.reduceLengthAndFlushBuffer(n)&&this.resetLoadingState();break;case re.BUFFER_FULL_ERROR:if(n.parent!=="main")return;this.reduceLengthAndFlushBuffer(n)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case re.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onFragLoadEmergencyAborted(){this.state=fe.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:n}){if(n!==yt.AUDIO||!this.altAudio){const r=(n===yt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;r&&(this.afterBufferFlushed(r,n,Se.MAIN),this.tick())}}onLevelsUpdated(e,n){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=n.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const n=e.currentTime;let r=this.startPosition;if(r>=0&&n<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${n}`);return}const i=this.timelineOffset;i&&r&&(r+=i);const a=this.getLevelDetails(),s=ke.getBuffered(e),o=s.length?s.start(0):0,c=o-r,u=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||c>0&&(c<u||this.loadingParts&&c<2*((a==null?void 0:a.partTarget)||0)))&&(this.log(`adjusting start position by ${c} to match buffer start`),r+=c,this.startPosition=r),n<r&&(this.log(`seek to target start position ${r} from current time ${n} buffer start ${o}`),e.currentTime=r)}}_getAudioCodec(e){let n=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&n&&(this.log("Swapping audio codec"),n.indexOf("mp4a.40.5")!==-1?n="mp4a.40.2":n="mp4a.40.5"),n}_loadBitrateTestFrag(e,n){e.bitrateTest=!0,this._doFragLoad(e,n).then(r=>{const{hls:i}=this,a=r==null?void 0:r.frag;if(!a||this.fragContextChanged(a))return;n.fragmentError=0,this.state=fe.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const s=a.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),i.trigger(D.FRAG_LOADED,r),a.bitrateTest=!1})}_handleTransmuxComplete(e){var n;const r=this.playlistType,{hls:i}=this,{remuxResult:a,chunkMeta:s}=e,o=this.getCurrentContext(s);if(!o){this.resetWhenMissingContext(s);return}const{frag:c,part:u,level:d}=o,{video:h,text:p,id3:y,initSegment:v}=a,{details:S}=d,x=this.altAudio?void 0:a.audio;if(this.fragContextChanged(c)){this.fragmentTracker.removeFragment(c);return}if(this.state=fe.PARSING,v){if(v!=null&&v.tracks){const O=c.initSegment||c;this._bufferInitSegment(d,v.tracks,O,s),i.trigger(D.FRAG_PARSING_INIT_SEGMENT,{frag:O,id:r,tracks:v.tracks})}const T=v.initPTS,_=v.timescale,A=this.initPTS[c.cc];xe(T)&&(!A||A.baseTime!==T||A.timescale!==_)&&(this.initPTS[c.cc]={baseTime:T,timescale:_},i.trigger(D.INIT_PTS_FOUND,{frag:c,id:r,initPTS:T,timescale:_}))}if(h&&S){x&&h.type==="audiovideo"&&this.logMuxedErr(c);const T=S.fragments[c.sn-1-S.startSN],_=c.sn===S.startSN,A=!T||c.cc>T.cc;if(a.independent!==!1){const{startPTS:O,endPTS:R,startDTS:C,endDTS:L}=h;if(u)u.elementaryStreams[h.type]={startPTS:O,endPTS:R,startDTS:C,endDTS:L};else if(h.firstKeyFrame&&h.independent&&s.id===1&&!A&&(this.couldBacktrack=!0),h.dropped&&h.independent){const P=this.getMainFwdBufferInfo(),N=(P?P.end:this.getLoadPosition())+this.config.maxBufferHole,k=h.firstKeyFramePTS?h.firstKeyFramePTS:O;if(!_&&N<k-this.config.maxBufferHole&&!A){this.backtrack(c);return}else A&&(c.gap=!0);c.setElementaryStreamInfo(h.type,c.start,R,c.start,L,!0)}else _&&O-(S.appliedTimelineOffset||0)>vm&&(c.gap=!0);c.setElementaryStreamInfo(h.type,O,R,C,L),this.backtrackFragment&&(this.backtrackFragment=c),this.bufferFragmentData(h,c,u,s,_||A)}else if(_||A)c.gap=!0;else{this.backtrack(c);return}}if(x){const{startPTS:T,endPTS:_,startDTS:A,endDTS:O}=x;u&&(u.elementaryStreams[yt.AUDIO]={startPTS:T,endPTS:_,startDTS:A,endDTS:O}),c.setElementaryStreamInfo(yt.AUDIO,T,_,A,O),this.bufferFragmentData(x,c,u,s)}if(S&&y!=null&&(n=y.samples)!=null&&n.length){const T={id:r,frag:c,details:S,samples:y.samples};i.trigger(D.FRAG_PARSING_METADATA,T)}if(S&&p){const T={id:r,frag:c,details:S,samples:p.samples};i.trigger(D.FRAG_PARSING_USERDATA,T)}}logMuxedErr(e){this.warn(`${Wt(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,n,r,i){if(this.state!==fe.PARSING)return;this.audioOnly=!!n.audio&&!n.video,this.altAudio&&!this.audioOnly&&(delete n.audio,n.audiovideo&&this.logMuxedErr(r));const{audio:a,video:s,audiovideo:o}=n;if(a){const u=e.audioCodec;let d=fm(a.codec,u);d==="mp4a"&&(d="mp4a.40.5");const h=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){d&&(d.indexOf("mp4a.40.5")!==-1?d="mp4a.40.2":d="mp4a.40.5");const p=a.metadata;p&&"channelCount"in p&&(p.channelCount||1)!==1&&h.indexOf("firefox")===-1&&(d="mp4a.40.5")}d&&d.indexOf("mp4a.40.5")!==-1&&h.indexOf("android")!==-1&&a.container!=="audio/mpeg"&&(d="mp4a.40.2",this.log(`Android: force audio codec to ${d}`)),u&&u!==d&&this.log(`Swapping manifest audio codec "${u}" for "${d}"`),a.levelCodec=d,a.id=Se.MAIN,this.log(`Init audio buffer, container:${a.container}, codecs[selected/level/parsed]=[${d||""}/${u||""}/${a.codec}]`),delete n.audiovideo}if(s){s.levelCodec=e.videoCodec,s.id=Se.MAIN;const u=s.codec;if((u==null?void 0:u.length)===4)switch(u){case"hvc1":case"hev1":s.codec="hvc1.1.6.L120.90";break;case"av01":s.codec="av01.0.04M.08";break;case"avc1":s.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${s.container}, codecs[level/parsed]=[${e.videoCodec||""}/${u}]${s.codec!==u?" parsed-corrected="+s.codec:""}${s.supplemental?" supplemental="+s.supplemental:""}`),delete n.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete n.video,delete n.audio);const c=Object.keys(n);if(c.length){if(this.hls.trigger(D.BUFFER_CODECS,n),!this.hls)return;c.forEach(u=>{const h=n[u].initSegment;h!=null&&h.byteLength&&this.hls.trigger(D.BUFFER_APPENDING,{type:u,data:h,frag:r,part:null,chunkMeta:i,parent:r.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Se.MAIN)}get maxBufferLength(){const{levels:e,level:n}=this,r=e==null?void 0:e[n];return r?this.getMaxBufferLength(r.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=fe.IDLE}checkFragmentChanged(){const e=this.media;let n=null;if(e&&e.readyState>1&&e.seeking===!1){const r=e.currentTime;if(ke.isBuffered(e,r)?n=this.getAppendedFrag(r):ke.isBuffered(e,r+.1)&&(n=this.getAppendedFrag(r+.1)),n){this.backtrackFragment=null;const i=this.fragPlaying,a=n.level;(!i||n.sn!==i.sn||i.level!==a)&&(this.fragPlaying=n,this.hls.trigger(D.FRAG_CHANGED,{frag:n}),(!i||i.level!==a)&&this.hls.trigger(D.LEVEL_SWITCHED,{level:a}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const n=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return xe(n)?this.getAppendedFrag(n):null}get currentProgramDateTime(){var e;const n=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(xe(n)){const r=this.getLevelDetails(),i=this.currentFrag||(r?eo(null,r.fragments,n):null);if(i){const a=i.programDateTime;if(a!==null){const s=a+(n-i.start)*1e3;return new Date(s)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class aEe{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[r].loader;if(i){var n;if(e&&e!==((n=i.context)==null?void 0:n.frag.type))return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e];(n.mediaKeySessionContext||n.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e].loader;n&&n.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,n=re.KEY_LOAD_ERROR,r,i,a){return new Ki({type:Te.NETWORK_ERROR,details:n,fatal:!1,frag:e,response:a,error:r,networkDetails:i})}loadClear(e,n,r){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(n.length)for(let i=0,a=n.length;i<a;i++){const s=n[i];if(e.cc<=s.cc&&(!Wt(e)||!Wt(s)||e.sn<s.sn)||!r&&i==a-1)return this.emeController.selectKeySystemFormat(s).then(o=>{if(!this.emeController)return;s.setKeyFormat(o);const c=V1(o);if(c)return this.emeController.getKeySystemAccess([c])})}if(this.config.requireKeySystemAccessOnStart){const i=hm(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(n=>this.loadInternal(e,n)):this.loadInternal(e)}loadInternal(e,n){var r,i;n&&e.setKeyFormat(n);const a=e.decryptdata;if(!a){const u=new Error(n?`Expected frag.decryptdata to be defined after setting format ${n}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,re.KEY_LOAD_ERROR,u))}const s=a.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,re.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${s}"`)));let o=this.keyUriToKeyInfo[s];if((r=o)!=null&&r.decryptdata.key)return a.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if((i=o)!=null&&i.keyLoadPromise){var c;switch((c=o.mediaKeySessionContext)==null?void 0:c.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then(u=>(a.key=u.keyInfo.decryptdata.key,{frag:e,keyInfo:o}))}}switch(o=this.keyUriToKeyInfo[s]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return a.keyFormat==="identity"?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,re.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${a.method}"`)))}}loadKeyEME(e,n){const r={frag:n,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(r);if(i)return(e.keyLoadPromise=i.then(a=>(e.mediaKeySessionContext=a,r))).catch(a=>{throw e.keyLoadPromise=null,a})}return Promise.resolve(r)}loadKeyHTTP(e,n){const r=this.config,i=r.loader,a=new i(r);return n.keyLoader=e.loader=a,e.keyLoadPromise=new Promise((s,o)=>{const c={keyInfo:e,frag:n,responseType:"arraybuffer",url:e.decryptdata.uri},u=r.keyLoadPolicy.default,d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(p,y,v,S)=>{const{frag:x,keyInfo:T,url:_}=v;if(!x.decryptdata||T!==this.keyUriToKeyInfo[_])return o(this.createKeyLoadError(x,re.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),S));T.decryptdata.key=x.decryptdata.key=new Uint8Array(p.data),x.keyLoader=null,T.loader=null,s({frag:x,keyInfo:T})},onError:(p,y,v,S)=>{this.resetLoader(y),o(this.createKeyLoadError(n,re.KEY_LOAD_ERROR,new Error(`HTTP Error ${p.code} loading key ${p.text}`),v,ht({url:c.url,data:void 0},p)))},onTimeout:(p,y,v)=>{this.resetLoader(y),o(this.createKeyLoadError(n,re.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),v))},onAbort:(p,y,v)=>{this.resetLoader(y),o(this.createKeyLoadError(n,re.INTERNAL_ABORTED,new Error("key loading aborted"),v))}};a.load(c,d,h)})}resetLoader(e){const{frag:n,keyInfo:r,url:i}=e,a=r.loader;n.keyLoader===a&&(n.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[i],a&&a.destroy()}}function xB(t){const{type:e}=t;switch(e){case He.AUDIO_TRACK:return Se.AUDIO;case He.SUBTITLE_TRACK:return Se.SUBTITLE;default:return Se.MAIN}}function GE(t,e){let n=t.url;return(n===void 0||n.indexOf("data:")===0)&&(n=e.url),n}class sEe{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(D.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(D.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const n=this.hls.config,r=n.pLoader,i=n.loader,a=r||i,s=new a(n);return this.loaders[e.type]=s,s}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const n=this.loaders[e];n&&n.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,n){const{url:r}=n;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:He.MANIFEST,url:r,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,n){const{id:r,level:i,pathwayId:a,url:s,deliveryDirectives:o,levelInfo:c}=n;this.load({id:r,level:i,pathwayId:a,responseType:"text",type:He.LEVEL,url:s,deliveryDirectives:o,levelOrTrack:c})}onAudioTrackLoading(e,n){const{id:r,groupId:i,url:a,deliveryDirectives:s,track:o}=n;this.load({id:r,groupId:i,level:null,responseType:"text",type:He.AUDIO_TRACK,url:a,deliveryDirectives:s,levelOrTrack:o})}onSubtitleTrackLoading(e,n){const{id:r,groupId:i,url:a,deliveryDirectives:s,track:o}=n;this.load({id:r,groupId:i,level:null,responseType:"text",type:He.SUBTITLE_TRACK,url:a,deliveryDirectives:s,levelOrTrack:o})}onLevelsUpdated(e,n){const r=this.loaders[He.LEVEL];if(r){const i=r.context;i&&!n.levels.some(a=>a===i.levelOrTrack)&&(r.abort(),delete this.loaders[He.LEVEL])}}load(e){var n;const r=this.hls.config;let i=this.getInternalLoader(e);if(i){const u=this.hls.logger,d=i.context;if(d&&d.levelOrTrack===e.levelOrTrack&&(d.url===e.url||d.deliveryDirectives&&!e.deliveryDirectives)){d.url===e.url?u.log(`[playlist-loader]: ignore ${e.url} ongoing request`):u.log(`[playlist-loader]: ignore ${e.url} in favor of ${d.url}`);return}u.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let a;if(e.type===He.MANIFEST?a=r.manifestLoadPolicy.default:a=ut({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),xe((n=e.deliveryDirectives)==null?void 0:n.part)){let u;if(e.type===He.LEVEL&&e.level!==null?u=this.hls.levels[e.level].details:e.type===He.AUDIO_TRACK&&e.id!==null?u=this.hls.audioTracks[e.id].details:e.type===He.SUBTITLE_TRACK&&e.id!==null&&(u=this.hls.subtitleTracks[e.id].details),u){const d=u.partTarget,h=u.targetduration;if(d&&h){const p=Math.max(d*3,h*.8)*1e3;a=ut({},a,{maxTimeToFirstByteMs:Math.min(p,a.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(p,a.maxTimeToFirstByteMs)})}}}const s=a.errorRetry||a.timeoutRetry||{},o={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},c={onSuccess:(u,d,h,p)=>{const y=this.getInternalLoader(h);this.resetInternalLoader(h.type);const v=u.data;if(v.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(u,h,new Error("no EXTM3U delimiter"),p||null,d);return}d.parsing.start=performance.now(),vi.isMediaPlaylist(v)||h.type!==He.MANIFEST?this.handleTrackOrLevelPlaylist(u,d,h,p||null,y):this.handleMasterPlaylist(u,d,h,p)},onError:(u,d,h,p)=>{this.handleNetworkError(d,h,!1,u,p)},onTimeout:(u,d,h)=>{this.handleNetworkError(d,h,!0,void 0,u)}};i.load(e,o,c)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:n},forceStartLoad:r}=this.hls;(e||r)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${n}`),this.hls.startLoad(n))}handleMasterPlaylist(e,n,r,i){const a=this.hls,s=e.data,o=GE(e,r),c=vi.parseMasterPlaylist(s,o);if(c.playlistParsingError){this.handleManifestParsingError(e,r,c.playlistParsingError,i,n);return}const{contentSteering:u,levels:d,sessionData:h,sessionKeys:p,startTimeOffset:y,variableList:v}=c;this.variableList=v;const{AUDIO:S=[],SUBTITLES:x,"CLOSED-CAPTIONS":T}=vi.parseMasterPlaylistMedia(s,o,c);S.length&&!S.some(A=>!A.url)&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),S.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Ct({}),bitrate:0,url:""})),a.trigger(D.MANIFEST_LOADED,{levels:d,audioTracks:S,subtitles:x,captions:T,contentSteering:u,url:o,stats:n,networkDetails:i,sessionData:h,sessionKeys:p,startTimeOffset:y,variableList:v})}handleTrackOrLevelPlaylist(e,n,r,i,a){const s=this.hls,{id:o,level:c,type:u}=r,d=GE(e,r),h=xe(c)?c:xe(o)?o:0,p=xB(r),y=vi.parseLevelPlaylist(e.data,d,h,p,0,this.variableList);if(u===He.MANIFEST){const v={attrs:new Ct({}),bitrate:0,details:y,name:"",url:d};y.requestScheduled=n.loading.start+gG(y,0),s.trigger(D.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:d,stats:n,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}n.parsing.end=performance.now(),r.levelDetails=y,this.handlePlaylistLoaded(y,e,n,r,i,a)}handleManifestParsingError(e,n,r,i,a){this.hls.trigger(D.ERROR,{type:Te.NETWORK_ERROR,details:re.MANIFEST_PARSING_ERROR,fatal:n.type===He.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:n,networkDetails:i,stats:a})}handleNetworkError(e,n,r=!1,i,a){let s=`A network ${r?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===He.LEVEL?s+=`: ${e.level} id: ${e.id}`:(e.type===He.AUDIO_TRACK||e.type===He.SUBTITLE_TRACK)&&(s+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(s);this.hls.logger.warn(`[playlist-loader]: ${s}`);let c=re.UNKNOWN,u=!1;const d=this.getInternalLoader(e);switch(e.type){case He.MANIFEST:c=r?re.MANIFEST_LOAD_TIMEOUT:re.MANIFEST_LOAD_ERROR,u=!0;break;case He.LEVEL:c=r?re.LEVEL_LOAD_TIMEOUT:re.LEVEL_LOAD_ERROR,u=!1;break;case He.AUDIO_TRACK:c=r?re.AUDIO_TRACK_LOAD_TIMEOUT:re.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case He.SUBTITLE_TRACK:c=r?re.SUBTITLE_TRACK_LOAD_TIMEOUT:re.SUBTITLE_LOAD_ERROR,u=!1;break}d&&this.resetInternalLoader(e.type);const h={type:Te.NETWORK_ERROR,details:c,fatal:u,url:e.url,loader:d,context:e,error:o,networkDetails:n,stats:a};if(i){const p=(n==null?void 0:n.url)||e.url;h.response=ht({url:p,data:void 0},i)}this.hls.trigger(D.ERROR,h)}handlePlaylistLoaded(e,n,r,i,a,s){const o=this.hls,{type:c,level:u,id:d,groupId:h,deliveryDirectives:p}=i,y=GE(n,i),v=xB(i),S=typeof i.level=="number"&&v===Se.MAIN?u:void 0;if(!e.fragments.length){const T=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger(D.ERROR,{type:Te.NETWORK_ERROR,details:re.LEVEL_EMPTY_ERROR,fatal:!1,url:y,error:T,reason:T.message,response:n,context:i,level:S,parent:v,networkDetails:a,stats:r});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const x=e.playlistParsingError;if(x){if(this.hls.logger.warn(x),!o.config.ignorePlaylistParsingErrors){o.trigger(D.ERROR,{type:Te.NETWORK_ERROR,details:re.LEVEL_PARSING_ERROR,fatal:!1,url:y,error:x,reason:x.message,response:n,context:i,level:S,parent:v,networkDetails:a,stats:r});return}e.playlistParsingError=null}switch(e.live&&s&&(s.getCacheAge&&(e.ageHeader=s.getCacheAge()||0),(!s.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),c){case He.MANIFEST:case He.LEVEL:o.trigger(D.LEVEL_LOADED,{details:e,levelInfo:i.levelOrTrack||o.levels[0],level:S||0,id:d||0,stats:r,networkDetails:a,deliveryDirectives:p,withoutMultiVariant:c===He.MANIFEST});break;case He.AUDIO_TRACK:o.trigger(D.AUDIO_TRACK_LOADED,{details:e,track:i.levelOrTrack,id:d||0,groupId:h||"",stats:r,networkDetails:a,deliveryDirectives:p});break;case He.SUBTITLE_TRACK:o.trigger(D.SUBTITLE_TRACK_LOADED,{details:e,track:i.levelOrTrack,id:d||0,groupId:h||"",stats:r,networkDetails:a,deliveryDirectives:p});break}}}class Wi{static get version(){return Bf}static isMSESupported(){return cV()}static isSupported(){return tEe()}static getMediaSource(){return Za()}static get Events(){return D}static get MetadataSchema(){return ur}static get ErrorTypes(){return Te}static get ErrorDetails(){return re}static get DefaultConfig(){return Wi.defaultConfig?Wi.defaultConfig:VSe}static set DefaultConfig(e){Wi.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new o_,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const n=this.logger=_ye(e.debug||!1,"Hls instance",e.assetPlayerId),r=this.config=HSe(Wi.DefaultConfig,e,n);this.userConfig=e,r.progressive&&zSe(r,n);const{abrController:i,bufferController:a,capLevelController:s,errorController:o,fpsController:c}=r,u=new o(this),d=this.abrController=new i(this),h=new yve(this),p=r.interstitialsController,y=p?this.interstitialsController=new p(this,Wi):null,v=this.bufferController=new a(this,h),S=this.capLevelController=new s(this),x=new c(this),T=new sEe(this),_=r.contentSteeringController,A=_?new _(this):null,O=this.levelController=new eEe(this,A),R=new ZSe(this),C=new aEe(this.config),L=this.streamController=new iEe(this,h,C),P=this.gapController=new XSe(this,h);S.setStreamController(L),x.setStreamController(L);const N=[T,O,L];y&&N.splice(1,0,y),A&&N.splice(1,0,A),this.networkControllers=N;const k=[d,v,P,S,x,R,h];this.audioTrackController=this.createController(r.audioTrackController,N);const M=r.audioStreamController;M&&N.push(this.audioStreamController=new M(this,h,C)),this.subtitleTrackController=this.createController(r.subtitleTrackController,N);const G=r.subtitleStreamController;G&&N.push(this.subtititleStreamController=new G(this,h,C)),this.createController(r.timelineController,k),C.emeController=this.emeController=this.createController(r.emeController,k),this.cmcdController=this.createController(r.cmcdController,k),this.latencyController=this.createController(JSe,k),this.coreComponents=k,N.push(u);const K=u.onErrorOut;typeof K=="function"&&this.on(D.ERROR,K,u),this.on(D.MANIFEST_LOADED,T.onManifestLoaded,T)}createController(e,n){if(e){const r=new e(this);return n&&n.push(r),r}return null}on(e,n,r=this){this._emitter.on(e,n,r)}once(e,n,r=this){this._emitter.once(e,n,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,n,r=this,i){this._emitter.off(e,n,r,i)}listeners(e){return this._emitter.listeners(e)}emit(e,n,r){return this._emitter.emit(e,n,r)}trigger(e,n){if(this.config.debug)return this.emit(e,e,n);try{return this.emit(e,e,n)}catch(r){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const i=e===D.ERROR;this.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.INTERNAL_EXCEPTION,fatal:i,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(D.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(n=>n.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(n=>n.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const a=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(D.ERROR,{type:Te.OTHER_ERROR,details:re.ATTACH_MEDIA_ERROR,fatal:!0,error:a});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const n="media"in e,r=n?e.media:e,i=n?e:{media:r};this._media=r,this.trigger(D.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(D.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(D.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const n=this.media,r=this._url,i=this._url=Qw.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),n&&r&&(r!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(n)),this.trigger(D.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,n){this.logger.log(`startLoad(${e+(n?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let r=0;r<this.networkControllers.length&&(this.networkControllers[r].startLoad(e,n),!(!this.started||!this.networkControllers));r++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Se.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Se.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Se.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,n=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),n&&this.startLoad(n))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=Xbe()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const n=!!e;n!==this.config.capLevelToPlayerSize&&(n?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=n)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){tve(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:n}}=this;if(!e)return 0;const r=e.length;for(let i=0;i<r;i++)if(e[i].maxBitrate>=n)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:n,maxHdcpLevel:r}=this;let i;if(n===-1&&e!=null&&e.length?i=e.length-1:i=n,r)for(let a=i;a--;){const s=e[a].attrs["HDCP-LEVEL"];if(s&&s<=r)return a}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var n;return((n=this.audioTrackController)==null?void 0:n.setAudioOption(e))||null}setSubtitleOption(e){var n;return((n=this.subtitleTrackController)==null?void 0:n.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const n=this.audioTrackController;n&&(n.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const n=this.subtitleTrackController;n&&(n.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const n=this.subtitleTrackController;n&&(n.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,n=this.allAudioTracks){const r=aG(n);return rG(e,r,navigator.mediaCapabilities)}}Wi.defaultConfig=void 0;const oEe=({src:t,...e})=>{const n=B.useRef(null);return B.useEffect(()=>{if(n.current)if(Wi.isSupported()&&t.includes(".m3u8")){const r=new Wi;return r.loadSource(t),r.attachMedia(n.current),()=>{r.destroy()}}else n.current.src=t},[t]),b.jsx("video",{ref:n,controls:!0,autoPlay:!0,className:"w-full h-64 bg-black rounded",...e,children:"Your browser does not support the video tag."})},lEe=()=>{const t=Vt(),{roomNum:e}=fa(),{matchDetail:n,loading:r,error:i}=qt(h=>h.sport),[a,s]=B.useState(null),[o,c]=B.useState("");B.useEffect(()=>{t(pye(e))},[t,e]);const u=h=>{s(h)},d=async h=>{try{await navigator.clipboard.writeText(h),c("Copied!"),setTimeout(()=>c(""),1500)}catch{c("Failed to copy"),setTimeout(()=>c(""),1500)}};return b.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-100 to-white rounded-lg shadow-md max-w-full sm:max-w-3xl mx-auto",children:[b.jsx("h1",{className:"text-3xl font-extrabold text-blue-700 mb-8 text-center tracking-tight",children:"Match Streams"}),r?b.jsxs("div",{className:"flex justify-center items-center h-32",children:[b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"}),b.jsx("span",{className:"text-lg text-gray-700",children:"Loading streams..."})]}):i?b.jsx("div",{className:"text-center text-red-500",children:i.message||"Failed to load match details."}):n.length===0?b.jsx("div",{className:"text-center text-gray-500 py-8",children:"No streams found for this match."}):b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:n.map((h,p)=>b.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg flex flex-col gap-4 border border-blue-100 hover:shadow-2xl transition duration-200",children:[b.jsx("span",{className:"font-bold text-lg text-blue-800 mb-2",children:h.name}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("button",{onClick:()=>u(h),className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 transition",children:" Watch"}),b.jsx("button",{onClick:()=>d(h.stream_url),className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium shadow hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400 transition",title:"Copy link",children:" Copy Link"}),o&&b.jsx("span",{className:"text-green-500 text-xs self-center",children:o})]}),b.jsxs("span",{className:"text-xs text-gray-400 mt-2",children:["Referer: ",h.referer]})]},p))}),a&&b.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",children:[b.jsx("button",{onClick:()=>s(null),className:"absolute top-6 right-8 text-white bg-black bg-opacity-40 rounded-full p-3 text-3xl hover:bg-opacity-70 focus:outline-none focus:ring-2 focus:ring-white z-50",title:"Close","aria-label":"Close player",children:""}),b.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.stream_url.includes(".m3u8")?b.jsx(oEe,{src:a.stream_url,className:"w-[90vw] h-[80vh] bg-black rounded-2xl shadow-2xl"}):b.jsx("video",{src:a.stream_url,controls:!0,autoPlay:!0,className:"w-[90vw] h-[80vh] bg-black rounded-2xl shadow-2xl",children:"Your browser does not support the video tag."})})]})]})};function uEe({open:t,onClose:e,children:n}){return t?b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm p-4",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 w-full max-w-md",children:[n,b.jsx("button",{className:"mt-6 w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",onClick:e,children:"Close"})]})}):null}const cEe=()=>{const t=[{key:"1m",label:"1 Month",type:"1month",data:"bronze",reward:"5d"},{key:"3m",label:"3 Months",type:"3months",data:"silver",reward:"20d"},{key:"5m",label:"5 Months",type:"5months",data:"gold",reward:"35d"},{key:"8m",label:"8 Months",type:"8months",data:"diamond",reward:"55d"},{key:"1y",label:"1 Year",type:"1year",data:"platinum",reward:"80d"}],[e]=a9(),n=e.get("api_key")||"",[r,i]=B.useState(null),[a,s]=B.useState(!1),[o,c]=B.useState(null),[u,d]=B.useState(!1),[h,p]=B.useState(!1),[y,v]=B.useState(null),S=Array.isArray(r==null?void 0:r.history)?r.history:[],x=S.filter(A=>A.reward_granted),T=S.map(A=>{var O,R;return(R=(O=A.subscription)==null?void 0:O.type)==null?void 0:R.toLowerCase()});B.useEffect(()=>{n&&(s(!0),c(null),fetch(`/api/subscription-history?api_token=${n}`).then(A=>A.ok?A.json():Promise.reject(new Error("Fetch failed"))).then(A=>i(A)).catch(A=>c(A.message)).finally(()=>s(!1)))},[n]);const _=async A=>{if(!n){v(b.jsx("p",{className:"text-red-500",children:"API key is missing"})),p(!0);return}d(!0);try{const O=await fetch(`/api/devices/claim-reward?api_token=${n}&subscription_key=${A}`,{method:"POST"});if(!O.ok)throw new Error("Claim request failed");const R=await O.json();v(b.jsxs("div",{children:[b.jsx("h2",{className:"text-xl font-semibold mb-2",children:" Claim Result"}),b.jsx("div",{className:"text-base p-4 bg-gray-100 dark:bg-gray-700 rounded text-green-700 dark:text-green-300",children:R.message||"Reward claimed successfully!"})]})),p(!0);const L=await(await fetch(`/api/subscription-history?api_token=${n}`)).json();i(L)}catch(O){v(b.jsx("p",{className:"text-red-500",children:O.message})),p(!0)}finally{d(!1)}};return b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-indigo-100 p-4 md:p-6",children:b.jsxs("div",{className:"max-w-4xl mx-auto bg-white dark:bg-gray-900 rounded-3xl shadow-xl p-6 md:p-10",children:[b.jsxs("header",{className:"text-center mb-6 md:mb-10",children:[b.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-indigo-600 dark:text-indigo-400",children:" Reward Dashboard"}),b.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:"Manage and claim your subscription rewards"})]}),b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mb-10",children:t.map(A=>{const R={bronze:"bg-yellow-500 text-white",silver:"bg-gray-400 text-white",gold:"bg-yellow-400 text-white",diamond:"bg-blue-400 text-white",platinum:"bg-gray-700 text-white"}[A.data]||"bg-gray-300 text-white",C=S.find(N=>{var k,M;return((M=(k=N.subscription)==null?void 0:k.type)==null?void 0:M.toLowerCase())===A.type}),L=T.includes(A.type),P=C==null?void 0:C.reward_granted;return b.jsxs("div",{className:`relative rounded-xl shadow-lg flex flex-col items-center border-2 overflow-hidden transition-all duration-200
                  ${L?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900 hover:scale-105 hover:shadow-xl":"border-gray-200 bg-gray-100 dark:bg-gray-800 opacity-60 grayscale"}`,style:L?{}:{pointerEvents:"none"},children:[b.jsx("div",{className:`absolute top-3 -left-10 w-36 h-8 flex items-center justify-center transform -rotate-45 z-10 ${R}`,style:{fontStyle:"italic",letterSpacing:"0.5px",boxShadow:"0 2px 8px rgba(0,0,0,0.12)",borderTopLeftRadius:"0.75rem",borderBottomRightRadius:"0.75rem"},children:b.jsx("span",{className:"text-xs font-semibold w-full text-center tracking-wide",children:A.data.charAt(0).toUpperCase()+A.data.slice(1)})}),b.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 w-full",children:[b.jsx("div",{className:"text-2xl font-bold mb-2 text-indigo-600 dark:text-indigo-400",children:A.label}),b.jsxs("div",{className:"mb-2 text-sm text-gray-500",children:["Reward: ",b.jsx("span",{className:"font-semibold",children:A.reward})]}),b.jsx("div",{className:"mb-3",children:L?P?b.jsx("span",{className:"px-3 py-1 rounded-full bg-green-200 text-green-800 text-xs font-semibold",children:"Claimed"}):b.jsx("button",{className:"px-4 py-1 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition text-sm font-semibold",disabled:u,onClick:()=>_(C==null?void 0:C.subscription_key),children:u?"Claiming...":"Claim"}):b.jsx("span",{className:"px-3 py-1 rounded-full bg-gray-200 text-gray-600 text-xs font-semibold",children:"Inactive"})})]})]},A.key)})}),a&&b.jsx("div",{className:"text-indigo-600 text-center mb-4",children:"Loading data..."}),o&&b.jsxs("div",{className:"text-red-500 text-center mb-4",children:["Error: ",o]}),r&&b.jsxs("section",{className:"space-y-8",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl font-semibold text-indigo-600 dark:text-indigo-400 mb-4",children:"Usage History"}),S.length===0?b.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 p-4 rounded-lg text-center mb-8",children:[b.jsx("span",{role:"img","aria-label":"warning",className:"mr-2",children:""}),"You are not eligible to get a reward."]}):b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"w-full table-auto border-collapse",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"bg-indigo-100 dark:bg-indigo-900",children:[b.jsx("th",{className:"px-3 py-2 text-left text-xs md:text-sm font-medium text-indigo-700",children:"Type"}),b.jsx("th",{className:"px-3 py-2 text-left text-xs md:text-sm font-medium text-indigo-700",children:"Reward Status"}),b.jsx("th",{className:"px-3 py-2 text-left text-xs md:text-sm font-medium text-indigo-700",children:"Action"})]})}),b.jsx("tbody",{children:S.map(A=>{var O;return b.jsxs("tr",{className:"hover:bg-indigo-50 dark:hover:bg-indigo-800 transition",children:[b.jsx("td",{className:"px-3 py-2 font-mono text-indigo-800 dark:text-indigo-200 text-sm md:text-base",children:(O=A.subscription)==null?void 0:O.type}),b.jsx("td",{className:"px-3 py-2",children:b.jsx("span",{className:`px-2 md:px-3 py-1 rounded-full text-xs md:text-sm font-semibold ${A.reward_granted?"bg-green-200 text-green-800":"bg-gray-200 text-gray-600"}`,children:A.reward_granted?"Granted":"Not Granted"})}),b.jsx("td",{className:"px-3 py-2",children:A.reward_granted?b.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-xs md:text-sm",children:""}):b.jsx("button",{className:"px-3 md:px-4 py-1 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50 text-xs md:text-sm",disabled:u,onClick:()=>_(A.subscription_key),children:u?"Claiming...":"Claim"})})]},A.id)})})]})})]}),x.length>0&&b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl font-semibold text-green-600 dark:text-green-400 mb-4",children:"Claimed Rewards"}),b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:x.map(A=>{var O;return b.jsxs("div",{className:"bg-green-50 dark:bg-green-900 p-4 rounded-lg shadow",children:[b.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-200",children:(O=A.subscription)==null?void 0:O.type}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reward claimed successfully!"})]},A.id)})})]})]}),b.jsx(uEe,{open:h,onClose:()=>p(!1),children:y})]})})},fEe=()=>b.jsxs("div",{className:"min-h-full flex flex-col items-center justify-center bg-gray-50 p-6 text-center",children:[b.jsx("h1",{className:"text-9xl font-extrabold text-gray-800 mb-4",children:"404"}),b.jsx("p",{className:"text-2xl font-semibold text-gray-600 mb-6",children:"Page is currently under maintenance"}),b.jsx("p",{className:"text-lg text-gray-500 mb-8 max-w-lg",children:"We are working hard to bring you the best experience. Please check back later."}),b.jsx("img",{src:"https://media.tenor.com/K5wSW-CGK9wAAAAj/maintenance-under-maintenance.gif",alt:"Maintenance",className:"w-64 h-64 mb-6"})]}),dEe=async()=>{var t,e;try{return(await Xe.get("/announces")).data}catch(n){throw console.error("Error fetching suggestions:",((t=n.response)==null?void 0:t.data)||n.message),((e=n.response)==null?void 0:e.data)||n.message}},hEe=async t=>{var e,n;try{return(await Xe.post("/announces",t)).data}catch(r){throw console.error("Error creating announce:",((e=r.response)==null?void 0:e.data)||r.message),((n=r.response)==null?void 0:n.data)||r.message}},mEe=async(t,e)=>{var n,r;try{return(await Xe.put(`/announces/${t}`,e)).data}catch(i){throw console.error(`Error updating announce with ID ${t}:`,((n=i.response)==null?void 0:n.data)||i.message),((r=i.response)==null?void 0:r.data)||i.message}},bB=()=>async t=>{t({type:K$});try{const e=await dEe();t({type:Y$,payload:e})}catch(e){t({type:W$,payload:e})}},pEe=t=>async e=>{e({type:X$});try{const n=await hEe(t);return e({type:CREATE_ANNOUNCE_SUCCESS,payload:n}),Promise.resolve(n)}catch(n){return e({type:CREATE_ANNOUNCE_FAILURE,payload:n}),Promise.reject(n)}},gEe=(t,e)=>async n=>{n({type:Q$});try{const r=await mEe(t,e);return n({type:Z$,payload:r}),Promise.resolve(r)}catch(r){return n({type:J$,payload:r}),Promise.reject(r)}},yEe=({initialData:t={},onDone:e,onCancel:n})=>{const r=Vt(),{loading:i,error:a}=qt(p=>p.announce),[s,o]=B.useState({title:"",category:"",link:"",imgUrl:""}),c=!!t.id;B.useEffect(()=>{o({title:t.title||"",category:t.category||"",link:t.link||"",imgUrl:t.imgUrl||""})},[t]);const u=p=>{const{name:y,value:v}=p.target;o(S=>({...S,[y]:v})),o(S=>({...S,link:v}))},d=async p=>{p.preventDefault();try{c?await r(gEe(t.id,s)):await r(pEe(s)),e()}catch{}},h=s.category==="announce";return b.jsxs("form",{onSubmit:d,className:"space-y-4 bg-white p-6 rounded-2xl shadow-md",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),b.jsx("input",{type:"text",name:"title",value:s.title,onChange:u,required:!0,className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),b.jsx("input",{type:"text",name:"category",value:s.category,onChange:u,required:!0,readOnly:c,className:`w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500
            ${c?"bg-gray-100 cursor-not-allowed":""}`})]}),!h&&b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link (optional)"}),b.jsx("input",{type:"url",name:"link",value:s.link,onChange:u,placeholder:"https://example.com",className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image URL (optional)"}),b.jsx("input",{type:"url",name:"imgUrl",value:s.imgUrl,onChange:u,placeholder:"https://...",className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),b.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[n&&b.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 focus:outline-none",children:"Cancel"}),b.jsx("button",{type:"submit",disabled:i,className:"px-5 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none disabled:opacity-50",children:c?"Update":"Create"})]}),a&&b.jsx("p",{className:"mt-2 text-sm text-red-600",children:a})]})},vEe=()=>{var v;const t=Vt(),{announces:e,loading:n,error:r}=qt(S=>S.announce);B.useEffect(()=>{t(bB())},[t]);const i=B.useMemo(()=>e.reduce((S,x)=>{var _;const T=((_=x.category)==null?void 0:_.trim())||"Uncategorized";return S[T]||(S[T]=[]),S[T].push(x),S},{}),[e]),a=B.useMemo(()=>Object.keys(i),[i]),[s,o]=B.useState(a[0]||"");B.useEffect(()=>{a.length&&!a.includes(s)&&o(a[0])},[a,s]);const[c,u]=B.useState(null),d=()=>u({category:s}),h=S=>u(S),p=()=>u(null),y=()=>{p(),t(bB())};return n?b.jsx("p",{className:"py-12 text-center text-gray-500",children:"Loading"}):r?b.jsxs("p",{className:"py-12 text-center text-red-500",children:["Error: ",r]}):b.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-10",children:[b.jsx("div",{className:"flex items-center justify-between mb-6",children:b.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"Announcements"})}),b.jsx("div",{className:"border-b border-gray-200 mb-8",children:b.jsx("nav",{className:"-mb-px flex space-x-8",children:a.map(S=>{const x=S===s;return b.jsx("button",{onClick:()=>o(S),className:`
                  whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
                  focus:outline-none transition
                  ${x?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:S.charAt(0).toUpperCase()+S.slice(1)},S)})})}),b.jsxs("section",{className:"mb-8",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:s.charAt(0).toUpperCase()+s.slice(1)}),b.jsx("button",{onClick:d,className:"inline-flex items-center px-4 py-2 bg-green-500 text-white text-sm font-medium rounded-md hover:bg-green-600 transition",children:"+ Add Announce"})]}),b.jsxs("div",{className:"grid gap-8 sm:grid-cols-2",children:[(v=i[s])==null?void 0:v.map(S=>{var x;return b.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg hover:shadow-2xl transition-shadow duration-300 flex flex-col",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:S.title}),((x=S.imgUrl)==null?void 0:x.trim())&&b.jsx("div",{className:"mb-4",children:b.jsx("img",{src:S.imgUrl,alt:S.title,className:"w-full h-40 object-cover rounded-lg"})}),b.jsx("div",{className:"mt-auto flex justify-end gap-0.5",children:b.jsx("button",{onClick:()=>h(S),className:"px-3 py-1 text-sm bg-indigo-500 text-white rounded hover:bg-indigo-600 transition",children:"Edit"})})]},S.id)}),(!i[s]||!i[s].length)&&b.jsx("p",{className:"col-span-full text-center text-gray-500",children:"No announcements yet."})]})]}),c&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:p,children:b.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-lg mx-4",onClick:S=>S.stopPropagation(),children:[b.jsx("h3",{className:"text-xl font-semibold mb-4",children:c.id?"Edit Announce":`Add to ${s}`}),b.jsx(yEe,{initialData:c,onDone:y,onCancel:p})]})})]})},xEe=()=>{const t=Vt();return B.useEffect(()=>{t(dW())},[t]),b.jsx(e9,{children:b.jsxs(C7,{children:[b.jsx(gt,{path:"/login",element:b.jsx(QJ,{})}),b.jsx(gt,{path:"/claim-reward",element:b.jsx(cEe,{})}),b.jsx(gt,{path:"/referral-reward",element:b.jsx(fEe,{})}),b.jsxs(gt,{element:b.jsx(hee,{}),children:[b.jsx(gt,{path:"/",element:b.jsx(Xj,{})}),b.jsx(gt,{path:"/dashboard",element:b.jsx(Xj,{})}),b.jsx(gt,{path:"/subscriptions",element:b.jsx(H0e,{})}),b.jsx(gt,{path:"/contents",element:b.jsx(b0e,{})}),b.jsx(gt,{path:"/contents/new",element:b.jsx(Zj,{})}),b.jsx(gt,{path:"/contents/details/:id",element:b.jsx(w0e,{})}),b.jsx(gt,{path:"/contents/edit/:id",element:b.jsx(Zj,{})}),b.jsx(gt,{path:"/suggestions",element:b.jsx(eye,{})}),b.jsx(gt,{path:"/suggestions/new",element:b.jsx(nU,{})}),b.jsx(gt,{path:"/suggestions/edit/:id",element:b.jsx(nU,{})}),b.jsx(gt,{path:"/suggestions/details/:id",element:b.jsx(tye,{})}),b.jsx(gt,{path:"/livesports",element:b.jsx(cye,{})}),b.jsx(gt,{path:"/livesports/new/:type",element:b.jsx(rU,{})}),b.jsx(gt,{path:"/livesports/edit/:id",element:b.jsx(rU,{})}),b.jsx(gt,{path:"/livesports/details/:id",element:b.jsx(fye,{})}),b.jsx(gt,{path:"/sport",element:b.jsx(yye,{})}),b.jsx(gt,{path:"/sport/match/:roomNum",element:b.jsx(lEe,{})}),b.jsx(gt,{path:"/devices",element:b.jsx(k0e,{})}),b.jsx(gt,{path:"/devices/edit/:id",element:b.jsx(U0e,{})}),b.jsx(gt,{path:"/devices/details/:id",element:b.jsx(j0e,{})}),b.jsx(gt,{path:"/announces",element:b.jsx(vEe,{})})]}),b.jsx(gt,{path:"*",element:b.jsx(A0e,{})})]})})};NH.createRoot(document.getElementById("root")).render(b.jsx(w9,{store:Rm,children:b.jsx(xEe,{})}));
